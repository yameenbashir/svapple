!function(){angular.module("autoCompleteModule",["ngSanitize"]).service("autoCompleteService",function(){var t=[];this.addDirectiveCtrl=function(e){e&&t.push(e)},this.hideIfInactive=function(e){angular.forEach(t,function(t){t.hideIfInactive()})},this.defaultOptionsDoc=function(){return a}}).directive("autoComplete",t),t.$inject=["$compile","$document","$window","$timeout","autoCompleteService"];function t(t,i,a,o,s){return{restrict:"A",scope:{},transclude:!1,controllerAs:"ctrl",bindToController:{options:"&autoComplete"},require:["autoComplete","ngModel"],link:function(e,l,u,c){var d=c[0];d.textModelCtrl=c[1],s.addDirectiveCtrl(d);var h=d.options()||{};d.init(angular.extend({},r,h)),function(){var n=t('<div class="auto-complete-container" data-instance-id="{{ctrl.instanceId}}" ng-show="ctrl.containerVisible"><ul class="auto-complete-results"><li ng-repeat="item in ctrl.renderItems"ng-click="ctrl.selectItem($index, true)" class="auto-complete-item" data-index="{{$index}}" ng-class="ctrl.isSelected($index)"><div ng-bind-html="item.label"></div></li></ul></div>');d.container=n(e),angular.isDefined(d.options.containerCssClass)&&d.container.addClass(d.options.containerCssClass);angular.isDefined(d.options.dropdownParent)?d.options.dropdownParent.append(d.container):(i.find("body").append(d.container),d.container.addClass("auto-complete-absolute-container"));d.target=l,d.elementUL=angular.element(d.container[0].querySelector("ul.auto-complete-results")),d.container.css("MozUserSelect","none").bind("selectstart",function(){return!1})}();l.on("focus",function(t){e.$evalAsync(function(){d.activate()})}),l.on("keydown",function(t){e.$evalAsync(function(){!function(t){var e=t.charCode||t.keyCode||0;if(e==n.UPARROW)return d.scrollToItem(-1),t.stopPropagation(),void t.preventDefault();if(e==n.DOWNARROW)return d.scrollToItem(1),t.stopPropagation(),void t.preventDefault();if(e==n.ENTER)return d.confirm(),t.preventDefault(),void t.stopPropagation();if(e==n.ESCAPE)return d.hide(),t.preventDefault(),void t.stopPropagation();var i=l.val();if(i.length<d.options.minimumChars||i===d.selectedText())return d.hide(),void d.empty();var r=o(function(){i==l.val()&&d.fetch(i),o.cancel(r)},300)}(t)})}),i.on("keydown",function(t){e.$evalAsync(function(){s.hideIfInactive()})}),angular.element(a).on("resize",function(t){e.$evalAsync(function(){d.hide()})}),i.on("click",function(t){e.$evalAsync(function(){!function(t){s.hideIfInactive();var e=!1;try{if(d.instanceId!==d.activeInstanceId())return;var n=d.container[0].getBoundingClientRect();(t.pageX<n.left-30||t.pageX>n.left+n.width+30||t.pageY<n.top-30||t.pageY>n.top+n.height+30)&&(e=!0,n=d.target[0].getBoundingClientRect(),t.pageX>=n.left&&t.pageX<=n.left+n.width&&t.pageY>=n.top&&t.pageY<=n.top+n.height&&(e=!1),e&&d.hide())}catch(t){}}(t)})}),e.$on("$destroy",function(){d.empty(),d.container.remove()})},controller:e}}e.$inject=["$q","$window","$document","$sce","$timeout","$interpolate","$templateRequest","$exceptionHandler","autoCompleteService"];function e(t,e,n,r,a,o,s,l,u){var c,d,h=0,f=this;this.target=null,this.selectedIndex=-1,this.renderItems=[],this.containerVisible=!1,this.activeInstanceId=function(){return h},this.hideIfInactive=function(){angular.isDefined(f.options.dropdownParent)||f.instanceId!==h&&f.hide()},this.init=function(t){this.options=t,this.instanceId=++i},this.activate=function(){h=f.instanceId},this.fetch=function(e){p(f.options.loading),t.when(f.options.data(e),function(t){var n=f.textModelCtrl.$viewValue;e==n&&(f.renderList(t,e),p(f.options.loadingComplete))},function(t){f.hide(),p(f.options.loadingComplete,{error:t})})},this.renderList=function(t){f.empty(),angular.isDefined(t)&&0!==t.length?function(){if(angular.isFunction(f.options.renderItem)&&f.options.renderItem!==angular.noop)return y(f.options.renderItem);if(f.options.itemTemplateUrl)return s(f.options.itemTemplateUrl).then(function(t){return v.bind(null,o(t,!1))}).catch(l).catch(angular.noop);var t=f.options.itemTemplate||"<span>{{item}}</span>";return y(v.bind(null,o(t,!1)))}().then(function(e){!function(t,e){var n=e.length<f.options.maxItemsToRender?e.length:f.options.maxItemsToRender,i=e.slice(0,n);angular.forEach(i,function(e,n){var i=t(e);null!==i&&angular.isDefined(i)&&i.label&&i.value&&(i.data=e,f.renderItems.push(i))}),f.show()}(e,t)}):f.hide()},this.show=function(){g(),f.containerVisible=!0,a(function(){g()},1),p(f.options.dropdownShown)},this.hide=function(){!1!==f.containerVisible&&(f.elementUL[0].scrollTop=0,f.containerVisible=!1,p(f.options.dropdownHidden))},this.empty=function(){f.selectedIndex=-1,f.renderItems=[]},this.scrollToItem=function(t){if(!1!==f.containerVisible){var e=f.selectedIndex+t;if(f.renderItems[e])if(f.selectItem(e),window.jQuery){var n=f.elementUL.find('li[data-index="'+e+'"]');jQuery.scrollTo&&f.elementUL.scrollTo(n)}else{(n=f.elementUL[0].querySelector('li[data-index="'+e+'"]'))&&(f.elementUL[0].scrollTop=n.offsetTop)}}},this.selectItem=function(t,e){var n=f.renderItems[t];angular.isDefined(n)&&(f.selectedIndex=t,!0===e?f.confirm():m())},this.confirm=function(){!1!==f.containerVisible&&(f.hide(),d=m(),p(f.options.itemSelected,{item:d}))},this.isSelected=function(t){return t==f.selectedIndex?f.options.selectedCssClass:""},this.selectedText=function(){return c};function p(t,e){if(angular.isFunction(t))try{return t.call(f.target,e)}catch(t){}}function g(){if(!angular.isDefined(f.options.dropdownParent)){var t=f.target[0].getBoundingClientRect();if("auto"==f.options.dropdownWidth?f.container.css({width:t.width+"px"}):f.container.css({width:f.options.dropdownWidth}),"auto"!==f.options.dropdownHeight&&f.elementUL.css({height:f.options.dropdownHeight}),window.jQuery&&window.jQuery.ui)f.container.position({my:"left top",at:"left bottom",of:f.target,collision:"none flip"});else{var i=n[0].body.scrollTop||n[0].documentElement.scrollTop||e.pageYOffset,r=n[0].body.scrollLeft||n[0].documentElement.scrollLeft||e.pageXOffset;f.container.css({left:t.left+r+"px"}),f.container.css({top:t.top+t.height+i+"px"})}}}function m(){if(-1!==f.selectedIndex){var t=f.renderItems[f.selectedIndex];return function(t){if(t===f.textModelCtrl.$modelValue)return;f.textModelCtrl.$setViewValue(t),f.textModelCtrl.$render(),c=t}(angular.isString(t.data)?t.data:t.value),t.data}}function v(t,e){return{value:angular.isObject(e)&&f.options.selectedTextAttr?e[f.options.selectedTextAttr]:e,label:r.trustAsHtml(t({item:e}))}}function y(e){var n=t.defer();return n.resolve(e),n.promise}}var n={ENTER:13,ESCAPE:27,UPARROW:38,DOWNARROW:40},i=0,r={containerCssClass:"",selectedCssClass:"auto-complete-item-selected",minimumChars:1,maxItemsToRender:20,dropdownWidth:"auto",dropdownHeight:"auto",dropdownParent:void 0,selectedTextAttr:void 0,itemTemplate:void 0,itemTemplateUrl:void 0,loading:angular.noop,data:angular.noop,loadingComplete:angular.noop,renderItem:angular.noop,itemSelected:angular.noop,dropdownShown:angular.noop,dropdownHidden:angular.noop},a={containerCssClass:{def:"undefined",doc:"CSS class applied to the dropdown container"},selectedCssClass:{def:"auto-complete-item-selected",doc:"CSS class applied to the selected list element"},minimumChars:{def:"1",doc:"Minimum number of characters required to display the dropdown."},maxItemsToRender:{def:"20",doc:"Maximum number of items to render in the list."},dropdownWidth:{def:"auto",doc:'Width in "px" of the dropddown list.'},dropdownHeight:{def:"auto",doc:'Height in "px" of the dropddown list.'},dropdownParent:{def:"undefined",doc:"a jQuery object to append the dropddown list."},selectedTextAttr:{def:"undefined",doc:"If the data for the dropdown is a collection of objects, the value of this attribute will be used to update the input text element."},itemTemplate:{def:"undefined",doc:'A template for the dropddown list item. For example "<div>{{item.lastName}} - {{item.jobTitle}}</div>".'},itemTemplateUrl:{def:"undefined",doc:"This is similar to template but the template is loaded from the specified URL, asynchronously."},loading:{def:"noop",doc:"Callback before getting the data for the dropdown."},data:{def:"noop",doc:"Callback for data for the dropdown. Must return a promise"},loadingComplete:{def:"noop",doc:"Callback after the items are rendered in the dropdown."},renderItem:{def:"noop",doc:'Callback for custom rendering a list item. This is called for each item in the dropdown. It must return an object literal with "value" and "label" properties, where label is the safe html for display and value is the text for the textbox'},itemSelected:{def:"noop",doc:"Callback after an item is selected from the dropdown."},dropdownShown:{def:"noop",doc:"Callback after the dropdown is hidden."},dropdownHidden:{def:"noop",doc:"Callback after the dropdown is shown."}}}(),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("angular-barcode",[],e):"object"==typeof exports?exports["angular-barcode"]=e():t["angular-barcode"]=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(43),a=(i=r,i&&i.__esModule?i:{default:i});e.default=angular.module("angular-barcode",[]).directive("angularBarcode",a.default),t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.data=e,this.text=n.text||e,this.options=n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.startBin="101",this.endBin="101",this.middleBin="01010",this.Lbinary=["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],this.Gbinary=["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],this.Rbinary=["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"]}return t.prototype.encode=function(t,e,n){var i="";n=n||"";for(var r=0;r<t.length;r++)"L"==e[r]?i+=this.Lbinary[t[r]]:"G"==e[r]?i+=this.Gbinary[t[r]]:"R"==e[r]&&(i+=this.Rbinary[t[r]]),r<t.length-1&&(i+=n);return i},t}();e.default=n},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e;n++)t="0"+t;return t}Object.defineProperty(e,"__esModule",{value:!0});var r,a=n(1),o=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.encode=function(){for(var t="110",e=0;e<this.data.length;e++){var n=parseInt(this.data[e]).toString(2);n=i(n,4-n.length);for(var r=0;r<n.length;r++)t+="0"==n[r]?"100":"110"}return{data:t+="1001",text:this.text}},e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]+$/)},e}((r=a,r&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(1),l=function(t){function e(n,a){i(this,e);var o=r(this,t.call(this,n.substring(1),a));o.bytes=[];for(var s=0;s<n.length;++s)o.bytes.push(n.charCodeAt(s));return o.encodings=[740,644,638,176,164,100,224,220,124,608,604,572,436,244,230,484,260,254,650,628,614,764,652,902,868,836,830,892,844,842,752,734,590,304,112,94,416,128,122,672,576,570,464,422,134,496,478,142,910,678,582,768,762,774,880,862,814,896,890,818,914,602,930,328,292,200,158,68,62,424,412,232,218,76,74,554,616,978,556,146,340,212,182,508,268,266,956,940,938,758,782,974,400,310,118,512,506,960,954,502,518,886,966,668,680,692,5379],o}return a(e,t),e.prototype.encode=function(){var t,e=this.bytes,n=e.shift()-105;if(103===n)t=this.nextA(e,1);else if(104===n)t=this.nextB(e,1);else{if(105!==n)throw new u;t=this.nextC(e,1)}return{text:this.text==this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:this.getEncoding(n)+t.result+this.getEncoding((t.checksum+n)%103)+this.getEncoding(106)}},e.prototype.getEncoding=function(t){return this.encodings[t]?(this.encodings[t]+1e3).toString(2):""},e.prototype.valid=function(){return-1!==this.data.search(/^[\x00-\x7F\xC8-\xD3]+$/)},e.prototype.nextA=function(t,e){if(t.length<=0)return{result:"",checksum:0};var n,i;if(t[0]>=200)i=t[0]-105,t.shift(),99===i?n=this.nextC(t,e+1):100===i?n=this.nextB(t,e+1):98===i?(t[0]=t[0]>95?t[0]-96:t[0],n=this.nextA(t,e+1)):n=this.nextA(t,e+1);else{var r=t[0];i=r<32?r+64:r-32,t.shift(),n=this.nextA(t,e+1)}var a=i*e;return{result:this.getEncoding(i)+n.result,checksum:a+n.checksum}},e.prototype.nextB=function(t,e){if(t.length<=0)return{result:"",checksum:0};var n,i;t[0]>=200?(i=t[0]-105,t.shift(),99===i?n=this.nextC(t,e+1):101===i?n=this.nextA(t,e+1):98===i?(t[0]=t[0]<32?t[0]+96:t[0],n=this.nextB(t,e+1)):n=this.nextB(t,e+1)):(i=t[0]-32,t.shift(),n=this.nextB(t,e+1));var r=i*e;return{result:this.getEncoding(i)+n.result,checksum:r+n.checksum}},e.prototype.nextC=function(t,e){if(t.length<=0)return{result:"",checksum:0};var n,i;t[0]>=200?(i=t[0]-105,t.shift(),n=100===i?this.nextB(t,e+1):101===i?this.nextA(t,e+1):this.nextC(t,e+1)):(i=10*(t[0]-48)+t[1]-48,t.shift(),t.shift(),n=this.nextC(t,e+1));var r=i*e;return{result:this.getEncoding(i)+n.result,checksum:r+n.checksum}},e}((o=s,o&&o.__esModule?o:{default:o}).default),u=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n.name="InvalidStartCharacterException",n.message="The encoding does not start with a start character.",n}return a(e,t),e}(Error);e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mod10=function(t){for(var e=0,n=0;n<t.length;n++){var i=parseInt(t[n]);e+=(n+t.length)%2==0?i:2*i%10+Math.floor(2*i/10)}return(10-e%10)%10},e.mod11=function(t){for(var e=0,n=[2,3,4,5,6,7],i=0;i<t.length;i++){var r=parseInt(t[t.length-1-i]);e+=n[i%n.length]*r}return(11-e%11)%11}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(i[n]=e[n]);return i}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(r,a){n(this,e);var o=i(this,t.call(this));return o.name="InvalidInputException",o.symbology=r,o.input=a,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return r(e,t),e}(Error),o=function(t){function e(){n(this,e);var r=i(this,t.call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return r(e,t),e}(Error),s=function(t){function e(){n(this,e);var r=i(this,t.call(this));return r.name="NoElementException",r.message="No element to render on.",r}return r(e,t),e}(Error);e.InvalidInputException=a,e.InvalidElementException=o,e.NoElementException=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],"string"==typeof t[n]&&(t[n]=parseInt(t[n],10)));return"string"==typeof t.displayValue&&(t.displayValue="false"!=t.displayValue),t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},function(t,e,n){"use strict";function i(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function r(t,e,n){if(n.displayValue&&e<t){if("center"==n.textAlign)return Math.floor((t-e)/2);if("left"==n.textAlign)return 0;if("right"==n.textAlign)return Math.floor(t-e)}return 0}function a(t,e,n){var i;(i=void 0===n?document.createElement("canvas").getContext("2d"):n).font=e.fontOptions+" "+e.fontSize+"px "+e.font;return i.measureText(t).width}Object.defineProperty(e,"__esModule",{value:!0}),e.getTotalWidthOfEncodings=e.calculateEncodingAttributes=e.getBarcodePadding=e.getEncodingHeight=e.getMaximumHeightOfEncodings=void 0;var o,s=n(6),l=(o=s,o&&o.__esModule?o:{default:o});e.getMaximumHeightOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e},e.getEncodingHeight=i,e.getBarcodePadding=r,e.calculateEncodingAttributes=function(t,e,n){for(var o=0;o<t.length;o++){var s,u=t[o],c=(0,l.default)(e,u.options);s=c.displayValue?a(u.text,c,n):0;var d=u.data.length*c.width;u.width=Math.ceil(Math.max(s,d)),u.height=i(u,c),u.barcodePadding=r(s,d,c)}},e.getTotalWidthOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=new e(t=""+t,n);if(!i.valid())throw new p.InvalidInputException(i.constructor.name,t);var r=i.encode();r=(0,u.default)(r);for(var a=0;a<r.length;a++)r[a].options=(0,l.default)(n,r[a].options);return r}function a(){return s.default.CODE128?"CODE128":Object.keys(s.default)[0]}function o(t,e,n){e=(0,u.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,l.default)(n,e[i].options),(0,c.default)(e[i].options);(0,c.default)(n);new(0,t.renderer)(t.element,e,n).render(),t.afterRender&&t.afterRender()}var s=i(n(33)),l=i(n(6)),u=i(n(39)),c=i(n(36)),d=i(n(38)),h=i(n(8)),f=i(n(35)),p=n(7),g=i(n(9)),m=function(){},v=function(t,e,n){var i=new m;if(void 0===t)throw Error("No element to render on was provided.");return i._renderProperties=(0,d.default)(t),i._encodings=[],i._options=g.default,i._errorHandler=new f.default(i),void 0!==e&&(n=n||{},n.format||(n.format=a()),i.options(n)[n.format](e,n).render()),i};v.getModule=function(t){return s.default[t]};for(var y in s.default)s.default.hasOwnProperty(y)&&(b=s.default,x=y,m.prototype[x]=m.prototype[x.toUpperCase()]=m.prototype[x.toLowerCase()]=function(t,e){var n=this;return n._errorHandler.wrapBarcodeCall(function(){var i=(0,l.default)(n._options,e);i=(0,h.default)(i);var a=b[x],o=r(t,a,i);return n._encodings.push(o),n})});var b,x;m.prototype.options=function(t){return this._options=(0,l.default)(this._options,t),this},m.prototype.blank=function(t){var e="0".repeat(t);return this._encodings.push({data:e}),this},m.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,l.default)(this._options,t.options);"auto"==n.format&&(n.format=a()),this._errorHandler.wrapBarcodeCall(function(){var e=r(n.value,s.default[n.format.toUpperCase()],n);o(t,e,n)})}}},m.prototype.render=function(){if(!this._renderProperties)throw new p.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)o(this._renderProperties[t],this._encodings,this._options);else o(this._renderProperties,this._encodings,this._options);return this},m.prototype._defaults=g.default,"undefined"!=typeof window&&(window.JsBarcode=v),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),v(n,t,e)}),t.exports=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4),a=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,String.fromCharCode(208)+n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[\x00-\x5F\xC8-\xCF]+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4),a=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,String.fromCharCode(209)+n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[\x20-\x7F\xC8-\xCF]+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4),a=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,String.fromCharCode(210)+n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^(\xCF*[0-9]{2}\xCF*)+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t){var e=t.match(/^([\x00-\x5F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);if(e)return e[1]+String.fromCharCode(204)+o(t.substring(e[1].length));var n=t.match(/^[\x00-\x5F\xC8-\xCF]+/);return n[0].length===t.length?t:n[0]+String.fromCharCode(205)+a(t.substring(n[0].length))}function a(t){var e=t.match(/^([\x20-\x7F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);if(e)return e[1]+String.fromCharCode(204)+o(t.substring(e[1].length));var n=t.match(/^[\x20-\x7F\xC8-\xCF]+/);return n[0].length===t.length?t:n[0]+String.fromCharCode(206)+r(t.substring(n[0].length))}function o(t){var e=t.match(/^(\xCF*[0-9]{2}\xCF*)+/)[0],n=e.length;if(n===t.length)return t;return(t=t.substring(n)).match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length>=t.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length?e+String.fromCharCode(206)+r(t):e+String.fromCharCode(205)+a(t)}Object.defineProperty(e,"__esModule",{value:!0});var s,l=n(4),u=function(t){function e(n,s){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==n.search(/^[\x00-\x7F\xC8-\xD3]+$/))var l=i(this,t.call(this,function(t){var e=t.match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length,n=t.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length;return(t.match(/^(\xCF*[0-9]{2}\xCF*)*/)[0].length>=2?String.fromCharCode(210)+o(t):e>n?String.fromCharCode(208)+r(t):String.fromCharCode(209)+a(t)).replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(t,e){return String.fromCharCode(203)+e})}(n),s));else l=i(this,t.call(this,n,s));return i(l)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}((s=l,s&&s.__esModule?s:{default:s}).default);e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.CODE128C=e.CODE128B=e.CODE128A=e.CODE128=void 0;var r=i(n(15)),a=i(n(12)),o=i(n(13)),s=i(n(14));e.CODE128=r.default,e.CODE128A=a.default,e.CODE128B=o.default,e.CODE128C=s.default},function(t,e,n){"use strict";function i(t){return e=r(t),u[e].toString(2);var e}function r(t){return l.indexOf(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.CODE39=void 0;var a,o=n(1),s=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=n.toUpperCase(),i.mod43&&(n+=(a=function(t){for(var e=0,n=0;n<t.length;n++)e+=r(t[n]);return e%43}(n),l[a])),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));var a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.encode=function(){for(var t=i("*"),e=0;e<this.data.length;e++)t+=i(this.data[e])+"0";return{data:t+=i("*"),text:this.text}},e.prototype.valid=function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)},e}((a=o,a&&a.__esModule?a:{default:a}).default),l=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],u=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];e.CODE39=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e,n=0;for(e=0;e<12;e+=2)n+=parseInt(t[e]);for(e=1;e<12;e+=2)n+=3*parseInt(t[e]);return(10-n%10)%10}Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(2)),o=function(t){function e(n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),-1!==n.search(/^[0-9]{12}$/)&&(n+=r(n));var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return!i.flat&&i.fontSize>10*i.width?a.fontSize=10*i.width:a.fontSize=i.fontSize,a.guardHeight=i.height+a.fontSize/2+i.textMargin,a.lastChar=i.lastChar,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{13}$/)&&this.data[12]==r(this.data)},e.prototype.encode=function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()},e.prototype.getStructure=function(){return["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},e.prototype.guardedEncoding=function(){var t=new a.default,e=[],n=this.getStructure()[this.data[0]],i=this.data.substr(1,6),r=this.data.substr(7,6);return this.options.displayValue&&e.push({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:t.encode(i,n),text:this.text.substr(1,6),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:t.encode(r,"RRRRRR"),text:this.text.substr(7,6),options:{fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),this.options.lastChar&&this.options.displayValue&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}})),e},e.prototype.flatEncoding=function(){var t=new a.default,e="",n=this.getStructure()[this.data[0]];return e+="101",e+=t.encode(this.data.substr(1,6),n),e+="01010",e+=t.encode(this.data.substr(7,6),"RRRRRR"),{data:e+="101",text:this.text}},e}(i(n(1)).default);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(2)),a=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.structure=["LL","LG","GL","GG"],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{2}$/)},e.prototype.encode=function(){var t=new r.default,e=this.structure[parseInt(this.data)%4],n="1011";return{data:n+=t.encode(this.data,e,"01"),text:this.text}},e}(i(n(1)).default);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(2)),a=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.structure=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{5}$/)},e.prototype.encode=function(){var t=new r.default,e=this.checksum(),n="1011";return{data:n+=t.encode(this.data,this.structure[e],"01"),text:this.text}},e.prototype.checksum=function(){var t=0;return t+=3*parseInt(this.data[0]),t+=9*parseInt(this.data[1]),t+=3*parseInt(this.data[2]),t+=9*parseInt(this.data[3]),(t+=3*parseInt(this.data[4]))%10},e}(i(n(1)).default);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e,n=0;for(e=0;e<7;e+=2)n+=3*parseInt(t[e]);for(e=1;e<7;e+=2)n+=parseInt(t[e]);return(10-n%10)%10}Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(2)),o=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==n.search(/^[0-9]{7}$/)&&(n+=r(n)),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{8}$/)&&this.data[7]==r(this.data)},e.prototype.encode=function(){var t=new a.default,e="",n=this.data.substr(0,4),i=this.data.substr(4,4);return e+=t.startBin,e+=t.encode(n,"LLLL"),e+=t.middleBin,e+=t.encode(i,"RRRR"),{data:e+=t.endBin,text:this.text}},e}(i(n(1)).default);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e,n=0;for(e=1;e<11;e+=2)n+=parseInt(t[e]);for(e=0;e<11;e+=2)n+=3*parseInt(t[e]);return(10-n%10)%10}Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(2)),o=function(t){function e(n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),-1!==n.search(/^[0-9]{11}$/)&&(n+=r(n));var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return a.displayValue=i.displayValue,i.fontSize>10*i.width?a.fontSize=10*i.width:a.fontSize=i.fontSize,a.guardHeight=i.height+a.fontSize/2+i.textMargin,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==r(this.data)},e.prototype.encode=function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()},e.prototype.flatEncoding=function(){var t=new a.default,e="";return e+="101",e+=t.encode(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=t.encode(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}},e.prototype.guardedEncoding=function(){var t=new a.default,e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+t.encode(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:t.encode(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:t.encode(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:t.encode(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e},e}(i(n(1)).default);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.UPC=e.EAN2=e.EAN5=e.EAN8=e.EAN13=void 0;var r=i(n(18)),a=i(n(21)),o=i(n(20)),s=i(n(19)),l=i(n(22));e.EAN13=r.default,e.EAN8=a.default,e.EAN5=o.default,e.EAN2=s.default,e.UPC=l.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericBarcode=void 0;var i,r=n(1),a=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.encode=function(){return{data:"10101010101010101010101010101010101010101",text:this.text}},e.prototype.valid=function(){return!0},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.GenericBarcode=a},function(t,e,n){"use strict";function i(t){for(var e=0,n=0;n<13;n++)e+=parseInt(t[n])*(3-n%2*2);return 10*Math.ceil(e/10)-e}Object.defineProperty(e,"__esModule",{value:!0}),e.ITF14=void 0;var r,a=n(1),o=function(t){function e(n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),-1!==n.search(/^[0-9]{13}$/)&&(n+=i(n));var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r));return a.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{14}$/)&&this.data[13]==i(this.data)},e.prototype.encode=function(){for(var t="1010",e=0;e<14;e+=2)t+=this.calculatePair(this.data.substr(e,2));return{data:t+="11101",text:this.text}},e.prototype.calculatePair=function(t){for(var e="",n=this.binaryRepresentation[t[0]],i=this.binaryRepresentation[t[1]],r=0;r<5;r++)e+="1"==n[r]?"111":"1",e+="1"==i[r]?"000":"0";return e},e}((r=a,r&&r.__esModule?r:{default:r}).default);e.ITF14=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITF=void 0;var i,r=n(1),a=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^([0-9]{2})+$/)},e.prototype.encode=function(){for(var t="1010",e=0;e<this.data.length;e+=2)t+=this.calculatePair(this.data.substr(e,2));return{data:t+="11101",text:this.text}},e.prototype.calculatePair=function(t){for(var e="",n=this.binaryRepresentation[t[0]],i=this.binaryRepresentation[t[1]],r=0;r<5;r++)e+="1"==n[r]?"111":"1",e+="1"==i[r]?"000":"0";return e},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.ITF=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(3),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5),s=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n+(0,o.mod10)(n),i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(a.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(3),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5),s=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n+=(0,o.mod10)(n),n+=(0,o.mod10)(n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(a.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(3),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5),s=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n+(0,o.mod11)(n),i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(a.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(3),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5),s=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n+=(0,o.mod11)(n),n+=(0,o.mod10)(n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(a.default);e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.MSI1110=e.MSI1010=e.MSI11=e.MSI10=e.MSI=void 0;var r=i(n(3)),a=i(n(27)),o=i(n(29)),s=i(n(28)),l=i(n(30));e.MSI=r.default,e.MSI10=a.default,e.MSI11=o.default,e.MSI1010=s.default,e.MSI1110=l.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.codabar=void 0;var i,r=n(1),a=function(t){function e(n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),0===n.search(/^[0-9\-\$\:\.\+\/]+$/)&&(n="A"+n+"A");var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n.toUpperCase(),i));return r.text=r.options.text||r.text.replace(/[A-D]/g,""),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.valid=function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)},e.prototype.encode=function(){for(var t=[],e=this.getEncodings(),n=0;n<this.data.length;n++)t.push(e[this.data.charAt(n)]),n!==this.data.length-1&&t.push("0");return{text:this.text,data:t.join("")}},e.prototype.getEncodings=function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"101100110011",A:"1011001001",B:"1010010011",C:"1001001011",D:"1010011001"}},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.codabar=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),r=n(16),a=n(23),o=n(25),s=n(26),l=n(31),u=n(34),c=n(32),d=n(24);e.default={CODE39:i.CODE39,CODE128:r.CODE128,CODE128A:r.CODE128A,CODE128B:r.CODE128B,CODE128C:r.CODE128C,EAN13:a.EAN13,EAN8:a.EAN8,EAN5:a.EAN5,EAN2:a.EAN2,UPC:a.UPC,ITF14:o.ITF14,ITF:s.ITF,MSI:l.MSI,MSI10:l.MSI10,MSI11:l.MSI11,MSI1010:l.MSI1010,MSI1110:l.MSI1110,pharmacode:u.pharmacode,codabar:c.codabar,GenericBarcode:d.GenericBarcode}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pharmacode=void 0;var i,r=n(1),a=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.number=parseInt(n,10),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.encode=function(){for(var t=this.number,e="";!isNaN(t)&&0!=t;)t%2==0?(e="11100"+e,t=(t-2)/2):(e="100"+e,t=(t-1)/2);return{data:e=e.slice(0,-2),text:this.text}},e.prototype.valid=function(){return this.number>=3&&this.number<=131070},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.pharmacode=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.api=e}return t.prototype.handleCatch=function(t){if("InvalidInputException"!==t.name)throw t;if(this.api._options.valid===this.api._defaults.valid)throw t.message;this.api._options.valid(!1),this.api.render=function(){}},t.prototype.wrapBarcodeCall=function(t){try{var e=t.apply(void 0,arguments);return this.api._options.valid(!0),e}catch(t){return this.handleCatch(t),this.api}},t}();e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(8)),a=i(n(9));e.default=function(t){var e={};for(var n in a.default)a.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),(0,r.default)(e)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if("string"==typeof t)return function(t){var e=document.querySelectorAll(t);if(0!==e.length){for(var n=[],i=0;i<e.length;i++)n.push(r(e[i]));return n}}(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(r(t[n]));return e}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return function(t){var e=document.createElement("canvas");return{element:e,options:(0,a.default)(t),renderer:o.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}(t);if("undefined"!=typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,a.default)(t),renderer:o.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,a.default)(t),renderer:o.default.CanvasRenderer};if(t.getContext)return{element:t,renderer:o.default.CanvasRenderer};throw new s.InvalidElementException}Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(37)),o=i(n(41)),s=n(7);e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(t){if(Array.isArray(t))for(var i=0;i<t.length;i++)e(t[i]);else t.text=t.text||"",t.data=t.data||"",n.push(t)}var n=[];return e(t),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(6),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(10),s=function(){function t(e,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.canvas=e,this.encodings=n,this.options=i}return t.prototype.render=function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var t=0;t<this.encodings.length;t++){var e=(0,a.default)(this.options,this.encodings[t].options);this.drawCanvasBarcode(e,this.encodings[t]),this.drawCanvasText(e,this.encodings[t]),this.moveCanvasDrawing(this.encodings[t])}this.restoreCanvas()},t.prototype.prepareCanvas=function(){var t=this.canvas.getContext("2d");t.save(),(0,o.calculateEncodingAttributes)(this.encodings,this.options,t);var e=(0,o.getTotalWidthOfEncodings)(this.encodings),n=(0,o.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=e+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,t.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(t.fillStyle=this.options.background,t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.translate(this.options.marginLeft,0)},t.prototype.drawCanvasBarcode=function(t,e){var n,i=this.canvas.getContext("2d"),r=e.data;n="top"==t.textPosition?t.marginTop+t.fontSize+t.textMargin:t.marginTop,i.fillStyle=t.lineColor;for(var a=0;a<r.length;a++){var o=a*t.width+e.barcodePadding;"1"===r[a]?i.fillRect(o,n,t.width,t.height):r[a]&&i.fillRect(o,n,t.width,t.height*r[a])}},t.prototype.drawCanvasText=function(t,e){var n=this.canvas.getContext("2d"),i=t.fontOptions+" "+t.fontSize+"px "+t.font;if(t.displayValue){var r,a;a="top"==t.textPosition?t.marginTop+t.fontSize-t.textMargin:t.height+t.textMargin+t.marginTop+t.fontSize,n.font=i,"left"==t.textAlign||e.barcodePadding>0?(r=0,n.textAlign="left"):"right"==t.textAlign?(r=e.width-1,n.textAlign="right"):(r=e.width/2,n.textAlign="center"),n.fillText(e.text,r,a)}},t.prototype.moveCanvasDrawing=function(t){this.canvas.getContext("2d").translate(t.width,0)},t.prototype.restoreCanvas=function(){this.canvas.getContext("2d").restore()},t}();e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(40)),a=i(n(42));e.default={CanvasRenderer:r.default,SVGRenderer:a.default}},function(t,e,n){"use strict";function i(t,e,n){var i=document.createElementNS(u,"g");return i.setAttribute("transform","translate("+t+", "+e+")"),n.appendChild(i),i}function r(t,e,n,i,r){var a=document.createElementNS(u,"rect");return a.setAttribute("x",t),a.setAttribute("y",e),a.setAttribute("width",n),a.setAttribute("height",i),r.appendChild(a),a}Object.defineProperty(e,"__esModule",{value:!0});var a,o=n(6),s=(a=o,a&&a.__esModule?a:{default:a}),l=n(10),u="http://www.w3.org/2000/svg",c=function(){function t(e,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.svg=e,this.encodings=n,this.options=i}return t.prototype.render=function(){var t=this.options.marginLeft;this.prepareSVG();for(var e=0;e<this.encodings.length;e++){var n=this.encodings[e],r=(0,s.default)(this.options,n.options),a=i(t,r.marginTop,this.svg);o=r,a.setAttribute("style","fill:"+o.lineColor+";"),this.drawSvgBarcode(a,r,n),this.drawSVGText(a,r,n),t+=n.width}var o},t.prototype.prepareSVG=function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,l.calculateEncodingAttributes)(this.encodings,this.options);var t=(0,l.getTotalWidthOfEncodings)(this.encodings),e=(0,l.getMaximumHeightOfEncodings)(this.encodings),n=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,e),this.options.background&&r(0,0,n,e,this.svg).setAttribute("style","fill:"+this.options.background+";")},t.prototype.drawSvgBarcode=function(t,e,n){var i,a=n.data;i="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var o=0,s=0,l=0;l<a.length;l++)s=l*e.width+n.barcodePadding,"1"===a[l]?o++:o>0&&(r(s-e.width*o,i,e.width*o,e.height,t),o=0);o>0&&r(s-e.width*(o-1),i,e.width*o,e.height,t)},t.prototype.drawSVGText=function(t,e,n){var i=document.createElementNS(u,"text");if(e.displayValue){var r,a;i.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),a="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||n.barcodePadding>0?(r=0,i.setAttribute("text-anchor","start")):"right"==e.textAlign?(r=n.width-1,i.setAttribute("text-anchor","end")):(r=n.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",r),i.setAttribute("y",a),i.appendChild(document.createTextNode(n.text)),t.appendChild(i)}},t.prototype.setSvgAttributes=function(t,e){var n=this.svg;n.setAttribute("width",t+"px"),n.setAttribute("height",e+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+t+" "+e),n.setAttribute("xmlns",u),n.setAttribute("version","1.1"),n.style.transform="translate(0,0)"},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(11),a=(i=r,i&&i.__esModule?i:{default:i});e.default=function(){"ngInject";return{replace:!0,restrict:"E",require:"ngModel",scope:{bcType:"@",bcClass:"@?",bcOptions:"="},template:"",link:function(t,e,n,i){var r={format:"CODE128",lineColor:"#000000",width:2,height:100,displayValue:!1,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",margin:10,marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,valid:function(){return!0}},o=function(n){var r=angular.element(function(){var e=t.bcClass||"barcode",n="";switch(t.bcType){case"svg":n='<svg class="'+e+'"></svg>';break;case"img":n='<img class="'+e+'">';break;case"canvas":n='<canvas class="'+e+'"></canvas>';break;default:n='<img class="'+e+'">'}return n}()),o=i.$viewValue||"",s=(0,a.default)(r[0],o,n);return angular.forEach(e.children(),function(t){return t.remove()}),e.append(r),s};o((s=t.hasOwnProperty("bcOptions")&&void 0!==t.bcOptions?t.bcOptions:r,Object.keys(r).forEach(function(t){s.hasOwnProperty(t)?s[t]=s[t]||r[t]:s[t]=r[t]}),s)),t.$watch("bcOptions",function(t){o(t)},!0),i.$render=function(){o(t.bcOptions)};var s}}},t.exports=e.default}])}),function(t,e){"use strict";var n=t&&t.angular||window&&window.angular;if("function"==typeof define&&define.amd)define(["localforage"],function(t){return e(n,t)});else{if("object"!=typeof exports&&"object"!=typeof global)return e(n,t.localforage);"undefined"==typeof module?global.module.exports=e(n,require("localforage")):module.exports=e(n,require("localforage"))}}(this,function(t,e,n){"use strict";var i=t.module("LocalForageModule",["ng"]);return i.provider("$localForage",function(){var n={},i={name:"lf"},r={setItem:!1,removeItem:!1},a={};this.setNotify=function(t,e){r={setItem:t,removeItem:e}},this.config=function(e){if(!t.isObject(e))throw new Error("The config parameter should be an object");t.extend(i,e)},this.$get=["$rootScope","$q","$parse",function(o,s,l){var u=function(n){t.isDefined(n)?this._localforage=e.createInstance(n):(this._localforage=e,e.config(i))};u.prototype.createInstance=function(e){if(t.isObject(e)){if(e=t.extend({},i,e),t.isDefined(n[e.name]))throw new Error("A localForage instance with the name "+e.name+" is already defined.");return n[e.name]=new u(e),n[e.name]}throw new Error("The parameter should be a config object.")},u.prototype.instance=function(e){if(t.isUndefined(e))return n[i.name];if(t.isString(e)){if(t.isDefined(n[e]))return n[e];throw new Error("No localForage instance of that name exists.")}throw new Error("The parameter should be a string.")},u.prototype.setDriver=function(t){return this._localforage.setDriver(t)},u.prototype.driver=function(){return this._localforage.driver()},u.prototype.defineDriver=function(t){return this._localforage.defineDriver(t)},u.prototype.setItem=function(e,n){if(t.isUndefined(e))throw new Error("You must define a key to set");var i=this;if(t.isArray(e)){if(!t.isArray(n))throw new Error("If you set an array of keys, the values should be an array too");var a=[];return t.forEach(e,function(t,e){a.push(i.setItem(t,n[e]))}),s.all(a)}var l=s.defer(),u=arguments,c="undefined"!=typeof Blob&&"undefined"!=typeof ArrayBuffer&&(n instanceof Blob||n instanceof ArrayBuffer)?n:t.copy(n);return t.isObject(c)&&t.isDefined(c.$promise)&&delete c.$promise,i._localforage.setItem(i.prefix()+e,c).then(function(){r.setItem&&o.$broadcast("LocalForageModule.setItem",{key:e,newvalue:c,driver:i.driver()}),l.resolve(c)},function(t){i.onError(t,u,i.setItem,l)}),l.promise},u.prototype.getItem=function(e,n){if(t.isUndefined(e))throw new Error("You must define a key to get");var i,r=s.defer(),a=arguments,o=this;if(t.isArray(e)){var l=[],u=0;i=o._localforage.iterate(function(t,n){var i=e.indexOf(o.prefix()+n);return i>-1&&(l[i]=t,u++),u===e.length?l:void 0}).then(function(){for(var i=!0,a=0;a<e.length;a++)t.isUndefined(l[a])&&(l[a]=null,i=!1);i||!n?r.resolve(l):r.reject(l)})}else i=o._localforage.getItem(o.prefix()+e).then(function(t){n&&null===t?r.reject(t):r.resolve(t)});return i.then(null,function(t){o.onError(t,a,o.getItem,r)}),r.promise},u.prototype.iterate=function(e){if(t.isUndefined(e))throw new Error("You must define a callback to iterate");var n=s.defer(),i=arguments,r=this;return r._localforage.iterate(e).then(function(t){n.resolve(t)},function(t){r.onError(t,i,r.iterate,n)}),n.promise},u.prototype.removeItem=function(e){if(t.isUndefined(e))throw new Error("You must define a key to remove");var n=this;if(t.isArray(e)){var i=[];return t.forEach(e,function(t,e){i.push(n.removeItem(t))}),s.all(i)}var a=s.defer(),l=arguments;return n._localforage.removeItem(n.prefix()+e).then(function(){r.removeItem&&o.$broadcast("LocalForageModule.removeItem",{key:e,driver:n.driver()}),a.resolve()},function(t){n.onError(t,l,n.removeItem,a)}),a.promise},u.prototype.pull=function(e){if(t.isUndefined(e))throw new Error("You must define a key to pull");var n=this,i=s.defer(),r=function(t){i.reject(t)};return n.getItem(e).then(function(t){n.removeItem(e).then(function(){i.resolve(t)},r)},r),i.promise},u.prototype.clear=function(){var t=s.defer(),e=arguments,n=this;return n._localforage.clear().then(function(e){t.resolve()},function(i){n.onError(i,e,n.clear,t)}),t.promise},u.prototype.key=function(e){if(t.isUndefined(e))throw new Error("You must define a position to get for the key function");var n=s.defer(),i=arguments,r=this;return r._localforage.key(e).then(function(t){n.resolve(t)},function(t){r.onError(t,i,r.key,n)}),n.promise};var c=function(){var t=s.defer(),e=arguments,n=this;return n._localforage.keys().then(function(e){if(i.oldPrefix&&"localStorageWrapper"===n.driver()){for(var r=[],a=0,o=e.length;o>a;a++)r.push(e[a].substr(n.prefix().length,e[a].length));e=r}t.resolve(e)},function(i){n.onError(i,e,n.keys,t)}),t.promise};return u.prototype.keys=c,u.prototype.getKeys=c,u.prototype.length=function(){var t=s.defer(),e=arguments,n=this;return n._localforage.length().then(function(e){t.resolve(e)},function(i){n.onError(i,e,length,t)}),t.promise},u.prototype.bind=function(e,r){if(t.isString(r))r={key:r};else if(!t.isObject(r)||t.isUndefined(r.key))throw new Error("You must define a key to bind");var o={defaultValue:"",name:i.name};r=t.extend({},o,r);var s=n[r.name];if(t.isUndefined(s))throw new Error("You must use the name of an existing instance");var u=r.scopeKey||r.key,c=l(u);return s.getItem(r.key).then(function(n){return null!==n?c.assign(e,n):t.isUndefined(r.defaultValue)||(c.assign(e,r.defaultValue),s.setItem(r.key,r.defaultValue)),t.isDefined(a[r.key])&&a[r.key](),a[r.key]=e.$watch(u,function(e){t.isDefined(e)&&s.setItem(r.key,e)},!0),n})},u.prototype.unbind=function(e,r){if(t.isString(r))r={key:r};else if(!t.isObject(r)||t.isUndefined(r.key))throw new Error("You must define a key to unbind");var o={scopeKey:r.key,name:i.name};r=t.extend({},o,r);var s=n[r.name];if(t.isUndefined(s))throw new Error("You must use the name of an existing instance");return l(r.scopeKey).assign(e,null),t.isDefined(a[r.key])&&(a[r.key](),delete a[r.key]),s.removeItem(r.key)},u.prototype.prefix=function(){return"localStorageWrapper"===this.driver()&&i.oldPrefix?this._localforage.config().name+".":""},u.prototype.onError=function(e,n,i,r){if((t.isObject(e)&&e.name?"InvalidStateError"===e.name:t.isString(e)&&"InvalidStateError"===e)&&"asyncStorage"===this.driver()||t.isObject(e)&&e.code&&5===e.code){var a=this;a.setDriver("localStorageWrapper").then(function(){i.apply(a,n).then(function(t){r.resolve(t)},function(t){r.reject(t)})},function(){r.reject(e)})}else r.reject(e)},n[i.name]=new u,n[i.name]}]}),i.directive("localForage",["$localForage",function(e){return{restrict:"A",link:function(n,i,r){var a=n.$eval(r.localForage);t.isObject(a)&&t.isDefined(a.key)?e.bind(n,a):e.bind(n,r.localForage)}}}]),i.name}),angular.module("ui.multiselect",[]).factory("optionParser",["$parse",function(t){var e=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(n){var i=n.match(e);if(!i)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+n+"'.");return{itemName:i[3],source:t(i[4]),viewMapper:t(i[2]||i[1]),modelMapper:t(i[1])}}}}]).directive("multiselect",["$parse","$document","$compile","optionParser",function(t,e,n,i){return{restrict:"E",require:"ngModel",link:function(e,r,a,o){var s=a.options,l=i.parse(s),u=!!a.multiple,c=!1,d=e.$new(),h=a.change||anguler.noop;d.items=[],d.header="Select",d.multiple=u,d.disabled=!1,e.$on("$destroy",function(){d.$destroy()});var f=angular.element("<multiselect-popup></multiselect-popup>");(a.required||a.ngRequired)&&(c=!0),a.$observe("required",function(t){c=t}),d.$watch(function(){return t(a.disabled)(e)},function(t){d.disabled=t}),d.$watch(function(){return t(a.multiple)(e)},function(t){u=t||!1}),d.$watch(function(){return l.source(e)},function(t){angular.isDefined(t)&&p()}),d.$watch(function(){return o.$modelValue},function(t,e){angular.isDefined(t)&&(n=t,angular.isArray(n)?angular.forEach(n,function(t){angular.forEach(d.items,function(e){angular.equals(e.model,t)&&(e.checked=!0)})}):angular.forEach(d.items,function(t){if(angular.equals(t.model,n))return t.checked=!0,!1}),d.$eval(h));var n;!function(){if(!o.$modelValue||!o.$modelValue.length)return d.header="Select";if(u)d.header=o.$modelValue.length+" selected";else{var t={};t[l.itemName]=o.$modelValue,d.header=l.viewMapper(t)}}(),o.$setValidity("required",d.valid())},!0);function p(){d.items.length=0;for(var t=l.source(e),n=0;n<t.length;n++){var i={};i[l.itemName]=t[n],d.items.push({label:l.viewMapper(i),model:t[n],checked:!1})}}p(),r.append(n(f)(d));d.valid=function(){if(!c)return!0;var t=o.$modelValue;return angular.isArray(t)&&t.length>0||!angular.isArray(t)&&null!=t};function g(t){var e;t?(e=[],angular.forEach(d.items,function(t){t.checked&&e.push(t.model)})):angular.forEach(d.items,function(t){if(t.checked)return e=t.model,!1}),o.$setViewValue(e)}d.checkAll=function(){u&&(angular.forEach(d.items,function(t){t.checked=!0}),g(!0))},d.uncheckAll=function(){angular.forEach(d.items,function(t){t.checked=!1}),g(!0)},d.select=function(t){!1===u?((n=t).checked?d.uncheckAll():(d.uncheckAll(),n.checked=!n.checked),g(!1),d.toggleSelect()):((e=t).checked=!e.checked,g(!0));var e,n}}}}]).directive("multiselectPopup",["$document",function(t){return{restrict:"E",scope:!1,replace:!0,templateUrl:"resources/pages/muttiSelectLayout.html",link:function(e,n,i){e.isVisible=!1,e.toggleSelect=function(){n.hasClass("open")?(n.removeClass("open"),t.unbind("click",r)):(n.addClass("open"),e.focus(),t.bind("click",r))};function r(i){a(i.target,n.find(i.target.tagName))||(n.removeClass("open"),t.unbind("click",r),e.$digest())}e.focus=function(){n.find("input")[0].focus()};var a=function(t,e){for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1}}}}]),function(){"use strict";angular.module("nvd3",[]).directive("nvd3",["nvd3Utils",function(t){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?",onReady:"&?"},link:function(e,n,i){var r={extended:!1,visible:!0,disabled:!1,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!0,deepWatchDataDepth:2,debounce:10};e._config=angular.extend(r,e.config),e.api={refresh:function(){e.api.updateWithOptions(e.options)},refreshWithTimeout:function(t){setTimeout(function(){e.api.refresh()},t)},update:function(){e.chart&&e.svg?e.svg.datum(e.data).call(e.chart):e.api.refresh()},updateWithTimeout:function(t){setTimeout(function(){e.api.update()},t)},updateWithOptions:function(i){e.api.clearElement(),!1!==angular.isDefined(i)&&e._config.visible&&(e.chart=nv.models[i.chart.type](),e.chart.id=Math.random().toString(36).substr(2,15),angular.forEach(e.chart,function(t,n){"_"===n[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(n)>=0||("dispatch"===n?(void 0!==i.chart[n]&&null!==i.chart[n]||e._config.extended&&(i.chart[n]={}),o(e.chart[n],i.chart[n])):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2"].indexOf(n)>=0||"stacked"===n&&"stackedAreaChart"===i.chart.type?(void 0!==i.chart[n]&&null!==i.chart[n]||e._config.extended&&(i.chart[n]={}),a(e.chart[n],i.chart[n],i.chart.type)):("xTickFormat"!==n&&"yTickFormat"!==n||"lineWithFocusChart"!==i.chart.type)&&("tooltips"===n&&"boxPlotChart"===i.chart.type||("tooltipXContent"!==n&&"tooltipYContent"!==n||"scatterChart"!==i.chart.type)&&(void 0===i.chart[n]||null===i.chart[n]?e._config.extended&&(i.chart[n]="barColor"===n?t()():t()):e.chart[n](i.chart[n]))))}),"sunburstChart"===i.chart.type?e.api.updateWithData(angular.copy(e.data)):e.api.updateWithData(e.data),(i.title||e._config.extended)&&s("title"),(i.subtitle||e._config.extended)&&s("subtitle"),(i.caption||e._config.extended)&&s("caption"),(i.styles||e._config.extended)&&function(){var i=t.deepExtend({classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}},e.options.styles||{});e._config.extended&&(e.options.styles=i);angular.forEach(i.classes,function(t,e){t?n.addClass(e):n.removeClass(e)}),n.removeAttr("style").css(i.css)}(),nv.addGraph(function(){if(e.chart)return e.chart.resizeHandler&&e.chart.resizeHandler.clear(),e.chart.resizeHandler=nv.utils.windowResize(function(){e.chart&&e.chart.update&&e.chart.update()}),void 0!==i.chart.zoom&&["scatterChart","lineChart","candlestickBarChart","cumulativeLineChart","historicalBarChart","ohlcBarChart","stackedAreaChart"].indexOf(i.chart.type)>-1&&t.zoom(e,i),e.chart},i.chart.callback))},updateWithData:function(t){if(t){d3.select(n[0]).select("svg").remove();var i,r;e.svg=d3.select(n[0]).append("svg"),(i=e.options.chart.height)&&(isNaN(+i)||(i+="px"),e.svg.attr("height",i).style({height:i})),(r=e.options.chart.width)?(isNaN(+r)||(r+="px"),e.svg.attr("width",r).style({width:r})):e.svg.attr("width","100%").style({width:"100%"}),e.svg.datum(t).call(e.chart)}},clearElement:function(){if(n.find(".title").remove(),n.find(".subtitle").remove(),n.find(".caption").remove(),n.empty(),e.chart&&e.chart.tooltip&&e.chart.tooltip.id&&d3.select("#"+e.chart.tooltip.id()).remove(),nv.graphs&&e.chart)for(var t=nv.graphs.length-1;t>=0;t--)nv.graphs[t]&&nv.graphs[t].id===e.chart.id&&nv.graphs.splice(t,1);nv.tooltip&&nv.tooltip.cleanup&&nv.tooltip.cleanup(),e.chart&&e.chart.resizeHandler&&e.chart.resizeHandler.clear(),e.chart=null},getScope:function(){return e}};function a(t,n,i){t&&n&&angular.forEach(t,function(r,s){"_"===s[0]||("dispatch"===s?(void 0!==n[s]&&null!==n[s]||e._config.extended&&(n[s]={}),o(r,n[s])):"tooltip"===s?(void 0!==n[s]&&null!==n[s]||e._config.extended&&(n[s]={}),a(t[s],n[s],i)):"contentGenerator"===s?n[s]&&t[s](n[s]):-1===["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close"].indexOf(s)&&(void 0===n[s]||null===n[s]?e._config.extended&&(n[s]=r()):t[s](n[s])))})}function o(t,n){t&&n&&angular.forEach(t,function(i,r){void 0===n[r]||null===n[r]?e._config.extended&&(n[r]=i.on):t.on(r+"._",n[r])})}function s(i){var r=t.deepExtend(function(t){switch(t){case"title":return{enable:!1,text:"Write Your Title",className:"h4",css:{width:e.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:e.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:e.options.chart.width+"px",textAlign:"center"}}}}(i),e.options[i]||{});e._config.extended&&(e.options[i]=r);var a=angular.element("<div></div>").html(r.html||"").addClass(i).addClass(r.className).removeAttr("style").css(r.css);r.html||a.text(r.text),r.enable&&("title"===i?n.prepend(a):"subtitle"===i?angular.element(n[0].querySelector(".title")).after(a):"caption"===i&&n.append(a))}e._config.deepWatchOptions&&e.$watch("options",t.debounce(function(t){e._config.disabled||e.api.refresh()},e._config.debounce,!0),!0);function l(t,n){t!==n&&(e._config.disabled||(e._config.refreshDataOnly?e.api.update():e.api.refresh()))}e._config.deepWatchData&&(1===e._config.deepWatchDataDepth?e.$watchCollection("data",l):e.$watch("data",l,2===e._config.deepWatchDataDepth)),e.$watch("config",function(t,n){t!==n&&(e._config=angular.extend(r,t),e.api.refresh())},!0),e._config.deepWatchOptions||e._config.deepWatchData||e.api.refresh(),angular.forEach(e.events,function(t,n){e.$on(n,function(n,i){return t(n,e,i)})}),n.on("$destroy",function(){e.api.clearElement()}),e.onReady&&"function"==typeof e.onReady()&&e.onReady()(e)}}}]).factory("nvd3Utils",function(){return{debounce:function(t,e,n){var i;return function(){var r=this,a=arguments,o=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(r,a)},e),o&&t.apply(r,a)}},deepExtend:function(t){var e=this;return angular.forEach(arguments,function(n){n!==t&&angular.forEach(n,function(n,i){t[i]&&t[i].constructor&&t[i].constructor===Object?e.deepExtend(t[i],n):t[i]=n})}),t},zoom:function(t,e){var n=e.chart.zoom;if(void 0===n.enabled||null===n.enabled||n.enabled){var i,r,a,o,s=t.chart.xAxis.scale(),l=t.chart.yAxis.scale(),u=t.chart.xDomain||s.domain,c=t.chart.yDomain||l.domain,d=s.domain().slice(),h=l.domain().slice(),f=n.scale||1,p=n.translate||[0,0],g=n.scaleExtent||[1,10],m=n.useFixedDomain||!1,v=n.useNiceScale||!1,y=n.horizontalOff||!1,b=n.verticalOff||!1,x=n.unzoomEventType||"dblclick.zoom";v&&(s.nice(),l.nice()),i=function(t,e){return t[0]=Math.min(Math.max(t[0],e[0]),e[1]-e[1]/g[1]),t[1]=Math.max(e[0]+e[1]/g[1],Math.min(t[1],e[1])),t},a=function(){if(void 0!==n.zoomed){var e=n.zoomed(s.domain(),l.domain());y||u([e.x1,e.x2]),b||c([e.y1,e.y2])}else y||u(m?i(s.domain(),d):s.domain()),b||c(m?i(l.domain(),h):l.domain());t.chart.update()},o=function(){if(void 0!==n.unzoomed){var e=n.unzoomed(s.domain(),l.domain());y||u([e.x1,e.x2]),b||c([e.y1,e.y2])}else y||u(d),b||c(h);r.scale(f).translate(p),t.chart.update()},r=d3.behavior.zoom().x(s).y(l).scaleExtent(g).on("zoom",a),t.svg.call(r),r.scale(f).translate(p).event(t.svg),"none"!==x&&t.svg.on(x,o)}}}})}(),angular.module("AngularSpringApp").service("AppService",function(t,e,n){var i;return{fetchAllOutlets:function(){return n.post("purchaseOrder/getAllOutlets").success(function(t){var e=t.status;return"SUCCESSFUL"==e?i=t.data:""}).error(function(){return""}),i}}}),angular.module("AngularSpringApp").factory("BoardManipulator",function(){return{addColumn:function(t,e){t.columns.push(new Column(e))},addCardToColumn:function(t,e,n,i,r,a,o,s,l,u,c,d,h){alert(cardDetails.day),angular.forEach(t.columns,function(t){t.name===e.name&&t.cards.push(new Card(n,e.name,i,r,a,o,s,l,u,c,d,h))})},addNewCard:function(t,e){$uibModal.open({templateUrl:"resources/pages/newCard.html",controller:"NewCardController",backdrop:"static",resolve:{column:function(){return e}}}).result.then(function(e){e&&BoardManipulator.addCardToColumn(t,e.column,e.title,e.details,e.id,e.schecduleId,e.userId,e.scheduleName,e.startDate,e.startTime,e.endDate,e.endTime,e.day,e.workplaceId,e.workplaceName,e.departmentId,e.departmentName,e.employeeWorkScheduleId)})},removeCardFromColumn:function(t,e,n){angular.forEach(t.columns,function(t){t.name===e.name&&t.cards.splice(t.cards.indexOf(n),1)})},addBacklog:function(t,e,n,i,r,a){t.backlogs.push(new Backlog(e,n,i,r,a))},addPhaseToBacklog:function(t,e,n){angular.forEach(t.backlogs,function(t){t.name===e&&t.phases.push(new Phase(n.name))})},addCardToBacklog:function(t,e,n,i){angular.forEach(t.backlogs,function(t){t.name===e&&angular.forEach(t.phases,function(t){t.name===n&&t.cards.push(new Card(i.title,i.status,i.details,i.id,i.schecduleId,i.userId,i.scheduleName,i.startDate,i.startTime,i.endDate,i.endTime,i.day,i.workplaceId,i.workplaceName,i.departmentId,i.departmentName,i.employeeWorkScheduleId))})})}}}),angular.module("AngularSpringApp").service("BoardService",["$uibModal","BoardManipulator",function(t,e){return{sprintBoard:function(t){var n=new Board(t.name,t.numberOfColumns);return angular.forEach(t.columns,function(t){e.addColumn(n,t.name)}),angular.forEach(t.backlogs,function(t){e.addBacklog(n,t.title,t.userId,t.userName,t.css,t.img),angular.forEach(t.phases,function(i){e.addPhaseToBacklog(n,t.title,i),angular.forEach(i.cards,function(r){e.addCardToBacklog(n,t.title,i.name,r)})})}),n}}}]),function(){function t(t,e){t.prototype=function(t){function e(){}return e.prototype=t,new e}(e.prototype),t.prototype.constructor=t,t.parent=e.prototype}function e(t,e,n){return"millisecond"===n?t.setMilliseconds(t.getMilliseconds()+1*e):"second"===n?t.setSeconds(t.getSeconds()+1*e):"minute"===n?t.setMinutes(t.getMinutes()+1*e):"hour"===n?t.setHours(t.getHours()+1*e):"day"===n?t.setDate(t.getDate()+1*e):"week"===n?t.setDate(t.getDate()+7*e):"month"===n?t.setMonth(t.getMonth()+1*e):"year"===n&&t.setFullYear(t.getFullYear()+1*e),t}function n(t,e){return F[e+"Duration"]*t}function r(t,e){var n=!1;for(0>t&&(n=!0,t*=-1),t=""+t,e=e||1;t.length<e;)t="0"+t;return n?"-"+t:t}function a(t){if(!t)return t;for(var e=/\s/,n=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(--n)););return t.slice(0,n+1)}function o(t,e){return t-e}function s(t,e){return t.x-e.x}function l(t){var e=((16711680&t)>>16).toString(16),n=((65280&t)>>8).toString(16);return t=((255&t)>>0).toString(16),"#"+(e=2>e.length?"0"+e:e)+(n=2>n.length?"0"+n:n)+(t=2>t.length?"0"+t:t)}function u(t,e,n){var i=t+"_"+e+"_"+(n=n||"normal"),r=$[i];if(isNaN(r)){try{if(t="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+t+"; font-size:"+e+"px; font-weight:"+n+";",!z){var a=document.body;(z=document.createElement("span")).innerHTML="";var o=document.createTextNode("Mpgyi");z.appendChild(o),a.appendChild(z)}z.style.display="",z.setAttribute("style",t),r=Math.round(z.offsetHeight),z.style.display="none"}catch(t){r=Math.ceil(1.1*e)}r=Math.max(r,e),$[i]=r}return r}function c(t,e,n,i){if(t.addEventListener)t.addEventListener(e,n,i||!1);else{if(!t.attachEvent)return!1;t.attachEvent("on"+e,function(e){(e=e||window.event).preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},n.call(t,e)})}}function d(t,e,n){for(t*=W,e*=W,t=n.getImageData(t,e,2,2).data,e=!0,n=0;4>n;n++)if(t[n]!==t[n+4]|t[n]!==t[n+8]|t[n]!==t[n+12]){e=!1;break}return e?t[0]<<16|t[1]<<8|t[2]:0}function h(t,e,n){var i;i=t?t+"FontStyle":"fontStyle";var r=t?t+"FontWeight":"fontWeight",a=t?t+"FontSize":"fontSize";return t=t?t+"FontFamily":"fontFamily",i=e[i]?e[i]+" ":n&&n[i]?n[i]+" ":"",i+=e[r]?e[r]+" ":n&&n[r]?n[r]+" ":"",i+=e[a]?e[a]+"px ":n&&n[a]?n[a]+"px ":"",e=e[t]?e[t]+"":n&&n[t]?n[t]+"":"",!E&&e&&(e=e.split(",")[0],"'"!==e[0]&&'"'!==e[0]&&(e="'"+e+"'")),i+e}function f(t,e,n){return t in e?e[t]:n[t]}function p(t,e,n){if(E&&N){var i=t.getContext("2d");X=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,W=U/X,t.width=e*W,t.height=n*W,U!==X&&(t.style.width=e+"px",t.style.height=n+"px",i.scale(W,W))}else t.width=e,t.height=n}function g(t,e){var n=document.createElement("canvas");return n.setAttribute("class","canvasjs-chart-canvas"),p(n,t,e),E||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(n),n}function m(t,e,n){this._defaultsKey=t;var i={};n&&L[n]&&L[n][t]&&(i=L[n][t]),this._options=e||{},this.setOptions(this._options,i)}function v(t,e){e=e||{},v.parent.constructor.call(this,"Chart",e,e.theme?e.theme:"theme1");var n=this;if(this._containerId=t,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this._container=document.getElementById(this._containerId)){this._container.innerHTML="";var i=0,r=0;i=this._options.width?this.width:0<this._container.clientWidth?this._container.clientWidth:this.width,r=this._options.height?this.height:0<this._container.clientHeight?this._container.clientHeight:this.height;if(this.width=i,this.height=r,this._selectedColorSet=void 0!==I[this.colorSet]?I[this.colorSet]:I.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",E||(this._canvasJSContainer.style.height="0px"),this._container.appendChild(this._canvasJSContainer),this.canvas=g(i,r),this.canvas.style.position="absolute",this.canvas.getContext){try{this.canvas.style.background=this.backgroundColor}catch(t){}this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",this.ctx.roundRect=function(t,e,n,i,r,a,o,s){o&&(this.fillStyle=o),s&&(this.strokeStyle=s),void 0===r&&(r=5),this.lineWidth=a,this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+n-r,e),this.quadraticCurveTo(t+n,e,t+n,e+r),this.lineTo(t+n,e+i-r),this.quadraticCurveTo(t+n,e+i,t+n-r,e+i),this.lineTo(t+r,e+i),this.quadraticCurveTo(t,e+i,t,e+i-r),this.lineTo(t,e+r),this.quadraticCurveTo(t,e,t+r,e),this.closePath(),o&&this.fill(),s&&0<a&&this.stroke()},E?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=g(i,r),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=g(i,r),this.overlaidCanvas.style.position="absolute",this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",this._eventManager=new P(this),c(window,"resize",function(){n._updateSize()&&n.render()}),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.position="absolute",this._toolBar.style.top="0px",this._toolBar.style.right="0px",this._canvasJSContainer.appendChild(this._toolBar),this._toolBar.style.display="none",this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},c(this.overlaidCanvas,"click",function(t){n._mouseEventHandler(t)}),c(this.overlaidCanvas,"mousemove",function(t){n._mouseEventHandler(t)}),c(this.overlaidCanvas,"mouseup",function(t){n._mouseEventHandler(t)}),c(this.overlaidCanvas,"mousedown",function(t){n._mouseEventHandler(t)}),c(this.overlaidCanvas,"mouseout",function(t){n._mouseEventHandler(t)}),c(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(t){n._touchEventHandler(t)}),c(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(t){n._touchEventHandler(t)}),c(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(t){n._touchEventHandler(t)}),c(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(t){n._touchEventHandler(t)}),this._creditLink||(this._creditLink=document.createElement("a"),this._creditLink.setAttribute("class","canvasjs-chart-credit"),this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(this.height-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),this._creditLink.setAttribute("tabIndex",-1),this._creditLink.setAttribute("target","_blank")),this._toolTip=new T(this,this._options.toolTip,this.theme),this.layoutManager=new b(this),this.axisY2=this.axisY=this.axisX=this.data=null,this.renderCount=0,this.sessionVariables={axisX:{internalMinimum:null,internalMaximum:null},axisY:{internalMinimum:null,internalMaximum:null},axisY2:{internalMinimum:null,internalMaximum:null}}}}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function y(t,e){for(var n=[],i=0;i<t.length;i++)if(0==i)n.push(t[0]);else{var r,a,o;r=0===(o=i-1)?0:o-1,a=o===t.length-1?o:o+1,n[n.length]={x:t[o].x+(t[a].x-t[r].x)/e/3,y:t[o].y+(t[a].y-t[r].y)/e/3},r=0===(o=i)?0:o-1,a=o===t.length-1?o:o+1,n[n.length]={x:t[o].x-(t[a].x-t[r].x)/e/3,y:t[o].y-(t[a].y-t[r].y)/e/3},n[n.length]=t[i]}return n}function b(t){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=0,this.chart=t}function x(t,e){x.parent.constructor.call(this,"TextBlock",e),this.ctx=t,this._isDirty=!0,this._wrappedText=null,this._lineHeight=u(this.fontFamily,this.fontSize,this.fontWeight)}function w(t,e){w.parent.constructor.call(this,"Title",e,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,void 0===this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function M(t,e,n){M.parent.constructor.call(this,"Legend",e,n),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.height=this.width=0,this.orientation=null,this.horizontalSpacing=10,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},void 0===this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=u(this.fontFamily,this.fontSize,this.fontWeight)}function k(t,e){k.parent.constructor.call(this,e),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx}function _(t,e,n,i,r){_.parent.constructor.call(this,"DataSeries",e,n),this.chart=t,this.canvas=t.canvas,this._ctx=t.canvas.ctx,this.index=i,this.maxWidthInX=this.noDataPointsInPlotArea=0,this.id=r,this.chart._eventManager.objectMap[r]={id:r,objectType:"dataSeries",dataSeriesIndex:i},this.dataPointIds=[],this.axisY=this.axisX=null,this.axisPlacement=this.getDefaultAxisPlacement(),void 0===this._options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function C(t,e,n,i){if(C.parent.constructor.call(this,"Axis",e,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=t.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},"axisX"===n?(this.sessionVariables=this.chart.sessionVariables[n],this._options.interval||(this.intervalType=null)):this.sessionVariables="left"===i||"top"===i?this.chart.sessionVariables.axisY:this.chart.sessionVariables.axisY2,void 0===this._options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),void 0===this._options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=n,"axisX"!==n||e&&void 0!==e.gridThickness||(this.gridThickness=0),this._position=i,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:180<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:270<this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this._options.stripLines&&0<this._options.stripLines.length)for(this.stripLines=[],e=0;e<this._options.stripLines.length;e++)this.stripLines.push(new S(this.chart,this._options.stripLines[e],t.theme,++this.chart._eventManager.lastObjectId));this._absoluteMaximum=this._absoluteMinimum=this._titleTextBlock=null,this.hasOptionChanged("minimum")&&(this.sessionVariables.internalMinimum=this.minimum),this.hasOptionChanged("maximum")&&(this.sessionVariables.internalMaximum=this.maximum),this.trackChanges("minimum"),this.trackChanges("maximum")}function S(t,e,n,i){S.parent.constructor.call(this,"StripLine",e,n),this._thicknessType="pixel",this.id=i,null!==this.startValue&&null!==this.endValue&&(this.value=((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this.thickness=Math.max(this.endValue-this.startValue),this._thicknessType="value")}function T(t,e,n){T.parent.constructor.call(this,"ToolTip",e,n),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._timerId=0,this._prevY=this._prevX=NaN,this._initialize()}function P(t){this.chart=t,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=g(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function A(t,e){var n;e&&O[e]&&(n=O[e]),w.parent.constructor.call(this,"CultureInfo",n,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx}var E=!!document.createElement("canvas").getContext,D={Chart:{width:500,height:400,zoomEnabled:!1,backgroundColor:"white",theme:"theme1",animationEnabled:!!E,colorSet:"colorSet1",culture:"en",creditHref:"http:///",creditText:"",interactivityEnabled:!0},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:5},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null},ToolTip:{enabled:!0,borderColor:null,shared:!1,animationEnabled:!0,content:null},Axis:{minimum:null,maximum:null,interval:null,intervalType:null,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!1,labelWrap:!0,labelMaxWidth:null,prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,gridColor:"A0A0A0",gridThickness:0,interlacedColor:null,valueFormatString:null,margin:2,stripLines:[]},StripLine:{value:null,startValue:null,endValue:null,color:"orange",thickness:2,label:"",labelBackgroundColor:"#EEEEEE",labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal"},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,cursor:null,indexLabel:"",indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:null,indexLabelLineThickness:1,indexLabelMaxWidth:null,indexLabelWrap:!0,lineThickness:2,color:null,startAngle:0,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"}},O={en:{}},I={colorSet1:"#369EAD #C24642 #7F6084 #86B402 #A2D1CF #C8B631 #6DBCEB #52514E #4F81BC #A064A1 #F79647".split(" "),colorSet2:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #33558B".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},L={theme1:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:E?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:26,titleFontColor:"#666666",titleFontFamily:E?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontFamily:E?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"#BBBBBB",tickThickness:2,gridThickness:2,gridColor:"#BBBBBB",lineThickness:2,lineColor:"#BBBBBB"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:E?"monospace, sans-serif,arial black":"calibri"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:E?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineThickness:1}},theme2:{Chart:{colorSet:"colorSet2"},Title:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:32,fontColor:"#333333",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:E?"monospace, sans-serif,arial black":"arial",titleFontWeight:"bold",labelFontFamily:E?"monospace, Courier New, Courier":"arial",labelFontSize:16,labelFontColor:"grey",labelFontWeight:"bold",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:0},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:E?"monospace, sans-serif,arial black":"arial"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:E?"Courier New, Courier, monospace":"arial",indexLabelFontWeight:"bold",indexLabelFontSize:18,indexLabelLineThickness:1}},theme3:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:E?"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif":"calibri",fontSize:32,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:E?"Verdana, Geneva, Calibri, sans-serif":"calibri",labelFontFamily:E?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:2,lineColor:"grey"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:E?"monospace, sans-serif,arial black":"calibri"},DataSeries:{bevelEnabled:!0,indexLabelFontColor:"grey",indexLabelFontFamily:E?"Candara, Optima, Calibri, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}}},F={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")},$={},z=null,B=function(){var t=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),n="Sun Mon Tue Wed Thu Fri Sat".split(" "),i="January February March April May June July August September October November December".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g;return function(l,u,c){var d=c?c.days:e,h=c?c.months:i,f=c?c.shortDays:n,p=c?c.shortMonths:a;c="";var g=!1;if(l=l&&l.getTime?l:l?new Date(l):new Date,isNaN(l))throw SyntaxError("invalid date");"UTC:"===u.slice(0,4)&&(u=u.slice(4),g=!0);var m=l[(c=g?"getUTC":"get")+"Date"](),v=l[c+"Day"](),y=l[c+"Month"](),b=l[c+"FullYear"](),x=l[c+"Hours"](),w=l[c+"Minutes"](),M=l[c+"Seconds"](),k=l[c+"Milliseconds"](),_=g?0:l.getTimezoneOffset();return u.replace(t,function(t){switch(t){case"D":return m;case"DD":return r(m,2);case"DDD":return f[v];case"DDDD":return d[v];case"M":return y+1;case"MM":return r(y+1,2);case"MMM":return p[y];case"MMMM":return h[y];case"Y":return parseInt(String(b).slice(-2));case"YY":return r(String(b).slice(-2),2);case"YYY":return r(String(b).slice(-3),3);case"YYYY":return r(b,4);case"h":return x%12||12;case"hh":return r(x%12||12,2);case"H":return x;case"HH":return r(x,2);case"m":return w;case"mm":return r(w,2);case"s":return M;case"ss":return r(M,2);case"f":return String(k).slice(0,1);case"ff":return r(String(k).slice(0,2),2);case"fff":return r(String(k).slice(0,3),3);case"t":return 12>x?"a":"p";case"tt":return 12>x?"am":"pm";case"T":return 12>x?"A":"P";case"TT":return 12>x?"AM":"PM";case"K":return g?"UTC":(String(l).match(o)||[""]).pop().replace(s,"");case"z":return(0<_?"-":"+")+Math.floor(Math.abs(_)/60);case"zz":return(0<_?"-":"+")+r(Math.floor(Math.abs(_)/60),2);case"zzz":return(0<_?"-":"+")+r(Math.floor(Math.abs(_)/60),2)+r(Math.abs(_)%60,2);default:return t.slice(1,t.length-1)}})}}(),j=function(t,e,n){if(null===t)return"";var i=0>(t=Number(t));i&&(t*=-1);var a=n?n.decimalSeparator:".",o=n?n.digitGroupSeparator:",",s="",l=(s=1,n=""),u=-1,c=[],d=[],h=0,f=0,p=0,g=!1,m=0;l=(e=String(e)).match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);e=null;for(var v=0;l&&v<l.length;v++)if(e=l[v],"."===e&&0>u)u=v;else{if("%"===e)s*=100;else{if(""===e){s*=1e3;continue}if(","===e[0]&&"."===e[e.length-1]){s/=Math.pow(1e3,e.length-1),u=v+e.length-1;continue}"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||(g=!0)}0>u?(c.push(e),"#"===e||"0"===e?h++:","===e&&p++):(d.push(e),"#"!==e&&"0"!==e||f++)}for(g&&(e=Math.floor(t),m=(0===e?"":String(e)).length-h,s/=Math.pow(10,m)),0>u&&(u=v),s=((e=(s=(t*s).toFixed(f)).split("."))[0]+"").split(""),t=(e[1]+"").split(""),s&&"0"===s[0]&&s.shift(),v=g=l=f=u=0;0<c.length;)if(e=c.pop(),"#"===e||"0"===e)if(u++,u===h){var y=s;s=[];if("0"===e)for(e=h-f-(y?y.length:0);0<e;)y.unshift("0"),e--;for(;0<y.length;)n=y.pop()+n,v++,0==v%g&&l===p&&0<y.length&&(n=o+n);i&&(n="-"+n)}else 0<s.length?(n=s.pop()+n,f++,v++):"0"===e&&(n="0"+n,f++,v++),0==v%g&&l===p&&0<s.length&&(n=o+n);else"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?","===e?(l++,g=v,v=0,0<s.length&&(n=o+n)):n=1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?e.slice(1,e.length-1)+n:e+n:(e=0>m?e.replace("+","").replace("-",""):e.replace("-",""),n+=e.replace(/[0]+/,function(t){return r(m,t.length)}));for(i="",o=!1;0<d.length;)e=d.shift(),"#"===e||"0"===e?0<t.length&&0!==Number(t.join(""))?(i+=t.shift(),o=!0):"0"===e&&(i+="0",o=!0):1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?i+=e.slice(1,e.length-1):"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?i+=e:(e=0>m?e.replace("+","").replace("-",""):e.replace("-",""),i+=e.replace(/[0]+/,function(t){return r(m,t.length)}));return n+((o?a:"")+i)},R=function(t){var e=0,n=0;return(t=t||window.event).offsetX||0===t.offsetX?(e=t.offsetX,n=t.offsetY):t.layerX||0==t.layerX?(e=t.layerX,n=t.layerY):(e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop),{x:e,y:n}},N=!0,U=window.devicePixelRatio||1,X=1,W=N?U/X:1;m.prototype.setOptions=function(t,e){if(D[this._defaultsKey]){var n,i=D[this._defaultsKey];for(n in i)this[n]=t&&n in t?t[n]:e&&n in e?e[n]:i[n]}},m.prototype.updateOption=function(t){var e=D[this._defaultsKey],n=this._options.theme?this._options.theme:this.chart&&this.chart._options.theme?this.chart._options.theme:"theme1",i={},r=this[t];return n&&L[n]&&L[n][this._defaultsKey]&&(i=L[n][this._defaultsKey]),t in e&&(r=t in this._options?this._options[t]:i&&t in i?i[t]:e[t]),r!==this[t]&&(this[t]=r,!0)},m.prototype.trackChanges=function(t){this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]=this._options[t]},m.prototype.isBeingTracked=function(t){return this._options._oldOptions||(this._options._oldOptions={}),!!this._options._oldOptions[t]},m.prototype.hasOptionChanged=function(t){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]!==this._options[t]},t(v,m),v.prototype._updateOptions=function(){var t=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("theme"),this.updateOption("colorSet")&&(this._selectedColorSet=void 0!==I[this.colorSet]?I[this.colorSet]:I.colorSet1),this.updateOption("backgroundColor"))try{this.canvas.style.background!==this.backgroundColor&&(this.canvas.style.background=this.backgroundColor)}catch(t){}if(this.updateOption("animationEnabled"),this._options.zoomEnabled?(this._zoomButton||(this._zoomButton=document.createElement("button"),this._zoomButton.appendChild(document.createTextNode("Pan")),this._toolBar.appendChild(this._zoomButton),c(this._zoomButton,"click",function(){t.zoomEnabled?(t.zoomEnabled=!1,t.panEnabled=!0,t._zoomButton.innerHTML=t._cultureInfo.zoomText):(t.zoomEnabled=!0,t.panEnabled=!1,t._zoomButton.innerHTML=t._cultureInfo.panText),t.render()})),this._resetButton||(this._resetButton=document.createElement("button"),this._resetButton.appendChild(document.createTextNode("Reset")),this._toolBar.appendChild(this._resetButton),c(this._resetButton,"click",function(){t._toolTip.hide(),t.zoomEnabled||t.panEnabled?(t.zoomEnabled=!0,t.panEnabled=!1,t._zoomButton.innerHTML=t._cultureInfo.panText,t._defaultCursor="default",t.overlaidCanvas.style.cursor=t._defaultCursor):(t.zoomEnabled=!1,t.panEnabled=!1),t.sessionVariables.axisX.internalMinimum=t._options.axisX&&t._options.axisX.minimum?t._options.axisX.minimum:null,t.sessionVariables.axisX.internalMaximum=t._options.axisX&&t._options.axisX.maximum?t._options.axisX.maximum:null,t.resetOverlayedCanvas(),t._toolBar.style.display="none",t.render()}),this.overlaidCanvas.style.cursor=t._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(t._zoomButton.innerHTML===t._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),t._toolBar.style.display="inline"):(this.zoomEnabled=!0,this.panEnabled=!1))):this.panEnabled=this.zoomEnabled=!1,this.updateOption("culture"),this._cultureInfo=new A(this,this._options.culture),"none"!==this._toolBar.style.display){var e=this.panEnabled?t._cultureInfo.zoomText:t._cultureInfo.panText;t._zoomButton.innerHTML!==e&&(t._zoomButton.innerHTML=e),t._resetButton.innerHTML!==t._cultureInfo.resetText&&(t._resetButton.innerHTML=t._cultureInfo.resetText)}e=this.updateOption("creditText");var n=this.updateOption("creditHref");(0===this.renderCount||e||n)&&(this._creditLink.setAttribute("href",this.creditHref),this._creditLink.innerHTML=this.creditText),this.creditHref&&this.creditText?this._creditLink.parentElement||this._canvasJSContainer.appendChild(this._creditLink):this._creditLink.parentElement&&this._canvasJSContainer.removeChild(this._creditLink),this._options.toolTip&&this._toolTip._options!==this._options.toolTip&&(this._toolTip._options=this._options.toolTip),this._toolTip.updateOption("enabled"),this._toolTip.updateOption("shared"),this._toolTip.updateOption("animationEnabled"),this._toolTip.updateOption("borderColor"),this._toolTip.updateOption("content")},v.prototype._updateSize=function(){var t=0,e=0;return this._options.width?t=this.width:this.width=t=0<this._container.clientWidth?this._container.clientWidth:this.width,this._options.height?e=this.height:this.height=e=0<this._container.clientHeight?this._container.clientHeight:this.height,(this.canvas.width!==t*W||this.canvas.height!==e*W)&&(p(this.canvas,t,e),p(this.overlaidCanvas,t,e),p(this._eventManager.ghostCanvas,t,e),!0)},v.prototype._initialize=function(){this.pieDoughnutClickHandler=null,this.animationRequestId&&this.cancelRequestAnimFrame.call(window,this.animationRequestId),this._updateOptions(),this._updateSize(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.beginPath(),this.axisY2=this.axisY=this.axisX=null,this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]},this.layoutManager.reset(),this.data=[];for(var t=0,e=0;e<this._options.data.length;e++)if(t++,!this._options.data[e].type||0<=v._supportedChartTypes.indexOf(this._options.data[e].type)){var n=new _(this,this._options.data[e],this.theme,t-1,++this._eventManager.lastObjectId);null===n.name&&(n.name="DataSeries "+t),null===n.color?1<this._options.data.length?(n._colorSet=[this._selectedColorSet[n.index%this._selectedColorSet.length]],n.color=this._selectedColorSet[n.index%this._selectedColorSet.length]):n._colorSet="line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type?[this._selectedColorSet[0]]:this._selectedColorSet:n._colorSet=[n.color],null===n.markerSize&&(("line"===n.type||"stepLine"===n.type||"spline"===n.type)&&n.dataPoints&&n.dataPoints.length<this.width/16||"scatter"===n.type)&&(n.markerSize=8),"bubble"!==n.type&&"scatter"!==n.type||!n.dataPoints||n.dataPoints.sort(s),this.data.push(n);var i,r=n.axisPlacement;if("normal"===r?"xySwapped"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===r?"normal"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"==r&&("normal"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?i='You cannot combine "'+n.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none")),i&&window.console)return void window.console.log(i)}this._objectsInitialized=!0},(v._supportedChartTypes="line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 pie doughnut".split(" ")).indexOf||(v._supportedChartTypes.indexOf=function(t,e){var n,i=this.length>>>0;for(0>(n=0>(n=Number(e)||0)?Math.ceil(n):Math.floor(n))&&(n+=i);n<i;n++)if(n in this&&this[n]===t)return n;return-1}),v.prototype.render=function(t){for(t&&(this._options=t),this._initialize(),t=0;t<this.data.length;t++)"normal"!==this.plotInfo.axisPlacement&&"xySwapped"!==this.plotInfo.axisPlacement||(this.data[t].axisYType&&"primary"!==this.data[t].axisYType?"secondary"===this.data[t].axisYType&&(this.axisY2||("normal"===this.plotInfo.axisPlacement?this.axisY2=new C(this,this._options.axisY2,"axisY","right"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY2=new C(this,this._options.axisY2,"axisY","top"))),this.data[t].axisY=this.axisY2):(this.axisY||("normal"===this.plotInfo.axisPlacement?this.axisY=new C(this,this._options.axisY,"axisY","left"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY=new C(this,this._options.axisY,"axisY","bottom"))),this.data[t].axisY=this.axisY),this.axisX||("normal"===this.plotInfo.axisPlacement?this.axisX=new C(this,this._options.axisX,"axisX","bottom"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisX=new C(this,this._options.axisX,"axisX","left"))),this.data[t].axisX=this.axisX);for(this._processData(),this._options.title&&(this._title=new w(this,this._options.title),this._title.render()),this.legend=new M(this,this._options.legend,this.theme),t=0;t<this.data.length;t++)this.data[t].showInLegend&&this.legend.dataSeries.push(this.data[t]);if(this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)this.layoutManager.getFreeSpace(),C.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(t=0;t<this.plotInfo.plotTypes.length;t++)for(var e=this.plotInfo.plotTypes[t],n=0;n<e.plotUnits.length;n++){var i=e.plotUnits[n];"line"===i.type?this.renderLine(i):"stepLine"===i.type?this.renderStepLine(i):"spline"===i.type?this.renderSpline(i):"column"===i.type?this.renderColumn(i):"bar"===i.type?this.renderBar(i):"area"===i.type?this.renderArea(i):"stepArea"===i.type?this.renderStepArea(i):"splineArea"===i.type?this.renderSplineArea(i):"stackedColumn"===i.type?this.renderStackedColumn(i):"stackedColumn100"===i.type?this.renderStackedColumn100(i):"stackedBar"===i.type?this.renderStackedBar(i):"stackedBar100"===i.type?this.renderStackedBar100(i):"stackedArea"===i.type?this.renderStackedArea(i):"stackedArea100"===i.type?this.renderStackedArea100(i):"bubble"===i.type?this.renderBubble(i):"scatter"===i.type?this.renderScatter(i):"pie"===i.type?this.renderPie(i):"doughnut"===i.type&&this.renderPie(i);for(var r=0;r<i.dataSeriesIndexes.length;r++)this._dataInRenderedOrder.push(this.data[i.dataSeriesIndexes[r]])}0<this._indexLabels.length&&this.renderIndexLabels(),this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||"none"===this._toolBar.style.display||(this._toolBar.style.display="none"),this._toolTip._updateToolTip(),this.renderCount++},v.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.zoomEnabled?"col-resize":"move",cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},v.prototype.categoriseDataSeries=function(){for(var t="",e=0;e<this.data.length;e++)if(t=this.data[e],t.dataPoints&&0!==t.dataPoints.length&&t.visible&&0<=v._supportedChartTypes.indexOf(t.type)){for(var n=null,i=!1,r=null,a=!1,o=0;o<this.plotInfo.plotTypes.length;o++)if(this.plotInfo.plotTypes[o].type===t.type){i=!0,n=this.plotInfo.plotTypes[o];break}for(i||(n={type:t.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(n)),o=0;o<n.plotUnits.length;o++)if(n.plotUnits[o].axisYType===t.axisYType){a=!0,r=n.plotUnits[o];break}a||(r={type:t.type,previousDataSeriesCount:0,index:n.plotUnits.length,plotType:n,axisYType:t.axisYType,axisY:"primary"===t.axisYType?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[]},n.plotUnits.push(r)),n.totalDataSeries++,r.dataSeriesIndexes.push(e)}for(e=0;e<this.plotInfo.plotTypes.length;e++)for(n=this.plotInfo.plotTypes[e],o=t=0;o<n.plotUnits.length;o++)n.plotUnits[o].previousDataSeriesCount=t,t+=n.plotUnits[o].dataSeriesIndexes.length},v.prototype.assignIdToDataPoints=function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];if(e.dataPoints)for(var n=e.dataPoints.length,i=0;i<n;i++)e.dataPointIds[i]=++this._eventManager.lastObjectId}},v.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var t=0;t<this.plotInfo.plotTypes.length;t++)for(var e=this.plotInfo.plotTypes[t],n=0;n<e.plotUnits.length;n++){var i=e.plotUnits[n];"line"===i.type||"stepLine"===i.type||"spline"===i.type||"column"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"bar"===i.type||"bubble"===i.type||"scatter"===i.type?this._processMultiseriesPlotUnit(i):"stackedColumn"===i.type||"stackedBar"===i.type||"stackedArea"===i.type?this._processStackedPlotUnit(i):"stackedColumn100"!==i.type&&"stackedBar100"!==i.type&&"stackedArea100"!==i.type||this._processStacked100PlotUnit(i)}},v.prototype._processMultiseriesPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,n,i=t.axisY.dataInfo,r=t.axisX.dataInfo,a=!1,o=0;o<t.dataSeriesIndexes.length;o++){var s=this.data[t.dataSeriesIndexes[o]],l=0,u=!1,c=!1;if("normal"===s.axisPlacement||"xySwapped"===s.axisPlacement)var d=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,h=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((s.dataPoints[l].x&&s.dataPoints[l].x.getTime||"dateTime"===s.xValueType)&&(a=!0),l=0;l<s.dataPoints.length;l++){if(void 0===s.dataPoints[l].x&&(s.dataPoints[l].x=l),s.dataPoints[l].x.getTime?(a=!0,e=s.dataPoints[l].x.getTime()):e=s.dataPoints[l].x,n=s.dataPoints[l].y,e<r.min&&(r.min=e),e>r.max&&(r.max=e),n<i.min&&(i.min=n),n>i.max&&(i.max=n),0<l){var f=e-s.dataPoints[l-1].x;0>f&&(f*=-1),r.minDiff>f&&0!==f&&(r.minDiff=f)}if(!(e<d)||u){if(!u&&(u=!0,0<l)){l-=2;continue}if(e>h&&!c)c=!0;else if(e>h&&c)continue;s.dataPoints[l].label&&(t.axisX.labels[e]=s.dataPoints[l].label),e<r.viewPortMin&&(r.viewPortMin=e),e>r.viewPortMax&&(r.viewPortMax=e),null!==n&&(n<i.viewPortMin&&(i.viewPortMin=n),n>i.viewPortMax&&(i.viewPortMax=n))}}this.plotInfo.axisXValueType=s.xValueType=a?"dateTime":"number"}},v.prototype._processStackedPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,n,i=t.axisY.dataInfo,r=t.axisX.dataInfo,a=!1,o=[],s=[],l=0;l<t.dataSeriesIndexes.length;l++){var u=this.data[t.dataSeriesIndexes[l]],c=0,d=!1,h=!1;if("normal"===u.axisPlacement||"xySwapped"===u.axisPlacement)var f=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,p=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((u.dataPoints[c].x&&u.dataPoints[c].x.getTime||"dateTime"===u.xValueType)&&(a=!0),c=0;c<u.dataPoints.length;c++){if(void 0===u.dataPoints[c].x&&(u.dataPoints[c].x=c),u.dataPoints[c].x.getTime?(a=!0,e=u.dataPoints[c].x.getTime()):e=u.dataPoints[c].x,n=u.dataPoints[c].y,e<r.min&&(r.min=e),e>r.max&&(r.max=e),0<c){var g=e-u.dataPoints[c-1].x;0>g&&(g*=-1),r.minDiff>g&&0!==g&&(r.minDiff=g)}if(!(e<f)||d){if(!d&&(d=!0,0<c)){c-=2;continue}if(e>p&&!h)h=!0;else if(e>p&&h)continue;u.dataPoints[c].label&&(t.axisX.labels[e]=u.dataPoints[c].label),e<r.viewPortMin&&(r.viewPortMin=e),e>r.viewPortMax&&(r.viewPortMax=e),null!==n&&(0<=n?o[e]=o[e]?o[e]+n:n:s[e]=s[e]?s[e]+n:n)}}this.plotInfo.axisXValueType=u.xValueType=a?"dateTime":"number"}for(c in o)isNaN(c)||(t=o[c],t<i.min&&(i.min=t),t>i.max&&(i.max=t),c<r.viewPortMin||c>r.viewPortMax||(t<i.viewPortMin&&(i.viewPortMin=t),t>i.viewPortMax&&(i.viewPortMax=t)));for(c in s)isNaN(c)||(t=s[c],t<i.min&&(i.min=t),t>i.max&&(i.max=t),c<r.viewPortMin||c>r.viewPortMax||(t<i.viewPortMin&&(i.viewPortMin=t),t>i.viewPortMax&&(i.viewPortMax=t)))}},v.prototype._processStacked100PlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,n,i=t.axisY.dataInfo,r=t.axisX.dataInfo,a=!1,o=!1,s=!1,l=[],u=0;u<t.dataSeriesIndexes.length;u++){var c=this.data[t.dataSeriesIndexes[u]],d=0,h=!1,f=!1;if("normal"===c.axisPlacement||"xySwapped"===c.axisPlacement)var p=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,g=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((c.dataPoints[d].x&&c.dataPoints[d].x.getTime||"dateTime"===c.xValueType)&&(a=!0),d=0;d<c.dataPoints.length;d++){if(void 0===c.dataPoints[d].x&&(c.dataPoints[d].x=d),c.dataPoints[d].x.getTime?(a=!0,e=c.dataPoints[d].x.getTime()):e=c.dataPoints[d].x,n=c.dataPoints[d].y,e<r.min&&(r.min=e),e>r.max&&(r.max=e),0<d){var m=e-c.dataPoints[d-1].x;0>m&&(m*=-1),r.minDiff>m&&0!==m&&(r.minDiff=m)}if(!(e<p)||h){if(!h&&(h=!0,0<d)){d-=2;continue}if(e>g&&!f)f=!0;else if(e>g&&f)continue;c.dataPoints[d].label&&(t.axisX.labels[e]=c.dataPoints[d].label),e<r.viewPortMin&&(r.viewPortMin=e),e>r.viewPortMax&&(r.viewPortMax=e),null!==n&&(0<=n?o=!0:s=!0,l[e]=l[e]?l[e]+Math.abs(n):Math.abs(n))}}this.plotInfo.axisXValueType=c.xValueType=a?"dateTime":"number"}o&&!s?(i.max=99,i.min=1):o&&s?(i.max=99,i.min=-99):!o&&s&&(i.max=-1,i.min=-99),i.viewPortMin=i.min,i.viewPortMax=i.max,t.dataPointYSums=l}},v.prototype.getDataPointAtXY=function(t,e,n){n=n||!1;for(var i=[],r=this._dataInRenderedOrder.length-1;0<=r;r--){var a=null;(a=this._dataInRenderedOrder[r].getDataPointAtXY(t,e,n))&&i.push(a)}for(t=null,e=!1,n=0;n<i.length;n++)if(("line"===i[n].dataSeries.type||"stepLine"===i[n].dataSeries.type||"area"===i[n].dataSeries.type||"stepArea"===i[n].dataSeries.type)&&(r=f("markerSize",i[n].dataPoint,i[n].dataSeries)||8,i[n].distance<=r/2)){e=!0;break}for(n=0;n<i.length;n++)e&&"line"!==i[n].dataSeries.type&&"stepLine"!==i[n].dataSeries.type&&"area"!==i[n].dataSeries.type&&"stepArea"!==i[n].dataSeries.type||(t?i[n].distance<=t.distance&&(t=i[n]):t=i[n]);return t},v.prototype.getObjectAtXY=function(t,e,n){var i=null;if(n=this.getDataPointAtXY(t,e,n||!1))i=n.dataSeries.dataPointIds[n.dataPointIndex];else if(E)i=d(t,e,this._eventManager.ghostCtx);else for(n=0;n<this.legend.items.length;n++){var r=this.legend.items[n];t>=r.x1&&t<=r.x2&&e>=r.y1&&e<=r.y2&&(i=r.id)}return i},v.prototype.getAutoFontSize=function(t,e,n){return t/=400,Math.round(Math.min(this.width,this.height)*t)},v.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},v.prototype.attachEvent=function(t){this._events.push(t)},v.prototype._touchEventHandler=function(t){if(t.changedTouches&&this.interactivityEnabled){var e=[],n=t.changedTouches,i=n?n[0]:t,r=null;switch(t.type){case"touchstart":case"MSPointerDown":e=["mousemove","mousedown"],this._lastTouchData=R(i),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":e=["mousemove"];break;case"touchend":case"MSPointerUp":e="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType?["mouseup","click"]:["mouseup"];break;default:return}if(!(n&&1<n.length)){(r=R(i)).time=new Date;try{var a=r.y-this._lastTouchData.y,o=r.time-this._lastTouchData.time;if(15<Math.abs(a)&&(this._lastTouchData.scroll||200>o)){this._lastTouchData.scroll=!0;var s=window.parent||window;s&&s.scrollBy&&s.scrollBy(0,-a)}}catch(t){}if(this._lastTouchEventType=t.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(n=0;n<e.length;n++)r=e[n],a=document.createEvent("MouseEvent"),a.initMouseEvent(r,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(a),t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()}}},v.prototype._mouseEventHandler=function(t){if(this.interactivityEnabled){t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),void 0===t.target&&t.srcElement&&(t.target=t.srcElement);var e,n,i=R(t),r=t.type;if(t.which?n=3==t.which:t.button&&(n=2==t.button),!n){if(v.capturedEventParam)e=v.capturedEventParam,"mouseup"===r&&(v.capturedEventParam=null,e.chart.overlaidCanvas.releaseCapture?e.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",e.chart._mouseEventHandler,!1)),e.hasOwnProperty(r)&&e[r].call(e.context,i.x,i.y);else if(this._events){for(n=0;n<this._events.length;n++)if(this._events[n].hasOwnProperty(r)){var a=(e=this._events[n]).bounds;if(i.x>=a.x1&&i.x<=a.x2&&i.y>=a.y1&&i.y<=a.y2){e[r].call(e.context,i.x,i.y),"mousedown"===r&&!0===e.capture?(v.capturedEventParam=e,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.body.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===r&&(e.chart.overlaidCanvas.releaseCapture?e.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",this._mouseEventHandler,!1));break}e=null}t.target.style.cursor=e&&e.cursor?e.cursor:this._defaultCursor}this._toolTip&&this._toolTip.enabled&&(r=this.plotArea,(i.x<r.x1||i.x>r.x2||i.y<r.y1||i.y>r.y2)&&this._toolTip.hide()),this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(t)}}},v.prototype._plotAreaMouseDown=function(t,e){this.isDrag=!0,this.dragStartPoint="none"!==this.plotInfo.axisPlacement?{x:t,y:e,xMinimum:this.axisX.minimum,xMaximum:this.axisX.maximum}:{x:t,y:e}},v.prototype._plotAreaMouseUp=function(t,e){var n,i;if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var r=0;r=this.axisX.lineCoordinates,r="xySwapped"===this.plotInfo.axisPlacement?e-this.dragStartPoint.y:this.dragStartPoint.x-t;if(Math.abs(this.axisX.maximum-this.axisX.minimum),2<Math.abs(r)){if(this.panEnabled)r=!1,i=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum?(i=this.axisX._absoluteMinimum-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=i,this.axisX.sessionVariables.internalMaximum+=i,r=!0):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum&&(i=this.axisX.sessionVariables.internalMaximum-this.axisX._absoluteMaximum,this.axisX.sessionVariables.internalMaximum-=i,this.axisX.sessionVariables.internalMinimum-=i,r=!0),r&&this.render();else if(this.zoomEnabled){if(this.resetOverlayedCanvas(),!this.dragStartPoint)return;"xySwapped"===this.plotInfo.axisPlacement?(n=Math.min(this.dragStartPoint.y,e),i=Math.max(this.dragStartPoint.y,e),1<Math.abs(n-i)&&(r=this.axisX.lineCoordinates,i=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/r.height*(i-r.y1),r=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/r.height*(n-r.y1),i=Math.max(i,this.axisX.dataInfo.min),r=Math.min(r,this.axisX.dataInfo.max),Math.abs((r-i)/this.axisX.dataInfo.minDiff)>=.008*this.height&&(this.axisX.sessionVariables.internalMinimum=i,this.axisX.sessionVariables.internalMaximum=r,this.render()))):"normal"===this.plotInfo.axisPlacement&&(i=Math.min(this.dragStartPoint.x,t),n=Math.max(this.dragStartPoint.x,t),1<Math.abs(i-n)&&(r=this.axisX.lineCoordinates,i=(this.axisX.maximum-this.axisX.minimum)/r.width*(i-r.x1)+this.axisX.minimum,r=(this.axisX.maximum-this.axisX.minimum)/r.width*(n-r.x1)+this.axisX.minimum,i=Math.max(i,this.axisX.dataInfo.min),r=Math.min(r,this.axisX.dataInfo.max),Math.abs((r-i)/this.axisX.dataInfo.minDiff)>=.01*this.width&&(this.axisX.sessionVariables.internalMinimum=i,this.axisX.sessionVariables.internalMaximum=r,this.render())))}this.zoomEnabled&&"none"===this._toolBar.style.display&&(this._toolBar.style.display="inline",this._zoomButton.innerHTML=this._cultureInfo.panText,this._resetButton.innerHTML=this._cultureInfo.resetText)}}this.isDrag=!1},v.prototype._plotAreaMouseMove=function(t,e){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var i=0,r=0;r=this.axisX.lineCoordinates;if("xySwapped"===this.plotInfo.axisPlacement?(i=e-this.dragStartPoint.y,r=Math.abs(this.axisX.maximum-this.axisX.minimum)/r.height*i):(i=this.dragStartPoint.x-t,r=Math.abs(this.axisX.maximum-this.axisX.minimum)/r.width*i),2<Math.abs(i)&&8>Math.abs(i)&&(this.panEnabled||this.zoomEnabled)?this._toolTip.hide():!this._toolTip.enabled||this.panEnabled||this.zoomEnabled||this._toolTip.mouseMoveHandler(t,e),2<Math.abs(i)&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled){this.axisX.sessionVariables.internalMinimum=this.dragStartPoint.xMinimum+r,this.axisX.sessionVariables.internalMaximum=this.dragStartPoint.xMaximum+r,i=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum-n(this.axisX.interval,this.axisX.intervalType)?(i=this.axisX._absoluteMinimum-n(this.axisX.interval,this.axisX.intervalType)-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=i,this.axisX.sessionVariables.internalMaximum+=i):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum+n(this.axisX.interval,this.axisX.intervalType)&&(i=this.axisX.sessionVariables.internalMaximum-(this.axisX._absoluteMaximum+n(this.axisX.interval,this.axisX.intervalType)),this.axisX.sessionVariables.internalMaximum-=i,this.axisX.sessionVariables.internalMinimum-=i);var a=this;clearTimeout(this._panTimerId),this._panTimerId=setTimeout(function(){a.render()},0)}else this.zoomEnabled&&(i=this.plotArea,this.resetOverlayedCanvas(),r=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillStyle="#A0ABB8","xySwapped"===this.plotInfo.axisPlacement?this.overlaidCanvasCtx.fillRect(i.x1,this.dragStartPoint.y,i.x2-i.x1,e-this.dragStartPoint.y):"normal"===this.plotInfo.axisPlacement&&this.overlaidCanvasCtx.fillRect(this.dragStartPoint.x,i.y1,t-this.dragStartPoint.x,i.y2-i.y1),this.overlaidCanvasCtx.globalAlpha=r)}else this._toolTip.enabled&&this._toolTip.mouseMoveHandler(t,e)},v.prototype.preparePlotArea=function(){var t=this.plotArea,e=this.axisY?this.axisY:this.axisY2;!E&&(0<t.x1||0<t.y1)&&t.ctx.translate(t.x1,t.y1),this.axisX&&e?(t.x1=this.axisX.lineCoordinates.x1<this.axisX.lineCoordinates.x2?this.axisX.lineCoordinates.x1:e.lineCoordinates.x1,t.y1=this.axisX.lineCoordinates.y1<e.lineCoordinates.y1?this.axisX.lineCoordinates.y1:e.lineCoordinates.y1,t.x2=this.axisX.lineCoordinates.x2>e.lineCoordinates.x2?this.axisX.lineCoordinates.x2:e.lineCoordinates.x2,t.y2=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:e.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1):(e=this.layoutManager.getFreeSpace(),t.x1=e.x1,t.x2=e.x2,t.y1=e.y1,t.y2=e.y2,t.width=e.width,t.height=e.height),E||(t.canvas.width=t.width,t.canvas.height=t.height,t.canvas.style.left=t.x1+"px",t.canvas.style.top=t.y1+"px",(0<t.x1||0<t.y1)&&t.ctx.translate(-t.x1,-t.y1))},v.prototype.getPixelCoordinatesOnPlotArea=function(t,e){return{x:this.axisX.getPixelCoordinatesOnAxis(t).x,y:this.axisY.getPixelCoordinatesOnAxis(e).y}},v.prototype.renderIndexLabels=function(){var t=this.plotArea.ctx;t.textBaseline="middle";for(var e=this.plotArea,n=0;n<this._indexLabels.length;n++){var i,r,a,o=this._indexLabels[n];t.fillStyle=f("indexLabelFontColor",o.dataPoint,o.dataSeries),t.font=h("indexLabel",o.dataPoint,o.dataSeries);var s=this.replaceKeywordsWithValue(f("indexLabel",o.dataPoint,o.dataSeries),o.dataPoint,o.dataSeries),l=t.measureText(s).width,u=f("indexLabelFontSize",o.dataPoint,o.dataSeries),c=f("indexLabelPlacement",o.dataPoint,o.dataSeries),d=f("indexLabelOrientation",o.dataPoint,o.dataSeries),p=a=0,g=0,m=0,v=0;o.point.x<e.x1||o.point.x>e.x2||o.point.y<e.y1||o.point.y>e.y2||("column"===o.chartType||"stackedColumn"===o.chartType||"stackedColumn100"===o.chartType||"bar"===o.chartType||"stackedBar"===o.chartType||"stackedBar100"===o.chartType?(Math.abs(o.bounds.x1,o.bounds.x2),Math.abs(o.bounds.y1,o.bounds.y2),"normal"===this.plotInfo.axisPlacement?("outside"===c?(p=e.y1,g=e.y2):"inside"===c&&(p=o.bounds.y1,g=o.bounds.y2),"horizontal"===d?(i=o.point.x-l/2,r=0<=o.dataPoint.y?Math.min(Math.max(o.point.y-u/2-5,p+u/2+5),g-u/2-5):Math.max(Math.min(o.point.y+u/2+5,g-u/2),p+u/2+5)):"vertical"===d&&(i=o.point.x,r=0<=o.dataPoint.y?Math.min(Math.max(o.point.y-5,p+l+5),g):Math.max(Math.min(o.point.y+l+5,g-5),p),a=-90)):"xySwapped"===this.plotInfo.axisPlacement&&("outside"===c?(m=e.x1,v=e.x2):"inside"===c&&(m=o.bounds.x1,v=o.bounds.x2),"horizontal"===d?(r=o.point.y,i=0<=o.dataPoint.y?Math.max(Math.min(o.point.x+5,v-l),m):Math.min(Math.max(o.point.x-l-5,m),v)):"vertical"===d&&(r=o.point.y+l/2,i=0<=o.dataPoint.y?Math.max(Math.min(o.point.x+u/2+5,v-u/2),m):Math.min(Math.max(o.point.x-u/2-5,m+u/2),v+u/2),a=-90))):"horizontal"===d?(i=o.point.x-l/2,r=0<=o.dataPoint.y?Math.max(o.point.y-u/2-5,e.y1+u/2):Math.min(o.point.y+u/2+5,e.y2-u/2)):"vertical"===d&&(i=o.point.x,r=0<=o.dataPoint.y?Math.max(o.point.y-5,e.y1+l):Math.min(o.point.y+l+5,e.y2),a=-90),t.save(),t.translate(i,r),t.rotate(Math.PI/180*a),t.fillText(s,0,0),t.restore())}},v.prototype.renderLine=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx;e.save();var i=this.plotArea;e.beginPath(),e.rect(i.x1,i.y1,i.width,i.height),e.clip();i=[];for(var r=0;r<t.dataSeriesIndexes.length;r++){var a=t.dataSeriesIndexes[r],o=this.data[a];e.lineWidth=o.lineThickness;var s=o.dataPoints,u=o.id;this._eventManager.objectMap[u]={objectType:"dataSeries",dataSeriesIndex:a},u=l(u),n.strokeStyle=u,n.lineWidth=0<o.lineThickness?Math.max(o.lineThickness,4):0,u=o._colorSet[0],e.strokeStyle=u;var c,d,h=!0,f=0;if(e.beginPath(),0<s.length){var p=!1;for(f=0;f<s.length;f++)if(c=s[f].x.getTime?s[f].x.getTime():s[f].x,!(c<t.axisX.dataInfo.viewPortMin||c>t.axisX.dataInfo.viewPortMax))if("number"!=typeof s[f].y)0<f&&(e.stroke(),E&&n.stroke()),p=!0;else{c=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(c-t.axisX.conversionParameters.minimum)+.5<<0,d=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(s[f].y-t.axisY.conversionParameters.minimum)+.5<<0;var g=o.dataPointIds[f];if(this._eventManager.objectMap[g]={id:g,objectType:"dataPoint",dataSeriesIndex:a,dataPointIndex:f,x1:c,y1:d},h||p?(e.beginPath(),e.moveTo(c,d),E&&(n.beginPath(),n.moveTo(c,d)),p=h=!1):(e.lineTo(c,d),E&&n.lineTo(c,d),0==f%500&&(e.stroke(),e.beginPath(),e.moveTo(c,d),E&&(n.stroke(),n.beginPath(),n.moveTo(c,d)))),0<s[f].markerSize||0<o.markerSize){var m=o.getMarkerProperties(f,c,d,e);i.push(m),(!o.maxWidthInX||m.size>o.maxWidthInX)&&(o.maxWidthInX=m.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),g=l(g),E&&i.push({x:c,y:d,ctx:n,type:m.type,size:m.size,color:g,borderColor:g,borderThickness:m.borderThickness})}(s[f].indexLabel||o.indexLabel)&&this._indexLabels.push({chartType:"line",dataPoint:s[f],dataSeries:o,point:{x:c,y:d},color:u})}e.stroke(),E&&n.stroke()}}V.drawMarkers(i),e.restore(),e.beginPath(),E&&n.beginPath()}},v.prototype.renderStepLine=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx;e.save();var i=this.plotArea;e.beginPath(),e.rect(i.x1,i.y1,i.width,i.height),e.clip();i=[];for(var r=0;r<t.dataSeriesIndexes.length;r++){var a=t.dataSeriesIndexes[r],o=this.data[a];e.lineWidth=o.lineThickness;var s=o.dataPoints,u=o.id;this._eventManager.objectMap[u]={objectType:"dataSeries",dataSeriesIndex:a},u=l(u),n.strokeStyle=u,n.lineWidth=0<o.lineThickness?Math.max(o.lineThickness,4):0,u=o._colorSet[0],e.strokeStyle=u;var c,d,h=!0,f=0;if(e.beginPath(),0<s.length){var p=!1;for(f=0;f<s.length;f++)if(c=s[f].getTime?s[f].x.getTime():s[f].x,!(c<t.axisX.dataInfo.viewPortMin||c>t.axisX.dataInfo.viewPortMax))if("number"!=typeof s[f].y)0<f&&(e.stroke(),E&&n.stroke()),p=!0;else{var g=d;c=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(c-t.axisX.conversionParameters.minimum)+.5<<0,d=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(s[f].y-t.axisY.conversionParameters.minimum)+.5<<0;var m=o.dataPointIds[f];this._eventManager.objectMap[m]={id:m,objectType:"dataPoint",dataSeriesIndex:a,dataPointIndex:f,x1:c,y1:d},h||p?(e.beginPath(),e.moveTo(c,d),E&&(n.beginPath(),n.moveTo(c,d)),p=h=!1):(e.lineTo(c,g),E&&n.lineTo(c,g),e.lineTo(c,d),E&&n.lineTo(c,d),0==f%500&&(e.stroke(),e.beginPath(),e.moveTo(c,d),E&&(n.stroke(),n.beginPath(),n.moveTo(c,d)))),(0<s[f].markerSize||0<o.markerSize)&&(g=o.getMarkerProperties(f,c,d,e),i.push(g),(!o.maxWidthInX||g.size>o.maxWidthInX)&&(o.maxWidthInX=g.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),m=l(m),E&&i.push({x:c,y:d,ctx:n,type:g.type,size:g.size,color:m,borderColor:m,borderThickness:g.borderThickness})),(s[f].indexLabel||o.indexLabel)&&this._indexLabels.push({chartType:"stepLine",dataPoint:s[f],dataSeries:o,point:{x:c,y:d},color:u})}e.stroke(),E&&n.stroke()}}V.drawMarkers(i),e.restore(),e.beginPath(),E&&n.beginPath()}},v.prototype.renderSpline=function(t){function e(t){if(0<(t=y(t,2)).length){n.beginPath(),E&&i.beginPath(),n.moveTo(t[0].x,t[0].y),E&&i.moveTo(t[0].x,t[0].y);for(var e=0;e<t.length-3;e+=3)n.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),E&&i.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),0<e&&0==e%3e3&&(n.stroke(),n.beginPath(),n.moveTo(t[e+3].x,t[e+3].y),E&&(i.stroke(),i.beginPath(),i.moveTo(t[e+3].x,t[e+3].y)));n.stroke(),E&&i.stroke()}}var n=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx;n.save();var r=this.plotArea;n.beginPath(),n.rect(r.x1,r.y1,r.width,r.height),n.clip();r=[];for(var a=0;a<t.dataSeriesIndexes.length;a++){var o=t.dataSeriesIndexes[a],s=this.data[o];n.lineWidth=s.lineThickness;var u=s.dataPoints,c=s.id;this._eventManager.objectMap[c]={objectType:"dataSeries",dataSeriesIndex:o},c=l(c),i.strokeStyle=c,i.lineWidth=0<s.lineThickness?Math.max(s.lineThickness,4):0,c=s._colorSet[0],n.strokeStyle=c;var d,h,f=0,p=[];if(n.beginPath(),0<u.length)for(f=0;f<u.length;f++)if(d=u[f].getTime?u[f].x.getTime():u[f].x,!(d<t.axisX.dataInfo.viewPortMin||d>t.axisX.dataInfo.viewPortMax))if("number"!=typeof u[f].y)0<f&&(e(p),p=[]);else{d=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(d-t.axisX.conversionParameters.minimum)+.5<<0,h=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(u[f].y-t.axisY.conversionParameters.minimum)+.5<<0;var g=s.dataPointIds[f];if(this._eventManager.objectMap[g]={id:g,objectType:"dataPoint",dataSeriesIndex:o,dataPointIndex:f,x1:d,y1:h},p[p.length]={x:d,y:h},0<u[f].markerSize||0<s.markerSize){var m=s.getMarkerProperties(f,d,h,n);r.push(m),(!s.maxWidthInX||m.size>s.maxWidthInX)&&(s.maxWidthInX=m.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),g=l(g),E&&r.push({x:d,y:h,ctx:i,type:m.type,size:m.size,color:g,borderColor:g,borderThickness:m.borderThickness})}(u[f].indexLabel||s.indexLabel)&&this._indexLabels.push({chartType:"spline",dataPoint:u[f],dataSeries:s,point:{x:d,y:h},color:c})}e(p)}V.drawMarkers(r),n.restore(),n.beginPath(),E&&i.beginPath()}};var H=function(t,e,n,i,r,a,o,s,l,u){var c=15<i-e&&15<r-n?8:.35*Math.min(i-e,r-n);t.beginPath(),t.moveTo(e,n),t.save(),t.fillStyle=a,t.fillRect(e,n,i-e,r-n),t.restore(),!0===o&&(t.save(),t.beginPath(),t.moveTo(e,n),t.lineTo(e+c,n+c),t.lineTo(i-c,n+c),t.lineTo(i,n),t.closePath(),o=t.createLinearGradient((i+e)/2,n+c,(i+e)/2,n),o.addColorStop(0,a),o.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=o,t.fill(),t.restore()),!0===s&&(t.save(),t.beginPath(),t.moveTo(e,r),t.lineTo(e+c,r-c),t.lineTo(i-c,r-c),t.lineTo(i,r),t.closePath(),o=t.createLinearGradient((i+e)/2,r-c,(i+e)/2,r),o.addColorStop(0,a),o.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=o,t.fill(),t.restore()),!0===l&&(t.save(),t.beginPath(),t.moveTo(e,n),t.lineTo(e+c,n+c),t.lineTo(e+c,r-c),t.lineTo(e,r),t.closePath(),o=t.createLinearGradient(e+c,(r+n)/2,e,(r+n)/2),o.addColorStop(0,a),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=o,t.fill(),t.restore()),!0===u&&(t.save(),t.beginPath(),t.moveTo(i,n),t.lineTo(i-c,n+c),t.lineTo(i-c,r-c),t.lineTo(i,r),o=t.createLinearGradient(i-c,(r+n)/2,i,(r+n)/2),o.addColorStop(0,a),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=o,o.addColorStop(0,a),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=o,t.fill(),t.closePath(),t.restore())};v.prototype.renderColumn=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i,r,a=null,o=this.plotArea,s=0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,c=(s=Math.min(.15*this.width,this.plotArea.width/t.plotType.totalDataSeries*.9)<<0,t.axisX.dataInfo.minDiff),d=o.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(c)/t.plotType.totalDataSeries*.9<<0;for(d>s?d=s:1/0===c?d=s:1>d&&(d=1),e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(o.x1,o.y1,o.width,o.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),o=0;o<t.dataSeriesIndexes.length;o++){c=t.dataSeriesIndexes[o];var h=this.data[c],f=h.dataPoints;if(h.maxWidthInX=d/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<f.length){var p=!!(5<d&&h.bevelEnabled);for(s=0;s<f.length;s++)if(r=f[s].getTime?f[s].x.getTime():f[s].x,!(r<t.axisX.dataInfo.viewPortMin||r>t.axisX.dataInfo.viewPortMax)&&"number"==typeof f[s].y){n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(r-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(f[s].y-t.axisY.conversionParameters.minimum)+.5<<0;var g,m=(n=n-t.plotType.totalDataSeries*d/2+(t.previousDataSeriesCount+o)*d<<0)+d<<0;0<=f[s].y?g=u:(g=i,i=u),i>g&&(g=i=g),a=f[s].color?f[s].color:h._colorSet[s%h._colorSet.length],H(e,n,i,m,g,a,p&&0<=f[s].y,0>f[s].y&&p,!1,!1),a=h.dataPointIds[s],this._eventManager.objectMap[a]={id:a,objectType:"dataPoint",dataSeriesIndex:c,dataPointIndex:s,x1:n,y1:i,x2:m,y2:g},a=l(a),E&&H(this._eventManager.ghostCtx,n,i,m,g,a,!1,!1,!1,!1),(f[s].indexLabel||h.indexLabel)&&this._indexLabels.push({chartType:"column",dataPoint:f[s],dataSeries:h,point:{x:n+(m-n)/2,y:0<=f[s].y?i:g},bounds:{x1:n,y1:Math.min(i,g),x2:m,y2:Math.max(i,g)},color:a})}}}e.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderStackedColumn=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i=null,r=this.plotArea,a=[],o=[],s=0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,c=(s=.15*this.width<<0,t.axisX.dataInfo.minDiff),d=r.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(c)/t.plotType.plotUnits.length*.9<<0;for(d>s?d=s:1/0===c?d=s:1>d&&(d=1),e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),c=0;c<t.dataSeriesIndexes.length;c++){var h=t.dataSeriesIndexes[c],f=this.data[h],p=f.dataPoints;if(f.maxWidthInX=d/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<p.length){var g=!!(5<d&&f.bevelEnabled);for(e.strokeStyle="#4572A7 ",s=0;s<p.length;s++)if(i=p[s].x.getTime?p[s].x.getTime():p[s].x,!(i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[s].y){r=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(i-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(p[s].y-t.axisY.conversionParameters.minimum)+.5<<0;var m,v=r-t.plotType.plotUnits.length*d/2+t.index*d<<0,y=v+d<<0;if(0<=p[s].y){var b=a[i]?a[i]:0;n-=b,m=u-b,a[i]=b+(m-n)}else b=o[i]?o[i]:0,m=n+b,n=u+b,o[i]=b+(m-n);i=p[s].color?p[s].color:f._colorSet[s%f._colorSet.length],H(e,v,n,y,m,i,g&&0<=p[s].y,0>p[s].y&&g,!1,!1),i=f.dataPointIds[s],this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:s,x1:v,y1:n,x2:y,y2:m},i=l(i),E&&H(this._eventManager.ghostCtx,v,n,y,m,i,!1,!1,!1,!1),(p[s].indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:p[s],dataSeries:f,point:{x:r,y:0<=p[s].y?n:m},bounds:{x1:v,y1:Math.min(n,m),x2:y,y2:Math.max(n,m)},color:i})}}}e.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderStackedColumn100=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i=null,r=this.plotArea,a=[],o=[],s=0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,c=(s=.15*this.width<<0,t.axisX.dataInfo.minDiff),d=r.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(c)/t.plotType.plotUnits.length*.9<<0;for(d>s?d=s:1/0===c?d=s:1>d&&(d=1),e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),c=0;c<t.dataSeriesIndexes.length;c++){var h=t.dataSeriesIndexes[c],f=this.data[h],p=f.dataPoints;if(f.maxWidthInX=d/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<p.length){var g=!!(5<d&&f.bevelEnabled);for(s=0;s<p.length;s++)if(i=p[s].x.getTime?p[s].x.getTime():p[s].x,!(i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[s].y){r=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(i-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*((0!==t.dataPointYSums[i]?p[s].y/t.dataPointYSums[i]*100:0)-t.axisY.conversionParameters.minimum)+.5<<0;var m,v=r-t.plotType.plotUnits.length*d/2+t.index*d<<0,y=v+d<<0;if(0<=p[s].y){var b=a[i]?a[i]:0;n-=b,m=u-b,a[i]=b+(m-n)}else b=o[i]?o[i]:0,m=n+b,n=u+b,o[i]=b+(m-n);i=p[s].color?p[s].color:f._colorSet[s%f._colorSet.length],H(e,v,n,y,m,i,g&&0<=p[s].y,0>p[s].y&&g,!1,!1),i=f.dataPointIds[s],this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:s,x1:v,y1:n,x2:y,y2:m},i=l(i),E&&H(this._eventManager.ghostCtx,v,n,y,m,i,!1,!1,!1,!1),(p[s].indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:p[s],dataSeries:f,point:{x:r,y:0<=p[s].y?n:m},bounds:{x1:v,y1:Math.min(n,m),x2:y,y2:Math.max(n,m)},color:i})}}}e.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderBar=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i,r,a=null,o=this.plotArea,s=0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,c=(s=Math.min(.15*this.height,this.plotArea.height/t.plotType.totalDataSeries*.9)<<0,t.axisX.dataInfo.minDiff),d=o.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(c)/t.plotType.totalDataSeries*.9<<0;for(d>s?d=s:1/0===c?d=s:1>d&&(d=1),e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(o.x1,o.y1,o.width,o.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),o=0;o<t.dataSeriesIndexes.length;o++){c=t.dataSeriesIndexes[o];var h=this.data[c],f=h.dataPoints;if(h.maxWidthInX=d/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<f.length){var p=!!(5<d&&h.bevelEnabled);for(e.strokeStyle="#4572A7 ",s=0;s<f.length;s++)if(r=f[s].getTime?f[s].x.getTime():f[s].x,!(r<t.axisX.dataInfo.viewPortMin||r>t.axisX.dataInfo.viewPortMax)&&"number"==typeof f[s].y){i=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(r-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(f[s].y-t.axisY.conversionParameters.minimum)+.5<<0;var g,m=(i=i-t.plotType.totalDataSeries*d/2+(t.previousDataSeriesCount+o)*d<<0)+d<<0;0<=f[s].y?g=u:(g=n,n=u),a=f[s].color?f[s].color:h._colorSet[s%h._colorSet.length],H(e,g,i,n,m,a,p,!1,!1,!1),a=h.dataPointIds[s],this._eventManager.objectMap[a]={id:a,objectType:"dataPoint",dataSeriesIndex:c,dataPointIndex:s,x1:g,y1:i,x2:n,y2:m},a=l(a),E&&H(this._eventManager.ghostCtx,g,i,n,m,a,!1,!1,!1,!1),this._indexLabels.push({chartType:"bar",dataPoint:f[s],dataSeries:h,point:{x:0<=f[s].y?n:g,y:i+(m-i)/2},bounds:{x1:Math.min(g,n),y1:i,x2:Math.max(g,n),y2:m},color:a})}}}e.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderStackedBar=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i=null,r=this.plotArea,a=[],o=[],s=0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,c=(s=.15*this.width<<0,t.axisX.dataInfo.minDiff),d=r.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(c)/t.plotType.plotUnits.length*.9<<0;for(d>s?d=s:1/0===c?d=s:1>d&&(d=1),e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),c=0;c<t.dataSeriesIndexes.length;c++){var h=t.dataSeriesIndexes[c],f=this.data[h],p=f.dataPoints;if(f.maxWidthInX=d/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<p.length){var g=!!(5<d&&f.bevelEnabled);for(e.strokeStyle="#4572A7 ",s=0;s<p.length;s++)if(i=p[s].x.getTime?p[s].x.getTime():p[s].x,!(i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[s].y){r=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(i-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(p[s].y-t.axisY.conversionParameters.minimum)+.5<<0;var m,v=r-t.plotType.plotUnits.length*d/2+t.index*d<<0,y=v+d<<0;if(0<=p[s].y){var b=a[i]?a[i]:0;m=u+b,n+=b,a[i]=b+(n-m)}else b=o[i]?o[i]:0,m=n-b,n=u-b,o[i]=b+(n-m);i=p[s].color?p[s].color:f._colorSet[s%f._colorSet.length],H(e,m,v,n,y,i,g,!1,!1,!1),i=f.dataPointIds[s],this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:s,x1:m,y1:v,x2:n,y2:y},i=l(i),E&&H(this._eventManager.ghostCtx,m,v,n,y,i,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar",dataPoint:p[s],dataSeries:f,point:{x:0<=p[s].y?n:m,y:r},bounds:{x1:Math.min(m,n),y1:v,x2:Math.max(m,n),y2:y},color:i})}}}e.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderStackedBar100=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i=null,r=this.plotArea,a=[],o=[],s=0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,c=(s=.15*this.width<<0,t.axisX.dataInfo.minDiff),d=r.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(c)/t.plotType.plotUnits.length*.9<<0;for(d>s?d=s:1/0===c?d=s:1>d&&(d=1),e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),c=0;c<t.dataSeriesIndexes.length;c++){var h=t.dataSeriesIndexes[c],f=this.data[h],p=f.dataPoints;if(f.maxWidthInX=d/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<p.length){var g=!!(5<d&&f.bevelEnabled);for(e.strokeStyle="#4572A7 ",s=0;s<p.length;s++)if(i=p[s].x.getTime?p[s].x.getTime():p[s].x,!(i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[s].y){r=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(i-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*((0!==t.dataPointYSums[i]?p[s].y/t.dataPointYSums[i]*100:0)-t.axisY.conversionParameters.minimum)+.5<<0;var m,v=r-t.plotType.plotUnits.length*d/2+t.index*d<<0,y=v+d<<0;if(0<=p[s].y){var b=a[i]?a[i]:0;m=u+b,n+=b,a[i]=b+(n-m)}else b=o[i]?o[i]:0,m=n-b,n=u-b,o[i]=b+(n-m);i=p[s].color?p[s].color:f._colorSet[s%f._colorSet.length],H(e,m,v,n,y,i,g,!1,!1,!1),i=f.dataPointIds[s],this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:s,x1:m,y1:v,x2:n,y2:y},i=l(i),E&&H(this._eventManager.ghostCtx,m,v,n,y,i,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar100",dataPoint:p[s],dataSeries:f,point:{x:0<=p[s].y?n:m,y:r},bounds:{x1:Math.min(m,n),y1:v,x2:Math.max(m,n),y2:y},color:i})}}}e.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderArea=function(t){function e(){b&&(0>=t.axisY.minimum&&0<=t.axisY.maximum?g=y:0>t.axisY.maximum?g=a.y1:0<t.axisY.minimum&&(g=r.y2),n.lineTo(h,g),n.lineTo(b.x,g),n.closePath(),n.fill(),E&&(i.lineTo(h,g),i.lineTo(b.x,g),i.closePath(),i.fill()),n.beginPath(),n.moveTo(h,f),i.beginPath(),i.moveTo(h,f),b={x:h,y:f})}var n=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx,r=t.axisX.lineCoordinates,a=t.axisY.lineCoordinates,o=[],s=this.plotArea;for(n.save(),E&&i.save(),n.beginPath(),n.rect(s.x1,s.y1,s.width,s.height),n.clip(),E&&(i.beginPath(),i.rect(s.x1,s.y1,s.width,s.height),i.clip()),s=0;s<t.dataSeriesIndexes.length;s++){var u=t.dataSeriesIndexes[s],c=this.data[u],d=c.dataPoints;o=c.id;this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:u},o=l(o),i.fillStyle=o;o=[];var h,f,p,g,m=!0,v=0,y=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)+.5<<0,b=null;if(0<d.length){var x=c._colorSet[v%c._colorSet.length];n.fillStyle=x;for(var w=!0;v<d.length;v++)if(p=d[v].x.getTime?d[v].x.getTime():d[v].x,!(p<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax))if("number"!=typeof d[v].y)e(),w=!0;else{h=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(p-t.axisX.conversionParameters.minimum)+.5<<0,f=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(d[v].y-t.axisY.conversionParameters.minimum)+.5<<0,m||w?(n.beginPath(),n.moveTo(h,f),b={x:h,y:f},E&&(i.beginPath(),i.moveTo(h,f)),w=m=!1):(n.lineTo(h,f),E&&i.lineTo(h,f),0==v%250&&e());var M=c.dataPointIds[v];this._eventManager.objectMap[M]={id:M,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:v,x1:h,y1:f},0!==d[v].markerSize&&(0<d[v].markerSize||0<c.markerSize)&&(p=c.getMarkerProperties(v,h,f,n),o.push(p),(!c.maxWidthInX||p.size>c.maxWidthInX)&&(c.maxWidthInX=p.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),M=l(M),E&&o.push({x:h,y:f,ctx:i,type:p.type,size:p.size,color:M,borderColor:M,borderThickness:p.borderThickness})),(d[v].indexLabel||c.indexLabel)&&this._indexLabels.push({chartType:"area",dataPoint:d[v],dataSeries:c,point:{x:h,y:f},color:x})}e(),V.drawMarkers(o)}}n.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderSplineArea=function(t){function e(){var e=y(b,2);if(0<e.length){n.beginPath(),n.moveTo(e[0].x,e[0].y),E&&(i.beginPath(),i.moveTo(e[0].x,e[0].y));for(var o=0;o<e.length-3;o+=3)n.bezierCurveTo(e[o+1].x,e[o+1].y,e[o+2].x,e[o+2].y,e[o+3].x,e[o+3].y),E&&i.bezierCurveTo(e[o+1].x,e[o+1].y,e[o+2].x,e[o+2].y,e[o+3].x,e[o+3].y);0>=t.axisY.minimum&&0<=t.axisY.maximum?p=m:0>t.axisY.maximum?p=a.y1:0<t.axisY.minimum&&(p=r.y2),v={x:e[0].x,y:e[0].y},n.lineTo(e[e.length-1].x,p),n.lineTo(v.x,p),n.closePath(),n.fill(),E&&(i.lineTo(e[e.length-1].x,p),i.lineTo(v.x,p),i.closePath(),i.fill())}}var n=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx,r=t.axisX.lineCoordinates,a=t.axisY.lineCoordinates,o=[],s=this.plotArea;for(n.save(),E&&i.save(),n.beginPath(),n.rect(s.x1,s.y1,s.width,s.height),n.clip(),E&&(i.beginPath(),i.rect(s.x1,s.y1,s.width,s.height),i.clip()),s=0;s<t.dataSeriesIndexes.length;s++){var u=t.dataSeriesIndexes[s],c=this.data[u],d=c.dataPoints;o=c.id;this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:u},o=l(o),i.fillStyle=o;o=[];var h,f,p,g=0,m=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)+.5<<0,v=null,b=[];if(0<d.length){for(color=c._colorSet[g%c._colorSet.length],n.fillStyle=color;g<d.length;g++)if(h=d[g].x.getTime?d[g].x.getTime():d[g].x,!(h<t.axisX.dataInfo.viewPortMin||h>t.axisX.dataInfo.viewPortMax))if("number"!=typeof d[g].y)0<g&&(e(),b=[]);else{h=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(h-t.axisX.conversionParameters.minimum)+.5<<0,f=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(d[g].y-t.axisY.conversionParameters.minimum)+.5<<0;var x=c.dataPointIds[g];if(this._eventManager.objectMap[x]={id:x,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:g,x1:h,y1:f},b[b.length]={x:h,y:f},0!==d[g].markerSize&&(0<d[g].markerSize||0<c.markerSize)){var w=c.getMarkerProperties(g,h,f,n);o.push(w),(!c.maxWidthInX||w.size>c.maxWidthInX)&&(c.maxWidthInX=w.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),x=l(x),E&&o.push({x:h,y:f,ctx:i,type:w.type,size:w.size,color:x,borderColor:x,borderThickness:w.borderThickness})}(d[g].indexLabel||c.indexLabel)&&this._indexLabels.push({chartType:"splineArea",dataPoint:d[g],dataSeries:c,point:{x:h,y:f},color:color})}e(),V.drawMarkers(o)}}n.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderStepArea=function(t){function e(){b&&(0>=t.axisY.minimum&&0<=t.axisY.maximum?g=y:0>t.axisY.maximum?g=a.y1:0<t.axisY.minimum&&(g=r.y2),n.lineTo(h,g),n.lineTo(b.x,g),n.closePath(),n.fill(),E&&(i.lineTo(h,g),i.lineTo(b.x,g),i.closePath(),i.fill()),n.beginPath(),n.moveTo(h,f),i.beginPath(),i.moveTo(h,f),b={x:h,y:f})}var n=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx,r=t.axisX.lineCoordinates,a=t.axisY.lineCoordinates,o=[],s=this.plotArea;for(n.save(),E&&i.save(),n.beginPath(),n.rect(s.x1,s.y1,s.width,s.height),n.clip(),E&&(i.beginPath(),i.rect(s.x1,s.y1,s.width,s.height),i.clip()),s=0;s<t.dataSeriesIndexes.length;s++){var u=t.dataSeriesIndexes[s],c=this.data[u],d=c.dataPoints;o=c.id;this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:u},o=l(o),i.fillStyle=o;o=[];var h,f,p,g,m=!0,v=0,y=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)+.5<<0,b=null,x=!1;if(0<d.length){var w=c._colorSet[v%c._colorSet.length];for(n.fillStyle=w;v<d.length;v++)if(p=d[v].x.getTime?d[v].x.getTime():d[v].x,!(p<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax)){var M=f;"number"!=typeof d[v].y?(e(),x=!0):(h=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(p-t.axisX.conversionParameters.minimum)+.5<<0,f=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(d[v].y-t.axisY.conversionParameters.minimum)+.5<<0,m||x?(n.beginPath(),n.moveTo(h,f),b={x:h,y:f},E&&(i.beginPath(),i.moveTo(h,f)),x=m=!1):(n.lineTo(h,M),E&&i.lineTo(h,M),n.lineTo(h,f),E&&i.lineTo(h,f),0==v%250&&(0>=t.axisY.minimum&&0<=t.axisY.maximum?g=y:0>t.axisY.maximum?g=a.y1:0<t.axisY.minimum&&(g=r.y2),n.lineTo(h,g),n.lineTo(b.x,g),n.closePath(),n.fill(),n.beginPath(),n.moveTo(h,f),E&&(i.lineTo(h,g),i.lineTo(b.x,g),i.closePath(),i.fill(),i.beginPath(),i.moveTo(h,f)),b={x:h,y:f})),M=c.dataPointIds[v],this._eventManager.objectMap[M]={id:M,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:v,x1:h,y1:f},0!==d[v].markerSize&&(0<d[v].markerSize||0<c.markerSize)&&(p=c.getMarkerProperties(v,h,f,n),o.push(p),(!c.maxWidthInX||p.size>c.maxWidthInX)&&(c.maxWidthInX=p.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),M=l(M),E&&o.push({x:h,y:f,ctx:i,type:p.type,size:p.size,color:M,borderColor:M,borderThickness:p.borderThickness})),(d[v].indexLabel||c.indexLabel)&&this._indexLabels.push({chartType:"stepArea",dataPoint:d[v],dataSeries:c,point:{x:h,y:f},color:w}))}e(),V.drawMarkers(o)}}n.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderStackedArea=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i,r,a=null,s=[],u=this.plotArea,c=[],d=[],h=0,f=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,p=this._eventManager.ghostCtx;for(E&&p.beginPath(),e.save(),E&&p.save(),e.beginPath(),e.rect(u.x1,u.y1,u.width,u.height),e.clip(),E&&(p.beginPath(),p.rect(u.x1,u.y1,u.width,u.height),p.clip()),xValuePresent=[],u=0;u<t.dataSeriesIndexes.length;u++){var g=t.dataSeriesIndexes[u],m=(v=this.data[g]).dataPoints;for(v.dataPointIndexes=[],h=0;h<m.length;h++)g=m[h].x.getTime?m[h].x.getTime():m[h].x,v.dataPointIndexes[g]=h,xValuePresent[g]||(d.push(g),xValuePresent[g]=!0);d.sort(o)}for(u=0;u<t.dataSeriesIndexes.length;u++){g=t.dataSeriesIndexes[u],m=(v=this.data[g]).dataPoints;var v,y=!0,b=[];h=v.id;if(this._eventManager.objectMap[h]={objectType:"dataSeries",dataSeriesIndex:g},h=l(h),p.fillStyle=h,0<d.length){for(a=v._colorSet[0],e.fillStyle=a,h=0;h<d.length;h++){r=d[h];var x=null;x=0<=v.dataPointIndexes[r]?m[v.dataPointIndexes[r]]:{x:r,y:0};if(!(r<t.axisX.dataInfo.viewPortMin||r>t.axisX.dataInfo.viewPortMax)&&"number"==typeof x.y){n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(r-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(x.y-t.axisY.conversionParameters.minimum)+.5<<0;var w=c[r]?c[r]:0;if(i-=w,b.push({x:n,y:f-w}),c[r]=f-i,y)e.beginPath(),e.moveTo(n,i),E&&(p.beginPath(),p.moveTo(n,i)),y=!1;else if(e.lineTo(n,i),E&&p.lineTo(n,i),0==h%250){for(;0<b.length;){var M=b.pop();e.lineTo(M.x,M.y),E&&p.lineTo(M.x,M.y)}e.closePath(),e.fill(),e.beginPath(),e.moveTo(n,i),E&&(p.closePath(),p.fill(),p.beginPath(),p.moveTo(n,i)),b.push({x:n,y:f-w})}if(0<=v.dataPointIndexes[r]){var k=v.dataPointIds[v.dataPointIndexes[r]];this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:v.dataPointIndexes[r],x1:n,y1:i}}0<=v.dataPointIndexes[r]&&0!==x.markerSize&&(0<x.markerSize||0<v.markerSize)&&(r=v.getMarkerProperties(h,n,i,e),s.push(r),(!v.maxWidthInX||r.size>v.maxWidthInX)&&(v.maxWidthInX=r.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),markerColor=l(k),E&&s.push({x:n,y:i,ctx:p,type:r.type,size:r.size,color:markerColor,borderColor:markerColor,borderThickness:r.borderThickness})),(x.indexLabel||v.indexLabel)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:x,dataSeries:v,point:{x:n,y:i},color:a})}}for(;0<b.length;)M=b.pop(),e.lineTo(M.x,M.y),E&&p.lineTo(M.x,M.y);e.closePath(),e.fill(),e.beginPath(),e.moveTo(n,i),E&&(p.closePath(),p.fill(),p.beginPath(),p.moveTo(n,i))}delete v.dataPointIndexes}V.drawMarkers(s),e.restore(),E&&p.restore()}},v.prototype.renderStackedArea100=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n,i,r,a=null,s=this.plotArea,u=[],c=[],d=[],h=0,f=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,p=.15*this.width<<0,g=t.axisX.dataInfo.minDiff,m=(g=.9*s.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(g)<<0,this._eventManager.ghostCtx);for(e.save(),E&&m.save(),e.beginPath(),e.rect(s.x1,s.y1,s.width,s.height),e.clip(),E&&(m.beginPath(),m.rect(s.x1,s.y1,s.width,s.height),m.clip()),xValuePresent=[],s=0;s<t.dataSeriesIndexes.length;s++){var v=t.dataSeriesIndexes[s],y=(b=this.data[v]).dataPoints;for(b.dataPointIndexes=[],h=0;h<y.length;h++)v=y[h].x.getTime?y[h].x.getTime():y[h].x,b.dataPointIndexes[v]=h,xValuePresent[v]||(d.push(v),xValuePresent[v]=!0);d.sort(o)}for(s=0;s<t.dataSeriesIndexes.length;s++){v=t.dataSeriesIndexes[s],y=(b=this.data[v]).dataPoints;var b,x=!0;a=b.id;this._eventManager.objectMap[a]={objectType:"dataSeries",dataSeriesIndex:v},a=l(a),m.fillStyle=a,1==y.length&&(g=p),1>g?g=1:g>p&&(g=p);var w=[];if(0<d.length){for(a=b._colorSet[h%b._colorSet.length],e.fillStyle=a,h=0;h<d.length;h++){r=d[h];var M=null;M=0<=b.dataPointIndexes[r]?y[b.dataPointIndexes[r]]:{x:r,y:0};if(!(r<t.axisX.dataInfo.viewPortMin||r>t.axisX.dataInfo.viewPortMax)&&"number"==typeof M.y){i=0!==t.dataPointYSums[r]?M.y/t.dataPointYSums[r]*100:0,n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(r-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(i-t.axisY.conversionParameters.minimum)+.5<<0;var k=c[r]?c[r]:0;if(i-=k,w.push({x:n,y:f-k}),c[r]=f-i,x)e.beginPath(),e.moveTo(n,i),E&&(m.beginPath(),m.moveTo(n,i)),x=!1;else if(e.lineTo(n,i),E&&m.lineTo(n,i),0==h%250){for(;0<w.length;){var _=w.pop();e.lineTo(_.x,_.y),E&&m.lineTo(_.x,_.y)}e.closePath(),e.fill(),e.beginPath(),e.moveTo(n,i),E&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(n,i)),w.push({x:n,y:f-k})}if(0<=b.dataPointIndexes[r]){var C=b.dataPointIds[b.dataPointIndexes[r]];this._eventManager.objectMap[C]={id:C,objectType:"dataPoint",dataSeriesIndex:v,dataPointIndex:b.dataPointIndexes[r],x1:n,y1:i}}0<=b.dataPointIndexes[r]&&0!==M.markerSize&&(0<M.markerSize||0<b.markerSize)&&(r=b.getMarkerProperties(h,n,i,e),u.push(r),(!b.maxWidthInX||r.size>b.maxWidthInX)&&(b.maxWidthInX=r.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),markerColor=l(C),E&&u.push({x:n,y:i,ctx:m,type:r.type,size:r.size,color:markerColor,borderColor:markerColor,borderThickness:r.borderThickness})),(M.indexLabel||b.indexLabel)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:M,dataSeries:b,point:{x:n,y:i},color:a})}}for(;0<w.length;)_=w.pop(),e.lineTo(_.x,_.y),E&&m.lineTo(_.x,_.y);e.closePath(),e.fill(),e.beginPath(),e.moveTo(n,i),E&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(n,i))}delete b.dataPointIndexes}V.drawMarkers(u),e.restore(),E&&m.restore()}},v.prototype.renderBubble=function(t){var e=this.plotArea.ctx;if(!(0>=(s=t.dataSeriesIndexes.length))){var n,i,r=this.plotArea,a=0,o=.15*this.width<<0,s=(a=t.axisX.dataInfo.minDiff,r.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(a)/s*.9<<0);e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var u=-1/0,c=1/0,d=0;d<t.dataSeriesIndexes.length;d++){var h=t.dataSeriesIndexes[d],f=this.data[h],p=f.dataPoints,g=0;for(a=0;a<p.length;a++)n=n=p[a].getTime?p[a].x.getTime():p[a].x,n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax||void 0===p[a].z||(g=p[a].z,g>u&&(u=g),g<c&&(c=g))}var m=25*Math.PI;for(r=Math.max(Math.pow(.25*Math.min(r.height,r.width)/2,2)*Math.PI,m),d=0;d<t.dataSeriesIndexes.length;d++)if(h=t.dataSeriesIndexes[d],f=this.data[h],p=f.dataPoints,1==p.length&&(s=o),1>s?s=1:s>o&&(s=o),0<p.length)for(e.strokeStyle="#4572A7 ",a=0;a<p.length;a++)if(n=n=p[a].getTime?p[a].x.getTime():p[a].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[a].y){n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(p[a].y-t.axisY.conversionParameters.minimum)+.5<<0;g=p[a].z;var v=2*Math.max(Math.sqrt((u===c?r/2:m+(r-m)/(u-c)*(g-c))/Math.PI)<<0,1);(g=f.getMarkerProperties(a,e)).size=v,V.drawMarker(n,i,e,g.type,g.size,g.color,g.borderColor,g.borderThickness),(!f.maxWidthInX||g.size>f.maxWidthInX)&&(f.maxWidthInX=g.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit));var y=f.dataPointIds[a];this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:a,x1:n,y1:i,size:v},v=l(y),E&&V.drawMarker(n,i,this._eventManager.ghostCtx,g.type,g.size,v,v,g.borderThickness)}e.restore(),E&&this._eventManager.ghostCtx.restore()}},v.prototype.renderScatter=function(t){var e=this.plotArea.ctx;if(!(0>=(s=t.dataSeriesIndexes.length))){var n,i,r=this.plotArea,a=0,o=.15*this.width<<0,s=(a=t.axisX.dataInfo.minDiff,r.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(a)/s*.9<<0);e.save(),E&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),E&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var u=0;u<t.dataSeriesIndexes.length;u++){var c=t.dataSeriesIndexes[u],d=this.data[c],h=d.dataPoints;if(1==h.length&&(s=o),1>s?s=1:s>o&&(s=o),0<h.length){e.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(r.height,r.width)/2,2);var f=0,p=0;for(a=0;a<h.length;a++)if(n=n=h[a].getTime?h[a].x.getTime():h[a].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof h[a].y){n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(h[a].y-t.axisY.conversionParameters.minimum)+.5<<0;var g=d.getMarkerProperties(a,n,i,e);V.drawMarker(g.x,g.y,g.ctx,g.type,g.size,g.color,g.color,g.thickness),(!d.maxWidthInX||g.size>d.maxWidthInX)&&(d.maxWidthInX=g.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),Math.sqrt((f-n)*(f-n)+(p-i)*(p-i))<Math.min(g.size,5)||(f=d.dataPointIds[a],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:c,dataPointIndex:a,x1:n,y1:i},f=l(f),E&&V.drawMarker(g.x,g.y,this._eventManager.ghostCtx,g.type,g.size,f,f,g.borderThickness),f=n,p=i)}}}e.restore(),E&&this._eventManager.ghostCtx.restore()}};var Y=function(t,e,n,i,r,a,o){t.save(),"pie"===r?(t.beginPath(),t.moveTo(e.x,e.y),t.arc(e.x,e.y,n,a,o,!1),t.fillStyle=i,t.strokeStyle="white",t.lineWidth=2,t.closePath(),t.fill()):"doughnut"===r&&(t.beginPath(),t.arc(e.x,e.y,n,a,o,!1),t.arc(e.x,e.y,.6*n,o,a,!0),t.closePath(),t.fillStyle=i,t.strokeStyle="white",t.lineWidth=2,t.fill()),t.restore()};v.prototype.renderPie=function(t){function e(t){f.frame=0,f.maxFrames=t||1}function n(){var t=l.plotArea.ctx;if(null!==f&&f.frame<f.maxFrames){0===f.frame&&(f.prevMaxAngle=p[0].startAngle),t.clearRect(h.x1,h.y1,h.width,h.height);t=f.prevMaxAngle+2*Math.PI/f.maxFrames;for(var r=0;r<c.length;r++){var a=0===r?p[r].startAngle:o,o=a+(p[r].endAngle-p[r].startAngle),s=!1;o>t&&(o=t,s=!0);var d=c[r].color?c[r].color:u._colorSet[r%u._colorSet.length];if(o>a&&Y(l.plotArea.ctx,p[r].center,p[r].radius,d,u.type,a,o),s)break}f.frame++,f.prevMaxAngle=t,f.frame<f.maxFrames?l.animationRequestId=l.requestAnimFrame.call(window,n):(e(E?15:4),i())}}function i(){var t=l.plotArea.ctx;if(null!==f&&f.frame<f.maxFrames){for(t.clearRect(h.x1,h.y1,h.width,h.height),t=0;t<c.length;t++){var e=p[t].startAngle,n=p[t].endAngle;if(n>e){var r=.07*w*Math.cos(p[t].midAngle),a=.07*w*Math.sin(p[t].midAngle),o=!1;c[t].exploded?(Math.abs(p[t].center.x-(b.x+r))>Math.abs(.5*r/f.maxFrames)||Math.abs(p[t].center.y-(b.y+a))>Math.abs(.5*a/f.maxFrames))&&(p[t].center.x+=r/f.maxFrames,p[t].center.y+=a/f.maxFrames,o=!0):(Math.abs(p[t].center.x-b.x)>Math.abs(.5*r/f.maxFrames)||Math.abs(p[t].center.y-b.y)>Math.abs(.5*a/f.maxFrames))&&(p[t].center.x-=r/f.maxFrames,p[t].center.y-=a/f.maxFrames,o=!0),o&&(r={},r.dataSeries=u,r.dataPoint=u.dataPoints[t],r.index=t,l._toolTip.highlightObjects([r])),Y(l.plotArea.ctx,p[t].center,p[t].radius,c[t].color?c[t].color:u._colorSet[t%u._colorSet.length],u.type,e,n)}}for(f.frame++,(t=l.plotArea.ctx).fillStyle="black",t.strokeStyle="grey",t.textBaseline="middle",t.lineJoin="round",e=e=0;e<c.length;e++)n=p[e],n.indexLabelText&&(n.indexLabelTextBlock.y-=n.indexLabelTextBlock.height/2,r=0,r="left"===n.hemisphere?"outside"===u.indexLabelPlacement?-(n.indexLabelTextBlock.width+d):-n.indexLabelTextBlock.width/2:"outside"===u.indexLabelPlacement?d:-n.indexLabelTextBlock.width/2,n.indexLabelTextBlock.x+=r,n.indexLabelTextBlock.render(!0),n.indexLabelTextBlock.x-=r,n.indexLabelTextBlock.y+=n.indexLabelTextBlock.height/2,"outside"===n.indexLabelPlacement&&(r=n.center.x+w*Math.cos(n.midAngle),a=n.center.y+w*Math.sin(n.midAngle),t.strokeStyle=n.indexLabelLineColor,t.lineWidth=n.indexLabelLineThickness,t.beginPath(),t.moveTo(r,a),t.lineTo(n.indexLabelTextBlock.x,n.indexLabelTextBlock.y),t.lineTo(n.indexLabelTextBlock.x+("left"===n.hemisphere?-d:d),n.indexLabelTextBlock.y),t.stroke()),t.lineJoin="miter");f.frame<f.maxFrames&&(l.animationRequestId=l.requestAnimFrame.call(window,i))}}function r(t,e){var n=t.indexLabelTextBlock.x,i=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,r=t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2,a=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,o=e.indexLabelTextBlock.x+e.indexLabelTextBlock.width,s=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2;return!(t.indexLabelTextBlock.x+t.indexLabelTextBlock.width<e.indexLabelTextBlock.x-d||n>o+d||i>s+d||r<a-d)}function a(t,e){var n=0,i=(n=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2),r=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,a=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2;return e.indexLabelTextBlock.y>t.indexLabelTextBlock.y?r-i:n-a}function o(t){for(var e=null,n=1;n<c.length;n++){if(e=(t+n+p.length)%p.length,p[e].hemisphere!==p[t].hemisphere){e=null;break}if(p[e].indexLabelText&&e!==t&&(0>a(p[e],p[t])||("right"===p[t].hemisphere?p[e].indexLabelTextBlock.y>=p[t].indexLabelTextBlock.y:p[e].indexLabelTextBlock.y<=p[t].indexLabelTextBlock.y)))break;e=null}return e}function s(t,e){e=e||0;var n=0,i=b.y-1*M,r=b.y+1*M;if(0<=t&&t<c.length){var l=p[t];if(0>e&&l.indexLabelTextBlock.y<i||0<e&&l.indexLabelTextBlock.y>r)return 0;var u=e,d=0,h=0;h=d=d=0;for(0>u?l.indexLabelTextBlock.y-l.indexLabelTextBlock.height/2>i&&l.indexLabelTextBlock.y-l.indexLabelTextBlock.height/2+u<i&&(u=-(i-(l.indexLabelTextBlock.y-l.indexLabelTextBlock.height/2+u))):l.indexLabelTextBlock.y+l.indexLabelTextBlock.height/2<i&&l.indexLabelTextBlock.y+l.indexLabelTextBlock.height/2+u>r&&(u=l.indexLabelTextBlock.y+l.indexLabelTextBlock.height/2+u-r),u=l.indexLabelTextBlock.y+u,i=0,i="right"===l.hemisphere?b.x+Math.sqrt(Math.pow(M,2)-Math.pow(u-b.y,2)):b.x-Math.sqrt(Math.pow(M,2)-Math.pow(u-b.y,2)),h=b.x+w*Math.cos(l.midAngle),d=b.y+w*Math.sin(l.midAngle),d=Math.sqrt(Math.pow(i-h,2)+Math.pow(u-d,2)),h=Math.acos(w/M),u=(d=Math.acos((M*M+w*w-d*d)/(2*w*M)))<h?u-l.indexLabelTextBlock.y:0,i=null,r=1;r<c.length;r++){if(i=(t-r+p.length)%p.length,p[i].hemisphere!==p[t].hemisphere){i=null;break}if(p[i].indexLabelText&&p[i].hemisphere===p[t].hemisphere&&i!==t&&(0>a(p[i],p[t])||("right"===p[t].hemisphere?p[i].indexLabelTextBlock.y<=p[t].indexLabelTextBlock.y:p[i].indexLabelTextBlock.y>=p[t].indexLabelTextBlock.y)))break;i=null}h=i,d=o(t),r=i=0,0>u?(n=u,null!==(r="right"===l.hemisphere?h:d)&&(h=-u,u=l.indexLabelTextBlock.y-l.indexLabelTextBlock.height/2-(p[r].indexLabelTextBlock.y+p[r].indexLabelTextBlock.height/2),u-h<g&&(i=-h,0,r=s(r,i),+r.toFixed(y)>+i.toFixed(y)&&(n=u>g?-(u-g):-(h-(r-i)))))):0<u&&(r="right"===l.hemisphere?d:h,n=u,null!==r&&(h=u,u=p[r].indexLabelTextBlock.y-p[r].indexLabelTextBlock.height/2-(l.indexLabelTextBlock.y+l.indexLabelTextBlock.height/2),u-h<g&&(i=h,0,r=s(r,i),+r.toFixed(y)<+i.toFixed(y)&&(n=u>g?u-g:h-(i-r))))),n&&(u=l.indexLabelTextBlock.y+n,i=0,i="right"===l.hemisphere?b.x+Math.sqrt(Math.pow(M,2)-Math.pow(u-b.y,2)):b.x-Math.sqrt(Math.pow(M,2)-Math.pow(u-b.y,2)),l.midAngle>Math.PI/2-v&&l.midAngle<Math.PI/2+v?(r=(t-1+p.length)%p.length,r=p[r],h=p[(t+1+p.length)%p.length],"left"===l.hemisphere&&"right"===r.hemisphere&&i>r.indexLabelTextBlock.x?i=r.indexLabelTextBlock.x-15:"right"===l.hemisphere&&"left"===h.hemisphere&&i<h.indexLabelTextBlock.x&&(i=h.indexLabelTextBlock.x+15)):l.midAngle>3*Math.PI/2-v&&l.midAngle<3*Math.PI/2+v&&(r=(t-1+p.length)%p.length,r=p[r],h=p[(t+1+p.length)%p.length],"right"===l.hemisphere&&"left"===r.hemisphere&&i<r.indexLabelTextBlock.x?i=r.indexLabelTextBlock.x+15:"left"===l.hemisphere&&"right"===h.hemisphere&&i>h.indexLabelTextBlock.x&&(i=h.indexLabelTextBlock.x-15)),l.indexLabelTextBlock.y=u,l.indexLabelTextBlock.x=i,l.indexLabelAngle=Math.atan2(l.indexLabelTextBlock.y-b.y,l.indexLabelTextBlock.x-b.x))}return n}var l=this;if(!(0>=t.dataSeriesIndexes.length)){var u=this.data[t.dataSeriesIndexes[0]],c=u.dataPoints,d=10,h=this.plotArea,f={frame:0,maxFrames:1},p=[],g=2,m=1.3,v=20/180*Math.PI,y=6,b={x:(h.x2+h.x1)/2,y:(h.y2+h.y1)/2},w="inside"===u.indexLabelPlacement?.95*Math.min(h.width,h.height)/2:.8*Math.min(h.width,h.height)/2,M=w*m;this.pieDoughnutClickHandler=function(t){f.frame===f.maxFrames&&(t=t.dataPoint,t.exploded=!t.exploded,e(E?15:4),1<this.dataPoints.length&&i())},function(){if(u&&c){for(var t=0,e=0;e<c.length;e++)t+=Math.abs(c[e].y);var n=0,i=0,r=0,a=0;for(e=0;e<c.length;e++){var o=c[e],s=u.dataPointIds[e],d={id:s,objectType:"dataPoint",dataPointIndex:e,dataSeriesIndex:0};p.push(d);var f=o.indexLabel?o.indexLabel:u.indexLabel?u.indexLabel:o.label?o.label:u.label?u.label:"";l._eventManager.objectMap[s]=d,d.center={x:b.x,y:b.y},d.y=o.y,d.radius=w,d.indexLabelText=l.replaceKeywordsWithValue(f,o,u,e),d.indexLabelPlacement=u.indexLabelPlacement,d.indexLabelLineColor=o.indexLabelLineColor?o.indexLabelLineColor:u.indexLabelLineColor?u.indexLabelLineColor:o.color?o.color:u._colorSet[e%u._colorSet.length],d.indexLabelLineThickness=o.indexLabelLineThickness?o.indexLabelLineThickness:u.indexLabelLineThickness,d.indexLabelFontColor=o.indexLabelFontColor?o.indexLabelFontColor:u.indexLabelFontColor,d.indexLabelFontStyle=o.indexLabelFontStyle?o.indexLabelFontStyle:u.indexLabelFontStyle,d.indexLabelFontWeight=o.indexLabelFontWeight?o.indexLabelFontWeight:u.indexLabelFontWeight,d.indexLabelFontSize=o.indexLabelFontSize?o.indexLabelFontSize:u.indexLabelFontSize,d.indexLabelFontFamily=o.indexLabelFontFamily?o.indexLabelFontFamily:u.indexLabelFontFamily,d.indexLabelBackgroundColor=o.indexLabelBackgroundColor?o.indexLabelBackgroundColor:u.indexLabelBackgroundColor?u.indexLabelBackgroundColor:null,d.indexLabelMaxWidth=o.indexLabelMaxWidth?o.indexLabelMaxWidth:u.indexLabelMaxWidth?u.indexLabelMaxWidth:.33*h.width,d.indexLabelWrap=o.indexLabelWrap?o.indexLabelWrap:u.indexLabelWrap,d.startAngle=0===e?u.startAngle?u.startAngle/180*Math.PI:0:p[e-1].endAngle,d.startAngle=(d.startAngle+2*Math.PI)%(2*Math.PI),d.endAngle=d.startAngle+2*Math.PI/t*Math.abs(o.y),o=((o=(d.endAngle+d.startAngle)/2)+2*Math.PI)%(2*Math.PI),d.midAngle=o,d.midAngle>Math.PI/2-v&&d.midAngle<Math.PI/2+v?((0===n||p[r].midAngle>d.midAngle)&&(r=e),n++):d.midAngle>3*Math.PI/2-v&&d.midAngle<3*Math.PI/2+v&&((0===i||p[a].midAngle>d.midAngle)&&(a=e),i++),d.hemisphere=o>Math.PI/2&&o<=3*Math.PI/2?"left":"right",d.indexLabelTextBlock=new x(l.plotArea.ctx,{fontSize:d.indexLabelFontSize,fontFamily:d.indexLabelFontFamily,fontColor:d.indexLabelFontColor,fontStyle:d.indexLabelFontStyle,fontWeight:d.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:d.indexLabelBackgroundColor,maxWidth:d.indexLabelMaxWidth,maxHeight:d.indexLabelWrap?5*d.indexLabelFontSize:1.5*d.indexLabelFontSize,text:d.indexLabelText,padding:0,textBaseline:"top"}),d.indexLabelTextBlock.measureText()}for(o=t=0,s=!1,e=0;e<c.length;e++)d=p[(r+e)%c.length],1<n&&d.midAngle>Math.PI/2-v&&d.midAngle<Math.PI/2+v&&(t<=n/2&&!s?(d.hemisphere="right",t++):(d.hemisphere="left",s=!0));for(s=!1,e=0;e<c.length;e++)d=p[(a+e)%c.length],1<i&&d.midAngle>3*Math.PI/2-v&&d.midAngle<3*Math.PI/2+v&&(o<=i/2&&!s?(d.hemisphere="left",o++):(d.hemisphere="right",s=!0))}}(),function(){(f=l.plotArea.ctx).fillStyle="grey",f.strokeStyle="grey",f.font="16px Arial",f.textBaseline="middle";for(var t=0,i=f=0,f=0;10>f&&(1>f||0<i);f++){if(w-=i,i=0,"outside"===u.indexLabelPlacement){for(M=w*m,t=0;t<c.length;t++)(k=p[t]).indexLabelTextBlock.x=b.x+M*Math.cos(k.midAngle),k.indexLabelTextBlock.y=b.y+M*Math.sin(k.midAngle),k.indexLabelAngle=k.midAngle,k.radius=w;var v,x;for(t=0;t<c.length;t++){var k=p[t],_=o(t);if(null!==_){var C=0;if(0>(C=a(v=p[t],x=p[_])-g)){for(var S=x=v=0;S<c.length;S++)S!==t&&p[S].hemisphere===k.hemisphere&&(p[S].indexLabelTextBlock.y<k.indexLabelTextBlock.y?v++:x++);v=-1*(C-(S=C/(v+x||1)*x));var T=x=0;"right"===k.hemisphere?+(T=s(_,v=-1*(C-(x=s(t,S))))).toFixed(y)<+v.toFixed(y)&&+x.toFixed(y)<=+S.toFixed(y)&&s(t,-(v-T)):+(T=s(t,v=-1*(C-(x=s(_,S))))).toFixed(y)<+v.toFixed(y)&&+x.toFixed(y)<=+S.toFixed(y)&&s(_,-(v-T))}}}}else for(t=0;t<c.length;t++)k=p[t],M="pie"===u.type?.7*w:.8*w,C=b.x+M*Math.cos(k.midAngle),S=b.y+M*Math.sin(k.midAngle),k.indexLabelTextBlock.x=C,k.indexLabelTextBlock.y=S;for(t=0;t<c.length;t++)k=p[t],C=k.indexLabelTextBlock.measureText(),0!==C.height&&0!==C.width&&(C=C=0,"right"===k.hemisphere?(C=h.x2-(k.indexLabelTextBlock.x+k.indexLabelTextBlock.width+d),C*=-1):C=h.x1-(k.indexLabelTextBlock.x-k.indexLabelTextBlock.width-d),0<C&&(Math.abs(k.indexLabelTextBlock.y-k.indexLabelTextBlock.height/2-b.y)<w||Math.abs(k.indexLabelTextBlock.y+k.indexLabelTextBlock.height/2-b.y)<w)&&(C/=Math.abs(Math.cos(k.indexLabelAngle)),9<C&&(C*=.3),C>i&&(i=C)),C=C=0,0<k.indexLabelAngle&&k.indexLabelAngle<Math.PI?(C=h.y2-(k.indexLabelTextBlock.y+k.indexLabelTextBlock.height/2+5),C*=-1):C=h.y1-(k.indexLabelTextBlock.y-k.indexLabelTextBlock.height/2-5),0<C&&Math.abs(k.indexLabelTextBlock.x-b.x)<w&&(C/=Math.abs(Math.sin(k.indexLabelAngle)),9<C&&(C*=.3),C>i&&(i=C)));for(t=function(t,e,n){for(var i=[],r=0;i.push(p[e]),e!==n;e=(e+1+c.length)%c.length);for(i.sort(function(t,e){return t.y-e.y}),e=0;e<i.length&&(n=i[e],r<t);e++)r+=n.indexLabelTextBlock.height,n.indexLabelTextBlock.text="",n.indexLabelText="",n.indexLabelTextBlock.measureText()},_=k=-1,S=T=0;S<c.length;S++)if(v=p[S],v.indexLabelText){var P=o(S);null!==P&&(x=p[P],C=0,C=a(v,x),0>C&&r(v,x)?(0>k&&(k=S),P!==k&&(_=P),T+=-C):0<T&&(t(T,k,_),_=k=-1,T=0))}0<T&&t(T,k,_)}e(l.animationEnabled&&0===l.renderCount?E?60:30:1),n()}()}},v.prototype.animationRequestId=null,v.prototype.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},v.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,b.prototype.registerSpace=function(t,e){"top"===t?this._topOccupied+=e.height:"bottom"===t?this._bottomOccupied+=e.height:"left"===t?this._leftOccupied+=e.width:"right"===t&&(this._rightOccupied+=e.width)},b.prototype.unRegisterSpace=function(t,e){"top"===t?this._topOccupied-=e.height:"bottom"===t?this._bottomOccupied-=e.height:"left"===t?this._leftOccupied-=e.width:"right"===t&&(this._rightOccupied-=e.width)},b.prototype.getFreeSpace=function(){return{x1:this._leftOccupied,y1:this._topOccupied,x2:this.chart.width-this._rightOccupied,y2:this.chart.height-this._bottomOccupied,width:this.chart.width-this._rightOccupied-this._leftOccupied,height:this.chart.height-this._bottomOccupied-this._topOccupied}},b.prototype.reset=function(){this._topOccupied=0,this._bottomOccupied=3,this._rightOccupied=this._leftOccupied=0},t(x,m),x.prototype.render=function(t){t&&this.ctx.save();var e=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var n=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+n),"middle"===this.textBaseline&&(n=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var i=0,r=this.padding,a=null;for((0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,n,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,n=0;n<this._wrappedText.lines.length;n++)a=this._wrappedText.lines[n],"right"===this.horizontalAlign?i=this.width-a.width-this.padding:"left"===this.horizontalAlign?i=this.padding:"center"===this.horizontalAlign&&(i=(this.width-2*this.padding)/2-a.width/2+this.padding),this.ctx.fillText(a.text,i,r),r+=a.height;this.ctx.font=e,t&&this.ctx.restore()},x.prototype.setText=function(t){this.text=t,this._isDirty=!0,this._wrappedText=null},x.prototype.measureText=function(){if(null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},x.prototype._getLineWithWidth=function(t,e,n){if(!(t=String(t)))return{text:"",width:0};var i=n=0,r=t.length-1,a=1/0;for(this.ctx.font=this._getFontString();i<=r;){a=Math.floor((i+r)/2);var o=t.substr(0,a+1);if((n=this.ctx.measureText(o).width)<e)i=a+1;else{if(!(n>e))break;r=a-1}}return n>e&&1<o.length&&(o=o.substr(0,o.length-1),n=this.ctx.measureText(o).width),e=!0,o.length!==t.length&&" "!==t[o.length]||(e=!1),e&&(t=o.split(" "),1<t.length&&t.pop(),o=t.join(" "),n=this.ctx.measureText(o).width),{text:o,width:n}},x.prototype._wrapText=function(){var t=new String(a(this.text)),e=[],n=this.ctx.font,i=0,r=0;for(this.ctx.font=this._getFontString();0<t.length;){var o=this.maxHeight-2*this.padding,s=this._getLineWithWidth(t,this.maxWidth-2*this.padding,!1);s.height=this._lineHeight,e.push(s),r=Math.max(r,s.width),i+=s.height,t=a(t.slice(s.text.length,t.length)),o&&i>o&&(s=e.pop(),i-=s.height)}this._wrappedText={lines:e,width:r,height:i},this.width=r+2*this.padding,this.height=i+2*this.padding,this.ctx.font=n},x.prototype._getFontString=function(){return h("",this,null)},t(w,m),w.prototype.render=function(){if(this.text){var t,e,n=this.chart.layoutManager.getFreeSpace(),i=0,r=0,a=0,o=0,s=0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(o=n.width-2*this.margin,s=.5*n.height-2*this.margin,a=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(o=n.height-2*this.margin,s=.5*n.width-2*this.margin):"center"===this.horizontalAlign&&(o=n.width-2*this.margin,s=.5*n.height-2*this.margin));var l=(s=new x(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:o,maxHeight:s,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"})).measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(r=this.margin,e="top"):"bottom"===this.verticalAlign&&(r=n.y2-this.margin-l.height,e="bottom"),"left"===this.horizontalAlign?i=n.x1+this.margin:"center"===this.horizontalAlign?i=n.x1+(o/2-l.width/2)+this.margin:"right"===this.horizontalAlign&&(i=n.x2-this.margin-l.width),t=this.horizontalAlign,this.width=l.width,this.height=l.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(i=n.x1+this.margin,r=n.y2-this.margin-(o/2-l.width/2),a=-90,e="left",this.width=l.height,this.height=l.width):"right"===this.horizontalAlign?(i=n.x2-this.margin,r=n.y1+this.margin+(o/2-l.width/2),a=90,e="right",this.width=l.height,this.height=l.width):"center"===this.horizontalAlign&&(r=n.y1+(n.height/2-l.height/2),i=n.x1+(n.width/2-l.width/2),e="center",this.width=l.width,this.height=l.height),t="center"),s.x=i,s.y=r,s.angle=a,s.horizontalAlign=t,s.render(!0),this.chart.layoutManager.registerSpace(e,{width:this.width+2*this.margin,height:this.height+2*this.margin}),this.bounds={x1:i,y1:r,x2:i+this.width,y2:r+this.height},this.ctx.textBaseline="top"}},t(M,m),M.prototype.render=function(){var t=this.chart.layoutManager.getFreeSpace(),e=null,n=0,i=0,r=0,a=0,o=[],s=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",e=this.verticalAlign,r=.9*t.width,a=.5*t.height):"center"===this.verticalAlign&&(this.orientation="vertical",e=this.horizontalAlign,r=.5*t.width,a=.9*t.height);for(var u=0;u<this.dataSeries.length;u++){var c=this.dataSeries[u],d=c.legendMarkerType?c.legendMarkerType:"line"!==c.type&&"stepLine"!==c.type&&"spline"!==c.type&&"scatter"!==c.type&&"bubble"!==c.type||!c.markerType?_.getDefaultLegendMarker(c.type):c.markerType,h=c.legendText?c.legendText:c.name,f=c.legendMarkerColor?c.legendMarkerColor:c.markerColor?c.markerColor:c._colorSet[0],p=c.markerSize||"line"!==c.type&&"stepLine"!==c.type&&"spline"!==c.type?.6*this.lineHeight:0;if("pie"!==c.type&&"doughnut"!==c.type)d={markerType:d,markerColor:f,text:h,textBlock:null,chartType:c.type,markerSize:p,lineColor:c._colorSet[0],dataSeriesIndex:u,dataPointIndex:null},o.push(d);else for(var g=0;g<c.dataPoints.length;g++)p=c.dataPoints[g],d=p.legendMarkerType?p.legendMarkerType:c.legendMarkerType?c.legendMarkerType:_.getDefaultLegendMarker(c.type),h=p.legendText?p.legendText:c.legendText?c.legendText:p.name?p.name:"DataPoint: "+(g+1),f=p.markerColor?p.markerColor:c.markerColor?c.markerColor:p.color?p.color:c.color?c.color:c._colorSet[g%c._colorSet.length],p=0!==p.markerSize&&(0!==c.markerSize||p.markerSize)||"line"!==c.type&&"stepLine"!==c.type&&"spline"!==c.type?.6*this.lineHeight:0,d={markerType:d,markerColor:f,text:h,textBlock:null,chartType:c.type,markerSize:p,dataSeriesIndex:u,dataPointIndex:g},o.push(d)}if(0<o.length){for(c=null,u=g=0;u<o.length;u++)d=o[u],"horizontal"===this.orientation?(d.textBlock=new x(this.ctx,{x:0,y:0,maxWidth:r,maxHeight:this.lineHeight,angle:0,text:d.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),d.textBlock.measureText(),(!c||c.width+d.textBlock.width+(0===c.width?0:this.horizontalSpacing)>r)&&(c={items:[],width:0},s.push(c),this.height=s.length*(d.textBlock.height+5)),d.textBlock.x=c.width,d.textBlock.y=0,c.width+=Math.round(d.textBlock.width+d.textBlock._lineHeight+(0===c.width?0:.5*d.textBlock._lineHeight))):(this.height+this.lineHeight<a?(c={items:[],width:0},s.push(c),this.height=s.length*this.lineHeight):(c=s[g],g=(g+1)%s.length),d.textBlock=new x(this.ctx,{x:0,y:0,maxWidth:r,maxHeight:1.5*this.fontSize,angle:0,text:d.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),d.textBlock.measureText(),d.textBlock.x=c.width,d.textBlock.y=0,c.width+=d.textBlock.width+d.textBlock._lineHeight+(0===c.width?0:.5*d.textBlock._lineHeight)),c.items.push(d),this.width=Math.max(c.width,this.width);this.height=s.length*this.lineHeight}for("top"===this.verticalAlign?(i="left"===this.horizontalAlign?t.x1+2:"right"===this.horizontalAlign?t.x2-this.width-2:t.x1+t.width/2-this.width/2,n=t.y1):"center"===this.verticalAlign?(i="left"===this.horizontalAlign?t.x1+2:"right"===this.horizontalAlign?t.x2-this.width-2:t.x1+t.width/2-this.width/2,n=t.y1+t.height/2-this.height/2):"bottom"===this.verticalAlign&&(i="left"===this.horizontalAlign?t.x1+2:"right"===this.horizontalAlign?t.x2-this.width-2:t.x1+t.width/2-this.width/2,n=t.y2-this.height-5),this.items=o,u=0;u<this.items.length;u++)d=o[u],d.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[d.id]={id:d.id,objectType:"legendItem",legendItemIndex:u,dataSeriesIndex:d.dataSeriesIndex,dataPointIndex:d.dataPointIndex};for(u=0;u<s.length;u++)for(c=s[u],t=0;t<c.items.length;t++)a=(d=c.items[t]).textBlock.x+i+(0===t?.2*p:.4*this.lineHeight+.2*p),o=n+u*this.lineHeight,r=a,this.chart.data[d.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),"line"!==d.chartType&&"stepLine"!==d.chartType&&"spline"!==d.chartType||(this.ctx.strokeStyle=d.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(a-.1*this.lineHeight,o+this.lineHeight/2),this.ctx.lineTo(a+.7*this.lineHeight,o+this.lineHeight/2),this.ctx.stroke(),r-=.1*this.lineHeight),V.drawMarker(a+p/2,o+this.lineHeight/2,this.ctx,d.markerType,p,d.markerColor,null,0),d.textBlock.x=a+Math.round(.9*this.lineHeight),d.textBlock.y=o,d.textBlock.render(!0),this.chart.data[d.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),a=l(d.id),this.ghostCtx.fillStyle=a,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(r,d.textBlock.y,d.textBlock.x+d.textBlock.width-r,d.textBlock.height),d.x1=this.chart._eventManager.objectMap[d.id].x1=r,d.y1=this.chart._eventManager.objectMap[d.id].y1=d.textBlock.y,d.x2=this.chart._eventManager.objectMap[d.id].x2=d.textBlock.x+d.textBlock.width,d.y2=this.chart._eventManager.objectMap[d.id].y2=d.textBlock.y+d.textBlock.height;this.chart.layoutManager.registerSpace(e,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:i,y1:n,x2:i+this.width,y2:n+this.height}},t(k,m),k.prototype.render=function(){var t=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red",this.ctx.fillRect(t.x1,t.y1,t.x2,t.y2)},t(_,m),_.prototype.getDefaultAxisPlacement=function(){var t=this.type;return"column"===t||"line"===t||"stepLine"===t||"spline"===t||"area"===t||"stepArea"===t||"splineArea"===t||"stackedColumn"===t||"stackedLine"===t||"bubble"===t||"scatter"===t||"stackedArea"===t||"stackedColumn100"===t||"stackedLine100"===t||"stackedArea100"===t?"normal":"bar"===t||"stackedBar"===t||"stackedBar100"===t?"xySwapped":"pie"===t||"doughnut"===t?"none":(window.console.log("Unknown Chart Type: "+t),null)},_.getDefaultLegendMarker=function(t){return"column"===t||"stackedColumn"===t||"stackedLine"===t||"bar"===t||"stackedBar"===t||"stackedBar100"===t||"bubble"===t||"scatter"===t||"stackedColumn100"===t||"stackedLine100"===t||"stepArea"===t?"square":"line"===t||"stepLine"===t||"spline"===t||"pie"===t||"doughnut"===t?"circle":"area"===t||"splineArea"===t||"stackedArea"===t||"stackedArea100"===t?"triangle":(window.console.log("Unknown Chart Type: "+t),null)},_.prototype.getDataPointAtX=function(t,e){if(!this.dataPoints||0===this.dataPoints.length)return null;var n={dataPoint:null,distance:1/0,index:NaN},i=null,r=0,a=0,o=1,s=1/0,l=0,u=0,c=0;for("none"!==this.chart.plotInfo.axisPlacement&&(c=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,c=0<c?(this.dataPoints.length-1)/c*(t-this.dataPoints[0].x)>>0:0);;){if(0<=(a=0<o?c+r:c-r)&&a<this.dataPoints.length){i=this.dataPoints[a];var d=Math.abs(i.x-t);if(d<n.distance&&(n.dataPoint=i,n.distance=d,n.index=a),(i=Math.abs(i.x-t))<=s?s=i:0<o?l++:u++,1e3<l&&1e3<u)break}else if(0>c-r&&c+r>=this.dataPoints.length)break;-1===o?(r++,o=1):o=-1}return e||n.dataPoint.x!==t?e&&null!==n.dataPoint?n:null:n},_.prototype.getDataPointAtXY=function(t,e,n){if(!this.dataPoints||0===this.dataPoints.length)return null;n=n||!1;var i=[],r=0,a=0,o=1,s=!1,l=1/0,u=0,c=0,d=0;for("none"!==this.chart.plotInfo.axisPlacement&&(d=this.chart.axisX.getXValueAt({x:t,y:e}),a=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,d=0<a?(this.dataPoints.length-1)/a*(d-this.dataPoints[0].x)>>0:0);;){if(0<=(a=0<o?d+r:d-r)&&a<this.dataPoints.length){var h=this.chart._eventManager.objectMap[this.dataPointIds[a]],p=this.dataPoints[a];if(h){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":t>=h.x1&&t<=h.x2&&e>=h.y1&&e<=h.y2&&(i.push({dataPoint:p,dataPointIndex:a,dataSeries:this,distance:Math.min(Math.abs(h.x1-t),Math.abs(h.x2-t),Math.abs(h.y1-e),Math.abs(h.y2-e))}),s=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var g=f("markerSize",p,this)||4,m=n?20:g,v=Math.sqrt(Math.pow(h.x1-t,2)+Math.pow(h.y1-e,2));v<=m&&i.push({dataPoint:p,dataPointIndex:a,dataSeries:this,distance:v}),(a=Math.abs(h.x1-t))<=l?l=a:0<o?u++:c++,v<=g/2&&(s=!0);break;case"bubble":g=h.size,(v=Math.sqrt(Math.pow(h.x1-t,2)+Math.pow(h.y1-e,2)))<=g/2&&(i.push({dataPoint:p,dataPointIndex:a,dataSeries:this,distance:v}),s=!0);break;case"pie":case"doughnut":g=h.center,m="doughnut"===this.type?.6*h.radius:0,(v=Math.sqrt(Math.pow(g.x-t,2)+Math.pow(g.y-e,2)))<h.radius&&v>m&&(v=Math.atan2(e-g.y,t-g.x),0>v&&(v+=2*Math.PI),v=(v/Math.PI*180%360+360)%360,g=(h.startAngle/Math.PI*180%360+360)%360,m=(h.endAngle/Math.PI*180%360+360)%360,0===m&&1<h.endAngle&&(m=360),g>m&&(m+=360,v<g&&(v+=360)),v>g&&v<m&&(i.push({dataPoint:p,dataPointIndex:a,dataSeries:this,distance:0}),s=!0))}if(s||1e3<u&&1e3<c)break}}else if(0>d-r&&d+r>=this.dataPoints.length)break;-1===o?(r++,o=1):o=-1}for(t=null,e=0;e<i.length;e++)t?i[e].distance<=t.distance&&(t=i[e]):t=i[e];return t},_.prototype.getMarkerProperties=function(t,e,n,i){var r=this.dataPoints;return{x:e,y:n,ctx:i,type:r[t].markerType?r[t].markerType:this.markerType,size:r[t].markerSize?r[t].markerSize:this.markerSize,color:r[t].markerColor?r[t].markerColor:this.markerColor?this.markerColor:r[t].color?r[t].color:this.color?this.color:this._colorSet[t%this._colorSet.length],borderColor:r[t].markerBorderColor?r[t].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:r[t].markerBorderThickness?r[t].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}},t(C,m),C.prototype.createLabels=function(){var t,n,i=0,r=0,a=0;i=0;if("bottom"===this._position||"top"===this._position?(i=this.lineCoordinates.width/Math.abs(this.maximum-this.minimum)*this.interval,r=this.labelAutoFit?void 0===this._options.labelMaxWidth?.9*i>>0:this.labelMaxWidth:void 0===this._options.labelMaxWidth?.7*this.chart.width>>0:this.labelMaxWidth,a=void 0===this._options.labelWrap||this.labelWrap?.5*this.chart.height>>0:1.5*this.labelFontSize):"left"!==this._position&&"right"!==this._position||(i=this.lineCoordinates.height/Math.abs(this.maximum-this.minimum)*this.interval,r=this.labelAutoFit?void 0===this._options.labelMaxWidth?.3*this.chart.width>>0:this.labelMaxWidth:void 0===this._options.labelMaxWidth?.5*this.chart.width>>0:this.labelMaxWidth,a=void 0===this._options.labelWrap||this.labelWrap?2*i>>0:1.5*this.labelFontSize),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType)for(n=e(new Date(this.maximum),this.interval,this.intervalType),i=this.intervalStartPosition;i<n;e(i,this.interval,this.intervalType))t="axisX"===this.type&&this.labels[i]?this.labels[i]:B(i,this.valueFormatString,this.chart._cultureInfo),t=new x(this.ctx,{x:0,y:0,maxWidth:r,maxHeight:a,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:i.getTime(),textBlock:t,effectiveHeight:null});else{if(n=this.maximum,this.labels&&this.labels.length){t=Math.ceil(this.interval);var o=Math.ceil(this.intervalStartPosition),s=!1;for(i=o;i<this.maximum;i+=t){if(!this.labels[i]){s=!1;break}s=!0}s&&(this.interval=t,this.intervalStartPosition=o)}for(i=this.intervalStartPosition;i<=n;i+=this.interval)t="axisX"===this.type&&this.labels[i]?this.labels[i]:j(i,this.valueFormatString,this.chart._cultureInfo),t=new x(this.ctx,{x:0,y:0,maxWidth:r,maxHeight:a,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:i,textBlock:t,effectiveHeight:null})}for(i=0;i<this.stripLines.length;i++)n=this.stripLines[i],t=new x(this.ctx,{x:0,y:0,backgroundColor:n.labelBackgroundColor,maxWidth:r,maxHeight:a,angle:this.labelAngle,text:n.label,horizontalAlign:"left",fontSize:n.labelFontSize,fontFamily:n.labelFontFamily,fontWeight:n.labelFontWeight,fontColor:n.labelFontColor,fontStyle:n.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:n.value,textBlock:t,effectiveHeight:null,stripLine:n})},C.prototype.createLabelsAndCalculateWidth=function(){var t=0;if(this._labels=[],"left"===this._position||"right"===this._position)for(this.createLabels(),i=0;i<this._labels.length;i++){var e=this._labels[i].textBlock.measureText(),n=0;t<(n=0===this.labelAngle?e.width:e.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+e.height/2*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))&&(t=n),this._labels[i].effectiveWidth=n}return(this.title?u(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+t+this.tickLength+5},C.prototype.createLabelsAndCalculateHeight=function(){var t=0;this._labels=[];var e,n=0;if(this.createLabels(),"bottom"===this._position||"top"===this._position)for(n=0;n<this._labels.length;n++){e=(e=this._labels[n].textBlock).measureText();var i=0;t<(i=0===this.labelAngle?e.height:e.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+e.height/2*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))&&(t=i),this._labels[n].effectiveHeight=i}return(this.title?u(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+t+this.tickLength+5},C.setLayoutAndRender=function(t,e,n,i,r){var a,o,s,l=t.chart,u=l.ctx;if(t.calculateAxisParameters(),e&&e.calculateAxisParameters(),n&&n.calculateAxisParameters(),e&&n&&void 0===e._options.maximum&&void 0===e._options.minimum&&void 0===e._options.interval&&void 0===n._options.maximum&&void 0===n._options.minimum&&void 0===n._options.interval){s=(e.maximum-e.minimum)/e.interval;var c=(n.maximum-n.minimum)/n.interval;s>c?n.maximum=n.interval*s+n.minimum:c>s&&(e.maximum=e.interval*c+e.minimum)}if(c=e?e.margin:0,"normal"===i){t.lineCoordinates={};var d=Math.ceil(e?e.createLabelsAndCalculateWidth():0);a=Math.round(r.x1+d+c),t.lineCoordinates.x1=a,c=Math.ceil(n?n.createLabelsAndCalculateWidth():0),o=Math.round(r.x2-c>t.chart.width-10?t.chart.width-10:r.x2-c),t.lineCoordinates.x2=o,t.lineCoordinates.width=Math.abs(o-a);var h=Math.ceil(t.createLabelsAndCalculateHeight());i=Math.round(r.y2-h-t.margin),s=Math.round(r.y2-t.margin),t.lineCoordinates.y1=i,t.lineCoordinates.y2=i,t.boundingRect={x1:a,y1:i,x2:o,y2:s,width:o-a,height:s-i},e&&(a=Math.round(r.x1+e.margin),i=Math.round(10>r.y1?10:r.y1),o=Math.round(r.x1+d+e.margin),s=Math.round(r.y2-h-t.margin),e.lineCoordinates={x1:o,y1:i,x2:o,y2:s,height:Math.abs(s-i)},e.boundingRect={x1:a,y1:i,x2:o,y2:s,width:o-a,height:s-i}),n&&(a=Math.round(t.lineCoordinates.x2),i=Math.round(10>r.y1?10:r.y1),o=Math.round(a+c+n.margin),s=Math.round(r.y2-h-t.margin),n.lineCoordinates={x1:a,y1:i,x2:a,y2:s,height:Math.abs(s-i)},n.boundingRect={x1:a,y1:i,x2:o,y2:s,width:o-a,height:s-i}),t.calculateValueToPixelconversionParameters(),e&&e.calculateValueToPixelconversionParameters(),n&&n.calculateValueToPixelconversionParameters(),u.save(),u.rect(t.boundingRect.x1-40,t.boundingRect.y1,t.boundingRect.width+80,t.boundingRect.height),u.clip(),t.renderLabelsTicksAndTitle(),u.restore(),e&&e.renderLabelsTicksAndTitle(),n&&n.renderLabelsTicksAndTitle()}else{d=Math.ceil(t.createLabelsAndCalculateWidth()),e&&(e.lineCoordinates={},a=Math.round(r.x1+d+t.margin),o=Math.round(r.x2>e.chart.width-10?e.chart.width-10:r.x2),e.lineCoordinates.x1=a,e.lineCoordinates.x2=o,e.lineCoordinates.width=Math.abs(o-a)),n&&(n.lineCoordinates={},a=Math.round(r.x1+d+t.margin),o=Math.round(r.x2>n.chart.width-10?n.chart.width-10:r.x2),n.lineCoordinates.x1=a,n.lineCoordinates.x2=o,n.lineCoordinates.width=Math.abs(o-a));h=Math.ceil(e?e.createLabelsAndCalculateHeight():0);var f=Math.ceil(n?n.createLabelsAndCalculateHeight():0);e&&(i=Math.round(r.y2-h-e.margin),s=Math.round(r.y2-c>e.chart.height-10?e.chart.height-10:r.y2-c),e.lineCoordinates.y1=i,e.lineCoordinates.y2=i,e.boundingRect={x1:a,y1:i,x2:o,y2:s,width:o-a,height:h}),n&&(i=Math.round(r.y1+n.margin),s=r.y1+n.margin+f,n.lineCoordinates.y1=s,n.lineCoordinates.y2=s,n.boundingRect={x1:a,y1:i,x2:o,y2:s,width:o-a,height:f}),a=Math.round(r.x1+t.margin),i=Math.round(n?n.lineCoordinates.y2:10>r.y1?10:r.y1),o=Math.round(r.x1+d+t.margin),s=Math.round(e?e.lineCoordinates.y1:r.y2-c>t.chart.height-10?t.chart.height-10:r.y2-c),t.lineCoordinates={x1:o,y1:i,x2:o,y2:s,height:Math.abs(s-i)},t.boundingRect={x1:a,y1:i,x2:o,y2:s,width:o-a,height:s-i},t.calculateValueToPixelconversionParameters(),e&&e.calculateValueToPixelconversionParameters(),n&&n.calculateValueToPixelconversionParameters(),e&&e.renderLabelsTicksAndTitle(),n&&n.renderLabelsTicksAndTitle(),t.renderLabelsTicksAndTitle()}l.preparePlotArea(),r=t.chart.plotArea,u.save(),u.rect(r.x1,r.y1,Math.abs(r.x2-r.x1),Math.abs(r.y2-r.y1)),u.clip(),t.renderStripLinesOfThicknessType("value"),e&&e.renderStripLinesOfThicknessType("value"),n&&n.renderStripLinesOfThicknessType("value"),t.renderInterlacedColors(),e&&e.renderInterlacedColors(),n&&n.renderInterlacedColors(),u.restore(),t.renderGrid(),e&&e.renderGrid(),n&&n.renderGrid(),t.renderAxisLine(),e&&e.renderAxisLine(),n&&n.renderAxisLine(),t.renderStripLinesOfThicknessType("pixel"),e&&e.renderStripLinesOfThicknessType("pixel"),n&&n.renderStripLinesOfThicknessType("pixel")},C.prototype.renderLabelsTicksAndTitle=function(){var t=!1,e=0,n=1,i=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(n=1.2),void 0===this._options.interval){if("bottom"===this._position||"top"===this._position){for(a=0;a<this._labels.length;a++)r=this._labels[a],r.position<this.minimum||r.stripLine||(r=r.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+r.textBlock.height*Math.sin(Math.PI/180*this.labelAngle),e+=r);e>this.lineCoordinates.width*n&&(t=!0)}if("left"===this._position||"right"===this._position){for(a=0;a<this._labels.length;a++)r=this._labels[a],r.position<this.minimum||r.stripLine||(r=r.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+r.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),e+=r);e>this.lineCoordinates.height*n&&(t=!0)}}if("bottom"===this._position){var r,a=0;for(a=0;a<this._labels.length;a++)r=this._labels[a],r.position<this.minimum||r.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(r.position),(this.tickThickness&&!this._labels[a].stripLine||this._labels[a].stripLine&&"pixel"===this._labels[a].stripLine._thicknessType)&&(this._labels[a].stripLine?(n=this._labels[a].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1==this.ctx.lineWidth%2?.5+(e.x<<0):e.x<<0,this.ctx.beginPath(),this.ctx.moveTo(n,e.y<<0),this.ctx.lineTo(n,e.y+this.tickLength<<0),this.ctx.stroke()),t&&0!=i++%2&&!this._labels[a].stripLine||(0===r.textBlock.angle?(e.x-=r.textBlock.width/2,e.y+=this.tickLength+r.textBlock.fontSize/2):(e.x-=0>this.labelAngle?r.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,e.y+=this.tickLength+Math.abs(0>this.labelAngle?r.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),r.textBlock.x=e.x,r.textBlock.y=e.y,r.textBlock.render(!0)));this.title&&(this._titleTextBlock=new x(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.boundingRect.y2-this._titleTextBlock.height-2,this._titleTextBlock.render(!0))}else if("top"===this._position){for(a=0;a<this._labels.length;a++)r=this._labels[a],r.position<this.minimum||r.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(r.position),(this.tickThickness&&!this._labels[a].stripLine||this._labels[a].stripLine&&"pixel"===this._labels[a].stripLine._thicknessType)&&(this._labels[a].stripLine?(n=this._labels[a].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1==this.ctx.lineWidth%2?.5+(e.x<<0):e.x<<0,this.ctx.beginPath(),this.ctx.moveTo(n,e.y<<0),this.ctx.lineTo(n,e.y-this.tickLength<<0),this.ctx.stroke()),t&&0!=i++%2&&!this._labels[a].stripLine||(0===r.textBlock.angle?(e.x-=r.textBlock.width/2,e.y-=this.tickLength+r.textBlock.height/2):(e.x-=0<this.labelAngle?r.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,e.y-=this.tickLength+Math.abs(0<this.labelAngle?r.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5:5)),r.textBlock.x=e.x,r.textBlock.y=e.y,r.textBlock.render(!0)));this.title&&(this._titleTextBlock=new x(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("left"===this._position){for(a=0;a<this._labels.length;a++)r=this._labels[a],r.position<this.minimum||r.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(r.position),(this.tickThickness&&!this._labels[a].stripLine||this._labels[a].stripLine&&"pixel"===this._labels[a].stripLine._thicknessType)&&(this._labels[a].stripLine?(n=this._labels[a].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1==this.ctx.lineWidth%2?.5+(e.y<<0):e.y<<0,this.ctx.beginPath(),this.ctx.moveTo(e.x<<0,n),this.ctx.lineTo(e.x-this.tickLength<<0,n),this.ctx.stroke()),t&&0!=i++%2&&!this._labels[a].stripLine||(r.textBlock.x=e.x-r.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,r.textBlock.y=0===this.labelAngle?e.y-r.textBlock.height/2+this.labelFontSize/2:e.y-r.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),r.textBlock.render(!0)));this.title&&(this._titleTextBlock=new x(this.ctx,{x:this.boundingRect.x1+5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}else if("right"===this._position){for(a=0;a<this._labels.length;a++)r=this._labels[a],r.position<this.minimum||r.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(r.position),(this.tickThickness&&!this._labels[a].stripLine||this._labels[a].stripLine&&"pixel"===this._labels[a].stripLine._thicknessType)&&(this._labels[a].stripLine?(n=this._labels[a].stripLine,this.ctx.lineWidth=n.thickness,this.ctx.strokeStyle=n.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),n=1==this.ctx.lineWidth%2?.5+(e.y<<0):e.y<<0,this.ctx.beginPath(),this.ctx.moveTo(e.x<<0,n),this.ctx.lineTo(e.x+this.tickLength<<0,n),this.ctx.stroke()),t&&0!=i++%2&&!this._labels[a].stripLine||(r.textBlock.x=e.x+this.tickLength+5,r.textBlock.y=0===this.labelAngle?e.y-r.textBlock.height/2+this.labelFontSize/2:e.y,r.textBlock.render(!0)));this.title&&(this._titleTextBlock=new x(this.ctx,{x:this.boundingRect.x2-5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}},C.prototype.renderInterlacedColors=function(){var t,e,n=this.chart.plotArea.ctx,i=this.chart.plotArea,r=0;if(t=!0,"bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(n.fillStyle=this.interlacedColor,r=0;r<this._labels.length;r++)this._labels[r].stripLine||(t?(e=this.getPixelCoordinatesOnAxis(this._labels[r].position),t=r+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[r+1].position),n.fillRect(i.x1,t.y,Math.abs(i.x1-i.x2),Math.abs(t.y-e.y)),t=!1):t=!0)}else for(n.fillStyle=this.interlacedColor,r=0;r<this._labels.length;r++)this._labels[r].stripLine||(t?(t=this.getPixelCoordinatesOnAxis(this._labels[r].position),e=r+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[r+1].position),n.fillRect(t.x,i.y1,Math.abs(e.x-t.x),Math.abs(i.y1-i.y2)),t=!1):t=!0);n.beginPath()},C.prototype.renderStripLinesOfThicknessType=function(t){if(this.stripLines&&0<this.stripLines.length&&t){var e=this.chart.plotArea.ctx,n=0;for(n=0;n<this.stripLines.length;n++){var i=this.stripLines[n];if(i._thicknessType===t&&("pixel"!==t||!(i.value<this.minimum||i.value>this.maximum))){var r=this.getPixelCoordinatesOnAxis(i.value),a=Math.abs("pixel"===t?i.thickness:this.conversionParameters.pixelPerUnit*i.thickness);if(!(0>=a)){e.strokeStyle=i.color,e.beginPath(),l(i.id);var o,s,u,c;e.lineWidth=a,"bottom"===this._position||"top"===this._position?(o=s=1==e.lineWidth%2?.5+(r.x<<0):r.x<<0,u=this.chart.plotArea.y1,c=this.chart.plotArea.y2):"left"!==this._position&&"right"!==this._position||(u=c=1==e.lineWidth%2?.5+(r.y<<0):r.y<<0,o=this.chart.plotArea.x1,s=this.chart.plotArea.x2),e.moveTo(o,u),e.lineTo(s,c),e.stroke()}}}}},C.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var t,e=this.chart.ctx,n=this.chart.plotArea;if(e.lineWidth=this.gridThickness,e.strokeStyle=this.gridColor,"bottom"===this._position||"top"===this._position)for(i=0;i<this._labels.length&&!this._labels[i].stripLine;i++)this._labels[i].position<this.minimum||this._labels[i].position>this.maximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[i].position),t=1==e.lineWidth%2?.5+(t.x<<0):t.x<<0,e.moveTo(t,n.y1<<0),e.lineTo(t,n.y2<<0),e.stroke());else if("left"===this._position||"right"===this._position)for(var i=0;i<this._labels.length&&!this._labels[i].stripLine;i++)this._labels[i].position<this.minimum||this._labels[i].position>this.maximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[i].position),t=1==e.lineWidth%2?.5+(t.y<<0):t.y<<0,e.moveTo(n.x1<<0,t),e.lineTo(n.x2<<0,t),e.stroke())}},C.prototype.renderAxisLine=function(){var t=this.chart.ctx;if("bottom"===this._position||"top"===this._position){if(this.lineThickness){t.lineWidth=this.lineThickness,t.strokeStyle=this.lineColor?this.lineColor:"black";var e=1==this.lineThickness%2?.5+(this.lineCoordinates.y1<<0):this.lineCoordinates.y1<<0;t.beginPath(),t.moveTo(this.lineCoordinates.x1,e),t.lineTo(this.lineCoordinates.x2,e),t.stroke()}}else"left"!==this._position&&"right"!==this._position||!this.lineThickness||(t.lineWidth=this.lineThickness,t.strokeStyle=this.lineColor,e=1==this.lineThickness%2?.5+(this.lineCoordinates.x1<<0):this.lineCoordinates.x1<<0,t.beginPath(),t.moveTo(e,this.lineCoordinates.y1),t.lineTo(e,this.lineCoordinates.y2),t.stroke())},C.prototype.getPixelCoordinatesOnAxis=function(t){var e={},n=this.lineCoordinates.width,i=this.lineCoordinates.height;return"bottom"!==this._position&&"top"!==this._position||(n/=Math.abs(this.maximum-this.minimum),e.x=this.lineCoordinates.x1+n*(t-this.minimum),e.y=this.lineCoordinates.y1),"left"!==this._position&&"right"!==this._position||(n=i/Math.abs(this.maximum-this.minimum),e.y=this.lineCoordinates.y2-n*(t-this.minimum),e.x=this.lineCoordinates.x2),e},C.prototype.getXValueAt=function(t){if(!t)return null;var e=null;return"left"===this._position?e=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-t.y)+this.chart.axisX.minimum:"bottom"===this._position&&(e=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t.x-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum),e},C.prototype.calculateValueToPixelconversionParameters=function(t){t={pixelPerUnit:null,minimum:null,reference:null};var e=this.lineCoordinates.width,n=this.lineCoordinates.height;t.minimum=this.minimum,"bottom"!==this._position&&"top"!==this._position||(t.pixelPerUnit=e/Math.abs(this.maximum-this.minimum),t.reference=this.lineCoordinates.x1),"left"!==this._position&&"right"!==this._position||(t.pixelPerUnit=-1*n/Math.abs(this.maximum-this.minimum),t.reference=this.lineCoordinates.y2),this.conversionParameters=t},C.prototype.calculateAxisParameters=function(){var t=this.chart.layoutManager.getFreeSpace();"bottom"===this._position||"top"===this._position?(this.maxWidth=t.width,this.maxHeight=t.height):(this.maxWidth=t.height,this.maxHeight=t.width);var e,n,i,r;t="axisX"===this.type?500>this.maxWidth?8:Math.max(6,Math.floor(this.maxWidth/62)):Math.floor(this.maxWidth/40);if("axisX"===this.type?(e=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:this.dataInfo.viewPortMin,0==(n=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:this.dataInfo.viewPortMax)-e&&(n+=.4,e-=.4),i=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1):"axisY"===this.type&&(e=void 0===this._options.minimum?this.dataInfo.viewPortMin:this._options.minimum,n=void 0===this._options.maximum?this.dataInfo.viewPortMax:this._options.maximum,0==n-e?(n+=5,e-=5):(0!==n&&(n+=Math.abs(.05)),0!==e&&(e-=Math.abs(.05))),this.includeZero&&void 0===this._options.minimum&&0<e&&(e=0),this.includeZero&&void 0===this._options.maximum&&0>n&&(n=0)),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?(r=n-e,this.intervalType||(r/1<=t?(this.interval=1,this.intervalType="millisecond"):r/2<=t?(this.interval=2,this.intervalType="millisecond"):r/5<=t?(this.interval=5,this.intervalType="millisecond"):r/10<=t?(this.interval=10,this.intervalType="millisecond"):r/20<=t?(this.interval=20,this.intervalType="millisecond"):r/50<=t?(this.interval=50,this.intervalType="millisecond"):r/100<=t?(this.interval=100,this.intervalType="millisecond"):r/200<=t?(this.interval=200,this.intervalType="millisecond"):r/250<=t?(this.interval=250,this.intervalType="millisecond"):r/300<=t?(this.interval=300,this.intervalType="millisecond"):r/400<=t?(this.interval=400,this.intervalType="millisecond"):r/500<=t?(this.interval=500,this.intervalType="millisecond"):r/(1*F.secondDuration)<=t?(this.interval=1,this.intervalType="second"):r/(2*F.secondDuration)<=t?(this.interval=2,this.intervalType="second"):r/(5*F.secondDuration)<=t?(this.interval=5,this.intervalType="second"):r/(10*F.secondDuration)<=t?(this.interval=10,this.intervalType="second"):r/(15*F.secondDuration)<=t?(this.interval=15,this.intervalType="second"):r/(20*F.secondDuration)<=t?(this.interval=20,this.intervalType="second"):r/(30*F.secondDuration)<=t?(this.interval=30,this.intervalType="second"):r/(1*F.minuteDuration)<=t?(this.interval=1,this.intervalType="minute"):r/(2*F.minuteDuration)<=t?(this.interval=2,this.intervalType="minute"):r/(5*F.minuteDuration)<=t?(this.interval=5,this.intervalType="minute"):r/(10*F.minuteDuration)<=t?(this.interval=10,this.intervalType="minute"):r/(15*F.minuteDuration)<=t?(this.interval=15,this.intervalType="minute"):r/(20*F.minuteDuration)<=t?(this.interval=20,this.intervalType="minute"):r/(30*F.minuteDuration)<=t?(this.interval=30,this.intervalType="minute"):r/(1*F.hourDuration)<=t?(this.interval=1,this.intervalType="hour"):r/(2*F.hourDuration)<=t?(this.interval=2,this.intervalType="hour"):r/(3*F.hourDuration)<=t?(this.interval=3,this.intervalType="hour"):r/(6*F.hourDuration)<=t?(this.interval=6,this.intervalType="hour"):r/(1*F.dayDuration)<=t?(this.interval=1,this.intervalType="day"):r/(2*F.dayDuration)<=t?(this.interval=2,this.intervalType="day"):r/(4*F.dayDuration)<=t?(this.interval=4,this.intervalType="day"):r/(1*F.weekDuration)<=t?(this.interval=1,this.intervalType="week"):r/(2*F.weekDuration)<=t?(this.interval=2,this.intervalType="week"):r/(3*F.weekDuration)<=t?(this.interval=3,this.intervalType="week"):r/(1*F.monthDuration)<=t?(this.interval=1,this.intervalType="month"):r/(2*F.monthDuration)<=t?(this.interval=2,this.intervalType="month"):r/(3*F.monthDuration)<=t?(this.interval=3,this.intervalType="month"):r/(6*F.monthDuration)<=t?(this.interval=6,this.intervalType="month"):(this.interval=r/(1*F.yearDuration)<=t?1:r/(2*F.yearDuration)<=t?2:r/(4*F.yearDuration)<=t?4:Math.floor(C.getNiceNumber(r/(t-1),!0)/F.yearDuration),this.intervalType="year")),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:e-i/2,this.maximum=this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:n+i/2,this.valueFormatString||("year"===this.intervalType?this.valueFormatString="YYYY":"month"===this.intervalType?this.valueFormatString="MMM YYYY":"week"===this.intervalType?this.valueFormatString="MMM DD YYYY":"day"===this.intervalType?this.valueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.valueFormatString="hh:mm TT":"minute"===this.intervalType?this.valueFormatString="hh:mm TT":"second"===this.intervalType?this.valueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.valueFormatString="fff'ms'")),this.intervalStartPosition=this.getLabelStartPoint(new Date(this.minimum),this.intervalType,this.interval)):(this.intervalType="number",r=C.getNiceNumber(n-e,!1),this.interval=this._options&&this._options.interval?this._options.interval:C.getNiceNumber(r/(t-1),!0),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:Math.floor(e/this.interval)*this.interval,this.maximum=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:Math.ceil(n/this.interval)*this.interval,"axisX"===this.type?(null===this.sessionVariables.internalMinimum&&(this.minimum=e-i/2),this.sessionVariables.internalMaximum||(this.maximum=n+i/2),this.intervalStartPosition=Math.floor((this.minimum+.2*this.interval)/this.interval)*this.interval):"axisY"===this.type&&(this.intervalStartPosition=this.minimum)),"axisX"===this.type&&(this._absoluteMinimum=this._options&&void 0!==this._options.minimum?this._options.minimum:this.dataInfo.min-i/2,this._absoluteMaximum=this._options&&void 0!==this._options.maximum?this._options.maximum:this.dataInfo.max+i/2),!this.valueFormatString&&(this.valueFormatString="#,##0.##",r=Math.abs(this.maximum-this.minimum),1>r&&(e=Math.floor(Math.abs(Math.log(r)/Math.LN10))+2,2<e)))for(n=0;n<e-2;n++)this.valueFormatString+="#"},C.getNiceNumber=function(t,e){var n=Math.floor(Math.log(t)/Math.LN10),i=t/Math.pow(10,n);return(e?1.5>i?1:3>i?2:7>i?5:10:1>=i?1:2>=i?2:5>=i?5:10)*Math.pow(10,n)},C.prototype.getLabelStartPoint=function(){var t=n(this.interval,this.intervalType);t=new Date(Math.floor(this.minimum/t)*t);return"millisecond"!==this.intervalType&&("second"===this.intervalType?0<t.getMilliseconds()&&(t.setSeconds(t.getSeconds()+1),t.setMilliseconds(0)):"minute"===this.intervalType?(0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMinutes(t.getMinutes()+1),t.setSeconds(0),t.setMilliseconds(0)):"hour"===this.intervalType?(0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"day"===this.intervalType?(0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"week"===this.intervalType?(0<t.getDay()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+(7-t.getDay())),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"month"===this.intervalType?(1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMonth(t.getMonth()+1),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"year"===this.intervalType&&(0<t.getMonth()||1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setFullYear(t.getFullYear()+1),t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0))),t},t(S,m),t(T,m),T.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.display="none";var t;t='<div style=" width: auto;height: auto;min-width: 50px;',t+="line-height: 20px;",t+="padding: 5px;",t+="font-family: Calibri, Arial, Georgia, serif;",t+="font-weight: 400;",t+="font-style: "+(E?"italic;":"normal;"),t+="font-size: 14px;",t+="color: #000000;",t+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",t+="text-align: left;",t+="border: 2px solid gray;",t+=E?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",t+="text-indent: 0px;",t+="white-space: nowrap;",t+="border-radius: 10px;",E||(t+="filter: alpha(opacity = 90);",t+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),t+='} "> Sample Tooltip</div>',this.container.innerHTML=t,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},T.prototype.mouseMoveHandler=function(t,e){this._lastUpdated&&40>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this._updateToolTip(t,e))},T.prototype._updateToolTip=function(t,e){if(this.enabled){if(void 0===t||void 0===e){if(isNaN(this._prevX)||isNaN(this._prevY))return;t=this._prevX,e=this._prevY}else this._prevX=t,this._prevY=e;var n=null,i=null,r=[],a=0;if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){for(a="xySwapped"===this.chart.plotInfo.axisPlacement?(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-e)+this.chart.axisX.minimum:(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum,n=[],i=0;i<this.chart.data.length;i++){var o=this.chart.data[i].getDataPointAtX(a,!0);o&&0<=o.index&&(o.dataSeries=this.chart.data[i],null!==o.dataPoint.y&&n.push(o))}if(0===n.length)return;for(n.sort(function(t,e){return t.distance-e.distance}),a=n[0],i=0;i<n.length;i++)n[i].dataPoint.x.valueOf()===a.dataPoint.x.valueOf()&&r.push(n[i]);n=null}else if((o=this.chart.getDataPointAtXY(t,e,!0))?(this.currentDataPointIndex=o.dataPointIndex,this.currentSeriesIndex=o.dataSeries.index):E?(o=d(t,e,this.chart._eventManager.ghostCtx),0<o&&void 0!==this.chart._eventManager.objectMap[o]?(eventObject=this.chart._eventManager.objectMap[o],this.currentSeriesIndex=eventObject.dataSeriesIndex,this.currentDataPointIndex=0<=eventObject.dataPointIndex?eventObject.dataPointIndex:-1):this.currentDataPointIndex=-1):this.currentDataPointIndex=-1,0<=this.currentSeriesIndex){if(i=this.chart.data[this.currentSeriesIndex],o={},0<=this.currentDataPointIndex)n=i.dataPoints[this.currentDataPointIndex],o.dataSeries=i,o.dataPoint=n,o.index=this.currentDataPointIndex,o.distance=Math.abs(n.x-a);else{if("line"!==i.type&&"stepLine"!==i.type&&"spline"!==i.type&&"area"!==i.type&&"stepArea"!==i.type&&"splineArea"!==i.type&&"stackedArea"!==i.type&&"stackedArea100"!==i.type)return;a=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum.valueOf(),(o=i.getDataPointAtX(a,!0)).dataSeries=i,this.currentDataPointIndex=o.index,n=o.dataPoint}null!==o.dataPoint.y&&r.push(o)}if(0<r.length){this.highlightObjects(r),a="",a=this.getToolTipInnerHTML({entries:r}),this.contentDiv.innerHTML=a,this.contentDiv.innerHTML=a,a=!1,"none"===this.container.style.display&&(a=!0,this.container.style.display="block");try{this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:r[0].dataPoint.color?r[0].dataPoint.color:r[0].dataSeries.color?r[0].dataSeries.color:r[0].dataSeries._colorSet[r[0].index%r[0].dataSeries._colorSet.length]}catch(t){}"pie"===r[0].dataSeries.type||"doughnut"===r[0].dataSeries.type||"bar"===r[0].dataSeries.type||"stackedBar"===r[0].dataSeries.type||"stackedBar100"===r[0].dataSeries.type?toolTipLeft=t-10-this.container.clientWidth:(toolTipLeft=this.chart.axisX.lineCoordinates.width/Math.abs(this.chart.axisX.maximum-this.chart.axisX.minimum)*Math.abs(r[0].dataPoint.x-this.chart.axisX.minimum)+this.chart.axisX.lineCoordinates.x1+.5-this.container.clientWidth<<0,toolTipLeft-=10),toolTipLeft=0<toolTipLeft?toolTipLeft+"px":toolTipLeft+this.container.clientWidth+20+"px",0<(r=10-(r=1!==r.length||this.shared||"line"!==r[0].dataSeries.type&&"stepLine"!==r[0].dataSeries.type&&"spline"!==r[0].dataSeries.type&&"area"!==r[0].dataSeries.type&&"stepArea"!==r[0].dataSeries.type&&"splineArea"!==r[0].dataSeries.type&&"stackedArea"!==r[0].dataSeries.type&&"stackedArea100"!==r[0].dataSeries.type?"bar"===r[0].dataSeries.type||"stackedBar"===r[0].dataSeries.type||"stackedBar100"===r[0].dataSeries.type?r[0].dataSeries.axisX.lineCoordinates.y2-r[0].dataSeries.axisX.lineCoordinates.height/Math.abs(r[0].dataSeries.axisX.maximum-r[0].dataSeries.axisX.minimum)*Math.abs(r[0].dataPoint.x-r[0].dataSeries.axisX.minimum)+.5<<0:e:r[0].dataSeries.axisY.lineCoordinates.y2-r[0].dataSeries.axisY.lineCoordinates.height/Math.abs(r[0].dataSeries.axisY.maximum-r[0].dataSeries.axisY.minimum)*Math.abs(r[0].dataPoint.y-r[0].dataSeries.axisY.minimum)+.5<<0))+this.container.clientHeight+5&&(r-=r+this.container.clientHeight+5-0),this.container.style.left=toolTipLeft,this.container.style.bottom=r+"px",!this.animationEnabled||a?this.disableAnimation():this.enableAnimation()}}},T.prototype.highlightObjects=function(t){if(this.enabled){var e=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas(),e.save();var n=this.chart.plotArea;for(e.rect(n.x1,n.y1,n.width,n.height),e.clip(),e.beginPath(),n=0;n<t.length;n++){var i=t[n];if((i=this.chart._eventManager.objectMap[i.dataSeries.dataPointIds[i.index]])&&i.objectType&&"dataPoint"===i.objectType){var r=this.chart.data[i.dataSeriesIndex],a=i.dataPointIndex;"line"===r.type||"stepLine"===r.type||"spline"===r.type||"scatter"===r.type||"area"===r.type||"stepArea"===r.type||"splineArea"===r.type||"stackedArea"===r.type||"stackedArea100"===r.type?((r=r.getMarkerProperties(a,i.x1,i.y1,this.chart.overlaidCanvasCtx)).size=Math.max(1.5*r.size<<0,10),r.borderColor=r.borderColor||"#FFFFFF",r.borderThickness=r.borderThickness||Math.ceil(.1*r.size),V.drawMarkers([r])):"bubble"===r.type?((r=r.getMarkerProperties(a,i.x1,i.y1,this.chart.overlaidCanvasCtx)).size=i.size,r.color="white",r.borderColor="white",e.globalAlpha=.3,V.drawMarkers([r]),e.globalAlpha=1):"column"===r.type||"stackedColumn"===r.type||"stackedColumn100"===r.type||"bar"===r.type||"stackedBar"===r.type||"stackedBar100"===r.type?(e.globalAlpha=.3,H(e,i.x1,i.y1,i.x2,i.y2,"white",!1,!1,!1,!1),e.globalAlpha=1):"pie"!==r.type&&"doughnut"!==r.type||(e.globalAlpha=.3,Y(e,i.center,i.radius,"white",r.type,i.startAngle,i.endAngle),e.globalAlpha=1)}}e.globalAlpha=1,e.restore()}},T.prototype.getToolTipInnerHTML=function(t){t=t.entries;for(var e="",n=null,i=null,r=0,a="",o=!0,s=0;s<t.length;s++)if(t[s].dataSeries.toolTipContent||t[s].dataPoint.toolTipContent){o=!1;break}if(o&&this.content&&"function"==typeof this.content)e=this.content({entries:t});else if(1<t.length)for(s=0;s<t.length;s++)n=t[s].dataSeries,i=t[s].dataPoint,r=t[s].index,a="",0===s&&o&&!this.content&&(a+=void 0!==this.chart.axisX.labels[i.x]?this.chart.axisX.labels[i.x]:"{x}",a+="</br>"),"line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"column"===n.type||"bar"===n.type||"scatter"===n.type||"stackedColumn"===n.type||"stackedColumn100"===n.type||"stackedBar"===n.type||"stackedBar100"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type?a+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}":"bubble"===n.type?a+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"pie"!==n.type&&"doughnut"!==n.type||(a+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"&nbsp;&nbsp;{y}"),e+=this.chart.replaceKeywordsWithValue(a,i,n,r),s<t.length-1&&(e+="</br>");else n=t[0].dataSeries,i=t[0].dataPoint,r=t[0].index,"line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"column"===n.type||"bar"===n.type||"scatter"===n.type||"stackedColumn"===n.type||"stackedColumn100"===n.type||"stackedBar"===n.type||"stackedBar100"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type?a=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(i.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y}":"bubble"===n.type?a=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(i.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"pie"!==n.type&&"doughnut"!==n.type||(a=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:(i.name?"{name}:&nbsp;&nbsp;":i.label?"{label}:&nbsp;&nbsp;":"")+"{y}"),e+=this.chart.replaceKeywordsWithValue(a,i,n,r);return e},T.prototype.enableAnimation=function(){this.container.style.WebkitTransition||(this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.transition="left .2s ease-out, bottom .2s ease-out")},T.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},T.prototype.hide=function(){this.enabled&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.chart.resetOverlayedCanvas())},v.prototype.replaceKeywordsWithValue=function(t,e,n,i){var r=this;return t.replace(/\{\s*[a-zA-Z]+\s*\}|"[^"]*"|'[^']*'/g,function(t){if('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])return t.slice(1,t.length-1);var o=null;if("color"===(t=a(t.slice(1,t.length-1))))return e.color?e.color:n.color?n.color:n._colorSet[i%n._colorSet.length];if(e.hasOwnProperty(t))o=e;else{if(!n.hasOwnProperty(t))return"";o=n}return"x"===t?r.axisX&&"dateTime"===r.plotInfo.axisXValueType?B(o[t],e.xValueFormatString?e.xValueFormatString:n.xValueFormatString?n.xValueFormatString:r.axisX&&r.axisX.valueFormatString?r.axisX.valueFormatString:"DD MMM YY",r._cultureInfo):j(o[t],e.xValueFormatString?e.xValueFormatString:n.xValueFormatString?n.xValueFormatString:"#,##0.########",r._cultureInfo):"y"===t?j(o[t],e.yValueFormatString?e.yValueFormatString:n.yValueFormatString?n.yValueFormatString:"#,##0.########",r._cultureInfo):o[t]})},P.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],E&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},P.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},P.prototype.mouseEventHandler=function(t){if("mousemove"===t.type||"click"===t.type){var e=[],n=R(t),i=null;if((i=this.chart.getObjectAtXY(n.x,n.y,!1))&&void 0!==this.objectMap[i])if(i=this.objectMap[i],"dataPoint"===i.objectType){var r=this.chart.data[i.dataSeriesIndex],a=r.dataPoints[i.dataPointIndex],o=i.dataPointIndex;i.eventParameter={x:n.x,y:n.y,dataPoint:a,dataSeries:r._options,dataPointIndex:o,dataSeriesIndex:r.index},i.eventContext={context:a,userContext:a,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(i),(i=this.objectMap[r.id]).eventParameter={x:n.x,y:n.y,dataPoint:a,dataSeries:r._options,dataPointIndex:o,dataSeriesIndex:r.index},i.eventContext={context:r,userContext:r._options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(this.objectMap[r.id])}else"legendItem"===i.objectType&&(r=this.chart.data[i.dataSeriesIndex],a=r.dataPoints[i.dataPointIndex],i.eventParameter={x:n.x,y:n.y,dataSeries:r._options,dataPoint:a,dataPointIndex:i.dataPointIndex,dataSeriesIndex:i.dataSeriesIndex},i.eventContext={context:this.chart.legend,userContext:this.chart.legend._options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},e.push(i));for(r=[],n=0;n<this.mouseoveredObjectMaps.length;n++){for(a=!0,i=0;i<e.length;i++)if(e[i].id===this.mouseoveredObjectMaps[n].id){a=!1;break}a?this.fireEvent(this.mouseoveredObjectMaps[n],"mouseout",t):r.push(this.mouseoveredObjectMaps[n])}for(this.mouseoveredObjectMaps=r,n=0;n<e.length;n++){for(r=!1,i=0;i<this.mouseoveredObjectMaps.length;i++)if(e[n].id===this.mouseoveredObjectMaps[i].id){r=!0;break}r||(this.fireEvent(e[n],"mouseover",t),this.mouseoveredObjectMaps.push(e[n])),"click"===t.type?this.fireEvent(e[n],"click",t):"mousemove"===t.type&&this.fireEvent(e[n],"mousemove",t)}}},P.prototype.fireEvent=function(t,e,n){if(t&&e){var i=t.eventParameter,r=t.eventContext,a=t.eventContext.userContext;a&&r&&a[r[e]]&&a[r[e]].call(a,i),"mouseout"!==e?a.cursor&&a.cursor!==n.target.style.cursor&&(n.target.style.cursor=a.cursor):(n.target.style.cursor=this.chart._defaultCursor,delete t.eventParameter,delete t.eventContext),"click"===e&&"dataPoint"===t.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[t.dataSeriesIndex],i)}},t(A,m);var V={drawMarker:function(t,e,n,i,r,a,o,s){if(n){var l=1;n.fillStyle=a||"#000000",n.strokeStyle=o||"#000000",n.lineWidth=s||0,"circle"===i?(n.moveTo(t,e),n.beginPath(),n.arc(t,e,r/2,0,2*Math.PI,!1),a&&n.fill(),s&&(o?n.stroke():(l=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=l))):"square"===i?(n.beginPath(),n.rect(t-r/2,e-r/2,r,r),a&&n.fill(),s&&(o?n.stroke():(l=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=l))):"triangle"===i?(n.beginPath(),n.moveTo(t-r/2,e+r/2),n.lineTo(t+r/2,e+r/2),n.lineTo(t,e-r/2),n.closePath(),a&&n.fill(),s&&(o?n.stroke():(l=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=l)),n.beginPath()):"cross"===i&&(n.strokeStyle=a,n.lineWidth=r/4,n.beginPath(),n.moveTo(t-r/2,e-r/2),n.lineTo(t+r/2,e+r/2),n.stroke(),n.moveTo(t+r/2,e-r/2),n.lineTo(t-r/2,e+r/2),n.stroke())}},drawMarkers:function(t){for(var e=0;e<t.length;e++){var n=t[e];V.drawMarker(n.x,n.y,n.ctx,n.type,n.size,n.color,n.borderColor,n.borderThickness)}}},G={Chart:function(t,e){var n=new v(t,e,this);this.render=function(){n.render(this.options)},this.options=n._options},addColorSet:function(t,e){I[t]=e},addCultureInfo:function(t,e){O[t]=e}};G.Chart.version="v1.4.1 GA",window.CanvasJS=G}(),document.createElement("canvas").getContext||function(){function t(){return this.context_||(this.context_=new d(this))}function e(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(t){t.namespaces.g_vml_||t.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),t.namespaces.g_o_||t.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),t.styleSheets.ex_canvas_||(t=t.createStyleSheet(),t.owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function i(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function r(t){(t=t.srcElement).firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function a(t,e){for(var n=[[1,0,0],[0,1,0],[0,0,1]],i=0;3>i;i++)for(var r=0;3>r;r++){for(var a=0,o=0;3>o;o++)a+=t[i][o]*e[o][r];n[i][r]=a}return n}function o(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function s(t){var e=t.indexOf("(",3),n=t.indexOf(")",e+1);return 4==(e=t.substring(e+1,n).split(",")).length&&"a"==t.charAt(3)||(e[3]=1),e}function l(t,e,n){return Math.min(n,Math.max(e,t))}function u(t,e,n){return 0>n&&n++,1<n&&n--,1>6*n?t+6*(e-t)*n:1>2*n?e:2>3*n?t+6*(e-t)*(2/3-n):t}function c(t){if(t in L)return L[t];var e,n=1;if("#"==(t=String(t)).charAt(0))e=t;else if(/^rgb/.test(t)){n=s(t),e="#";for(var i,r=0;3>r;r++)i=-1!=n[r].indexOf("%")?Math.floor(parseFloat(n[r])/100*255):+n[r],e+=E[l(i,0,255)];n=+n[3]}else if(/^hsl/.test(t)){if(r=n=s(t),0>(e=parseFloat(r[0])/360%360)&&e++,i=l(parseFloat(r[1])/100,0,1),r=l(parseFloat(r[2])/100,0,1),0==i)i=r=e=r;else{var a=.5>r?r*(1+i):r+i-r*i,o=2*r-a;i=u(o,a,e+1/3),r=u(o,a,e),e=u(o,a,e-1/3)}e="#"+E[Math.floor(255*i)]+E[Math.floor(255*r)]+E[Math.floor(255*e)],n=n[3]}else e=I[t]||t;return L[t]={color:e,alpha:n}}function d(t){this.m_=[[1,0,0],[0,1,0],[0,0,1]],this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*S,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",n=t.ownerDocument.createElement("div");n.style.cssText=e,t.appendChild(n),(e=n.cloneNode(!1)).style.backgroundColor="red",e.style.filter="alpha(opacity=0)",t.appendChild(e),this.element_=n,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function h(t,e,n,i){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:n.x,cp2y:n.y,x:i.x,y:i.y}),t.currentX_=i.x,t.currentY_=i.y}function f(t,e){var n=(i=c(t.strokeStyle)).color,i=i.alpha*t.globalAlpha,r=t.lineScale_*t.lineWidth;1>r&&(i*=r),e.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',t.lineJoin,'"',' miterlimit="',t.miterLimit,'"',' endcap="',$[t.lineCap]||"square",'"',' weight="',r,'px"',' color="',n,'" />')}function p(t,e,n,i){var r=t.fillStyle,a=t.arcScaleX_,o=t.arcScaleY_,s=i.x-n.x,l=i.y-n.y;if(r instanceof v){var u=0,d=i=0,h=0,f=1;if("gradient"==r.type_){u=r.x1_/a,n=r.y1_/o;var p=g(t,r.x0_/a,r.y0_/o);u=g(t,u,n);0>(u=180*Math.atan2(u.x-p.x,u.y-p.y)/Math.PI)&&(u+=360),1e-6>u&&(u=0)}else p=g(t,r.x0_,r.y0_),i=(p.x-n.x)/s,d=(p.y-n.y)/l,s/=a*S,l/=o*S,f=x.max(s,l),h=2*r.r0_/f,f=2*r.r1_/f-h;(a=r.colors_).sort(function(t,e){return t.offset-e.offset}),o=a.length,p=a[0].color,n=a[o-1].color,s=a[0].alpha*t.globalAlpha,t=a[o-1].alpha*t.globalAlpha;l=[];for(var m=0;m<o;m++){var b=a[m];l.push(b.offset*f+h+" "+b.color)}e.push('<g_vml_:fill type="',r.type_,'"',' method="none" focus="100%"',' color="',p,'"',' color2="',n,'"',' colors="',l.join(","),'"',' opacity="',t,'"',' g_o_:opacity2="',s,'"',' angle="',u,'"',' focusposition="',i,",",d,'" />')}else r instanceof y?s&&l&&e.push("<g_vml_:fill",' position="',-n.x/s*a*a,",",-n.y/l*o*o,'"',' type="tile"',' src="',r.src_,'" />'):(r=c(t.fillStyle),e.push('<g_vml_:fill color="',r.color,'" opacity="',r.alpha*t.globalAlpha,'" />'))}function g(t,e,n){return t=t.m_,{x:S*(e*t[0][0]+n*t[1][0]+t[2][0])-T,y:S*(e*t[0][1]+n*t[1][1]+t[2][1])-T}}function m(t,e,n){isFinite(e[0][0])&&isFinite(e[0][1])&&isFinite(e[1][0])&&isFinite(e[1][1])&&isFinite(e[2][0])&&isFinite(e[2][1])&&(t.m_=e,n&&(t.lineScale_=C(_(e[0][0]*e[1][1]-e[0][1]*e[1][0]))))}function v(t){this.type_=t,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function y(t,e){if(!t||1!=t.nodeType||"IMG"!=t.tagName)throw new b("TYPE_MISMATCH_ERR");if("complete"!=t.readyState)throw new b("INVALID_STATE_ERR");switch(e){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=e;break;default:throw new b("SYNTAX_ERR")}this.src_=t.src,this.width_=t.width,this.height_=t.height}function b(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var x=Math,w=x.round,M=x.sin,k=x.cos,_=x.abs,C=x.sqrt,S=10,T=S/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var P=Array.prototype.slice;n(document);var A={init:function(t){(t=t||document).createElement("canvas"),t.attachEvent("onreadystatechange",function(t,e,n){var i=P.call(arguments,2);return function(){return t.apply(e,i.concat(P.call(arguments)))}}(this.init_,this,t))},init_:function(t){t=t.getElementsByTagName("canvas");for(var e=0;e<t.length;e++)this.initElement(t[e])},initElement:function(e){if(!e.getContext){e.getContext=t,n(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",i),e.attachEvent("onresize",r);var a=e.attributes;a.width&&a.width.specified?e.style.width=a.width.nodeValue+"px":e.width=e.clientWidth,a.height&&a.height.specified?e.style.height=a.height.nodeValue+"px":e.height=e.clientHeight}return e}};A.init();for(var E=[],D=0;16>D;D++)for(var O=0;16>O;O++)E[16*D+O]=D.toString(16)+O.toString(16);var I={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},L={},F={},$={butt:"flat",round:"round"};(D=d.prototype).clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},D.beginPath=function(){this.currentPath_=[]},D.moveTo=function(t,e){var n=g(this,t,e);this.currentPath_.push({type:"moveTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},D.lineTo=function(t,e){var n=g(this,t,e);this.currentPath_.push({type:"lineTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},D.bezierCurveTo=function(t,e,n,i,r,a){r=g(this,r,a),h(this,t=g(this,t,e),n=g(this,n,i),r)},D.quadraticCurveTo=function(t,e,n,i){t=g(this,t,e),n=g(this,n,i),h(this,i={x:this.currentX_+2/3*(t.x-this.currentX_),y:this.currentY_+2/3*(t.y-this.currentY_)},{x:i.x+(n.x-this.currentX_)/3,y:i.y+(n.y-this.currentY_)/3},n)},D.arc=function(t,e,n,i,r,a){n*=S;var o=a?"at":"wa",s=t+k(i)*n-T,l=e+M(i)*n-T;i=t+k(r)*n-T,r=e+M(r)*n-T,s!=i||a||(s+=.125),t=g(this,t,e),s=g(this,s,l),i=g(this,i,r),this.currentPath_.push({type:o,x:t.x,y:t.y,radius:n,xStart:s.x,yStart:s.y,xEnd:i.x,yEnd:i.y})},D.rect=function(t,e,n,i){this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.closePath()},D.strokeRect=function(t,e,n,i){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.closePath(),this.stroke(),this.currentPath_=r},D.fillRect=function(t,e,n,i){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.closePath(),this.fill(),this.currentPath_=r},D.createLinearGradient=function(t,e,n,i){var r=new v("gradient");return r.x0_=t,r.y0_=e,r.x1_=n,r.y1_=i,r},D.createRadialGradient=function(t,e,n,i,r,a){var o=new v("gradientradial");return o.x0_=t,o.y0_=e,o.r0_=n,o.x1_=i,o.y1_=r,o.r1_=a,o},D.drawImage=function(t,e){var n,i,r,a,o,s,l,u;r=t.runtimeStyle.width,a=t.runtimeStyle.height,t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var c=t.width,d=t.height;if(t.runtimeStyle.width=r,t.runtimeStyle.height=a,3==arguments.length)n=arguments[1],i=arguments[2],o=s=0,l=r=c,u=a=d;else if(5==arguments.length)n=arguments[1],i=arguments[2],r=arguments[3],a=arguments[4],o=s=0,l=c,u=d;else{if(9!=arguments.length)throw Error("Invalid number of arguments");o=arguments[1],s=arguments[2],l=arguments[3],u=arguments[4],n=arguments[5],i=arguments[6],r=arguments[7],a=arguments[8]}var h=g(this,n,i),f=[];if(f.push(" <g_vml_:group",' coordsize="',10*S,",",10*S,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var p=[];p.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",w(h.x/S),",","Dy=",w(h.y/S),"");var m=g(this,n+r,i),v=g(this,n,i+a);n=g(this,n+r,i+a),h.x=x.max(h.x,m.x,v.x,n.x),h.y=x.max(h.y,m.y,v.y,n.y),f.push("padding:0 ",w(h.x/S),"px ",w(h.y/S),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",p.join(""),", sizingmethod='clip');")}else f.push("top:",w(h.y/S),"px;left:",w(h.x/S),"px;");f.push(' ">','<g_vml_:image src="',t.src,'"',' style="width:',S*r,"px;"," height:",S*a,'px"',' cropleft="',o/c,'"',' croptop="',s/d,'"',' cropright="',(c-o-l)/c,'"',' cropbottom="',(d-s-u)/d,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",f.join(""))},D.stroke=function(t){var e=[];e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*S,",",10*S,'"',' stroked="',!t,'"',' path="');for(var n={x:null,y:null},i={x:null,y:null},r=0;r<this.currentPath_.length;r++){var a=this.currentPath_[r];switch(a.type){case"moveTo":e.push(" m ",w(a.x),",",w(a.y));break;case"lineTo":e.push(" l ",w(a.x),",",w(a.y));break;case"close":e.push(" x "),a=null;break;case"bezierCurveTo":e.push(" c ",w(a.cp1x),",",w(a.cp1y),",",w(a.cp2x),",",w(a.cp2y),",",w(a.x),",",w(a.y));break;case"at":case"wa":e.push(" ",a.type," ",w(a.x-this.arcScaleX_*a.radius),",",w(a.y-this.arcScaleY_*a.radius)," ",w(a.x+this.arcScaleX_*a.radius),",",w(a.y+this.arcScaleY_*a.radius)," ",w(a.xStart),",",w(a.yStart)," ",w(a.xEnd),",",w(a.yEnd))}a&&((null==n.x||a.x<n.x)&&(n.x=a.x),(null==i.x||a.x>i.x)&&(i.x=a.x),(null==n.y||a.y<n.y)&&(n.y=a.y),(null==i.y||a.y>i.y)&&(i.y=a.y))}e.push(' ">'),t?p(this,e,n,i):f(this,e),e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},D.fill=function(){this.stroke(!0)},D.closePath=function(){this.currentPath_.push({type:"close"})},D.save=function(){var t={};o(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=a([[1,0,0],[0,1,0],[0,0,1]],this.m_)},D.restore=function(){this.aStack_.length&&(o(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},D.translate=function(t,e){m(this,a([[1,0,0],[0,1,0],[t,e,1]],this.m_),!1)},D.rotate=function(t){var e=k(t);m(this,a([[e,t=M(t),0],[-t,e,0],[0,0,1]],this.m_),!1)},D.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e,m(this,a([[t,0,0],[0,e,0],[0,0,1]],this.m_),!0)},D.transform=function(t,e,n,i,r,o){m(this,a([[t,e,0],[n,i,0],[r,o,1]],this.m_),!0)},D.setTransform=function(t,e,n,i,r,a){m(this,[[t,e,0],[n,i,0],[r,a,1]],!0)},D.drawText_=function(t,n,i,r,a){var o=this.m_;r=0;var s,l=1e3,u=0,c=[];if(s=this.font,F[s])s=F[s];else{var d=document.createElement("div").style;try{d.font=s}catch(t){}s=F[s]={style:d.fontStyle||"normal",variant:d.fontVariant||"normal",weight:d.fontWeight||"normal",size:d.fontSize||10,family:d.fontFamily||"sans-serif"}}d=s;var h=this.element_;s={};for(var m in d)s[m]=d[m];switch(m=parseFloat(h.currentStyle.fontSize),h=parseFloat(d.size),"number"==typeof d.size?s.size=d.size:-1!=d.size.indexOf("px")?s.size=h:-1!=d.size.indexOf("em")?s.size=m*h:-1!=d.size.indexOf("%")?s.size=m/100*h:-1!=d.size.indexOf("pt")?s.size=h/.75:s.size=m,s.size*=.981,m=s.style+" "+s.variant+" "+s.weight+" "+s.size+"px "+s.family,h=this.element_.currentStyle,d=this.textAlign.toLowerCase()){case"left":case"center":case"right":break;case"end":d="ltr"==h.direction?"right":"left";break;case"start":d="rtl"==h.direction?"right":"left";break;default:d="left"}switch(this.textBaseline){case"hanging":case"top":u=s.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":u=-s.size/2.25}switch(d){case"right":r=1e3,l=.05;break;case"center":r=l=500}n=g(this,n+0,i+u),c.push('<g_vml_:line from="',-r,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!a,'" stroked="',!!a,'" style="position:absolute;width:1px;height:1px;">'),a?f(this,c):p(this,c,{x:-r,y:0},{x:l,y:s.size}),a=o[0][0].toFixed(3)+","+o[1][0].toFixed(3)+","+o[0][1].toFixed(3)+","+o[1][1].toFixed(3)+",0,0",n=w(n.x/S)+","+w(n.y/S),c.push('<g_vml_:skew on="t" matrix="',a,'" ',' offset="',n,'" origin="',r,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',e(t),'" style="v-text-align:',d,";font:",e(m),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",c.join(""))},D.fillText=function(t,e,n,i){this.drawText_(t,e,n,i,!1)},D.strokeText=function(t,e,n,i){this.drawText_(t,e,n,i,!0)},D.measureText=function(t){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var e=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(e.createTextNode(t)),{width:this.textMeasureEl_.offsetWidth}},D.clip=function(){},D.arcTo=function(){},D.createPattern=function(t,e){return new y(t,e)},v.prototype.addColorStop=function(t,e){e=c(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})},(D=b.prototype=Error()).INDEX_SIZE_ERR=1,D.DOMSTRING_SIZE_ERR=2,D.HIERARCHY_REQUEST_ERR=3,D.WRONG_DOCUMENT_ERR=4,D.INVALID_CHARACTER_ERR=5,D.NO_DATA_ALLOWED_ERR=6,D.NO_MODIFICATION_ALLOWED_ERR=7,D.NOT_FOUND_ERR=8,D.NOT_SUPPORTED_ERR=9,D.INUSE_ATTRIBUTE_ERR=10,D.INVALID_STATE_ERR=11,D.SYNTAX_ERR=12,D.INVALID_MODIFICATION_ERR=13,D.NAMESPACE_ERR=14,D.INVALID_ACCESS_ERR=15,D.VALIDATION_ERR=16,D.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=A,CanvasRenderingContext2D=d,CanvasGradient=v,CanvasPattern=y,DOMException=b}(),function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function r(t){return!isNaN(t)}function a(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}function o(t){return t.length}function s(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function l(){this._=Object.create(null)}function u(t){return(t+="")===ca||t[0]===da?da+t:t}function c(t){return(t+="")[0]===da?t.slice(1):t}function d(t){return u(t)in this._}function h(t){return(t=u(t))in this._&&delete this._[t]}function f(){var t=[];for(var e in this._)t.push(c(e));return t}function p(){var t=0;for(var e in this._)++t;return t}function g(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function v(t){return t}function y(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=ha.length;i>n;++n){var r=ha[n]+e;if(r in t)return r}}function b(){}function x(){}function w(t){function e(){for(var e,i=n,r=-1,a=i.length;++r<a;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new l;return e.on=function(e,r){var a,o=i.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function M(){Qr.event.preventDefault()}function k(){for(var t,e=Qr.event;t=e.sourceEvent;)e=t;return e}function _(t){for(var e=new x,n=0,i=arguments.length;++n<i;)e[arguments[n]]=w(e);return e.of=function(n,i){return function(r){try{var a=r.sourceEvent=Qr.event;r.target=t,Qr.event=r,e[r.type].apply(n,i)}finally{Qr.event=a}}},e}function C(t){return pa(t,ya),t}function S(t){return"function"==typeof t?t:function(){return ga(t,this)}}function T(t){return"function"==typeof t?t:function(){return ma(t,this)}}function P(t,e){return t=Qr.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function A(t){return t.trim().replace(/\s+/g," ")}function E(t){return new RegExp("(?:^|\\s+)"+Qr.requote(t)+"(?:\\s+|$)","g")}function D(t){return(t+"").trim().split(/^|\s+/)}function O(t,e){var n=(t=D(t).map(I)).length;return"function"==typeof e?function(){for(var i=-1,r=e.apply(this,arguments);++i<n;)t[i](this,r)}:function(){for(var i=-1;++i<n;)t[i](this,e)}}function I(t){var e=E(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",A(r+" "+t))):n.setAttribute("class",A(r.replace(e," ")))}}function L(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}:function(){this.style.setProperty(t,e,n)}}function F(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function $(t){return"function"==typeof t?t:(t=Qr.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}}function z(){var t=this.parentNode;t&&t.removeChild(this)}function B(t){return{__data__:t}}function j(t){return function(){return va(this,t)}}function R(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,a=t[n],o=0,s=a.length;s>o;o++)(r=a[o])&&e(r,o,n);return t}function N(t){return pa(t,xa),t}function U(t,e,n){function i(){var e=this[r];e&&(this.removeEventListener(t,e,e.$),delete this[r])}var r="__on"+t,a=t.indexOf("."),o=X;a>0&&(t=t.slice(0,a));var s=wa.get(t);return s&&(t=s,o=W),a?e?function(){var a=o(e,ea(arguments));i.call(this),this.addEventListener(t,this[r]=a,a.$=n),a._=e}:i:e?b:function(){var e,n=new RegExp("^__on([^.]+)"+Qr.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}}function X(t,e){return function(n){var i=Qr.event;Qr.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Qr.event=i}}}function W(t,e){var n=X(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function H(n){var i=".dragsuppress-"+ ++ka,r="click"+i,a=Qr.select(e(n)).on("touchmove"+i,M).on("dragstart"+i,M).on("selectstart"+i,M);if(null==Ma&&(Ma=!("onselectstart"in n)&&y(n.style,"userSelect")),Ma){var o=t(n).style,s=o[Ma];o[Ma]="none"}return function(t){if(a.on(i,null),Ma&&(o[Ma]=s),t){var e=function(){a.on(r,null)};a.on(r,function(){M(),e()},!0),setTimeout(e,0)}}}function Y(t,n){n.changedTouches&&(n=n.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(0>_a){var a=e(t);if(a.scrollX||a.scrollY){var o=(i=Qr.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_a=!(o.f||o.e),i.remove()}}return _a?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function V(){return Qr.event.changedTouches[0].identifier}function G(t){return t>0?1:0>t?-1:0}function q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Z(t){return t>1?0:-1>t?Ta:Math.acos(t)}function K(t){return t>1?Ea:-1>t?-Ea:Math.asin(t)}function J(t){return((t=Math.exp(t))+1/t)/2}function Q(t){return(t=Math.sin(t/2))*t}function tt(){}function et(t,e,n){return this instanceof et?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof et?new et(t.h,t.s,t.l):gt(""+t,mt,et):new et(t,e,n)}function nt(t,e,n){function i(t){return Math.round(255*(e=t,e>360?e-=360:0>e&&(e+=360),60>e?r+(a-r)*e/60:180>e?a:240>e?r+(a-r)*(240-e)/60:r));var e}var r,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,r=2*(n=0>n?0:n>1?1:n)-(a=.5>=n?n*(1+e):n+e-n*e),new dt(i(t+120),i(t),i(t-120))}function it(t,e,n){return this instanceof it?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof it?new it(t.h,t.c,t.l):st(t instanceof at?t.l:(t=vt((t=Qr.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new it(t,e,n)}function rt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new at(n,Math.cos(t*=Da)*e,Math.sin(t)*e)}function at(t,e,n){return this instanceof at?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof at?new at(t.l,t.a,t.b):t instanceof it?rt(t.h,t.c,t.l):vt((t=dt(t)).r,t.g,t.b):new at(t,e,n)}function ot(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return new dt(ct(3.2404542*(r=lt(r)*Na)-1.5371385*(i=lt(i)*Ua)-.4985314*(a=lt(a)*Xa)),ct(-.969266*r+1.8760108*i+.041556*a),ct(.0556434*r-.2040259*i+1.0572252*a))}function st(t,e,n){return t>0?new it(Math.atan2(n,e)*Oa,Math.sqrt(e*e+n*n),t):new it(NaN,NaN,t)}function lt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ut(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ct(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function dt(t,e,n){return this instanceof dt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof dt?new dt(t.r,t.g,t.b):gt(""+t,dt,nt):new dt(t,e,n)}function ht(t){return new dt(t>>16,t>>8&255,255&t)}function ft(t){return ht(t)+""}function pt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function gt(t,e,n){t=t.toLowerCase();var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(bt(r[0]),bt(r[1]),bt(r[2]))}return(a=Ya.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function mt(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(r=.5>l?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&1>l?0:i),new et(i,r,l)}function vt(t,e,n){var i=ut((.4124564*(t=yt(t))+.3575761*(e=yt(e))+.1804375*(n=yt(n)))/Na),r=ut((.2126729*t+.7151522*e+.072175*n)/Ua);return at(116*r-16,500*(i-r),200*(r-ut((.0193339*t+.119192*e+.9503041*n)/Xa)))}function yt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function bt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function xt(t){return"function"==typeof t?t:function(){return t}}function wt(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Mt(e,n,t,i)}}function Mt(t,e,n,i){function r(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&300>e||304===e){try{t=n.call(a,l)}catch(t){return void o.error.call(a,t)}o.load.call(a,t)}else o.error.call(a,l)}var a={},o=Qr.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=Qr.event;Qr.event=t;try{o.progress.call(a,l)}finally{Qr.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(u=t,a):u},a.response=function(t){return n=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(ea(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=r&&a.on("error",r).on("load",function(t){r(null,t)}),o.beforesend.call(a,l),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},Qr.rebind(a,o,"on"),null==i?a:a.get(1===(c=i).length?function(t,e){c(null==t?e:null)}:c);var c}function kt(){var t=_t(),e=Ct()-t;e>24?(isFinite(e)&&(clearTimeout(Za),Za=setTimeout(kt,e)),qa=0):(qa=1,Ja(kt))}function _t(){var t=Date.now();for(Ka=Va;Ka;)t>=Ka.t&&(Ka.f=Ka.c(t-Ka.t)),Ka=Ka.n;return t}function Ct(){for(var t,e=Va,n=1/0;e;)e.f?e=t?t.n=e.n:Va=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Ga=t,n}function St(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Tt(t){return t+""}function Pt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function At(t,e,n){function i(e){var n=t(e),i=a(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new io(n-1)),1),n}function a(t,n){return e(t=new io(+t),n),t}function o(t,i,a){var o=r(t),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;i>o;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=i,t.ceil=r,t.offset=a,t.range=o;var s=t.utc=Et(t);return s.floor=s,s.round=Et(i),s.ceil=Et(r),s.offset=Et(a),s.range=function(t,e,n){try{io=Pt;var i=new Pt;return i._=t,o(i,e,n)}finally{io=Date}},t}function Et(t){return function(e,n){try{io=Pt;var i=new Pt;return i._=e,t(i,n)._}finally{io=Date}}}function Dt(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(e)+r:r)}function Ot(t){return new RegExp("^(?:"+t.map(Qr.requote).join("|")+")","i")}function It(t){for(var e=new l,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Lt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ft(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function $t(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function zt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Bt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0],r+(r>68?1900:2e3)),n+i[0].length):-1;var r}function jt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Rt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Nt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Ut(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Xt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Wt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Ht(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Yt(t,e,n){oo.lastIndex=0;var i=oo.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Vt(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=ua(e)/60|0,r=ua(e)%60;return n+Dt(i,"0",2)+Dt(r,"0",2)}function Gt(t,e,n){so.lastIndex=0;var i=so.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function qt(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function Zt(){}function Kt(t,e,n){var i=n.s=t+e,r=i-t,a=i-r;n.t=t-a+(e-r)}function Jt(t,e){t&&ho.hasOwnProperty(t.type)&&ho[t.type](t,e)}function Qt(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function te(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Qt(t[n],e,1);e.polygonEnd()}function ee(){function t(t,e){e=e*Da/2+Ta/4;var n=(t*=Da)-i,o=n>=0?1:-1,s=o*n,l=Math.cos(e),u=Math.sin(e),c=a*u,d=r*l+c*Math.cos(s),h=c*o*Math.sin(s);po.add(Math.atan2(h,d)),i=t,r=l,a=u}var e,n,i,r,a;go.point=function(o,s){go.point=t,i=(e=o)*Da,r=Math.cos(s=(n=s)*Da/2+Ta/4),a=Math.sin(s)},go.lineEnd=function(){t(e,n)}}function ne(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ie(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function re(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ae(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function oe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function se(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function le(t){return[Math.atan2(t[1],t[0]),K(t[2])]}function ue(t,e){return ua(t[0]-e[0])<Ca&&ua(t[1]-e[1])<Ca}function ce(t,e){t*=Da;var n=Math.cos(e*=Da);de(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function de(t,e,n){yo+=(t-yo)/++mo,bo+=(e-bo)/mo,xo+=(n-xo)/mo}function he(){function t(t,r){t*=Da;var a=Math.cos(r*=Da),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*o-e*l)*u+(u=e*s-n*o)*u),e*o+n*s+i*l);vo+=u,wo+=u*(e+(e=o)),Mo+=u*(n+(n=s)),ko+=u*(i+(i=l)),de(e,n,i)}var e,n,i;To.point=function(r,a){r*=Da;var o=Math.cos(a*=Da);e=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),To.point=t,de(e,n,i)}}function fe(){To.point=ce}function pe(){function t(t,e){t*=Da;var n=Math.cos(e*=Da),o=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=r*l-a*s,c=a*o-i*l,d=i*s-r*o,h=Math.sqrt(u*u+c*c+d*d),f=i*o+r*s+a*l,p=h&&-Z(f)/h,g=Math.atan2(h,f);_o+=p*u,Co+=p*c,So+=p*d,vo+=g,wo+=g*(i+(i=o)),Mo+=g*(r+(r=s)),ko+=g*(a+(a=l)),de(i,r,a)}var e,n,i,r,a;To.point=function(o,s){e=o,n=s,To.point=t,o*=Da;var l=Math.cos(s*=Da);i=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),de(i,r,a)},To.lineEnd=function(){t(e,n),To.lineEnd=fe,To.point=ce}}function ge(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function me(){return!0}function ve(t,e,n,i,r){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(ue(n,i)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l=new be(n,t,null,!0),u=new be(n,null,l,!1);l.o=u,a.push(l),o.push(u),u=new be(i,null,l=new be(i,t,null,!1),!0),l.o=u,a.push(l),o.push(u)}}),o.sort(e),ye(a),ye(o),a.length){for(var s=0,l=n,u=o.length;u>s;++s)o[s].e=l=!l;for(var c,d,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,u=c.length;u>s;++s)r.point((d=c[s])[0],d[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(s=(c=f.p.z).length-1;s>=0;--s)r.point((d=c[s])[0],d[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}}function ye(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function be(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function xe(t,e,n,i){return function(r,a){function o(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function s(t,e){var n=r(t,e);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=o,m.lineEnd()}function c(t,e){g.push([t,e]);var n=r(t,e);x.point(n[0],n[1])}function d(){x.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),x.lineEnd();var t,e=x.clean(),n=b.buffer(),i=n.length;if(g.pop(),p.push(g),g=null,i)if(1&e){var r,o=-1;if((i=(t=n[0]).length-1)>0){for(w||(a.polygonStart(),w=!0),a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);a.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),f.push(n.filter(we))}var f,p,g,m=e(a),v=r.invert(i[0],i[1]),y={point:o,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=d,y.lineEnd=h,f=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=l,y.lineEnd=u,f=Qr.merge(f);var t=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;po.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],c=u.length;if(c)for(var d=u[0],h=d[0],f=d[1]/2+Ta/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===c&&(m=0);var v=(t=u[m])[0],y=t[1]/2+Ta/4,b=Math.sin(y),x=Math.cos(y),w=v-h,M=w>=0?1:-1,k=M*w,_=k>Ta,C=p*b;if(po.add(Math.atan2(C*M*Math.sin(k),g*x+C*Math.cos(k))),a+=_?w+M*Pa:w,_^h>=n^v>=n){var S=re(ne(d),ne(t));se(S);var T=re(r,S);se(T);var P=(_^w>=0?-1:1)*K(T[2]);(i>P||i===P&&(S[0]||S[1]))&&(o+=_^w>=0?1:-1)}if(!m++)break;h=v,p=b,g=x,d=t}}return(-Ca>a||Ca>a&&0>po)^1&o}(v,p);f.length?(w||(a.polygonStart(),w=!0),ve(f,ke,t,n,a)):t&&(w||(a.polygonStart(),w=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),w&&(a.polygonEnd(),w=!1),f=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=Me(),x=e(b),w=!1;return y}}function we(t){return t.length>1}function Me(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:b,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ke(t,e){return((t=t.x)[0]<0?t[1]-Ea-Ca:Ea-t[1])-((e=e.x)[0]<0?e[1]-Ea-Ca:Ea-e[1])}function _e(t,e,n,i){return function(r){var a,o=r.a,s=r.b,l=o.x,u=o.y,c=0,d=1,h=s.x-l,f=s.y-u;if(a=t-l,h||!(a>0)){if(a/=h,0>h){if(c>a)return;d>a&&(d=a)}else if(h>0){if(a>d)return;a>c&&(c=a)}if(a=n-l,h||!(0>a)){if(a/=h,0>h){if(a>d)return;a>c&&(c=a)}else if(h>0){if(c>a)return;d>a&&(d=a)}if(a=e-u,f||!(a>0)){if(a/=f,0>f){if(c>a)return;d>a&&(d=a)}else if(f>0){if(a>d)return;a>c&&(c=a)}if(a=i-u,f||!(0>a)){if(a/=f,0>f){if(a>d)return;a>c&&(c=a)}else if(f>0){if(c>a)return;d>a&&(d=a)}return c>0&&(r.a={x:l+c*h,y:u+c*f}),1>d&&(r.b={x:l+d*h,y:u+d*f}),r}}}}}}function Ce(t,e,n,i){function r(i,r){return ua(i[0]-t)<Ca?r>0?0:3:ua(i[0]-n)<Ca?r>0?2:1:ua(i[1]-e)<Ca?r>0?1:0:r>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(a,s,l,u){var c=0,d=0;if(null==a||(c=r(a,l))!==(d=r(s,l))||o(a,s)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+l+4)%4)!==d);else u.point(s[0],s[1])}function u(r,a){return r>=t&&n>=r&&a>=e&&i>=a}function c(t,e){u(t,e)&&s.point(t,e)}function d(t,e){var n=u(t=Math.max(-Ao,Math.min(Ao,t)),e=Math.max(-Ao,Math.min(Ao,e)));if(f&&p.push([t,e]),w)g=t,m=e,v=n,w=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&x)s.point(t,e);else{var i={a:{x:y,y:b},b:{x:t,y:e}};C(i)?(x||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),M=!1):n&&(s.lineStart(),s.point(t,e),M=!1)}y=t,b=e,x=n}var h,f,p,g,m,v,y,b,x,w,M,k=s,_=Me(),C=_e(t,e,n,i),S={point:c,lineStart:function(){S.point=d,f&&f.push(p=[]),w=!0,x=!1,y=b=NaN},lineEnd:function(){h&&(d(g,m),v&&x&&_.rejoin(),h.push(_.buffer())),S.point=c,x&&s.lineEnd()},polygonStart:function(){s=_,h=[],f=[],M=!0},polygonEnd:function(){s=k,h=Qr.merge(h);var e=function(t){for(var e=0,n=f.length,i=t[1],r=0;n>r;++r)for(var a,o=1,s=f[r],l=s.length,u=s[0];l>o;++o)a=s[o],u[1]<=i?a[1]>i&&q(u,a,t)>0&&++e:a[1]<=i&&q(u,a,t)<0&&--e,u=a;return 0!==e}([t,i]),n=M&&e,r=h.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),r&&ve(h,a,e,l,s),s.polygonEnd()),h=f=p=null}};return S}}function Se(t){var e=0,n=Ta/3,i=Be(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ta/180,n=t[1]*Ta/180):[e/Ta*180,n/Ta*180]},r}function Te(t,e){function n(t,e){var n=Math.sqrt(a-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,K((a-(t*t+n*n)*r*r)/(2*r))]},n}function Pe(){function t(t,e){Do+=r*t-i*e,i=t,r=e}var e,n,i,r;$o.point=function(a,o){$o.point=t,e=i=a,n=r=o},$o.lineEnd=function(){t(e,n)}}function Ae(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ee(t,e){yo+=t,bo+=e,++xo}function De(){function t(t,i){var r=t-e,a=i-n,o=Math.sqrt(r*r+a*a);wo+=o*(e+t)/2,Mo+=o*(n+i)/2,ko+=o,Ee(e=t,n=i)}var e,n;Bo.point=function(i,r){Bo.point=t,Ee(e=i,n=r)}}function Oe(){Bo.point=Ee}function Ie(){function t(t,e){var n=t-i,a=e-r,o=Math.sqrt(n*n+a*a);wo+=o*(i+t)/2,Mo+=o*(r+e)/2,ko+=o,_o+=(o=r*t-i*e)*(i+t),Co+=o*(r+e),So+=3*o,Ee(i=t,r=e)}var e,n,i,r;Bo.point=function(a,o){Bo.point=t,Ee(e=i=a,n=r=o)},Bo.lineEnd=function(){t(e,n)}}function Le(t){function e(e){return(a?function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){y=NaN,k.point=o,e.lineStart()}function o(i,r){var o=ne([i,r]),s=t(i,r);n(y,b,v,x,w,M,y=s[0],b=s[1],v=i,x=o[0],w=o[1],M=o[2],a,e),e.point(y,b)}function s(){k.point=i,e.lineEnd()}function l(){r(),k.point=u,k.lineEnd=c}function u(t,e){o(d=t,e),h=y,f=b,p=x,g=w,m=M,k.point=o}function c(){n(y,b,v,x,w,M,h,f,d,p,g,m,a,e),k.lineEnd=s,s()}var d,h,f,p,g,m,v,y,b,x,w,M,k={point:i,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),k.lineStart=l},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}:function(e){return $e(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})})(e)}function n(e,a,o,s,l,u,c,d,h,f,p,g,m,v){var y=c-e,b=d-a,x=y*y+b*b;if(x>4*i&&m--){var w=s+f,M=l+p,k=u+g,_=Math.sqrt(w*w+M*M+k*k),C=Math.asin(k/=_),S=ua(ua(k)-1)<Ca||ua(o-h)<Ca?(o+h)/2:Math.atan2(M,w),T=t(S,C),P=T[0],A=T[1],E=P-e,D=A-a,O=b*E-y*D;(O*O/x>i||ua((y*E+b*D)/x-.5)>.3||r>s*f+l*p+u*g)&&(n(e,a,o,s,l,u,P,A,S,w/=_,M/=_,k,m,v),v.point(P,A),n(P,A,S,w,M,k,c,d,h,f,p,g,m,v))}}var i=.5,r=Math.cos(30*Da),a=16;return e.precision=function(t){return arguments.length?(a=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function Fe(t){this.stream=t}function $e(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ze(t){return Be(function(){return t})()}function Be(t){function e(t){return[(t=s(t[0]*Da,t[1]*Da))[0]*h+l,u-t[1]*h]}function n(t){return(t=s.invert((t[0]-l)/h,(u-t[1])/h))&&[t[0]*Oa,t[1]*Oa]}function i(){s=ge(o=Ue(y,b,x),a);var t=a(g,m);return l=f-t[0]*h,u=p+t[1]*h,r()}function r(){return c&&(c.valid=!1,c=null),e}var a,o,s,l,u,c,d=Le(function(t,e){return[(t=a(t,e))[0]*h+l,u-t[1]*h]}),h=150,f=480,p=250,g=0,m=0,y=0,b=0,x=0,w=Po,M=v,k=null,_=null;return e.stream=function(t){return c&&(c.valid=!1),(c=je(w(o,d(M(t))))).valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(k=t,Po):function(t){function e(t,e){return Math.cos(t)*Math.cos(e)>r}function n(t,e,n){var i=[1,0,0],a=re(ne(t),ne(e)),o=ie(a,a),s=a[0],l=o-s*s;if(!l)return!n&&t;var u=r*o/l,c=-r*s/l,d=re(i,a),h=oe(i,u);ae(h,oe(a,c));var f=d,p=ie(h,f),g=ie(f,f),m=p*p-g*(ie(h,h)-1);if(!(0>m)){var v=Math.sqrt(m),y=oe(f,(-p-v)/g);if(ae(y,h),y=le(y),!n)return y;var b,x=t[0],w=e[0],M=t[1],k=e[1];x>w&&(b=x,x=w,w=b);var _=w-x,C=ua(_-Ta)<Ca;if(!C&&M>k&&(b=M,M=k,k=b),C||Ca>_?C?M+k>0^y[1]<(ua(y[0]-x)<Ca?M:k):M<=y[1]&&y[1]<=k:_>Ta^(x<=y[0]&&y[0]<=w)){var S=oe(f,(-p+v)/g);return ae(S,h),[y,le(S)]}}}function i(e,n){var i=a?t:Ta-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var r=Math.cos(t),a=r>0,o=ua(r)>Ca;return xe(e,function(t){var r,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,h){var f,p=[d,h],g=e(d,h),m=a?g?0:i(d,h):g?i(d+(0>d?Ta:-Ta),h):0;if(!r&&(u=l=g)&&t.lineStart(),g!==l&&(f=n(r,p),(ue(r,f)||ue(p,f))&&(p[0]+=Ca,p[1]+=Ca,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),f=n(p,r),t.point(f[0],f[1])):(f=n(r,p),t.point(f[0],f[1]),t.lineEnd()),r=f;else if(o&&r&&a^g){var v;m&s||!(v=n(p,r,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||r&&ue(r,p)||t.point(p[0],p[1]),r=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),r=null},clean:function(){return c|(u&&l)<<1}}},Ye(t,6*Da),a?[0,-t]:[-Ta,t-Ta])}((k=+t)*Da),r()):k},e.clipExtent=function(t){return arguments.length?(_=t,M=t?Ce(t[0][0],t[0][1],t[1][0],t[1][1]):v,r()):_},e.scale=function(t){return arguments.length?(h=+t,i()):h},e.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],i()):[f,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Da,m=t[1]%360*Da,i()):[g*Oa,m*Oa]},e.rotate=function(t){return arguments.length?(y=t[0]%360*Da,b=t[1]%360*Da,x=t.length>2?t[2]%360*Da:0,i()):[y*Oa,b*Oa,x*Oa]},Qr.rebind(e,d,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function je(t){return $e(t,function(e,n){t.point(e*Da,n*Da)})}function Re(t,e){return[t,e]}function Ne(t,e){return[t>Ta?t-Pa:-Ta>t?t+Pa:t,e]}function Ue(t,e,n){return t?e||n?ge(We(t),He(e,n)):We(t):e||n?He(e,n):Ne}function Xe(t){return function(e,n){return[(e+=t)>Ta?e-Pa:-Ta>e?e+Pa:e,n]}}function We(t){var e=Xe(t);return e.invert=Xe(-t),e}function He(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*i+s*r;return[Math.atan2(l*a-c*o,s*i-u*r),K(c*a+l*o)]}var i=Math.cos(t),r=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*a-l*o;return[Math.atan2(l*a+u*o,s*i+c*r),K(c*i-s*r)]},n}function Ye(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,a,o,s){var l=o*e;null!=r?(r=Ve(n,r),a=Ve(n,a),(o>0?a>r:r>a)&&(r+=o*Pa)):(r=t+o*Pa,a=t-.5*l);for(var u,c=r;o>0?c>a:a>c;c-=l)s.point((u=le([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function Ve(t,e){var n=ne(e);n[0]-=t,se(n);var i=Z(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Ca)%(2*Math.PI)}function Ge(t,e,n){var i=Qr.range(t,e-Ca,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function qe(t,e,n){var i=Qr.range(t,e-Ca,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function Ze(t){return t.source}function Ke(t){return t.target}function Je(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),a=t(i*r);return[a*r*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*a,i*o),Math.asin(i&&n*a/i)]},n}function Qe(t,e){function n(t,e){o>0?-Ea+Ca>e&&(e=-Ea+Ca):e>Ea-Ca&&(e=Ea-Ca);var n=o/Math.pow(r(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Ta/4+t/2)},a=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),o=i*Math.pow(r(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,i=G(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Ea]},n):en}function tn(t,e){function n(t,e){var n=a-e;return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return ua(r)<Ca?Re:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,a-G(r)*Math.sqrt(t*t+n*n)]},n)}function en(t,e){return[t,Math.log(Math.tan(Ta/4+e/2))]}function nn(t){var e,n=ze(t),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Ta*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function rn(t,e){return[Math.log(Math.tan(Ta/4+e/2)),-t]}function an(t){return t[0]}function on(t){return t[1]}function sn(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&q(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function ln(t,e){return t[0]-e[0]||t[1]-e[1]}function un(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function cn(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,l=t[1],u=n[1],c=e[1]-l,d=i[1]-u,h=(s*(l-u)-d*(r-a))/(d*o-s*c);return[r+h*o,l+h*c]}function dn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function hn(t){var e=Jo.pop()||new function(){An(this),this.edge=this.site=this.circle=null};return e.site=t,e}function fn(t){wn(t),qo.remove(t),Jo.push(t),An(t)}function pn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},a=t.P,o=t.N,s=[t];fn(t);for(var l=a;l.circle&&ua(n-l.circle.x)<Ca&&ua(i-l.circle.cy)<Ca;)a=l.P,s.unshift(l),fn(l),l=a;s.unshift(l),wn(l);for(var u=o;u.circle&&ua(n-u.circle.x)<Ca&&ua(i-u.circle.cy)<Ca;)o=u.N,s.push(u),fn(u),u=o;s.push(u),wn(u);var c,d=s.length;for(c=1;d>c;++c)u=s[c],l=s[c-1],Sn(u.edge,l.site,u.site,r);l=s[0],(u=s[d-1]).edge=_n(l.site,u.site,null,r),xn(l),xn(u)}function gn(t){for(var e,n,i,r,a=t.x,o=t.y,s=qo._;s;)if(i=mn(s,o)-a,i>Ca)s=s.L;else{if(!((r=a-vn(s,o))>Ca)){i>-Ca?(e=s.P,n=s):r>-Ca?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=hn(t);if(qo.insert(e,l),e||n){if(e===n)return wn(e),n=hn(e.site),qo.insert(l,n),l.edge=n.edge=_n(e.site,l.site),xn(e),void xn(n);if(!n)return void(l.edge=_n(e.site,l.site));wn(e),wn(n);var u=e.site,c=u.x,d=u.y,h=t.x-c,f=t.y-d,p=n.site,g=p.x-c,m=p.y-d,v=2*(h*m-f*g),y=h*h+f*f,b=g*g+m*m,x={x:(m*y-f*b)/v+c,y:(h*b-g*y)/v+d};Sn(n.edge,u,p,x),l.edge=_n(u,t,null,x),n.edge=_n(t,p,null,x),xn(e),xn(n)}}function mn(t,e){var n=t.site,i=n.x,r=n.y,a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,u=l-e;if(!u)return s;var c=s-i,d=1/a-1/u,h=c/u;return d?(-h+Math.sqrt(h*h-2*d*(c*c/(-2*u)-l+u/2+r-a/2)))/d+i:(i+s)/2}function vn(t,e){var n=t.N;if(n)return mn(n,e);var i=t.site;return i.y===e?i.x:1/0}function yn(t){this.site=t,this.edges=[]}function bn(t,e){return e.angle-t.angle}function xn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,u=i.y-s,c=a.x-o,d=2*(l*(m=a.y-s)-u*c);if(!(d>=-Sa)){var h=l*l+u*u,f=c*c+m*m,p=(m*h-u*f)/d,g=(l*f-c*h)/d,m=g+s,v=Qo.pop()||new function(){An(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=r,v.x=p+o,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,t.circle=v;for(var y=null,b=Ko._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Ko.insert(y,v),y||(Zo=v)}}}}function wn(t){var e=t.circle;e&&(e.P||(Zo=e.N),Ko.remove(e),Qo.push(e),An(e),t.circle=null)}function Mn(t,e){var n=t.b;if(n)return!0;var i,r,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,d=t.r,h=c.x,f=c.y,p=d.x,g=d.y,m=(h+p)/2,v=(f+g)/2;if(g===f){if(o>m||m>=s)return;if(h>p){if(a){if(a.y>=u)return}else a={x:m,y:l};n={x:m,y:u}}else{if(a){if(a.y<l)return}else a={x:m,y:u};n={x:m,y:l}}}else if(i=(h-p)/(g-f),r=v-i*m,-1>i||i>1)if(h>p){if(a){if(a.y>=u)return}else a={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else if(g>f){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return t.a=a,t.b=n,!0}function kn(t,e){this.l=t,this.r=e,this.a=this.b=null}function _n(t,e,n,i){var r=new kn(t,e);return Vo.push(r),n&&Sn(r,t,e,n),i&&Sn(r,e,t,i),Go[t.i].edges.push(new Tn(r,t,e)),Go[e.i].edges.push(new Tn(r,e,t)),r}function Cn(t,e,n){var i=new kn(t,null);return i.a=e,i.b=n,Vo.push(i),i}function Sn(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Tn(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Pn(){this._=null}function An(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function En(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Dn(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function On(t){for(;t.L;)t=t.L;return t}function In(t,e){var n,i,r,a=t.sort(Ln).pop();for(Vo=[],Go=new Array(t.length),qo=new Pn,Ko=new Pn;;)if(r=Zo,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))(a.x!==n||a.y!==i)&&(Go[a.i]=new yn(a),gn(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;pn(r.arc)}e&&(function(t){for(var e,n=Vo,i=_e(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Mn(e,t)||!i(e)||ua(e.a.x-e.b.x)<Ca&&ua(e.a.y-e.b.y)<Ca)&&(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,a,o,s,l,u,c,d=t[0][0],h=t[1][0],f=t[0][1],p=t[1][1],g=Go,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,l=s.length,o=0;l>o;)c=s[o].end(),i=c.x,r=c.y,u=s[++o%l].start(),e=u.x,n=u.y,(ua(i-e)>Ca||ua(r-n)>Ca)&&(s.splice(o,0,new Tn(Cn(a.site,c,ua(i-d)<Ca&&p-r>Ca?{x:d,y:ua(e-d)<Ca?n:p}:ua(r-p)<Ca&&h-i>Ca?{x:ua(n-p)<Ca?e:h,y:p}:ua(i-h)<Ca&&r-f>Ca?{x:h,y:ua(e-h)<Ca?n:f}:ua(r-f)<Ca&&i-d>Ca?{x:ua(n-f)<Ca?e:d,y:f}:null),a.site,null)),++l)}(e));var o={cells:Go,edges:Vo};return qo=Ko=Vo=Go=null,o}function Ln(t,e){return e.y-t.y||e.x-t.x}function Fn(t){return t.x}function $n(t){return t.y}function zn(t,e,n,i,r,a){if(!t(e,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=e.nodes;l[0]&&zn(t,l[0],n,i,o,s),l[1]&&zn(t,l[1],o,i,r,s),l[2]&&zn(t,l[2],n,s,o,a),l[3]&&zn(t,l[3],o,s,r,a)}}function Bn(t,e){t=Qr.rgb(t),e=Qr.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,s=e.b-r;return function(t){return"#"+pt(Math.round(n+a*t))+pt(Math.round(i+o*t))+pt(Math.round(r+s*t))}}function jn(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Un(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function Rn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Nn(t,e){var n,i,r,a=es.lastIndex=ns.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=es.exec(t))&&(i=ns.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Rn(n,i)})),a=ns.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;e>i;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function Un(t,e){for(var n,i=Qr.interpolators.length;--i>=0&&!(n=Qr.interpolators[i](t,e)););return n}function Xn(t,e){var n,i=[],r=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)i.push(Un(t[n],e[n]));for(;a>n;++n)r[n]=t[n];for(;o>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=i[n](t);return r}}function Wn(t){return function(e){return 1-t(1-e)}}function Hn(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Yn(t){return t*t}function Vn(t){return t*t*t}function Gn(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function qn(t){return 1-Math.cos(t*Ea)}function Zn(t){return Math.pow(2,10*(t-1))}function Kn(t){return 1-Math.sqrt(1-t*t)}function Jn(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Qn(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ti(t){var e,n,i,r=[t.a,t.b],a=[t.c,t.d],o=ni(r),s=ei(r,a),l=ni((e=a,n=r,i=-s,e[0]+=i*n[0],e[1]+=i*n[1],e))||0;r[0]*a[1]<a[0]*r[1]&&(r[0]*=-1,r[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(r[1],r[0]):Math.atan2(-a[0],a[1]))*Oa,this.translate=[t.e,t.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*Oa:0}function ei(t,e){return t[0]*e[0]+t[1]*e[1]}function ni(t){var e=Math.sqrt(ei(t,t));return e&&(t[0]/=e,t[1]/=e),e}function ii(t,e){var n,i=[],r=[],a=Qr.transform(t),o=Qr.transform(e),s=a.translate,l=o.translate,u=a.rotate,c=o.rotate,d=a.skew,h=o.skew,f=a.scale,p=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:Rn(s[0],l[0])},{i:3,x:Rn(s[1],l[1])})):i.push(l[0]||l[1]?"translate("+l+")":""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:Rn(u,c)})):c&&i.push(i.pop()+"rotate("+c+")"),d!=h?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:Rn(d,h)}):h&&i.push(i.pop()+"skewX("+h+")"),f[0]!=p[0]||f[1]!=p[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:Rn(f[0],p[0])},{i:n-2,x:Rn(f[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+"scale("+p+")"),n=r.length,function(t){for(var e,a=-1;++a<n;)i[(e=r[a]).i]=e.x(t);return i.join("")}}function ri(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function ai(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function oi(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;for(var n=si(t),i=si(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function si(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function li(t){t.fixed|=2}function ui(t){t.fixed&=-7}function ci(t){t.fixed|=4,t.px=t.x,t.py=t.y}function di(t){t.fixed&=-5}function hi(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(hi(a,e,n),t.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function fi(t,e){return Qr.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=bi,t}function pi(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function gi(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function mi(t){return t.children}function vi(t){return t.value}function yi(t,e){return e.value-t.value}function bi(t){return Qr.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function xi(t){return t.x}function wi(t){return t.y}function Mi(t,e,n){t.y0=e,t.y=n}function ki(t){return Qr.range(t.length)}function _i(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Ci(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function Si(t){return t.reduce(Ti,0)}function Ti(t,e){return t+e[1]}function Pi(t,e){return Ai(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ai(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function Ei(t){return[Qr.min(t),Qr.max(t)]}function Di(t,e){return t.value-e.value}function Oi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ii(t,e){t._pack_next=e,e._pack_prev=t}function Li(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Fi(t){function e(t){c=Math.min(t.x-t.r,c),d=Math.max(t.x+t.r,d),h=Math.min(t.y-t.r,h),f=Math.max(t.y+t.r,f)}if((n=t.children)&&(u=n.length)){var n,i,r,a,o,s,l,u,c=1/0,d=-1/0,h=1/0,f=-1/0;if(n.forEach($i),(i=n[0]).x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(a=n[2],ji(i,r,a),e(a),Oi(i,a),i._pack_prev=a,Oi(a,r),r=i._pack_next,o=3;u>o;o++){ji(i,r,a=n[o]);var p=0,g=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(Li(s,a)){p=1;break}if(1==p)for(l=i._pack_prev;l!==s._pack_prev&&!Li(l,a);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<i.r?Ii(i,r=s):Ii(i=l,r),o--):(Oi(i,a),r=a,e(a))}var v=(c+d)/2,y=(h+f)/2,b=0;for(o=0;u>o;o++)a=n[o],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=b,n.forEach(zi)}}function $i(t){t._pack_next=t._pack_prev=t}function zi(t){delete t._pack_next,delete t._pack_prev}function Bi(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var a=-1,o=r.length;++a<o;)Bi(r[a],e,n,i)}function ji(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,s=r*r+a*a,l=.5+((i*=i)-(o*=o))/(2*s),u=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=t.x+l*r+u*a,n.y=t.y+l*a-u*r}else n.x=t.x+i,n.y=t.y}function Ri(t,e){return t.parent==e.parent?1:2}function Ni(t){var e=t.children;return e.length?e[0]:t.t}function Ui(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Xi(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Wi(t){var e=t.children;return e&&e.length?Wi(e[0]):t}function Hi(t){var e,n=t.children;return n&&(e=n.length)?Hi(n[e-1]):t}function Yi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vi(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Gi(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function qi(t){return t.rangeExtent?t.rangeExtent():Gi(t.range())}function Zi(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function Ki(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Ji(t,e,n,i){var r=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)r.push(n(t[o-1],t[o])),a.push(i(e[o-1],e[o]));return function(e){var n=Qr.bisect(t,e,1,s)-1;return a[n](r[n](e))}}function Qi(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Ji:Zi,l=i?ai:ri;return o=r(t,e,l,n),s=r(e,t,l,Un),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},a.range=function(t){return arguments.length?(e=t,r()):e},a.rangeRound=function(t){return a.range(t).interpolate(Qn)},a.clamp=function(t){return arguments.length?(i=t,r()):i},a.interpolate=function(t){return arguments.length?(n=t,r()):n},a.ticks=function(e){return ir(t,e)},a.tickFormat=function(e,n){return rr(t,e,n)},a.nice=function(e){return er(t,e),r()},a.copy=function(){return Qi(t,e,n,i)},r()}function tr(t,e){return Qr.rebind(t,e,"range","rangeRound","interpolate","clamp")}function er(t,e){return Ki(t,(n=nr(t,e)[2])?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:fs);var n}function nr(t,e){null==e&&(e=10);var n=Gi(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function ir(t,e){return Qr.range.apply(Qr,nr(t,e))}function rr(t,e,n){var i=nr(t,e);if(n){var r=to.exec(n);if(r.shift(),"s"===r[8]){var a=Qr.formatPrefix(Math.max(ua(i[0]),ua(i[1])));return r[7]||(r[7]="."+ar(a.scale(i[2]))),r[8]="f",n=Qr.format(r.join("")),function(t){return n(a.scale(t))+a.symbol}}r[7]||(r[7]="."+function(t,e){var n=ar(e[2]);return t in ps?Math.abs(n-ar(Math.max(ua(e[0]),ua(e[1]))))+ +("e"!==t):n-2*("%"===t)}(r[8],i)),n=r.join("")}else n=",."+ar(i[2])+"f";return Qr.format(n)}function ar(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function or(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(r(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),o):e},o.nice=function(){var e=Ki(i.map(r),n?Math:ms);return t.domain(e),i=e.map(a),o},o.ticks=function(){var t=Gi(i),o=[],s=t[0],l=t[1],u=Math.floor(r(s)),c=Math.ceil(r(l)),d=e%1?2:e;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var h=1;d>h;h++)o.push(a(u)*h);o.push(a(u))}else for(o.push(a(u));u++<c;)for(h=d-1;h>0;h--)o.push(a(u)*h);for(u=0;o[u]<s;u++);for(c=o.length;o[c-1]>l;c--);o=o.slice(u,c)}return o},o.tickFormat=function(t,e){if(!arguments.length)return gs;arguments.length<2?e=gs:"function"!=typeof e&&(e=Qr.format(e));var i,s=Math.max(.1,t/o.ticks().length),l=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return t/a(l(r(t)+i))<=s?e(t):""}},o.copy=function(){return or(t.copy(),e,n,i)},tr(o,t)}function sr(t,e,n){function i(e){return t(r(e))}var r=lr(e),a=lr(1/e);return i.invert=function(e){return a(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return ir(n,t)},i.tickFormat=function(t,e){return rr(n,t,e)},i.nice=function(t){return i.domain(er(n,t))},i.exponent=function(o){return arguments.length?(r=lr(e=o),a=lr(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return sr(t.copy(),e,n)},tr(i,t)}function lr(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function ur(t,e){function n(n){return a[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):NaN))-1)%a.length]}function i(e,n){return Qr.range(t.length).map(function(t){return e+n*t})}var r,a,o;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new l;for(var a,o=-1,s=i.length;++o<s;)r.has(a=i[o])||r.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},n):a},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return a=i(l+c*s/2,c),o=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],u=r[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return a=i(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),o=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],d=(r[1-u]-c)/(t.length-s+2*l);return a=i(c+d*l,d),u&&a.reverse(),o=d*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=r[1]<r[0],c=r[u-0],d=r[1-u],h=Math.floor((d-c)/(t.length-s+2*l));return a=i(c+Math.round((d-c-(t.length-s)*h)/2),h),u&&a.reverse(),o=Math.round(h*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Gi(e.a[0])},n.copy=function(){return ur(t,e)},n.domain(t)}function cr(t,e){function a(){var n=0,i=e.length;for(s=[];++n<i;)s[n-1]=Qr.quantile(t,n/i);return o}function o(t){return isNaN(t=+t)?void 0:e[Qr.bisect(s,t)]}var s;return o.domain=function(e){return arguments.length?(t=e.map(i).filter(r).sort(n),a()):t},o.range=function(t){return arguments.length?(e=t,a()):e},o.quantiles=function(){return s},o.invertExtent=function(n){return 0>(n=e.indexOf(n))?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},o.copy=function(){return cr(t,e)},a()}function dr(t,e,n){function i(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function r(){return a=n.length/(e-t),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return[e=0>(e=n.indexOf(e))?NaN:e/a+t,e+1/a]},i.copy=function(){return dr(t,e,n)},r()}function hr(t,e){function n(n){return n>=n?e[Qr.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return hr(t,e)},n}function fr(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return ir(t,e)},e.tickFormat=function(e,n){return rr(t,e,n)},e.copy=function(){return fr(t)},e}function pr(){return 0}function gr(t){return t.innerRadius}function mr(t){return t.outerRadius}function vr(t){return t.startAngle}function yr(t){return t.endAngle}function br(t){return t&&t.padAngle}function xr(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function wr(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=t[0]+l,d=t[1]+u,h=e[0]+l,f=e[1]+u,p=(c+h)/2,g=(d+f)/2,m=h-c,v=f-d,y=m*m+v*v,b=n-i,x=c*f-h*d,w=(0>v?-1:1)*Math.sqrt(b*b*y-x*x),M=(x*v-m*w)/y,k=(-x*m-v*w)/y,_=(x*v+m*w)/y,C=(-x*m+v*w)/y,S=M-p,T=k-g,P=_-p,A=C-g;return S*S+T*T>P*P+A*A&&(M=_,k=C),[[M-l,k-u],[M*n/b,k*n/b]]}function Mr(t){function e(e){function o(){u.push("M",a(t(c),s))}for(var l,u=[],c=[],d=-1,h=e.length,f=xt(n),p=xt(i);++d<h;)r.call(this,l=e[d],d)?c.push([+f.call(this,l,d),+p.call(this,l,d)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=an,i=on,r=me,a=kr,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=Ms.get(t)||kr).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function kr(t){return t.join("L")}function _r(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Cr(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Sr(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return kr(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],s=e[u],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=t[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function Tr(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Pr(t){if(t.length<3)return kr(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",Ar(Cs,o),",",Ar(Cs,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Er(l,o,s);return t.pop(),l.push("L",i),l.join("")}function Ar(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Er(t,e,n){t.push("C",Ar(ks,e),",",Ar(ks,n),",",Ar(_s,e),",",Ar(_s,n),",",Ar(Cs,e),",",Ar(Cs,n))}function Dr(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Or(t){for(var e,n,i,r,a=[],o=function(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=Dr(r,a);++e<n;)i[e]=(o+(o=Dr(r=a,a=t[e+1])))/2;return i[e]=o,i}(t),s=-1,l=t.length-1;++s<l;)e=Dr(t[s],t[s+1]),ua(e)<Ca?o[s]=o[s+1]=0:(n=o[s]/e,i=o[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function Ir(t){for(var e,n,i,r=-1,a=t.length;++r<a;)e=t[r],n=e[0],i=e[1]-Ea,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Lr(t){function e(e){function l(){g.push("M",s(t(v),d),c,u(t(m.reverse()),d),"Z")}for(var h,f,p,g=[],m=[],v=[],y=-1,b=e.length,x=xt(n),w=xt(r),M=n===i?function(){return f}:xt(i),k=r===a?function(){return p}:xt(a);++y<b;)o.call(this,h=e[y],y)?(m.push([f=+x.call(this,h,y),p=+w.call(this,h,y)]),v.push([+M.call(this,h,y),+k.call(this,h,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=an,i=an,r=0,a=on,o=me,s=kr,l=s.key,u=s,c="L",d=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=a=t,e):a},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Ms.get(t)||kr).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(d=t,e):d},e}function Fr(t){return t.radius}function $r(t){return[t.x,t.y]}function zr(){return 64}function Br(){return"circle"}function jr(t){var e=Math.sqrt(t/Ta);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Rr(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Nr(t,e,n){return pa(t,Os),t.namespace=e,t.id=n,t}function Ur(t,e,n,i){var r=t.id,a=t.namespace;return R(t,"function"==typeof n?function(t,o,s){t[a][r].tween.set(e,i(n.call(t,t.__data__,o,s)))}:(n=i(n),function(t){t[a][r].tween.set(e,n)}))}function Xr(t){return null==t&&(t=""),function(){this.textContent=t}}function Wr(t){return null==t?"__transition__":"__transition_"+t+"__"}function Hr(t,e,n,i,r){var a=t[n]||(t[n]={active:0,count:0}),o=a[i];if(!o){var s=r.time;o=a[i]={tween:new l,time:s,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++a.count,Qr.timer(function(r){function l(n){if(a.active>i)return c();var r=a[a.active];r&&(--a.count,delete a[a.active],r.event&&r.event.interrupt.call(t,t.__data__,r.index)),a.active=i,o.event&&o.event.start.call(t,t.__data__,e),o.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&g.push(i)}),h=o.ease,d=o.duration,Qr.timer(function(){return p.c=u(n||1)?me:u,1},0,s)}function u(n){if(a.active!==i)return 1;for(var r=n/d,s=h(r),l=g.length;l>0;)g[--l].call(t,s);return r>=1?(o.event&&o.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--a.count?delete a[i]:delete t[n],1}var d,h,f=o.delay,p=Ka,g=[];return p.t=f+s,r>=f?l(r-f):void(p.c=l)},0,s)}}function Yr(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function Vr(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}function Gr(t){return t.toISOString()}function qr(t,e,n){function i(e){return t(e)}function r(t,n){var i=(t[1]-t[0])/n,r=Qr.bisect(Ns,i);return r==Ns.length?[e.year,nr(t.map(function(t){return t/31536e6}),n)[2]]:r?e[i/Ns[r-1]<Ns[r]/i?r-1:r]:[Ws,nr(t,n)[2]]}return i.invert=function(e){return Zr(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Zr)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Zr(+n+1),e).length}var a=i.domain(),o=Gi(a),s=null==t?r(o,10):"number"==typeof t&&r(o,t);return s&&(t=s[0],e=s[1]),i.domain(Ki(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Zr(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Zr(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Gi(i.domain()),a=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],Zr(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return qr(t.copy(),e,n)},tr(i,t)}function Zr(t){return new Date(t)}function Kr(t){return JSON.parse(t.responseText)}function Jr(t){var e=na.createRange();return e.selectNode(na.body),e.createContextualFragment(t.responseText)}var Qr={version:"3.5.6"},ta=[].slice,ea=function(t){return ta.call(t)},na=this.document;if(na)try{ea(na.documentElement.childNodes)[0].nodeType}catch(t){ea=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),na)try{na.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var ia=this.Element.prototype,ra=ia.setAttribute,aa=ia.setAttributeNS,oa=this.CSSStyleDeclaration.prototype,sa=oa.setProperty;ia.setAttribute=function(t,e){ra.call(this,t,e+"")},ia.setAttributeNS=function(t,e,n){aa.call(this,t,e,n+"")},oa.setProperty=function(t,e,n){sa.call(this,t,e+"",n)}}Qr.ascending=n,Qr.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},Qr.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},Qr.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},Qr.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},Qr.sum=function(t,e){var n,i=0,a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)r(n=+t[o])&&(i+=n);else for(;++o<a;)r(n=+e.call(t,t[o],o))&&(i+=n);return i},Qr.mean=function(t,e){var n,a=0,o=t.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)r(n=i(t[s]))?a+=n:--l;else for(;++s<o;)r(n=i(e.call(t,t[s],s)))?a+=n:--l;return l?a/l:void 0},Qr.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},Qr.median=function(t,e){var a,o=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)r(a=i(t[l]))&&o.push(a);else for(;++l<s;)r(a=i(e.call(t,t[l],l)))&&o.push(a);return o.length?Qr.quantile(o.sort(n),.5):void 0},Qr.variance=function(t,e){var n,a,o=t.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<o;)r(n=i(t[u]))&&(a=n-s,s+=a/++c,l+=a*(n-s));else for(;++u<o;)r(n=i(e.call(t,t[u],u)))&&(a=n-s,s+=a/++c,l+=a*(n-s));return c>1?l/(c-1):void 0},Qr.deviation=function(){var t=Qr.variance.apply(this,arguments);return t?Math.sqrt(t):t};var la=a(n);Qr.bisectLeft=la.left,Qr.bisect=Qr.bisectRight=la.right,Qr.bisector=function(t){return a(1===t.length?function(e,i){return n(t(e),i)}:t)},Qr.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,2>a&&(e=0));for(var i,r,a=n-e;a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},Qr.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},Qr.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(0>n?0:n);n>e;)r[e]=[i,i=t[++e]];return r},Qr.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=Qr.min(arguments,o),n=new Array(e);++t<e;)for(var i,r=-1,a=n[t]=new Array(i);++r<i;)a[r]=arguments[r][t];return n},Qr.transpose=function(t){return Qr.zip.apply(Qr,t)},Qr.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Qr.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Qr.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Qr.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--o]=i[e];return n};var ua=Math.abs;Qr.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],a=function(t){for(var e=1;t*e%1;)e*=10;return e}(ua(n)),o=-1;if(t*=a,e*=a,0>(n*=a))for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},Qr.map=function(t,e){var n=new l;if(t instanceof l)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};var ca="__proto__",da="\0";s(l,{has:d,get:function(t){return this._[u(t)]},set:function(t,e){return this._[u(t)]=e},remove:h,keys:f,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:c(e),value:this._[e]});return t},size:p,empty:g,forEach:function(t){for(var e in this._)t.call(this,c(e),this._[e])}}),Qr.nest=function(){function t(e,o,s){if(s>=a.length)return i?i.call(r,o):n?o.sort(n):o;for(var u,c,d,h,f=-1,p=o.length,g=a[s++],m=new l;++f<p;)(h=m.get(u=g(c=o[f])))?h.push(c):m.set(u,[c]);return e?(c=e(),d=function(n,i){c.set(n,t(e,i,s))}):(c={},d=function(n,i){c[n]=t(e,i,s)}),m.forEach(d),c}function e(t,n){if(n>=a.length)return t;var i=[],r=o[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},a=[],o=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(Qr.map,n,0),0)},r.key=function(t){return a.push(t),r},r.sortKeys=function(t){return o[a.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},Qr.set=function(t){var e=new m;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},s(m,{has:d,add:function(t){return this._[u(t+="")]=!0,t},remove:h,values:f,size:p,empty:g,forEach:function(t){for(var e in this._)t.call(this,c(e))}}),Qr.behavior={},Qr.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=(a=t,o=e,s=e[n],function(){var t=s.apply(o,arguments);return t===o?a:t});var a,o,s;return t};var ha=["webkit","ms","moz","Moz","o","O"];Qr.dispatch=function(){for(var t=new x,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=w(t);return t},x.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},Qr.event=null,Qr.requote=function(t){return t.replace(fa,"\\$&")};var fa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,pa={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ga=function(t,e){return e.querySelector(t)},ma=function(t,e){return e.querySelectorAll(t)},va=function(t,e){var n=t.matches||t[y(t,"matchesSelector")];return(va=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(ga=function(t,e){return Sizzle(t,e)[0]||null},ma=Sizzle,va=Sizzle.matchesSelector),Qr.selection=function(){return Qr.select(na.documentElement)};var ya=Qr.selection.prototype=[];ya.select=function(t){var e,n,i,r,a=[];t=S(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return C(a)},ya.selectAll=function(t){var e,n,i=[];t=T(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,l=o.length;++s<l;)(n=o[s])&&(i.push(e=ea(t.call(n,n.__data__,s,r))),e.parentNode=n);return C(i)};var ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Qr.ns={prefix:ba,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),ba.hasOwnProperty(n)?{space:ba[n],local:t}:t}},ya.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=Qr.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},ya.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=D(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!E(t[r]).test(e))return!1;return!0}for(e in t)this.each(O(e,t[e]));return this}return this.each(O(t,e))},ya.style=function(t,n,i){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n="");for(i in t)this.each(L(i,t[i],n));return this}if(2>r){var a=this.node();return e(a).getComputedStyle(a,null).getPropertyValue(t)}i=""}return this.each(L(t,n,i))},ya.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(F(e,t[e]));return this}return this.each(F(t,e))},ya.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ya.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ya.append=function(t){return t=$(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ya.insert=function(t,e){return t=$(t),e=S(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ya.remove=function(){return this.each(z)},ya.data=function(t,e){function n(t,n){var i,r,a,o=t.length,d=n.length,h=Math.min(o,d),f=new Array(d),p=new Array(d),g=new Array(o);if(e){var m,v=new l,y=new Array(o);for(i=-1;++i<o;)v.has(m=e.call(r=t[i],r.__data__,i))?g[i]=r:v.set(m,r),y[i]=m;for(i=-1;++i<d;)(r=v.get(m=e.call(n,a=n[i],i)))?!0!==r&&(f[i]=r,r.__data__=a):p[i]=B(a),v.set(m,!0);for(i=-1;++i<o;)!0!==v.get(y[i])&&(g[i]=t[i])}else{for(i=-1;++i<h;)r=t[i],a=n[i],r?(r.__data__=a,f[i]=r):p[i]=B(a);for(;d>i;++i)p[i]=B(n[i]);for(;o>i;++i)g[i]=t[i]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,s.push(p),u.push(f),c.push(g)}var i,r,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(i=this[0]).length);++a<o;)(r=i[a])&&(t[a]=r.__data__);return t}var s=N([]),u=C([]),c=C([]);if("function"==typeof t)for(;++a<o;)n(i=this[a],t.call(i,i.parentNode.__data__,a));else for(;++a<o;)n(i=this[a],t);return u.enter=function(){return s},u.exit=function(){return c},u},ya.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ya.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=j(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return C(r)},ya.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},ya.sort=function(t){t=function(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,i=this.length;++e<i;)this[e].sort(t);return this.order()},ya.each=function(t){return R(this,function(e,n,i){t.call(e,e.__data__,n,i)})},ya.call=function(t){var e=ea(arguments);return t.apply(e[0]=this,e),this},ya.empty=function(){return!this.node()},ya.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},ya.size=function(){var t=0;return R(this,function(){++t}),t};var xa=[];Qr.selection.enter=N,Qr.selection.enter.prototype=xa,xa.append=ya.append,xa.empty=ya.empty,xa.node=ya.node,xa.call=ya.call,xa.size=ya.size,xa.select=function(t){for(var e,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(a=r[u])?(e.push(i[u]=n=t.call(r.parentNode,a.__data__,u,s)),n.__data__=a.__data__):e.push(null)}return C(o)},xa.insert=function(t,e){return arguments.length<2&&(e=function(t){var e,n;return function(i,r,a){var o,s=t[a].update,l=s.length;for(a!=n&&(n=a,e=0),r>=e&&(e=r+1);!(o=s[e])&&++e<l;);return o}}(this)),ya.insert.call(this,t,e)},Qr.select=function(e){var n;return"string"==typeof e?(n=[ga(e,na)]).parentNode=na.documentElement:(n=[e]).parentNode=t(e),C([n])},Qr.selectAll=function(t){var e;return"string"==typeof t?(e=ea(ma(t,na))).parentNode=na.documentElement:(e=t).parentNode=null,C([e])},ya.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(U(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(U(t,e,n))};var wa=Qr.map({mouseenter:"mouseover",mouseleave:"mouseout"});na&&wa.forEach(function(t){"on"+t in na&&wa.remove(t)});var Ma,ka=0;Qr.mouse=function(t){return Y(t,k())};var _a=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Qr.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=k().changedTouches),e)for(var i,r=0,a=e.length;a>r;++r)if((i=e[r]).identifier===n)return Y(t,i)},Qr.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(t,e,n,a,o){return function(){var s,l=Qr.event.target,u=this.parentNode,c=i.of(this,arguments),d=0,h=t(),f=".drag"+(null==h?"":"-"+h),p=Qr.select(n(l)).on(a+f,function(){var t,n,i=e(u,h);i&&(t=i[0]-m[0],n=i[1]-m[1],d|=t|n,m=i,c({type:"drag",x:i[0]+s[0],y:i[1]+s[1],dx:t,dy:n}))}).on(o+f,function(){e(u,h)&&(p.on(a+f,null).on(o+f,null),g(d&&Qr.event.target===l),c({type:"dragend"}))}),g=H(l),m=e(u,h);r?s=[(s=r.apply(this,arguments)).x-m[0],s.y-m[1]]:s=[0,0],c({type:"dragstart"})}}var i=_(t,"drag","dragstart","dragend"),r=null,a=n(b,Qr.mouse,e,"mousemove","mouseup"),o=n(V,Qr.touch,v,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},Qr.rebind(t,i,"on")},Qr.touches=function(t,e){return arguments.length<2&&(e=k().touches),e?ea(e).map(function(e){var n=Y(t,e);return n.identifier=e.identifier,n}):[]};var Ca=1e-6,Sa=Ca*Ca,Ta=Math.PI,Pa=2*Ta,Aa=Pa-Ca,Ea=Ta/2,Da=Ta/180,Oa=180/Ta,Ia=Math.SQRT2,La=2;Qr.interpolateZoom=function(t,e){function n(t){var e=t*v;if(m){var n=J(g),o=a/(La*h)*(n*(l=Ia*e+g,((l=Math.exp(2*l))-1)/(l+1))-(s=g,((s=Math.exp(s))-1/s)/2));return[i+o*u,r+o*c,a*n/J(Ia*e+g)]}var s,l;return[i+t*u,r+t*c,a*Math.exp(Ia*e)]}var i=t[0],r=t[1],a=t[2],o=e[0],s=e[1],l=e[2],u=o-i,c=s-r,d=u*u+c*c,h=Math.sqrt(d),f=(l*l-a*a+4*d)/(2*a*La*h),p=(l*l-a*a-4*d)/(2*l*La*h),g=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(p*p+1)-p)-g,v=(m||Math.log(l/a))/Ia;return n.duration=1e3*v,n},Qr.behavior.zoom=function(){function t(t){t.on(E,c).on($a+".zoom",h).on("dblclick.zoom",f).on(I,d)}function n(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function i(t){C.k=Math.max(T[0],Math.min(T[1],t))}function r(t,e){e=[(n=e)[0]*C.k+C.x,n[1]*C.k+C.y],C.x+=t[0]-e[0],C.y+=t[1]-e[1];var n}function a(e,n,a,o){e.__chart__={x:C.x,y:C.y,k:C.k},i(Math.pow(2,o)),r(g=n,a),e=Qr.select(e),P>0&&(e=e.transition().duration(P)),e.call(t.event)}function o(){x&&x.domain(b.range().map(function(t){return(t-C.x)/C.k}).map(b.invert)),k&&k.domain(w.range().map(function(t){return(t-C.y)/C.k}).map(w.invert))}function s(t){A++||t({type:"zoomstart"})}function l(t){o(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function u(t){--A||(t({type:"zoomend"}),g=null)}function c(){var t=this,i=Qr.event.target,a=L.of(t,arguments),o=0,c=Qr.select(e(t)).on(D,function(){o=1,r(Qr.mouse(t),d),l(a)}).on(O,function(){c.on(D,null).on(O,null),h(o&&Qr.event.target===i),u(a)}),d=n(Qr.mouse(t)),h=H(t);Ds.call(t),s(a)}function d(){function t(){var t=Qr.touches(p);return f=C.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=n(t))}),t}function e(){var e=Qr.event.target;Qr.select(e).on(x,o).on(w,h),k.push(e);for(var n=Qr.event.changedTouches,i=0,r=n.length;r>i;++i)m[n[i].identifier]=null;var s=t(),l=Date.now();if(1===s.length){if(500>l-y){var u=s[0];a(p,u,m[u.identifier],Math.floor(Math.log(C.k)/Math.LN2)+1),M()}y=l}else if(s.length>1){u=s[0];var c=s[1],d=u[0]-c[0],f=u[1]-c[1];v=d*d+f*f}}function o(){var t,e,n,a,o=Qr.touches(p);Ds.call(p);for(var s=0,u=o.length;u>s;++s,a=null)if(n=o[s],a=m[n.identifier]){if(e)break;t=n,e=a}if(a){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,d=v&&Math.sqrt(c/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+a[0])/2,(e[1]+a[1])/2],i(d*f)}y=null,r(t,e),l(g)}function h(){if(Qr.event.touches.length){for(var e=Qr.event.changedTouches,n=0,i=e.length;i>n;++n)delete m[e[n].identifier];for(var r in m)return void t()}Qr.selectAll(k).on(b,null),_.on(E,c).on(I,d),S(),u(g)}var f,p=this,g=L.of(p,arguments),m={},v=0,b=".zoom-"+Qr.event.changedTouches[0].identifier,x="touchmove"+b,w="touchend"+b,k=[],_=Qr.select(p),S=H(p);e(),s(g),_.on(E,null).on(I,e)}function h(){var t=L.of(this,arguments);v?clearTimeout(v):(Ds.call(this),p=n(g=m||Qr.mouse(this)),s(t)),v=setTimeout(function(){v=null,u(t)},50),M(),i(Math.pow(2,.002*Fa())*C.k),r(g,p),l(t)}function f(){var t=Qr.mouse(this),e=Math.log(C.k)/Math.LN2;a(this,t,n(t),Qr.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var p,g,m,v,y,b,x,w,k,C={x:0,y:0,k:1},S=[960,500],T=za,P=250,A=0,E="mousedown.zoom",D="mousemove.zoom",O="mouseup.zoom",I="touchstart.zoom",L=_(t,"zoomstart","zoom","zoomend");return $a||($a="onwheel"in na?(Fa=function(){return-Qr.event.deltaY*(Qr.event.deltaMode?120:1)},"wheel"):"onmousewheel"in na?(Fa=function(){return Qr.event.wheelDelta},"mousewheel"):(Fa=function(){return-Qr.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=L.of(this,arguments),e=C;As?Qr.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=S[0],i=S[1],r=g?g[0]:n/2,a=g?g[1]:i/2,o=Qr.interpolateZoom([(r-C.x)/C.k,(a-C.y)/C.k,n/C.k],[(r-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var i=o(e),s=n/i[2];this.__chart__=C={x:r-i[0]*s,y:a-i[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){u(t)}).each("end.zoom",function(){u(t)}):(this.__chart__=C,s(t),l(t),u(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},o(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:+e},o(),t):C.k},t.scaleExtent=function(e){return arguments.length?(T=null==e?za:[+e[0],+e[1]],t):T},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(S=e&&[+e[0],+e[1]],t):S},t.duration=function(e){return arguments.length?(P=+e,t):P},t.x=function(e){return arguments.length?(x=e,b=e.copy(),C={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(k=e,w=e.copy(),C={x:0,y:0,k:1},t):k},Qr.rebind(t,L,"on")};var Fa,$a,za=[0,1/0];Qr.color=tt,tt.prototype.toString=function(){return this.rgb()+""},Qr.hsl=et;var Ba=et.prototype=new tt;Ba.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new et(this.h,this.s,this.l/t)},Ba.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new et(this.h,this.s,t*this.l)},Ba.rgb=function(){return nt(this.h,this.s,this.l)},Qr.hcl=it;var ja=it.prototype=new tt;ja.brighter=function(t){return new it(this.h,this.c,Math.min(100,this.l+Ra*(arguments.length?t:1)))},ja.darker=function(t){return new it(this.h,this.c,Math.max(0,this.l-Ra*(arguments.length?t:1)))},ja.rgb=function(){return rt(this.h,this.c,this.l).rgb()},Qr.lab=at;var Ra=18,Na=.95047,Ua=1,Xa=1.08883,Wa=at.prototype=new tt;Wa.brighter=function(t){return new at(Math.min(100,this.l+Ra*(arguments.length?t:1)),this.a,this.b)},Wa.darker=function(t){return new at(Math.max(0,this.l-Ra*(arguments.length?t:1)),this.a,this.b)},Wa.rgb=function(){return ot(this.l,this.a,this.b)},Qr.rgb=dt;var Ha=dt.prototype=new tt;Ha.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&30>e&&(e=30),n&&30>n&&(n=30),i&&30>i&&(i=30),new dt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new dt(30,30,30)},Ha.darker=function(t){return new dt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},Ha.hsl=function(){return mt(this.r,this.g,this.b)},Ha.toString=function(){return"#"+pt(this.r)+pt(this.g)+pt(this.b)};var Ya=Qr.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ya.forEach(function(t,e){Ya.set(t,ht(e))}),Qr.functor=xt,Qr.xhr=wt(v),Qr.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=Mt(t,e,null==n?i:r(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?i:r(t)):n},o}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=u)return o;if(r)return r=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;return 13===(i=t.charCodeAt(n+1))?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u>c;){var i,s=1;if(10===(i=t.charCodeAt(c++)))r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++s);else if(i!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var i,r,a={},o={},s=[],u=t.length,c=0,d=0;(i=n())!==o;){for(var h=[];i!==a&&i!==o;)h.push(i),i=n();e&&null==(h=e(h,d++))||s.push(h)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new m,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(a).join("\n")},n},Qr.csv=Qr.dsv(",","text/csv"),Qr.tsv=Qr.dsv("\t","text/tab-separated-values");var Va,Ga,qa,Za,Ka,Ja=this[y(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Qr.timer=function(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r={c:t,t:n+e,f:!1,n:null};Ga?Ga.n=r:Va=r,Ga=r,qa||(Za=clearTimeout(Za),qa=1,Ja(kt))},Qr.timer.flush=function(){_t(),Ct()},Qr.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Qa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*ua(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});Qr.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Qr.round(t,St(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Qa[8+n/3]};var to=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,eo=Qr.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Qr.round(t,St(t,e))).toFixed(Math.max(0,Math.min(20,St(t*(1+1e-15),e))))}}),no=Qr.time={},io=Date;Pt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ro.setUTCDate.apply(this._,arguments)},setDay:function(){ro.setUTCDay.apply(this._,arguments)},setFullYear:function(){ro.setUTCFullYear.apply(this._,arguments)},setHours:function(){ro.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ro.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ro.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ro.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ro.setUTCSeconds.apply(this._,arguments)},setTime:function(){ro.setTime.apply(this._,arguments)}};var ro=Date.prototype;no.year=At(function(t){return(t=no.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),no.years=no.year.range,no.years.utc=no.year.utc.range,no.day=At(function(t){var e=new io(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),no.days=no.day.range,no.days.utc=no.day.utc.range,no.dayOfYear=function(t){var e=no.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=no[t]=At(function(t){return(t=no.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=no.year(t).getDay();return Math.floor((no.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});no[t+"s"]=n.range,no[t+"s"].utc=n.utc.range,no[t+"OfYear"]=function(t){var n=no.year(t).getDay();return Math.floor((no.dayOfYear(t)+(n+e)%7)/7)}}),no.week=no.sunday,no.weeks=no.sunday.range,no.weeks.utc=no.sunday.utc.range,no.weekOfYear=no.sundayOfYear;var ao={"-":"",_:" ",0:"0"},oo=/^\s*\d+/,so=/^%/;Qr.locale=function(t){return{numberFormat:function(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,a=i&&n?function(t,e){for(var r=t.length,a=[],o=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),a.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[o=(o+1)%i.length];return a.reverse().join(n)}:v;return function(t){var n=to.exec(t),i=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],d=n[7],h=n[8],f=n[9],p=1,g="",m="",v=!1,y=!0;switch(h&&(h=+h.substring(1)),(u||"0"===i&&"="===o)&&(u=i="0",o="="),f){case"n":d=!0,f="g";break;case"%":p=100,m="%",f="f";break;case"p":p=100,m="%",f="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+f.toLowerCase());case"c":y=!1;case"d":v=!0,h=0;break;case"s":p=-1,f="r"}"$"===l&&(g=r[0],m=r[1]),"r"!=f||h||(f="g"),null!=h&&("g"==f?h=Math.max(1,Math.min(21,h)):("e"==f||"f"==f)&&(h=Math.max(0,Math.min(20,h)))),f=eo.get(f)||Tt;var b=u&&d;return function(t){var n=m;if(v&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>p){var l=Qr.formatPrefix(t,h);t=l.scale(t),n=l.symbol+m}else t*=p;var x,w,M=(t=f(t,h)).lastIndexOf(".");if(0>M){var k=y?t.lastIndexOf("e"):-1;0>k?(x=t,w=""):(x=t.substring(0,k),w=t.substring(k))}else x=t.substring(0,M),w=e+t.substring(M+1);!u&&d&&(x=a(x,1/0));var _=g.length+x.length+w.length+(b?0:r.length),C=c>_?new Array(_=c-_+1).join(i):"";return b&&(x=a(C+x,C.length?c-w.length:1/0)),r+=g,t=x+w,("<"===o?r+t+C:">"===o?C+r+t:"^"===o?C.substring(0,_>>=1)+r+t+C.substring(_):r+(b?t:C+t))+n}}}(t),timeFormat:function(t){function e(t){function e(e){for(var n,r,a,o=[],s=-1,l=0;++s<i;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(r=ao[n=t.charAt(++s)])&&(n=t.charAt(++s)),(a=x[n])&&(n=a(e,null==r?"e"===n?" ":"0":r)),o.push(n),l=s+1);return o.push(t.slice(l,s)),o.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(i,t,e,0)!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var r=null!=i.Z&&io!==Pt,a=new(r?Pt:io);return"j"in i?a.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(a.setFullYear(i.y,0,1),a.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(a.getDay()+5)%7:i.w+7*i.U-(a.getDay()+6)%7)):a.setFullYear(i.y,i.m,i.d),a.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),r?a._:a},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,a,o,s=0,l=e.length,u=n.length;l>s;){if(i>=u)return-1;if(37===(r=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=w[o in ao?e.charAt(s++):o])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var i=t.dateTime,r=t.date,a=t.time,o=t.periods,s=t.days,l=t.shortDays,u=t.months,c=t.shortMonths;e.multi=(e.utc=function(t){function n(t){try{var e=new(io=Pt);return e._=t,i(e)}finally{io=Date}}var i=e(t);return n.parse=function(t){try{io=Pt;var e=i.parse(t);return e&&e._}finally{io=Date}},n.toString=i.toString,n}).multi=qt;var d=Qr.map(),h=Ot(s),f=It(s),p=Ot(l),g=It(l),m=Ot(u),v=It(u),y=Ot(c),b=It(c);o.forEach(function(t,e){d.set(t.toLowerCase(),e)});var x={a:function(t){return l[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:e(i),d:function(t,e){return Dt(t.getDate(),e,2)},e:function(t,e){return Dt(t.getDate(),e,2)},H:function(t,e){return Dt(t.getHours(),e,2)},I:function(t,e){return Dt(t.getHours()%12||12,e,2)},j:function(t,e){return Dt(1+no.dayOfYear(t),e,3)},L:function(t,e){return Dt(t.getMilliseconds(),e,3)},m:function(t,e){return Dt(t.getMonth()+1,e,2)},M:function(t,e){return Dt(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return Dt(t.getSeconds(),e,2)},U:function(t,e){return Dt(no.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Dt(no.mondayOfYear(t),e,2)},x:e(r),X:e(a),y:function(t,e){return Dt(t.getFullYear()%100,e,2)},Y:function(t,e){return Dt(t.getFullYear()%1e4,e,4)},Z:Vt,"%":function(){return"%"}},w={a:function(t,e,n){p.lastIndex=0;var i=p.exec(e.slice(n));return i?(t.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){h.lastIndex=0;var i=h.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){m.lastIndex=0;var i=m.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,i){return n(t,x.c.toString(),e,i)},d:Nt,e:Nt,H:Xt,I:Xt,j:Ut,L:Yt,m:Rt,M:Wt,p:function(t,e,n){var i=d.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:Ht,U:Ft,w:Lt,W:$t,x:function(t,e,i){return n(t,x.x.toString(),e,i)},X:function(t,e,i){return n(t,x.X.toString(),e,i)},y:Bt,Y:zt,Z:jt,"%":Gt};return e}(t)}};var lo=Qr.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Qr.format=lo.numberFormat,Qr.geo={},Zt.prototype={s:0,t:0,add:function(t){Kt(t,this.t,uo),Kt(uo.s,this.s,this),this.s?this.t+=uo.t:this.s=uo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var uo=new Zt;Qr.geo.stream=function(t,e){t&&co.hasOwnProperty(t.type)?co[t.type](t,e):Jt(t,e)};var co={Feature:function(t,e){Jt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Jt(n[i].geometry,e)}},ho={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Qt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Qt(n[i],e,0)},Polygon:function(t,e){te(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)te(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Jt(n[i],e)}};Qr.geo.area=function(t){return fo=0,Qr.geo.stream(t,go),fo};var fo,po=new Zt,go={sphere:function(){fo+=4*Ta},point:b,lineStart:b,lineEnd:b,polygonStart:function(){po.reset(),go.lineStart=ee},polygonEnd:function(){var t=2*po;fo+=0>t?4*Ta+t:t,go.lineStart=go.lineEnd=go.point=b}};Qr.geo.bounds=function(){function t(t,e){b.push(x=[c=t,h=t]),d>e&&(d=e),e>f&&(f=e)}function e(e,n){var i=ne([e*Da,n*Da]);if(v){var r=re(v,i),a=re([r[1],-r[0],0],r);se(a),a=le(a);var o=e-p,l=o>0?1:-1,u=a[0]*Oa*l,g=ua(o)>180;if(g^(u>l*p&&l*e>u)){(m=a[1]*Oa)>f&&(f=m)}else if(u=(u+360)%360-180,g^(u>l*p&&l*e>u)){var m=-a[1]*Oa;d>m&&(d=m)}else d>n&&(d=n),n>f&&(f=n);g?p>e?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>p?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e)}else t(e,n);v=i,p=e}function n(){w.point=e}function i(){x[0]=c,x[1]=h,w.point=t,v=null}function r(t,n){if(v){var i=t-p;y+=ua(i)>180?i+(i>0?360:-360):i}else g=t,m=n;go.point(t,n),e(t,n)}function a(){go.lineStart()}function o(){r(g,m),go.lineEnd(),ua(y)>Ca&&(c=-(h=180)),x[0]=c,x[1]=h,v=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,d,h,f,p,g,m,v,y,b,x,w={point:t,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=a,w.lineEnd=o,y=0,go.polygonStart()},polygonEnd:function(){go.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=i,0>po?(c=-(h=180),d=-(f=90)):y>Ca?f=90:-Ca>y&&(d=-90),x[0]=c,x[1]=h}};return function(t){f=h=-(c=d=1/0),b=[],Qr.geo.stream(t,w);if(a=b.length){b.sort(l);for(var e=1,n=[p=b[0]];a>e;++e)r=b[e],u(r[0],p)||u(r[1],p)?(s(p[0],r[1])>s(p[0],p[1])&&(p[1]=r[1]),s(r[0],p[1])>s(p[0],p[1])&&(p[0]=r[0])):n.push(p=r);for(var i,r,a,o=-1/0,p=(e=0,n[a=n.length-1]);a>=e;p=r,++e)r=n[e],(i=s(p[1],r[0]))>o&&(o=i,c=r[0],h=p[1])}return b=x=null,1/0===c||1/0===d?[[NaN,NaN],[NaN,NaN]]:[[c,d],[h,f]]}}(),Qr.geo.centroid=function(t){mo=vo=yo=bo=xo=wo=Mo=ko=_o=Co=So=0,Qr.geo.stream(t,To);var e=_o,n=Co,i=So,r=e*e+n*n+i*i;return Sa>r&&(e=wo,n=Mo,i=ko,Ca>vo&&(e=yo,n=bo,i=xo),r=e*e+n*n+i*i,Sa>r)?[NaN,NaN]:[Math.atan2(n,e)*Oa,K(i/Math.sqrt(r))*Oa]};var mo,vo,yo,bo,xo,wo,Mo,ko,_o,Co,So,To={sphere:b,point:ce,lineStart:he,lineEnd:fe,polygonStart:function(){To.lineStart=pe},polygonEnd:function(){To.lineStart=he}},Po=xe(me,function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Ta:-Ta,l=ua(a-n);ua(l-Ta)<Ca?(t.point(n,i=(i+o)/2>0?Ea:-Ea),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&l>=Ta&&(ua(n-r)<Ca&&(n-=r*Ca),ua(a-s)<Ca&&(a-=s*Ca),i=function(t,e,n,i){var r,a,o=Math.sin(t-n);return ua(o)>Ca?Math.atan((Math.sin(e)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*a*o)):(e+i)/2}(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*Ea,i.point(-Ta,r),i.point(0,r),i.point(Ta,r),i.point(Ta,0),i.point(Ta,-r),i.point(0,-r),i.point(-Ta,-r),i.point(-Ta,0),i.point(-Ta,r);else if(ua(t[0]-e[0])>Ca){var a=t[0]<e[0]?Ta:-Ta;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])},[-Ta,-Ta/2]),Ao=1e9;Qr.geo.clipExtent=function(){var t,e,n,i,r,a,o={stream:function(t){return r&&(r.valid=!1),(r=a(t)).valid=!0,r},extent:function(s){return arguments.length?(a=Ce(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[t,e],[n,i]]}};return o.extent([[0,0],[960,500]])},(Qr.geo.conicEqualArea=function(){return Se(Te)}).raw=Te,Qr.geo.albers=function(){return Qr.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Qr.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(i(a,o),e)||r(a,o),e}var e,n,i,r,a=Qr.geo.albers(),o=Qr.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Qr.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var u=a.scale(),c=+e[0],d=+e[1];return n=a.translate(e).clipExtent([[c-.455*u,d-.238*u],[c+.455*u,d+.238*u]]).stream(l).point,i=o.translate([c-.307*u,d+.201*u]).clipExtent([[c-.425*u+Ca,d+.12*u+Ca],[c-.214*u-Ca,d+.234*u-Ca]]).stream(l).point,r=s.translate([c-.205*u,d+.212*u]).clipExtent([[c-.214*u+Ca,d+.166*u+Ca],[c-.115*u-Ca,d+.234*u-Ca]]).stream(l).point,t},t.scale(1070)};var Eo,Do,Oo,Io,Lo,Fo,$o={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Do=0,$o.lineStart=Pe},polygonEnd:function(){$o.lineStart=$o.lineEnd=$o.point=b,Eo+=ua(Do/2)}},zo={point:function(t,e){Oo>t&&(Oo=t),t>Lo&&(Lo=t),Io>e&&(Io=e),e>Fo&&(Fo=e)},lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Bo={point:Ee,lineStart:De,lineEnd:Oe,polygonStart:function(){Bo.lineStart=Ie},polygonEnd:function(){Bo.point=Ee,Bo.lineStart=De,Bo.lineEnd=Oe}};Qr.geo.path=function(){function t(t){return t&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(a)),Qr.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,i,r,a,o,s=4.5;return t.area=function(t){return Eo=0,Qr.geo.stream(t,r($o)),Eo},t.centroid=function(t){return yo=bo=xo=wo=Mo=ko=_o=Co=So=0,Qr.geo.stream(t,r(Bo)),So?[_o/So,Co/So]:ko?[wo/ko,Mo/ko]:xo?[yo/xo,bo/xo]:[NaN,NaN]},t.bounds=function(t){return Lo=Fo=-(Oo=Io=1/0),Qr.geo.stream(t,r(zo)),[[Oo,Io],[Lo,Fo]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||function(t){var e=Le(function(e,n){return t([e*Oa,n*Oa])});return function(t){return je(e(t))}}(t):v,e()):n},t.context=function(t){return arguments.length?(a=null==(i=t)?new function(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function i(){s.point=t}function r(){o.push("Z")}var a=Ae(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return a=Ae(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}:new function(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,Pa)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return o=t,s},result:b};return s}(t),"function"!=typeof s&&a.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(a.pointRadius(+e),+e),t):s},t.projection(Qr.geo.albersUsa()).context(null)},Qr.geo.transform=function(t){return{stream:function(e){var n=new Fe(e);for(var i in t)n[i]=t[i];return n}}},Fe.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Qr.geo.projection=ze,Qr.geo.projectionMutator=Be,(Qr.geo.equirectangular=function(){return ze(Re)}).raw=Re.invert=Re,Qr.geo.rotation=function(t){function e(e){return(e=t(e[0]*Da,e[1]*Da))[0]*=Oa,e[1]*=Oa,e}return t=Ue(t[0]%360*Da,t[1]*Da,t.length>2?t[2]*Da:0),e.invert=function(e){return(e=t.invert(e[0]*Da,e[1]*Da))[0]*=Oa,e[1]*=Oa,e},e},Ne.invert=Re,Qr.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=Ue(-t[0]*Da,-t[1]*Da,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Oa,t[1]*=Oa}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=Ye((e=+i)*Da,r*Da),t):e},t.precision=function(i){return arguments.length?(n=Ye(e*Da,(r=+i)*Da),t):r},t.angle(90)},Qr.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Da,r=t[1]*Da,a=e[1]*Da,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*o)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},Qr.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Qr.range(Math.ceil(a/m)*m,r,m).map(h).concat(Qr.range(Math.ceil(u/v)*v,l,v).map(f)).concat(Qr.range(Math.ceil(i/p)*p,n,p).filter(function(t){return ua(t%m)>Ca}).map(c)).concat(Qr.range(Math.ceil(s/g)*g,o,g).filter(function(t){return ua(t%v)>Ca}).map(d))}var n,i,r,a,o,s,l,u,c,d,h,f,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(f(l).slice(1),h(r).reverse().slice(1),f(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],a>r&&(e=a,a=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[a,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],i>n&&(e=i,i=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(y)):[[i,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=Ge(s,o,90),d=qe(i,n,y),h=Ge(u,l,90),f=qe(a,r,y),t):y},t.majorExtent([[-180,-90+Ca],[180,90-Ca]]).minorExtent([[-180,-80-Ca],[180,80+Ca]])},Qr.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=Ze,r=Ke;return t.distance=function(){return Qr.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},Qr.geo.interpolate=function(t,e){return function(t,e,n,i){var r=Math.cos(e),a=Math.sin(e),o=Math.cos(i),s=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),c=o*Math.cos(n),d=o*Math.sin(n),h=2*Math.asin(Math.sqrt(Q(i-e)+r*o*Q(n-t))),f=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*f,n=Math.sin(h-t)*f,i=n*l+e*c,r=n*u+e*d,o=n*a+e*s;return[Math.atan2(r,i)*Oa,Math.atan2(o,Math.sqrt(i*i+r*r))*Oa]}:function(){return[t*Oa,e*Oa]};return p.distance=h,p}(t[0]*Da,t[1]*Da,e[0]*Da,e[1]*Da)},Qr.geo.length=function(t){return jo=0,Qr.geo.stream(t,Ro),jo};var jo,Ro={sphere:b,point:b,lineStart:function(){function t(t,r){var a=Math.sin(r*=Da),o=Math.cos(r),s=ua((t*=Da)-e),l=Math.cos(s);jo+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*l)*s),n*a+i*o*l),e=t,n=a,i=o}var e,n,i;Ro.point=function(r,a){e=r*Da,n=Math.sin(a*=Da),i=Math.cos(a),Ro.point=t},Ro.lineEnd=function(){Ro.point=Ro.lineEnd=b}},lineEnd:b,polygonStart:b,polygonEnd:b},No=Je(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Qr.geo.azimuthalEqualArea=function(){return ze(No)}).raw=No;var Uo=Je(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},v);(Qr.geo.azimuthalEquidistant=function(){return ze(Uo)}).raw=Uo,(Qr.geo.conicConformal=function(){return Se(Qe)}).raw=Qe,(Qr.geo.conicEquidistant=function(){return Se(tn)}).raw=tn;var Xo=Je(function(t){return 1/t},Math.atan);(Qr.geo.gnomonic=function(){return ze(Xo)}).raw=Xo,en.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ea]},(Qr.geo.mercator=function(){return nn(en)}).raw=en;var Wo=Je(function(){return 1},Math.asin);(Qr.geo.orthographic=function(){return ze(Wo)}).raw=Wo;var Ho=Je(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Qr.geo.stereographic=function(){return ze(Ho)}).raw=Ho,rn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ea]},(Qr.geo.transverseMercator=function(){var t=nn(rn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=rn,Qr.geom={},Qr.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=xt(n),a=xt(i),o=t.length,s=[],l=[];for(e=0;o>e;e++)s.push([+r.call(this,t[e],e),+a.call(this,t[e],e),e]);for(s.sort(ln),e=0;o>e;e++)l.push([s[e][0],-s[e][1]]);var u=sn(s),c=sn(l),d=c[0]===u[0],h=c[c.length-1]===u[u.length-1],f=[];for(e=u.length-1;e>=0;--e)f.push(t[s[u[e]][2]]);for(e=+d;e<c.length-h;++e)f.push(t[s[c[e]][2]]);return f}var n=an,i=on;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},Qr.geom.polygon=function(t){return pa(t,Yo),t};var Yo=Qr.geom.polygon.prototype=[];Yo.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},Yo.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},Yo.clip=function(t){for(var e,n,i,r,a,o,s=dn(t),l=-1,u=this.length-dn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,r=this[l],a=e[(i=e.length-s)-1],n=-1;++n<i;)o=e[n],un(o,c,r)?(un(a,c,r)||t.push(cn(a,o,c,r)),t.push(o)):un(a,c,r)&&t.push(cn(a,o,c,r)),a=o;s&&t.push(t[0]),c=r}return t};var Vo,Go,qo,Zo,Ko,Jo=[],Qo=[];yn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(bn),e.length},Tn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Pn.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=On(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(En(this,n),t=n,n=t.U),n.C=!1,i.C=!0,Dn(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Dn(this,n),t=n,n=t.U),n.C=!1,i.C=!0,En(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?On(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,En(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Dn(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,En(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,Dn(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,En(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Dn(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},Qr.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],a=s[1][0],o=s[1][1];return In(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=i&&u.x<=a&&u.y>=r&&u.y<=o?[[i,o],[a,o],[a,r],[i,r]]:[]).point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/Ca)*Ca,y:Math.round(o(t,e)/Ca)*Ca,i:e}})}var i=an,r=on,a=i,o=r,s=ts;return t?e(t):(e.links=function(t){return In(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return In(n(t)).cells.forEach(function(n,i){for(var r,a=n.site,o=n.edges.sort(bn),s=-1,l=o.length,u=o[l-1].edge,c=u.l===a?u.r:u.l;++s<l;)u,r=c,u=o[s].edge,c=u.l===a?u.r:u.l,i<r.i&&i<c.i&&(d=a,h=r,f=c,(d.x-f.x)*(h.y-d.y)-(d.x-h.x)*(f.y-d.y)<0)&&e.push([t[i],t[r.i],t[c.i]]);var d,h,f}),e},e.x=function(t){return arguments.length?(a=xt(i=t),e):i},e.y=function(t){return arguments.length?(o=xt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?ts:t,e):s===ts?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===ts?null:s&&s[1]},e)};var ts=[[-1e6,-1e6],[1e6,1e6]];Qr.geom.delaunay=function(t){return Qr.geom.voronoi().triangles(t)},Qr.geom.quadtree=function(t,e,n,i,r){function a(t){function a(t,e,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(ua(l-n)+ua(c-i)<.01)u(t,e,n,i,r,a,o,s);else{var d=t.point;t.x=t.y=t.point=null,u(t,d,l,c,r,a,o,s),u(t,e,n,i,r,a,o,s)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,a,o,s)}function u(t,e,n,i,r,o,s,l){var u=.5*(r+s),c=.5*(o+l),d=n>=u,h=i>=c,f=h<<1|d;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),d?r=u:s=u,h?o=c:l=c,a(t,e,n,i,r,o,s,l)}var c,d,h,f,p,g,m,v,y,b=xt(s),x=xt(l);if(null!=e)g=e,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),d=[],h=[],p=t.length,o)for(f=0;p>f;++f)c=t[f],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),d.push(c.x),h.push(c.y);else for(f=0;p>f;++f){var w=+b(c=t[f],f),M=+x(c,f);g>w&&(g=w),m>M&&(m=M),w>v&&(v=w),M>y&&(y=M),d.push(w),h.push(M)}var k=v-g,_=y-m;k>_?y=m+k:v=g+_;var C={leaf:!0,nodes:[],point:null,x:null,y:null};if(C.add=function(t){a(C,t,+b(t,++f),+x(t,f),g,m,v,y)},C.visit=function(t){zn(t,C,g,m,v,y)},C.find=function(t){return function(t,e,n,i,r,a,o){var s,l=1/0;return function t(u,c,d,h,f){if(!(c>a||d>o||i>h||r>f)){if(p=u.point){var p,g=e-u.x,m=n-u.y,v=g*g+m*m;if(l>v){var y=Math.sqrt(l=v);i=e-y,r=n-y,a=e+y,o=n+y,s=p}}for(var b=u.nodes,x=.5*(c+h),w=.5*(d+f),M=(n>=w)<<1|e>=x,k=M+4;k>M;++M)if(u=b[3&M])switch(3&M){case 0:t(u,c,d,x,w);break;case 1:t(u,x,d,h,w);break;case 2:t(u,c,w,x,f);break;case 3:t(u,x,w,h,f)}}}(t,i,r,a,o),s}(C,t[0],t[1],g,m,v,y)},f=-1,null==e){for(;++f<p;)a(C,t[f],d[f],h[f],g,m,v,y);--f}else t.forEach(C.add);return d=h=t=c=null,C}var o,s=an,l=on;return(o=arguments.length)?(s=Fn,l=$n,3===o&&(r=n,i=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(l=t,a):l},a.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a):null==e?null:[[e,n],[i,r]]},a.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),a):null==e?null:[i-e,r-n]},a)},Qr.interpolateRgb=Bn,Qr.interpolateObject=jn,Qr.interpolateNumber=Rn,Qr.interpolateString=Nn;var es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ns=new RegExp(es.source,"g");Qr.interpolate=Un,Qr.interpolators=[function(t,e){var n=typeof e;return("string"===n?Ya.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Bn:Nn:e instanceof tt?Bn:Array.isArray(e)?Xn:"object"===n&&isNaN(e)?jn:Rn)(t,e)}],Qr.interpolateArray=Xn;var is=function(){return v},rs=Qr.map({linear:is,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return Yn},cubic:function(){return Vn},sin:function(){return qn},exp:function(){return Zn},circle:function(){return Kn},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Pa*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Pa/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return Jn}}),as=Qr.map({in:v,out:Wn,"in-out":Hn,"out-in":function(t){return Hn(Wn(t))}});Qr.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=rs.get(n)||is,i=as.get(i)||v,r=i(n.apply(null,ta.call(arguments,1))),function(t){return 0>=t?0:t>=1?1:r(t)};var r},Qr.interpolateHcl=function(t,e){t=Qr.hcl(t),e=Qr.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return rt(n+a*t,i+o*t,r+s*t)+""}},Qr.interpolateHsl=function(t,e){t=Qr.hsl(t),e=Qr.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return nt(n+a*t,i+o*t,r+s*t)+""}},Qr.interpolateLab=function(t,e){t=Qr.lab(t),e=Qr.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,s=e.b-r;return function(t){return ot(n+a*t,i+o*t,r+s*t)+""}},Qr.interpolateRound=Qn,Qr.transform=function(t){var e=na.createElementNS(Qr.ns.prefix.svg,"g");return(Qr.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new ti(n?n.matrix:os)})(t)},ti.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var os={a:1,b:0,c:0,d:1,e:0,f:0};Qr.interpolateTransform=ii,Qr.layout={},Qr.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(oi(t[n]));return e}},Qr.layout.chord=function(){function t(){var t,u,d,h,f,p={},g=[],m=Qr.range(a),v=[];for(n=[],i=[],t=0,h=-1;++h<a;){for(u=0,f=-1;++f<a;)u+=r[h][f];g.push(u),v.push(Qr.range(a)),t+=u}for(o&&m.sort(function(t,e){return o(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(Pa-c*a)/t,u=0,h=-1;++h<a;){for(d=u,f=-1;++f<a;){var y=m[h],b=v[y][f],x=r[y][b],w=u,M=u+=x*t;p[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:M,value:x}}i[y]={index:y,startAngle:d,endAngle:u,value:(u-d)/t},u+=c}for(h=-1;++h<a;)for(f=h-1;++f<a;){var k=p[h+"-"+f],_=p[f+"-"+h];(k.value||_.value)&&n.push(k.value<_.value?{source:_,target:k}:{source:k,target:_})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,a,o,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(a=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(o=t,n=i=null,u):o},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},Qr.layout.force=function(){function t(t){t.px=Qr.event.x,t.py=Qr.event.y,o.resume()}var e,n,i,r,a,o={},s=Qr.dispatch("start","tick","end"),l=[1,1],u=.9,c=ss,d=ls,h=-30,f=us,p=.1,g=.64,m=[],y=[];return o.tick=function(){if((n*=.99)<.005)return s.end({type:"end",alpha:n=0}),!0;var t,e,o,c,d,v,b,x,w,M=m.length,k=y.length;for(e=0;k>e;++e)o=y[e],c=o.source,d=o.target,x=d.x-c.x,w=d.y-c.y,(v=x*x+w*w)&&(v=n*r[e]*((v=Math.sqrt(v))-i[e])/v,x*=v,w*=v,d.x-=x*(b=c.weight/(d.weight+c.weight)),d.y-=w*b,c.x+=x*(b=1-b),c.y+=w*b);if((b=n*p)&&(x=l[0]/2,w=l[1]/2,e=-1,b))for(;++e<M;)o=m[e],o.x+=(x-o.x)*b,o.y+=(w-o.y)*b;if(h)for(hi(t=Qr.geom.quadtree(m),n,a),e=-1;++e<M;)(o=m[e]).fixed||t.visit((_=o,function(t,e,n,i){if(t.point!==_){var r=t.cx-_.x,a=t.cy-_.y,o=i-e,s=r*r+a*a;if(s>o*o/g){if(f>s){var l=t.charge/s;_.px-=r*l,_.py-=a*l}return!0}t.point&&s&&f>s&&(l=t.pointCharge/s,_.px-=r*l,_.py-=a*l)}return!t.charge}));var _;for(e=-1;++e<M;)o=m[e],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*u,o.y-=(o.py-(o.py=o.y))*u);s.tick({type:"tick",alpha:n})},o.nodes=function(t){return arguments.length?(m=t,o):m},o.links=function(t){return arguments.length?(y=t,o):y},o.size=function(t){return arguments.length?(l=t,o):l},o.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,o):c},o.distance=o.linkDistance,o.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,o):d},o.friction=function(t){return arguments.length?(u=+t,o):u},o.charge=function(t){return arguments.length?(h="function"==typeof t?t:+t,o):h},o.chargeDistance=function(t){return arguments.length?(f=t*t,o):Math.sqrt(f)},o.gravity=function(t){return arguments.length?(p=+t,o):p},o.theta=function(t){return arguments.length?(g=t*t,o):Math.sqrt(g)},o.alpha=function(t){return arguments.length?(t=+t,n?n=t>0?t:0:t>0&&(s.start({type:"start",alpha:n=t}),Qr.timer(o.tick)),o):n},o.start=function(){function t(t,i){if(!n){for(n=new Array(u),s=0;u>s;++s)n[s]=[];for(s=0;f>s;++s){var r=y[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var a,o=n[e],s=-1,l=o.length;++s<l;)if(!isNaN(a=o[s][t]))return a;return Math.random()*i}var e,n,s,u=m.length,f=y.length,p=l[0],g=l[1];for(e=0;u>e;++e)(s=m[e]).index=e,s.weight=0;for(e=0;f>e;++e)s=y[e],"number"==typeof s.source&&(s.source=m[s.source]),"number"==typeof s.target&&(s.target=m[s.target]),++s.source.weight,++s.target.weight;for(e=0;u>e;++e)s=m[e],isNaN(s.x)&&(s.x=t("x",p)),isNaN(s.y)&&(s.y=t("y",g)),isNaN(s.px)&&(s.px=s.x),isNaN(s.py)&&(s.py=s.y);if(i=[],"function"==typeof c)for(e=0;f>e;++e)i[e]=+c.call(this,y[e],e);else for(e=0;f>e;++e)i[e]=c;if(r=[],"function"==typeof d)for(e=0;f>e;++e)r[e]=+d.call(this,y[e],e);else for(e=0;f>e;++e)r[e]=d;if(a=[],"function"==typeof h)for(e=0;u>e;++e)a[e]=+h.call(this,m[e],e);else for(e=0;u>e;++e)a[e]=h;return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){return e||(e=Qr.behavior.drag().origin(v).on("dragstart.force",li).on("drag.force",t).on("dragend.force",ui)),arguments.length?void this.on("mouseover.force",ci).on("mouseout.force",di).call(e):e},Qr.rebind(o,s,"on")};var ss=20,ls=1,us=1/0;Qr.layout.hierarchy=function(){function t(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(u=n.call(t,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=a,c.depth=a.depth+1;i&&(a.value=0),a.children=u}else i&&(a.value=+i.call(t,a,a.depth)||0),delete a.children;return gi(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),s}var e=yi,n=mi,i=vi;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(pi(e,function(t){t.children&&(t.value=0)}),gi(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Qr.layout.partition=function(){function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,l,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(s=a[u],n,l=s.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,e(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return t(o[0],0,r[0],r[1]/e(o[0])),o}var i=Qr.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},fi(n,i)},Qr.layout.pie=function(){function t(o){var s,l=o.length,u=o.map(function(n,i){return+e.call(t,n,i)}),c=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof r?r.apply(this,arguments):r)-c,h=Math.min(Math.abs(d)/l,+("function"==typeof a?a.apply(this,arguments):a)),f=h*(0>d?-1:1),p=(d-l*f)/Qr.sum(u),g=Qr.range(l),m=[];return null!=n&&g.sort(n===cs?function(t,e){return u[e]-u[t]}:function(t,e){return n(o[t],o[e])}),g.forEach(function(t){m[t]={data:o[t],value:s=u[t],startAngle:c,endAngle:c+=s*p+f,padAngle:h}}),m}var e=Number,n=cs,i=0,r=Pa,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var cs={};Qr.layout.stack=function(){function t(s,l){if(!(h=s.length))return s;var u=s.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),d=n.call(t,c,l);u=Qr.permute(u,d),c=Qr.permute(c,d);var h,f,p,g,m=i.call(t,c,l),v=u[0].length;for(p=0;v>p;++p)for(r.call(t,u[0][p],g=m[p],c[0][p][1]),f=1;h>f;++f)r.call(t,u[f][p],g+=c[f-1][p][1],c[f][p][1]);return s}var e=v,n=ki,i=_i,r=Mi,a=xi,o=wi;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:ds.get(e)||ki,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:hs.get(e)||_i,t):i},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(r=e,t):r},t};var ds=Qr.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(Ci),a=t.map(Si),o=Qr.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,u=[],c=[];for(e=0;i>e;++e)n=o[e],l>s?(s+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return Qr.range(t.length).reverse()},default:ki}),hs=Qr.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,i,r,a,o,s,l,u,c=t.length,d=t[0],h=d.length,f=[];for(f[0]=l=u=0,n=1;h>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,a=0,s=d[n][0]-d[n-1][0];c>e;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>i;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}f[n]=l-=r?a/r*s:0,u>l&&(u=l)}for(n=0;h>n;++n)f[n]-=u;return f},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:_i});Qr.layout.histogram=function(){function t(t,a){for(var o,s,l=[],u=t.map(n,this),c=i.call(this,u,a),d=r.call(this,c,u,a),h=(a=-1,u.length),f=d.length-1,p=e?1:1/h;++a<f;)o=l[a]=[],o.dx=d[a+1]-(o.x=d[a]),o.y=0;if(f>0)for(a=-1;++a<h;)s=u[a],s>=c[0]&&s<=c[1]&&(o=l[Qr.bisect(d,s,1,f)-1],o.y+=p,o.push(t[a]));return l}var e=!0,n=Number,i=Ei,r=Pi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=xt(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return Ai(t,e)}:xt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Qr.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),s=o[0],l=r[0],u=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,gi(s,function(t){t.r=+c(t.value)}),gi(s,Fi),i){var d=i*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;gi(s,function(t){t.r+=d}),gi(s,Fi),gi(s,function(t){t.r-=d})}return Bi(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var e,n=Qr.layout.hierarchy().sort(Di),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},fi(t,n)},Qr.layout.tree=function(){function t(t,l){var u=r.call(this,t,l),c=u[0],d=function(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,a=e.children,o=0,s=a.length;s>o;++o)i.push((a[o]=r={_:a[o],parent:e,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}(c);if(gi(d,e),d.parent.m=-d.z,pi(d,n),s)pi(c,i);else{var h=c,f=c,p=c;pi(c,function(t){t.x<h.x&&(h=t),t.x>f.x&&(f=t),t.depth>p.depth&&(p=t)});var g=a(h,f)/2-h.x,m=o[0]/(f.x+a(f,h)/2+g),v=o[1]/(p.depth||1);pi(c,function(t){t.x=(t.x+g)*m,t.y=t.depth*v})}return u}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)e=r[a],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var r=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+a(t._,i._),t.m=t.z-r):t.z=r}else i&&(t.z=i.z+a(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,r=t,o=t,s=e,l=r.parent.children[0],u=r.m,c=o.m,d=s.m,h=l.m;s=Ui(s),r=Ni(r),s&&r;)l=Ni(l),o=Ui(o),o.a=t,i=s.z+d-r.z-u+a(s._,r._),i>0&&(Xi((f=s,p=t,g=n,f.a.parent===p.parent?f.a:g),t,i),u+=i,c+=i),d+=s.m,u+=r.m,h+=l.m,c+=o.m;s&&!Ui(o)&&(o.t=s,o.m+=d-c),r&&!Ni(l)&&(l.t=r,l.m+=u-h,n=t)}var f,p,g;return n}(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t){t.x*=o[0],t.y=t.depth*o[1]}var r=Qr.layout.hierarchy().sort(null).value(null),a=Ri,o=[1,1],s=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(s=null==(o=e)?i:null,t):s?null:o},t.nodeSize=function(e){return arguments.length?(s=null==(o=e)?null:i,t):s?o:null},fi(t,r)},Qr.layout.cluster=function(){function t(t,a){var o,s=e.call(this,t,a),l=s[0],u=0;gi(l,function(t){var e=t.children;e&&e.length?(t.x=(r=e,r.reduce(function(t,e){return t+e.x},0)/r.length),t.y=(i=e,1+Qr.max(i,function(t){return t.y}))):(t.x=o?u+=n(t,o):0,t.y=0,o=t);var i,r});var c=Wi(l),d=Hi(l),h=c.x-n(c,d)/2,f=d.x+n(d,c)/2;return gi(l,r?function(t){t.x=(t.x-l.x)*i[0],t.y=(l.y-t.y)*i[1]}:function(t){t.x=(t.x-h)/(f-h)*i[0],t.y=(1-(l.y?t.y/l.y:1))*i[1]}),s}var e=Qr.layout.hierarchy().sort(null).value(null),n=Ri,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},fi(t,e)},Qr.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var a=n.children;if(a&&a.length){var o,s,l,u=d(n),c=[],h=a.slice(),p=1/0,g="slice"===f?u.dx:"dice"===f?u.dy:"slice-dice"===f?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(h,u.dx*u.dy/n.value),c.area=0;(l=h.length)>0;)c.push(o=h[l-1]),c.area+=o.area,"squarify"!==f||(s=i(c,g))<=p?(h.pop(),p=s):(c.area-=c.pop().area,r(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,g,u,!0),c.length=c.area=0),a.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var a,o=d(e),s=i.slice(),l=[];for(t(s,o.dx*o.dy/e.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(a>n&&(a=n),n>r&&(r=n));return e*=e,(i*=i)?Math.max(e*r*p/i,i/(e*a*p)):1/0}function r(t,e,n,i){var r,a=-1,o=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<o;)r=t[a],r.x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<o;)r=t[a],r.x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(i){var r=o||s(i),a=r[0];return a.x=0,a.y=0,a.dx=u[0],a.dy=u[1],o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),h&&(o=r),r}var o,s=Qr.layout.hierarchy(),l=Math.round,u=[1,1],c=null,d=Yi,h=!1,f="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(u=t,a):u},a.padding=function(t){function e(e){return Vi(e,t)}if(!arguments.length)return c;var n;return d=null==(c=t)?Yi:"function"==(n=typeof t)?function(e){var n=t.call(a,e,e.depth);return null==n?Yi(e):Vi(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,a},a.round=function(t){return arguments.length?(l=t?Math.round:Number,a):l!=Number},a.sticky=function(t){return arguments.length?(h=t,o=null,a):h},a.ratio=function(t){return arguments.length?(p=t,a):p},a.mode=function(t){return arguments.length?(f=t+"",a):f},fi(a,s)},Qr.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do{n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i}while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=Qr.random.normal.apply(Qr,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Qr.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Qr.scale={};var fs={floor:v,ceil:v};Qr.scale.linear=function(){return Qi([0,1],[0,1],Un,!1)};var ps={s:1,g:1,p:1,r:1,e:1};Qr.scale.log=function(){return or(Qr.scale.linear().domain([0,1]),10,!0,[1,10])};var gs=Qr.format(".0e"),ms={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Qr.scale.pow=function(){return sr(Qr.scale.linear(),1,[0,1])},Qr.scale.sqrt=function(){return Qr.scale.pow().exponent(.5)},Qr.scale.ordinal=function(){return ur([],{t:"range",a:[[]]})},Qr.scale.category10=function(){return Qr.scale.ordinal().range(vs)},Qr.scale.category20=function(){return Qr.scale.ordinal().range(ys)},Qr.scale.category20b=function(){return Qr.scale.ordinal().range(bs)},Qr.scale.category20c=function(){return Qr.scale.ordinal().range(xs)};var vs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),ys=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),bs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),xs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);Qr.scale.quantile=function(){return cr([],[])},Qr.scale.quantize=function(){return dr(0,1,[0,1])},Qr.scale.threshold=function(){return hr([.5],[0,1])},Qr.scale.identity=function(){return fr([0,1])},Qr.svg={},Qr.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+i.apply(this,arguments)),c=o.apply(this,arguments)-Ea,d=s.apply(this,arguments)-Ea,h=Math.abs(d-c),f=c>d?0:1;if(t>u&&(p=u,u=t,t=p),h>=Aa)return e(u,f)+(t?e(t,1-f):"")+"Z";var p,g,m,v,y,b,x,w,M,k,_,C,S=0,T=0,P=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=a===ws?Math.sqrt(t*t+u*u):+a.apply(this,arguments),f||(T*=-1),u&&(T=K(m/u*Math.sin(v))),t&&(S=K(m/t*Math.sin(v)))),u){y=u*Math.cos(c+T),b=u*Math.sin(c+T),x=u*Math.cos(d-T),w=u*Math.sin(d-T);var A=Math.abs(d-c-2*T)<=Ta?0:1;if(T&&xr(y,b,x,w)===f^A){var E=(c+d)/2;y=u*Math.cos(E),b=u*Math.sin(E),x=w=null}}else y=b=0;if(t){M=t*Math.cos(d-S),k=t*Math.sin(d-S),_=t*Math.cos(c+S),C=t*Math.sin(c+S);var D=Math.abs(c-d+2*S)<=Ta?0:1;if(S&&xr(M,k,_,C)===1-f^D){var O=(c+d)/2;M=t*Math.cos(O),k=t*Math.sin(O),_=C=null}}else M=k=0;if((p=Math.min(Math.abs(u-t)/2,+r.apply(this,arguments)))>.001){g=u>t^f?0:1;var I=null==_?[M,k]:null==x?[y,b]:cn([y,b],[_,C],[x,w],[M,k]),L=y-I[0],F=b-I[1],$=x-I[0],z=w-I[1],B=1/Math.sin(Math.acos((L*$+F*z)/(Math.sqrt(L*L+F*F)*Math.sqrt($*$+z*z)))/2),j=Math.sqrt(I[0]*I[0]+I[1]*I[1]);if(null!=x){var R=Math.min(p,(u-j)/(B+1)),N=wr(null==_?[M,k]:[_,C],[y,b],u,R,f),U=wr([x,w],[M,k],u,R,f);p===R?P.push("M",N[0],"A",R,",",R," 0 0,",g," ",N[1],"A",u,",",u," 0 ",1-f^xr(N[1][0],N[1][1],U[1][0],U[1][1]),",",f," ",U[1],"A",R,",",R," 0 0,",g," ",U[0]):P.push("M",N[0],"A",R,",",R," 0 1,",g," ",U[0])}else P.push("M",y,",",b);if(null!=_){var X=Math.min(p,(t-j)/(B-1)),W=wr([y,b],[_,C],t,-X,f),H=wr([M,k],null==x?[y,b]:[x,w],t,-X,f);p===X?P.push("L",H[0],"A",X,",",X," 0 0,",g," ",H[1],"A",t,",",t," 0 ",f^xr(H[1][0],H[1][1],W[1][0],W[1][1]),",",1-f," ",W[1],"A",X,",",X," 0 0,",g," ",W[0]):P.push("L",H[0],"A",X,",",X," 0 0,",g," ",W[0])}else P.push("L",M,",",k)}else P.push("M",y,",",b),null!=x&&P.push("A",u,",",u," 0 ",A,",",f," ",x,",",w),P.push("L",M,",",k),null!=_&&P.push("A",t,",",t," 0 ",D,",",1-f," ",_,",",C);return P.push("Z"),P.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=gr,i=mr,r=pr,a=ws,o=vr,s=yr,l=br;return t.innerRadius=function(e){return arguments.length?(n=xt(e),t):n},t.outerRadius=function(e){return arguments.length?(i=xt(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=xt(e),t):r},t.padRadius=function(e){return arguments.length?(a=e==ws?ws:xt(e),t):a},t.startAngle=function(e){return arguments.length?(o=xt(e),t):o},t.endAngle=function(e){return arguments.length?(s=xt(e),t):s},t.padAngle=function(e){return arguments.length?(l=xt(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Ea;return[Math.cos(e)*t,Math.sin(e)*t]},t};var ws="auto";Qr.svg.line=function(){return Mr(v)};var Ms=Qr.map({linear:kr,"linear-closed":function(t){return kr(t)+"Z"},step:function(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")},"step-before":_r,"step-after":Cr,basis:Pr,"basis-open":function(t){if(t.length<4)return kr(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(Ar(Cs,a)+","+Ar(Cs,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Er(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)n=t[i%r],o.push(n[0]),s.push(n[1]);for(e=[Ar(Cs,o),",",Ar(Cs,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Er(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(a+r*s),i[1]=e*i[1]+(1-e)*(o+r*l);return Pr(t)},cardinal:function(t,e){return t.length<3?kr(t):t[0]+Sr(t,Tr(t,e))},"cardinal-open":function(t,e){return t.length<4?kr(t):t[1]+Sr(t.slice(1,-1),Tr(t,e))},"cardinal-closed":function(t,e){return t.length<3?kr(t):t[0]+Sr((t.push(t[0]),t),Tr([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?kr(t):t[0]+Sr(t,Or(t))}});Ms.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var ks=[0,2/3,1/3,0],_s=[0,1/3,2/3,0],Cs=[0,1/6,2/3,1/6];Qr.svg.line.radial=function(){var t=Mr(Ir);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},_r.reverse=Cr,Cr.reverse=_r,Qr.svg.area=function(){return Lr(v)},Qr.svg.area.radial=function(){var t=Lr(Ir);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Qr.svg.chord=function(){function t(t,o){var s=e(this,r,t,o),l=e(this,a,t,o);return"M"+s.p0+n(s.r,s.p1,s.a1-s.a0)+(u=s,c=l,u.a0==c.a0&&u.a1==c.a1?i(s.r,s.p1,s.r,s.p0):i(s.r,s.p1,l.r,l.p0)+n(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,s.r,s.p0))+"Z";var u,c}function e(t,e,n,i){var r=e.call(t,n,i),a=o.call(t,r,i),u=s.call(t,r,i)-Ea,c=l.call(t,r,i)-Ea;return{r:a,a0:u,a1:c,p0:[a*Math.cos(u),a*Math.sin(u)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ta)+",1 "+e}function i(t,e,n,i){return"Q 0,0 "+i}var r=Ze,a=Ke,o=Fr,s=vr,l=yr;return t.radius=function(e){return arguments.length?(o=xt(e),t):o},t.source=function(e){return arguments.length?(r=xt(e),t):r},t.target=function(e){return arguments.length?(a=xt(e),t):a},t.startAngle=function(e){return arguments.length?(s=xt(e),t):s},t.endAngle=function(e){return arguments.length?(l=xt(e),t):l},t},Qr.svg.diagonal=function(){function t(t,r){var a=e.call(this,t,r),o=n.call(this,t,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(i))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Ze,n=Ke,i=$r;return t.source=function(n){return arguments.length?(e=xt(n),t):e},t.target=function(e){return arguments.length?(n=xt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},Qr.svg.diagonal.radial=function(){var t=Qr.svg.diagonal(),e=$r,n=t.projection;return t.projection=function(t){return arguments.length?n((i=e=t,function(){var t=i.apply(this,arguments),e=t[0],n=t[1]-Ea;return[e*Math.cos(n),e*Math.sin(n)]})):e;var i},t},Qr.svg.symbol=function(){function t(t,i){return(Ss.get(e.call(this,t,i))||jr)(n.call(this,t,i))}var e=Br,n=zr;return t.type=function(n){return arguments.length?(e=xt(n),t):e},t.size=function(e){return arguments.length?(n=xt(e),t):n},t};var Ss=Qr.map({circle:jr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ps)),n=e*Ps;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ts),n=e*Ts/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ts),n=e*Ts/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Qr.svg.symbolTypes=Ss.keys();var Ts=Math.sqrt(3),Ps=Math.tan(30*Da);ya.transition=function(t){for(var e,n,i=As||++Is,r=Wr(t),a=[],o=Es||{time:Date.now(),ease:Gn,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(n=u[c])&&Hr(n,c,r,i,o),e.push(n)}return Nr(a,r,i)},ya.interrupt=function(t){return this.each(null==t?Ds:Rr(Wr(t)))};var As,Es,Ds=Rr(Wr()),Os=[],Is=0;Os.call=ya.call,Os.empty=ya.empty,Os.node=ya.node,Os.size=ya.size,Qr.transition=function(t,e){return t&&t.transition?As?t.transition(e):t:Qr.selection().transition(t)},Qr.transition.prototype=Os,Os.select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=S(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(i=u[c])&&(n=t.call(i,i.__data__,c,s))?("__data__"in i&&(n.__data__=i.__data__),Hr(n,c,a,r,i[a][r]),e.push(n)):e.push(null)}return Nr(o,a,r)},Os.selectAll=function(t){var e,n,i,r,a,o=this.id,s=this.namespace,l=[];t=T(t);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],h=-1,f=d.length;++h<f;)if(i=d[h]){a=i[s][o],n=t.call(i,i.__data__,h,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(r=n[p])&&Hr(r,p,s,o,a),e.push(r)}return Nr(l,s,o)},Os.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=j(t));for(var r=0,a=this.length;a>r;r++){i.push(e=[]);for(var o,s=0,l=(o=this[r]).length;l>s;s++)(n=o[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return Nr(i,this.namespace,this.id)},Os.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):R(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Os.attr=function(t,e){function n(){this.removeAttribute(a)}function i(){this.removeAttributeNS(a.space,a.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var r="transform"==t?ii:Un,a=Qr.ns.qualify(t);return Ur(this,"attr."+t,e,a.local?function(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}:function(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=r(n,t),function(t){this.setAttribute(a,e(t))})})})},Os.attrTween=function(t,e){var n=Qr.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,i){var r=e.call(this,t,i,this.getAttributeNS(n.space,n.local));return r&&function(t){this.setAttributeNS(n.space,n.local,r(t))}}:function(t,i){var r=e.call(this,t,i,this.getAttribute(n));return r&&function(t){this.setAttribute(n,r(t))}})},Os.style=function(t,n,i){function r(){this.style.removeProperty(t)}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(n="");for(i in t)this.style(i,t[i],n);return this}i=""}return Ur(this,"style."+t,n,function(n){return null==n?r:(n+="",function(){var r,a=e(this).getComputedStyle(this,null).getPropertyValue(t);return a!==n&&(r=Un(a,n),function(e){this.style.setProperty(t,r(e),i)})})})},Os.styleTween=function(t,n,i){return arguments.length<3&&(i=""),this.tween("style."+t,function(r,a){var o=n.call(this,r,a,e(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),i)}})},Os.text=function(t){return Ur(this,"text",t,Xr)},Os.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Os.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=Qr.ease.apply(Qr,arguments)),R(this,function(i){i[n][e].ease=t}))},Os.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:R(this,"function"==typeof t?function(i,r,a){i[n][e].delay=+t.call(i,i.__data__,r,a)}:(t=+t,function(i){i[n][e].delay=t}))},Os.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:R(this,"function"==typeof t?function(i,r,a){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,a))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Os.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Es,a=As;try{As=n,R(this,function(e,r,a){Es=e[i][n],t.call(e,e.__data__,r,a)})}finally{Es=r,As=a}}else R(this,function(r){var a=r[i][n];(a.event||(a.event=Qr.dispatch("start","end","interrupt"))).on(t,e)});return this},Os.transition=function(){for(var t,e,n,i=this.id,r=++Is,a=this.namespace,o=[],s=0,l=this.length;l>s;s++){o.push(t=[]);for(var u,c=0,d=(u=this[s]).length;d>c;c++)(e=u[c])&&(n=e[a][i],Hr(e,c,a,r,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),t.push(e)}return Nr(o,a,r)},Qr.svg.axis=function(){function t(t){t.each(function(){var t,u=Qr.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),h=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,f=null==e?d.tickFormat?d.tickFormat.apply(d,s):v:e,p=u.selectAll(".tick").data(h,d),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ca),m=Qr.transition(p.exit()).style("opacity",Ca).remove(),y=Qr.transition(p.order()).style("opacity",1),b=Math.max(r,0)+o,x=qi(d),w=u.selectAll(".domain").data([0]),M=(w.enter().append("path").attr("class","domain"),Qr.transition(w));g.append("line"),g.append("text");var k,_,C,S,T=g.select("line"),P=y.select("line"),A=p.select("text").text(f),E=g.select("text"),D=y.select("text"),O="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(t=Yr,k="x",C="y",_="x2",S="y2",A.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+x[0]+","+O*a+"V0H"+x[1]+"V"+O*a)):(t=Vr,k="y",C="x",_="y2",S="x2",A.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),M.attr("d","M"+O*a+","+x[0]+"H0V"+x[1]+"H"+O*a)),T.attr(S,O*r),E.attr(C,O*b),P.attr(_,0).attr(S,O*r),D.attr(k,0).attr(C,O*b),d.rangeBand){var I=d,L=I.rangeBand()/2;c=d=function(t){return I(t)+L}}else c.rangeBand?c=d:m.call(t,d,c);g.call(t,c,d),y.call(t,d,d)})}var e,n=Qr.scale.linear(),i=Ls,r=6,a=6,o=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Fs?e+"":Ls,t):i},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,a=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Ls="bottom",Fs={top:1,right:1,bottom:1,left:1};Qr.svg.brush=function(){function t(e){e.each(function(){var e=Qr.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=e.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(g,v);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return $s[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,d=Qr.transition(e),h=Qr.transition(o);u&&(l=qi(u),h.attr("x",l[0]).attr("width",l[1]-l[0]),i(d)),c&&(l=qi(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(d)),n(d)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+d[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",d[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1]-d[0])}function r(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function a(){function a(){var t=Qr.mouse(b),e=!1;y&&(t[0]+=y[0],t[1]+=y[1]),T||(Qr.event.altKey?(v||(v=[(d[0]+d[1])/2,(h[0]+h[1])/2]),A[0]=d[+(t[0]<v[0])],A[1]=h[+(t[1]<v[1])]):v=null),C&&g(t,u,0)&&(i(k),e=!0),S&&g(t,c,1)&&(r(k),e=!0),e&&(n(k),w({type:"brush",mode:T?"move":"resize"}))}function g(t,e,n){var i,r,a=qi(e),l=a[0],u=a[1],c=A[n],g=n?h:d,m=g[1]-g[0];return T&&(l-=c,u-=m+c),i=(n?p:f)?Math.max(l,Math.min(u,t[n])):t[n],T?r=(i+=c)+m:(v&&(c=Math.max(l,Math.min(u,2*v[n]-i))),i>c?(r=i,i=c):r=c),g[0]!=i||g[1]!=r?(n?s=null:o=null,g[0]=i,g[1]=r,!0):void 0}function m(){a(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Qr.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),P(),w({type:"brushend"})}var v,y,b=this,x=Qr.select(Qr.event.target),w=l.of(b,arguments),k=Qr.select(b),_=x.datum(),C=!/^(n|s)$/.test(_)&&u,S=!/^(e|w)$/.test(_)&&c,T=x.classed("extent"),P=H(b),A=Qr.mouse(b),E=Qr.select(e(b)).on("keydown.brush",function(){32==Qr.event.keyCode&&(T||(v=null,A[0]-=d[1],A[1]-=h[1],T=2),M())}).on("keyup.brush",function(){32==Qr.event.keyCode&&2==T&&(A[0]+=d[1],A[1]+=h[1],T=0,M())});if(Qr.event.changedTouches?E.on("touchmove.brush",a).on("touchend.brush",m):E.on("mousemove.brush",a).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),T)A[0]=d[0]-A[0],A[1]=h[0]-A[1];else if(_){var D=+/w$/.test(_),O=+/^n/.test(_);y=[d[1-D]-A[0],h[1-O]-A[1]],A[0]=d[D],A[1]=h[O]}else Qr.event.altKey&&(v=A.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),Qr.select("body").style("cursor",x.style("cursor")),w({type:"brushstart"}),a()}var o,s,l=_(t,"brushstart","brush","brushend"),u=null,c=null,d=[0,0],h=[0,0],f=!0,p=!0,g=zs[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:d,y:h,i:o,j:s},n=this.__chart__||e;this.__chart__=e,As?Qr.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,d=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Xn(d,e.x),i=Xn(h,e.y);return o=s=null,function(r){d=e.x=n(r),h=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(g=zs[!(u=e)<<1|!c],t):u},t.y=function(e){return arguments.length?(g=zs[!u<<1|!(c=e)],t):c},t.clamp=function(e){return arguments.length?(u&&c?(f=!!e[0],p=!!e[1]):u?f=!!e:c&&(p=!!e),t):u&&c?[f,p]:u?f:c?p:null},t.extent=function(e){var n,i,r,a,l;return arguments.length?(u&&(n=e[0],i=e[1],c&&(n=n[0],i=i[0]),o=[n,i],u.invert&&(n=u(n),i=u(i)),n>i&&(l=n,n=i,i=l),(n!=d[0]||i!=d[1])&&(d=[n,i])),c&&(r=e[0],a=e[1],u&&(r=r[1],a=a[1]),s=[r,a],c.invert&&(r=c(r),a=c(a)),r>a&&(l=r,r=a,a=l),(r!=h[0]||a!=h[1])&&(h=[r,a])),t):(u&&(o?(n=o[0],i=o[1]):(n=d[0],i=d[1],u.invert&&(n=u.invert(n),i=u.invert(i)),n>i&&(l=n,n=i,i=l))),c&&(s?(r=s[0],a=s[1]):(r=h[0],a=h[1],c.invert&&(r=c.invert(r),a=c.invert(a)),r>a&&(l=r,r=a,a=l))),u&&c?[[n,r],[i,a]]:u?[n,i]:c&&[r,a])},t.clear=function(){return t.empty()||(d=[0,0],h=[0,0],o=s=null),t},t.empty=function(){return!!u&&d[0]==d[1]||!!c&&h[0]==h[1]},Qr.rebind(t,l,"on")};var $s={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bs=no.format=lo.timeFormat,js=Bs.utc,Rs=js("%Y-%m-%dT%H:%M:%S.%LZ");Bs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Gr:Rs,Gr.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Gr.toString=Rs.toString,no.second=At(function(t){return new io(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),no.seconds=no.second.range,no.seconds.utc=no.second.utc.range,no.minute=At(function(t){return new io(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),no.minutes=no.minute.range,no.minutes.utc=no.minute.utc.range,no.hour=At(function(t){var e=t.getTimezoneOffset()/60;return new io(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),no.hours=no.hour.range,no.hours.utc=no.hour.utc.range,no.month=At(function(t){return(t=no.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),no.months=no.month.range,no.months.utc=no.month.utc.range;var Ns=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Us=[[no.second,1],[no.second,5],[no.second,15],[no.second,30],[no.minute,1],[no.minute,5],[no.minute,15],[no.minute,30],[no.hour,1],[no.hour,3],[no.hour,6],[no.hour,12],[no.day,1],[no.day,2],[no.week,1],[no.month,1],[no.month,3],[no.year,1]],Xs=Bs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",me]]),Ws={range:function(t,e,n){return Qr.range(Math.ceil(t/n)*n,+e,n).map(Zr)},floor:v,ceil:v};Us.year=no.year,no.scale=function(){return qr(Qr.scale.linear(),Us,Xs)};var Hs=Us.map(function(t){return[t[0].utc,t[1]]}),Ys=js.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",me]]);Hs.year=no.year.utc,no.scale.utc=function(){return qr(Qr.scale.linear(),Hs,Ys)},Qr.text=wt(function(t){return t.responseText}),Qr.json=function(t,e){return Mt(t,"application/json",Kr,e)},Qr.html=function(t,e){return Mt(t,"text/html",Jr,e)},Qr.xml=wt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Qr):"object"==typeof module&&module.exports&&(module.exports=Qr),this.d3=Qr}();var AppFilters=angular.module("AngularSpringApp.filters",[]);AppFilters.filter("interpolate",["version",function(t){return function(e){return String(e).replace(/\%VERSION\%/gm,t)}}]),function(t){var e=!1;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var n=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function e(n){function i(e,r,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=t({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(t){}r=n.write?n.write(r,e):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in a)a[u]&&(l+="; "+u,!0!==a[u]&&(l+="="+a[u]));return document.cookie=e+"="+r+l}e||(o={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<c.length;h++){var f=c[h].split("="),p=f.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var g=f[0].replace(d,decodeURIComponent);if(p=n.read?n.read(p,g):n(p,g)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(t){}if(e===g){o=p;break}e||(o[g]=p)}catch(t){}}return o}}return i.set=i,i.get=function(t){return i.call(i,t)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(e,n){i(e,"",t(n,{expires:-1}))},i.withConverter=e,i}return e(function(){})}),function(t){"object"==typeof module&&"object"==typeof module.exports?t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,n,i){t.fn.orgchart=function(e){switch(e){case"buildHierarchy":return x.apply(this,Array.prototype.splice.call(arguments,1));case"addChildren":return M.apply(this,Array.prototype.splice.call(arguments,1));case"addParent":return k.apply(this,Array.prototype.splice.call(arguments,1));case"addSiblings":return C.apply(this,Array.prototype.splice.call(arguments,1));case"removeNodes":return function(t){var e=t.closest("table").parent(),n=e.parent().siblings();e.is("td")?s(t,"siblings").exist?(n.eq(2).children(".top:lt(2)").remove(),n.eq(":lt(2)").children().attr("colspan",n.eq(2).children().length),e.remove()):n.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():e.add(e.siblings()).remove()}.apply(this,Array.prototype.splice.call(arguments,1));case"getHierarchy":return function(e){if(!(e=e||t(this).find(".orgchart")).find(".node:first")[0].id)return"Error: Nodes of orghcart to be exported must have id attribute!";return o(e)}.apply(this,Array.prototype.splice.call(arguments,1));default:var i=t.extend({nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1},e)}var l=this,u=i.data,c=t("<div>",{data:{options:i},class:"orgchart"+(""!==i.chartClass?" "+i.chartClass:"")+("t2b"!==i.direction?" "+i.direction:""),click:function(e){t(e.target).closest(".node").length||c.find(".node.focused").removeClass("focused")}});if("object"===t.type(u)?x(c,u instanceof t?r(u.children()):i.ajaxURL?u:a(u,"00"),0,i):t.ajax({url:u,dataType:"json",beforeSend:function(){c.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>')}}).done(function(t,e,n){x(c,i.ajaxURL?t:a(t,"00"),0,i)}).fail(function(t,e,n){console.log(n)}).always(function(){c.children(".spinner").remove()}),l.append(c),i.exportButton&&!l.find(".oc-export-btn").length){var d=t("<button>",{class:"oc-export-btn"+(""!==i.chartClass?" "+i.chartClass:""),text:"Export",click:function(){if(t(this).children(".spinner").length)return!1;var e=l.find(".mask");e.length?e.removeClass("hidden"):l.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var n=l.addClass("canvasContainer").find(".orgchart:visible").get(0),r="l2r"===i.direction||"r2l"===i.direction;html2canvas(n,{width:r?n.clientHeight:n.clientWidth,height:r?n.clientWidth:n.clientHeight,onclone:function(e){t(e).find(".canvasContainer").css("overflow","visible").find(".orgchart:visible:first").css("transform","")},onrendered:function(t){l.find(".mask").addClass("hidden").end().find(".oc-download-btn").attr("href",t.toDataURL())[0].click()}}).then(function(){l.removeClass("canvasContainer")},function(){l.removeClass("canvasContainer")})}}),h='<a class="oc-download-btn'+(""!==i.chartClass?" "+i.chartClass:"")+'" download="'+i.exportFilename+'.png"></a>';l.append(d).append(h)}return i.pan&&(l.css("overflow","hidden"),c.on("mousedown",function(e){var i=t(this);if(t(e.target).closest(".node").length)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var r=0,a=0,o=i.css("transform");if("none"!==o){var s=o.split(",");-1===o.indexOf("3d")?(r=parseInt(s[4]),a=parseInt(s[5])):(r=parseInt(s[12]),a=parseInt(s[13]))}var l=e.pageX-r,u=e.pageY-a;t(n).on("mousemove",function(t){var e=t.pageX-l,n=t.pageY-u,r=i.css("transform");if("none"===r)-1===r.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+e+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)");else{var a=r.split(",");-1===r.indexOf("3d")?(a[4]=" "+e,a[5]=" "+n+")"):(a[12]=" "+e,a[13]=" "+n),i.css("transform",a.join(","))}})}}),t(n).on("mouseup",function(){c.data("panning")&&(c.css("cursor","default"),t(this).off("mousemove"))})),i.zoom&&l.on("wheel",function(t){t.preventDefault();var e=c.css("transform"),n=1+(t.originalEvent.deltaY>0?-.2:.2);"none"===e?c.css("transform","scale("+n+","+n+")"):-1===e.indexOf("3d")?c.css("transform",e+" scale("+n+","+n+")"):c.css("transform",e+" scale3d("+n+","+n+", 1)")}),l};function r(e){var n={name:e.contents().eq(0).text().trim(),relationship:(e.parent().parent().is("li")?"1":"0")+(e.siblings("li").length?1:0)+(e.children("ul").length?1:0)};return e[0].id&&(n.id=e[0].id),e.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(r(t(this)))}),n}function a(t,e){return t.relationship=e+(t.children&&t.children.length>0?1:0),t.children&&t.children.forEach(function(e){a(e,"1"+(t.children.length>1?1:0))}),t}function o(e){var n=e.find("tr:first"),i={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){i.children||(i.children=[]),i.children.push(o(t(this)))}),i}function s(t,e){var n={};return(n="parent"===e?t.closest("table").closest("tr").siblings(":first").find(".node"):"children"===e?t.closest("tr").siblings():t.closest("table").parent().siblings()).length?n.is(":visible")?{exist:!0,visible:!0}:{exist:!0,visible:!1}:{exist:!1,visible:!1}}function l(t){var e=t.closest("table").closest("tr").siblings();e.eq(0).find(".spinner").length&&t.closest(".orgchart").data("inAjax",!1),s(t,"siblings").visible&&d(t);var n=e.slice(1);n.css("visibility","hidden");var i=e.eq(0).find(".node"),r=s(i,"parent").visible;i.length&&i.is(":visible")&&i.addClass("slide slide-down").one("transitionend",function(){i.removeClass("slide"),n.removeAttr("style"),e.addClass("hidden")}),i.length&&r&&l(i)}function u(e){var n=e.closest("table").closest("tr").siblings().removeClass("hidden");n.eq(2).children().slice(1,-1).addClass("hidden");var i=n.eq(0).find(".node")[0];y(i),t(i).addClass("slide").removeClass("slide-down").one("transitionend",function(){t(i).removeClass("slide"),g(e)&&m(e.children(".topEdge"))})}function c(t){var e=t.closest("tr").siblings().removeClass("hidden").eq(2).children().find("tr:first").find(".node:visible");y(e.get(0)),e.addClass("slide").removeClass("slide-up").eq(0).one("transitionend",function(){e.removeClass("slide"),g(t)&&m(t.children(".bottomEdge"))})}function d(t,e){var n=t.closest("table").parent();n.siblings().find(".spinner").length&&t.closest(".orgchart").data("inAjax",!1),e?"left"===e?n.prevAll().find(".node:visible").addClass("slide slide-right"):n.nextAll().find(".node:visible").addClass("slide slide-left"):(n.prevAll().find(".node:visible").addClass("slide slide-right"),n.nextAll().find(".node:visible").addClass("slide slide-left"));var i=n.siblings().find(".slide"),r=i.closest(".nodes").prevAll(".lines").css("visibility","hidden");i.eq(0).one("transitionend",function(){r.removeAttr("style");var a=e?"left"===e?n.prevAll(":not(.hidden)"):n.nextAll(":not(.hidden)"):n.siblings();n.closest(".nodes").prev().children(":not(.hidden)").slice(1,e?2*a.length+1:-1).addClass("hidden"),i.removeClass("slide"),a.find(".node:visible:gt(0)").removeClass("slide-left slide-right").addClass("slide-up").end().find(".lines, .nodes").addClass("hidden").end().addClass("hidden"),g(t)&&v(t)})}function h(e,n){var i=t();i=n?"left"===n?e.closest("table").parent().prevAll().removeClass("hidden"):e.closest("table").parent().nextAll().removeClass("hidden"):e.closest("table").parent().siblings().removeClass("hidden");var r=e.closest("table").closest("tr").siblings();if(n?r.eq(2).children(".hidden").slice(0,2*i.length).removeClass("hidden"):r.eq(2).children(".hidden").removeClass("hidden"),!s(e,"parent").visible){r.removeClass("hidden");var a=r.find(".node")[0];y(a),t(a).addClass("slide").removeClass("slide-down").one("transitionend",function(){t(this).removeClass("slide")})}i.find(".node:visible").addClass("slide").removeClass("slide-left slide-right").eq(-1).one("transitionend",function(){i.find(".node:visible").removeClass("slide"),g(e)&&(v(e),e.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})}function f(e,n,i){var r=n.closest(".orgchart");return(void 0===r.data("inAjax")||!0!==r.data("inAjax"))&&(e.addClass("hidden"),n.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),n.children().not(".spinner").css("opacity",.2),r.data("inAjax",!0),t(".oc-export-btn"+(""!==i.chartClass?"."+i.chartClass:"")).prop("disabled",!0),!0)}function p(e,n,i){var r=n.closest("div.orgchart");e.removeClass("hidden"),n.find(".spinner").remove(),n.children().removeAttr("style"),r.data("inAjax",!1),t(".oc-export-btn"+(""!==i.chartClass?"."+i.chartClass:"")).prop("disabled",!1)}function g(t){return t.children(".edge").attr("class").indexOf("fa-")>-1}function m(t){t.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")}function v(t){var e=t.closest(".orgchart").data("options");if(e.toggleSiblingsResp&&(void 0===e.ajaxURL||t.closest(".nodes").data("siblingsLoaded"))){var n=t.closest("table").parent().prev();n.length&&(n.is(".hidden")?t.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):t.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var i=t.closest("table").parent().next();i.length&&(i.is(".hidden")?t.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):t.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var r=t.closest("table").parent().siblings(),a=!!r.length&&!r.is(".hidden");t.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),t.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}}function y(t){t.style.offsetWidth=t.offsetWidth}function b(e,n,i){var r=t.Deferred(),a=t("<div"+(i.draggable?' draggable="true"':"")+(e[i.nodeId]?' id="'+e[i.nodeId]+'"':"")+">").addClass("node "+(e.className||"")+(n>=i.depth?" slide-up":"")).append('<div class="title">'+e[i.nodeTitle]+"</div>").append(void 0!==i.nodeContent?'<div class="content_1">'+(e[i.nodeContent]||"")+"</div>":""),o=e.relationship||"";return Number(o.substr(0,1))&&a.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(o.substr(1,1))&&a.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(o.substr(2,1))&&a.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),a.on("mouseenter mouseleave",function(e){var n=t(this),i=!1,r=n.children(".topEdge"),a=(n.children(".rightEdge"),n.children(".bottomEdge")),o=n.children(".leftEdge");"mouseenter"===e.type?(r.length&&(i=s(n,"parent").visible,r.toggleClass("fa-chevron-up",!i).toggleClass("fa-chevron-down",i)),a.length&&(i=s(n,"children").visible,a.toggleClass("fa-chevron-down",!i).toggleClass("fa-chevron-up",i)),o.length&&v(n)):n.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")}),a.on("click",function(e){t(this).closest(".orgchart").find(".focused").removeClass("focused"),t(this).addClass("focused")}),a.on("click",".topEdge",function(e){var n=t(this),r=n.parent(),a=s(r,"parent");if(a.exist){var o=r.closest("table").closest("tr").siblings(":first").find(".node");if(o.is(".slide"))return;a.visible?(l(r),o.one("transitionend",function(){g(r)&&(m(n),v(r))})):u(r)}else{var c=n.parent()[0].id;f(n,r,i)&&t.ajax({url:i.ajaxURL.parent+c+"/",dataType:"json"}).done(function(e){r.closest(".orgchart").data("inAjax")&&(t.isEmptyObject(e)||k.call(r.closest(".orgchart").parent(),r,e,i))}).fail(function(){console.log("Failed to get parent node data")}).always(function(){p(n,r,i)})}}),a.on("click",".bottomEdge",function(e){var n=t(this),r=n.parent(),a=s(r,"children");if(a.exist){if(r.closest("tr").siblings(":last").find(".node:visible").is(".slide"))return;a.visible?function(t){var e=t.closest("tr").siblings();e.last().find(".spinner").length&&t.closest(".orgchart").data("inAjax",!1);var n=e.last().find(".node:visible"),i=n.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden");n.addClass("slide slide-up").eq(0).one("transitionend",function(){n.removeClass("slide"),i.removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),g(t)&&m(t.children(".bottomEdge"))})}(r):c(r)}else{var o=n.parent()[0].id;f(n,r,i)&&t.ajax({url:i.ajaxURL.children+o+"/",dataType:"json"}).done(function(e,n,a){r.closest(".orgchart").data("inAjax")&&e.children.length&&M(r,e,t.extend({},i,{depth:0}))}).fail(function(t,e,n){console.log("Failed to get children nodes data")}).always(function(){p(n,r,i)})}}),a.on("click",".leftEdge, .rightEdge",function(e){var n=t(this),r=n.parent(),a=s(r,"siblings");if(a.exist){if(r.closest("table").parent().siblings().find(".node:visible").is(".slide"))return;if(i.toggleSiblingsResp){var o=r.closest("table").parent().prev(),l=r.closest("table").parent().next();n.is(".leftEdge")?o.is(".hidden")?h(r,"left"):d(r,"left"):l.is(".hidden")?h(r,"right"):d(r,"right")}else a.visible?d(r):h(r)}else{var u=n.parent()[0].id,c=s(r,"parent").exist?i.ajaxURL.siblings:i.ajaxURL.families;f(n,r,i)&&t.ajax({url:c+u+"/",dataType:"json"}).done(function(t,e,n){r.closest(".orgchart").data("inAjax")&&(t.siblings||t.children)&&C(r,t,i)}).fail(function(t,e,n){console.log("Failed to get sibling nodes data")}).always(function(){p(n,r,i)})}}),i.draggable&&a.on("dragstart",function(e){e.originalEvent.dataTransfer.setData("text/html","hack for firefox");var n=t(this),r=n.closest(".nodes").siblings().eq(0).find(".node:first"),a=n.closest("table").find(".node");n.closest(".orgchart").data("dragged",n).find(".node").each(function(e,o){-1===a.index(o)&&(i.dropCriteria?i.dropCriteria(n,r,t(o))&&t(o).addClass("allowedDrop"):t(o).addClass("allowedDrop"))})}).on("dragover",function(e){e.preventDefault();var n=t(this),r=n.closest(".orgchart").data("dragged"),a=r.closest(".nodes").siblings().eq(0).find(".node:first");(r.closest("table").find(".node").index(n)>-1||i.dropCriteria&&!i.dropCriteria(r,a,n))&&(e.originalEvent.dataTransfer.dropEffect="none")}).on("dragend",function(e){t(this).closest(".orgchart").find(".allowedDrop").removeClass("allowedDrop")}).on("drop",function(e){var n=t(this),i=n.closest(".orgchart"),r=i.data("dragged");i.find(".allowedDrop").removeClass("allowedDrop");var a=r.closest(".nodes").siblings().eq(0).children();if(n.closest("tr").siblings().length){var o=parseInt(n.parent().attr("colspan"))+2,s='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';n.closest("tr").next().addBack().children().attr("colspan",o),r.find(".horizontalEdge").length||r.append(s),n.closest("tr").siblings().eq(1).children(":last").before('<td class="left top">&nbsp;</td><td class="right top">&nbsp;</td>').end().next().append(r.closest("table").parent());var l=r.closest("table").parent().siblings().find(".node:first");1===l.length&&l.append(s)}else n.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="down"></div></td></tr><tr class="lines"><td class="right">&nbsp;</td><td class="left">&nbsp;</td></tr><tr class="nodes"></tr>').siblings(":last").append(r.find(".horizontalEdge").remove().end().closest("table").parent());var u=parseInt(a.attr("colspan"));if(u>2){a.attr("colspan",u-2).parent().next().children().attr("colspan",u-2).end().next().children().slice(1,3).remove();var c=a.parent().siblings(".nodes").children().find(".node:first");1===c.length&&c.find(".horizontalEdge").remove()}else a.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove();i.triggerHandler({type:"nodedropped.orgchart",draggedNode:r,dragZone:a.children(),dropZone:n})}),i.createNode&&i.createNode(a,e),r.resolve(a),r.promise()}function x(e,n,i,r,a){var o,s=n.children,l=!!s&&s.length;if(Object.keys(n).length>1&&(o=t("<table>"),e.append(o),t.when(b(n,i,r)).done(function(t){o.append(t.wrap("<tr><td"+(l?' colspan="'+2*s.length+'"':"")+"></td></tr>").closest("tr")),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(n).length&&(o=e);var u=i+1>=r.depth?" hidden":"";o.append('<tr class="lines'+u+'"><td colspan="'+2*s.length+'"><div class="down"></div></td></tr>');for(var c='<tr class="lines'+u+'"><td class="right">&nbsp;</td>',d=1;d<s.length;d++)c+='<td class="left top">&nbsp;</td><td class="right top">&nbsp;</td>';c+='<td class="left">&nbsp;</td></tr>',o.append(c);var h=t('<tr class="nodes'+u+'">');o.append(h),t.each(s,function(){var e=t('<td colspan="2">');h.append(e),x(e,this,i+1,r,a)})}}function w(t,e,n,i){n=n||t.closest(".orgchart").data("options");var r=e.children||e.siblings;t.find("td:first").attr("colspan",2*r.length),x(t,{children:r},0,n,i)}function M(t,e,n){var i=0;w.call(t.closest(".orgchart").parent(),t.closest("table"),e,n,function(){++i===e.children.length&&(t.children(".bottomEdge").length||t.append('<i class="edge verticalEdge bottomEdge fa"></i>'),t.find(".symbol").length||t.children(".title").prepend('<i class="fa '+n.parentNodeSymbol+' symbol"></i>'),c(t))})}function k(e,n,i){(function(e,n,i,r){var a=this,o=t("<table>");n.relationship="001",t.when(b(n,0,i||e.closest(".orgchart").data("options"))).done(function(t){o.append(t.removeClass("slide-up").addClass("slide-down").wrap('<tr class="hidden"><td colspan="2"></td></tr>').closest("tr")),o.append('<tr class="lines hidden"><td colspan="2"><div class="down"></div></td></tr>'),o.append('<tr class="lines hidden"><td class="right">&nbsp;</td><td class="left">&nbsp;</td></tr>');var e=a.children(".orgchart");e.prepend(o).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children().children("tr:last").children().append(e.children("table").last()),r()}).fail(function(){console.log("Failed to create parent node")})}).call(this,e,n,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),u(e)})}function _(t,e,n){for(var i="",r=0;r<n;r++)i+='<td class="left top">&nbsp;</td><td class="right top">&nbsp;</td>';t.parent().prevAll("tr:gt(0)").children().attr("colspan",2*e).end().next().children(":first").after(i)}function C(e,n,i){(function(e,n,i,r){i=i||e.closest(".orgchart").data("options");var a=n.siblings?n.siblings.length:n.children.length,o=e.parent().is("td")?e.closest("tr").children().length:1,s=o+a,l=s>1?Math.floor(s/2-1):0;if(e.parent().is("td")){e.closest("tr").prevAll("tr:last"),e.closest("tr").prevAll("tr:lt(2)").remove();var u=0;w.call(e.closest(".orgchart").parent(),e.parent().closest("table"),n,i,function(){if(++u===a){var t=e.parent().closest("table").children().children("tr:last").children("td");o>1?(_(t.eq(0).before(e.closest("td").siblings().andSelf().unwrap()),s,o),t.addClass("hidden").find(".node").addClass("slide-left")):(_(t.eq(l).after(e.closest("td").unwrap()),s,1),t.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),r()}})}else{var c=0;x(e.closest(".orgchart"),n,0,i,function(){++c===s&&(_(e.next().children().children("tr:last").children().eq(l).after(t('<td colspan="2">').append(e)),s,1),e.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),e.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),r())})}}).call(e.closest(".orgchart").parent(),e.closest("table"),n,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),h(e)})}}),function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=41)}([function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.text=n.text||e,this.options=n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startBin="101",this.endBin="101",this.middleBin="01010",this.Lbinary=["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],this.Gbinary=["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],this.Rbinary=["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"]}return t.prototype.encode=function(t,e,n){var i="";n=n||"";for(var r=0;r<t.length;r++)"L"==e[r]?i+=this.Lbinary[t[r]]:"G"==e[r]?i+=this.Gbinary[t[r]]:"R"==e[r]&&(i+=this.Rbinary[t[r]]),r<t.length-1&&(i+=n);return i},t}();e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(0);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return e.prototype.encode=function(){for(var t="110",e=0;e<this.data.length;e++){var n=parseInt(this.data[e]).toString(2);n=o(n,4-n.length);for(var i=0;i<n.length;i++)t+="0"==n[i]?"100":"110"}return{data:t+="1001",text:this.text}},e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default);function o(t,e){for(var n=0;n<e;n++)t="0"+t;return t}e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(i[n]=e[n]);return i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(0);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=function(t){s(e,t);function e(n,i){a(this,e);var r=o(this,t.call(this,n.substring(1),i));r.bytes=[];for(var s=0;s<n.length;++s)r.bytes.push(n.charCodeAt(s));return r.encodings=[740,644,638,176,164,100,224,220,124,608,604,572,436,244,230,484,260,254,650,628,614,764,652,902,868,836,830,892,844,842,752,734,590,304,112,94,416,128,122,672,576,570,464,422,134,496,478,142,910,678,582,768,762,774,880,862,814,896,890,818,914,602,930,328,292,200,158,68,62,424,412,232,218,76,74,554,616,978,556,146,340,212,182,508,268,266,956,940,938,758,782,974,400,310,118,512,506,960,954,502,518,886,966,668,680,692,5379],r}return e.prototype.encode=function(){var t,e=this.bytes,n=e.shift()-105;if(103===n)t=this.nextA(e,1);else if(104===n)t=this.nextB(e,1);else{if(105!==n)throw new u;t=this.nextC(e,1)}return{text:this.text==this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:this.getEncoding(n)+t.result+this.getEncoding((t.checksum+n)%103)+this.getEncoding(106)}},e.prototype.getEncoding=function(t){return this.encodings[t]?(this.encodings[t]+1e3).toString(2):""},e.prototype.valid=function(){return-1!==this.data.search(/^[\x00-\x7F\xC8-\xD3]+$/)},e.prototype.nextA=function(t,e){if(t.length<=0)return{result:"",checksum:0};var n,i;if(t[0]>=200)i=t[0]-105,t.shift(),99===i?n=this.nextC(t,e+1):100===i?n=this.nextB(t,e+1):98===i?(t[0]=t[0]>95?t[0]-96:t[0],n=this.nextA(t,e+1)):n=this.nextA(t,e+1);else{var r=t[0];i=r<32?r+64:r-32,t.shift(),n=this.nextA(t,e+1)}var a=i*e;return{result:this.getEncoding(i)+n.result,checksum:a+n.checksum}},e.prototype.nextB=function(t,e){if(t.length<=0)return{result:"",checksum:0};var n,i;t[0]>=200?(i=t[0]-105,t.shift(),99===i?n=this.nextC(t,e+1):101===i?n=this.nextA(t,e+1):98===i?(t[0]=t[0]<32?t[0]+96:t[0],n=this.nextB(t,e+1)):n=this.nextB(t,e+1)):(i=t[0]-32,t.shift(),n=this.nextB(t,e+1));var r=i*e;return{result:this.getEncoding(i)+n.result,checksum:r+n.checksum}},e.prototype.nextC=function(t,e){if(t.length<=0)return{result:"",checksum:0};var n,i;t[0]>=200?(i=t[0]-105,t.shift(),n=100===i?this.nextB(t,e+1):101===i?this.nextA(t,e+1):this.nextC(t,e+1)):(i=10*(t[0]-48)+t[1]-48,t.shift(),t.shift(),n=this.nextC(t,e+1));var r=i*e;return{result:this.getEncoding(i)+n.result,checksum:r+n.checksum}},e}((i=r,i&&i.__esModule?i:{default:i}).default),u=function(t){s(e,t);function e(){a(this,e);var n=o(this,t.call(this));return n.name="InvalidStartCharacterException",n.message="The encoding does not start with a start character.",n}return e}(Error);e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mod10=function(t){for(var e=0,n=0;n<t.length;n++){var i=parseInt(t[n]);(n+t.length)%2==0?e+=i:e+=2*i%10+Math.floor(2*i/10)}return(10-e%10)%10},e.mod11=function(t){for(var e=0,n=[2,3,4,5,6,7],i=0;i<t.length;i++){var r=parseInt(t[t.length-1-i]);e+=n[i%n.length]*r}return(11-e%11)%11}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t){r(e,t);function e(r,a){n(this,e);var o=i(this,t.call(this));return o.name="InvalidInputException",o.symbology=r,o.input=a,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),o=function(t){r(e,t);function e(){n(this,e);var r=i(this,t.call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return e}(Error),s=function(t){r(e,t);function e(){n(this,e);var r=i(this,t.call(this));return r.name="NoElementException",r.message="No element to render on.",r}return e}(Error);e.InvalidInputException=a,e.InvalidElementException=o,e.NoElementException=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],"string"==typeof t[n]&&(t[n]=parseInt(t[n],10)));"string"==typeof t.displayValue&&(t.displayValue="false"!=t.displayValue);return t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTotalWidthOfEncodings=e.calculateEncodingAttributes=e.getBarcodePadding=e.getEncodingHeight=e.getMaximumHeightOfEncodings=void 0;var i,r=n(3),a=(i=r,i&&i.__esModule?i:{default:i});function o(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function s(t,e,n){if(n.displayValue&&e<t){if("center"==n.textAlign)return Math.floor((t-e)/2);if("left"==n.textAlign)return 0;if("right"==n.textAlign)return Math.floor(t-e)}return 0}function l(t,e,n){var i;(i=void 0===n?document.createElement("canvas").getContext("2d"):n).font=e.fontOptions+" "+e.fontSize+"px "+e.font;return i.measureText(t).width}e.getMaximumHeightOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e},e.getEncodingHeight=o,e.getBarcodePadding=s,e.calculateEncodingAttributes=function(t,e,n){for(var i=0;i<t.length;i++){var r,u=t[i],c=(0,a.default)(e,u.options);r=c.displayValue?l(u.text,c,n):0;var d=u.data.length*c.width;u.width=Math.ceil(Math.max(r,d)),u.height=o(u,c),u.barcodePadding=s(r,d,c)}},e.getTotalWidthOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),r=n(19),a=n(26),o=n(29),s=n(28),l=n(34),u=n(36),c=n(35),d=n(27);e.default={CODE39:i.CODE39,CODE128:r.CODE128,CODE128A:r.CODE128A,CODE128B:r.CODE128B,CODE128C:r.CODE128C,EAN13:a.EAN13,EAN8:a.EAN8,EAN5:a.EAN5,EAN2:a.EAN2,UPC:a.UPC,ITF14:o.ITF14,ITF:s.ITF,MSI:l.MSI,MSI10:l.MSI10,MSI11:l.MSI11,MSI1010:l.MSI1010,MSI1110:l.MSI1110,pharmacode:u.pharmacode,codabar:c.codabar,GenericBarcode:d.GenericBarcode}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e}return t.prototype.handleCatch=function(t){if("InvalidInputException"!==t.name)throw t;if(this.api._options.valid===this.api._defaults.valid)throw t.message;this.api._options.valid(!1),this.api.render=function(){}},t.prototype.wrapBarcodeCall=function(t){try{var e=t.apply(void 0,arguments);return this.api._options.valid(!0),e}catch(t){return this.handleCatch(t),this.api}},t}();e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(37)),r=o(n(39)),a=n(6);function o(t){return t&&t.__esModule?t:{default:t}}function s(t){if("string"==typeof t)return function(t){var e=document.querySelectorAll(t);{if(0===e.length)return;for(var n=[],i=0;i<e.length;i++)n.push(s(e[i]));return n}}(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(s(t[n]));return e}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return function(t){var e=document.createElement("canvas");return{element:e,options:(0,i.default)(t),renderer:r.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}(t);if("undefined"!=typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,i.default)(t),renderer:r.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,i.default)(t),renderer:r.default.CanvasRenderer};if(t.getContext)return{element:t,renderer:r.default.CanvasRenderer};throw new a.InvalidElementException}e.default=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[];function n(t){if(Array.isArray(t))for(var i=0;i<t.length;i++)n(t[i]);else t.text=t.text||"",t.data=t.data||"",e.push(t)}return n(t),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,String.fromCharCode(208)+n,i))}return e.prototype.valid=function(){return-1!==this.data.search(/^[\x00-\x5F\xC8-\xCF]+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,String.fromCharCode(209)+n,i))}return e.prototype.valid=function(){return-1!==this.data.search(/^[\x20-\x7F\xC8-\xCF]+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,String.fromCharCode(210)+n,i))}return e.prototype.valid=function(){return-1!==this.data.search(/^(\xCF*[0-9]{2}\xCF*)+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4);function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==n.search(/^[\x00-\x7F\xC8-\xD3]+$/))var r=a(this,t.call(this,function(t){var e,n=t.match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length,i=t.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length;e=t.match(/^(\xCF*[0-9]{2}\xCF*)*/)[0].length>=2?String.fromCharCode(210)+u(t):n>i?String.fromCharCode(208)+s(t):String.fromCharCode(209)+l(t);return e=e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(t,e){return String.fromCharCode(203)+e})}(n),i));else r=a(this,t.call(this,n,i));return a(r)}return e}((i=r,i&&i.__esModule?i:{default:i}).default);function s(t){var e=t.match(/^([\x00-\x5F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);if(e)return e[1]+String.fromCharCode(204)+u(t.substring(e[1].length));var n=t.match(/^[\x00-\x5F\xC8-\xCF]+/);return n[0].length===t.length?t:n[0]+String.fromCharCode(205)+l(t.substring(n[0].length))}function l(t){var e=t.match(/^([\x20-\x7F\xC8-\xCF]+?)(([0-9]{2}){2,})([^0-9]|$)/);if(e)return e[1]+String.fromCharCode(204)+u(t.substring(e[1].length));var n=t.match(/^[\x20-\x7F\xC8-\xCF]+/);return n[0].length===t.length?t:n[0]+String.fromCharCode(206)+s(t.substring(n[0].length))}function u(t){var e=t.match(/^(\xCF*[0-9]{2}\xCF*)+/)[0],n=e.length;if(n===t.length)return t;return(t=t.substring(n)).match(/^[\x00-\x5F\xC8-\xCF]*/)[0].length>=t.match(/^[\x20-\x7F\xC8-\xCF]*/)[0].length?e+String.fromCharCode(206)+s(t):e+String.fromCharCode(205)+l(t)}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CODE128C=e.CODE128B=e.CODE128A=e.CODE128=void 0;var i=s(n(18)),r=s(n(15)),a=s(n(16)),o=s(n(17));function s(t){return t&&t.__esModule?t:{default:t}}e.CODE128=i.default,e.CODE128A=r.default,e.CODE128B=a.default,e.CODE128C=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CODE39=void 0;var i,r=n(0);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=n.toUpperCase(),i.mod43&&(n+=(r=function(t){for(var e=0,n=0;n<t.length;n++)e+=u(t[n]);return e%=43}(n),o[r]));var r;return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return e.prototype.encode=function(){for(var t=l("*"),e=0;e<this.data.length;e++)t+=l(this.data[e])+"0";return{data:t+=l("*"),text:this.text}},e.prototype.valid=function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)},e}((i=r,i&&i.__esModule?i:{default:i}).default),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],s=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function l(t){return e=u(t),s[e].toString(2);var e}function u(t){return o.indexOf(t)}e.CODE39=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==n.search(/^[0-9]{12}$/)&&(n+=o(n));var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return!i.flat&&i.fontSize>10*i.width?r.fontSize=10*i.width:r.fontSize=i.fontSize,r.guardHeight=i.height+r.fontSize/2+i.textMargin,r.lastChar=i.lastChar,r}return e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{13}$/)&&this.data[12]==o(this.data)},e.prototype.encode=function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()},e.prototype.getStructure=function(){return["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},e.prototype.guardedEncoding=function(){var t=new i.default,e=[],n=this.getStructure()[this.data[0]],r=this.data.substr(1,6),a=this.data.substr(7,6);return this.options.displayValue&&e.push({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:t.encode(r,n),text:this.text.substr(1,6),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:t.encode(a,"RRRRRR"),text:this.text.substr(7,6),options:{fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),this.options.lastChar&&this.options.displayValue&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}})),e},e.prototype.flatEncoding=function(){var t=new i.default,e="",n=this.getStructure()[this.data[0]];return e+="101",e+=t.encode(this.data.substr(1,6),n),e+="01010",e+=t.encode(this.data.substr(7,6),"RRRRRR"),{data:e+="101",text:this.text}},e}(r(n(0)).default);function o(t){var e,n=0;for(e=0;e<12;e+=2)n+=parseInt(t[e]);for(e=1;e<12;e+=2)n+=3*parseInt(t[e]);return(10-n%10)%10}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.structure=["LL","LG","GL","GG"],r}return e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{2}$/)},e.prototype.encode=function(){var t=new i.default,e=this.structure[parseInt(this.data)%4],n="1011";return{data:n+=t.encode(this.data,e,"01"),text:this.text}},e}(r(n(0)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.structure=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],r}return e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{5}$/)},e.prototype.encode=function(){var t=new i.default,e=this.checksum(),n="1011";return{data:n+=t.encode(this.data,this.structure[e],"01"),text:this.text}},e.prototype.checksum=function(){var t=0;return t+=3*parseInt(this.data[0]),t+=9*parseInt(this.data[1]),t+=3*parseInt(this.data[2]),t+=9*parseInt(this.data[3]),(t+=3*parseInt(this.data[4]))%10},e}(r(n(0)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==n.search(/^[0-9]{7}$/)&&(n+=o(n)),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{8}$/)&&this.data[7]==o(this.data)},e.prototype.encode=function(){var t=new i.default,e="",n=this.data.substr(0,4),r=this.data.substr(4,4);return e+=t.startBin,e+=t.encode(n,"LLLL"),e+=t.middleBin,e+=t.encode(r,"RRRR"),{data:e+=t.endBin,text:this.text}},e}(r(n(0)).default);function o(t){var e,n=0;for(e=0;e<7;e+=2)n+=3*parseInt(t[e]);for(e=1;e<7;e+=2)n+=parseInt(t[e]);return(10-n%10)%10}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==n.search(/^[0-9]{11}$/)&&(n+=o(n));var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.displayValue=i.displayValue,i.fontSize>10*i.width?r.fontSize=10*i.width:r.fontSize=i.fontSize,r.guardHeight=i.height+r.fontSize/2+i.textMargin,r}return e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==o(this.data)},e.prototype.encode=function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()},e.prototype.flatEncoding=function(){var t=new i.default,e="";return e+="101",e+=t.encode(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=t.encode(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}},e.prototype.guardedEncoding=function(){var t=new i.default,e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+t.encode(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:t.encode(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:t.encode(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:t.encode(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e},e}(r(n(0)).default);function o(t){var e,n=0;for(e=1;e<11;e+=2)n+=parseInt(t[e]);for(e=0;e<11;e+=2)n+=3*parseInt(t[e]);return(10-n%10)%10}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UPC=e.EAN2=e.EAN5=e.EAN8=e.EAN13=void 0;var i=l(n(21)),r=l(n(24)),a=l(n(23)),o=l(n(22)),s=l(n(25));function l(t){return t&&t.__esModule?t:{default:t}}e.EAN13=i.default,e.EAN8=r.default,e.EAN5=a.default,e.EAN2=o.default,e.UPC=s.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericBarcode=void 0;var i,r=n(0);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return e.prototype.encode=function(){return{data:"10101010101010101010101010101010101010101",text:this.text}},e.prototype.valid=function(){return!0},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.GenericBarcode=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITF=void 0;var i,r=n(0);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},r}return e.prototype.valid=function(){return-1!==this.data.search(/^([0-9]{2})+$/)},e.prototype.encode=function(){for(var t="1010",e=0;e<this.data.length;e+=2)t+=this.calculatePair(this.data.substr(e,2));return{data:t+="11101",text:this.text}},e.prototype.calculatePair=function(t){for(var e="",n=this.binaryRepresentation[t[0]],i=this.binaryRepresentation[t[1]],r=0;r<5;r++)e+="1"==n[r]?"111":"1",e+="1"==i[r]?"000":"0";return e},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.ITF=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITF14=void 0;var i,r=n(0);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==n.search(/^[0-9]{13}$/)&&(n+=o(n));var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.binaryRepresentation={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},r}return e.prototype.valid=function(){return-1!==this.data.search(/^[0-9]{14}$/)&&this.data[13]==o(this.data)},e.prototype.encode=function(){for(var t="1010",e=0;e<14;e+=2)t+=this.calculatePair(this.data.substr(e,2));return{data:t+="11101",text:this.text}},e.prototype.calculatePair=function(t){for(var e="",n=this.binaryRepresentation[t[0]],i=this.binaryRepresentation[t[1]],r=0;r<5;r++)e+="1"==n[r]?"111":"1",e+="1"==i[r]?"000":"0";return e},e}((i=r,i&&i.__esModule?i:{default:i}).default);function o(t){for(var e=0,n=0;n<13;n++)e+=parseInt(t[n])*(3-n%2*2);return 10*Math.ceil(e/10)-e}e.ITF14=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5);var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n+(0,o.mod10)(n),i))}return e}(a.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5);var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n+=(0,o.mod10)(n),n+=(0,o.mod10)(n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return e}(a.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5);var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n+(0,o.mod11)(n),i))}return e}(a.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(5);var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n+=(0,o.mod11)(n),n+=(0,o.mod10)(n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i))}return e}(a.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MSI1110=e.MSI1010=e.MSI11=e.MSI10=e.MSI=void 0;var i=l(n(2)),r=l(n(30)),a=l(n(32)),o=l(n(31)),s=l(n(33));function l(t){return t&&t.__esModule?t:{default:t}}e.MSI=i.default,e.MSI10=r.default,e.MSI11=a.default,e.MSI1010=o.default,e.MSI1110=s.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.codabar=void 0;var i,r=n(0);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),0===n.search(/^[0-9\-\$\:\.\+\/]+$/)&&(n="A"+n+"A");var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n.toUpperCase(),i));return r.text=r.options.text||r.text.replace(/[A-D]/g,""),r}return e.prototype.valid=function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)},e.prototype.encode=function(){for(var t=[],e=this.getEncodings(),n=0;n<this.data.length;n++)t.push(e[this.data.charAt(n)]),n!==this.data.length-1&&t.push("0");return{text:this.text,data:t.join("")}},e.prototype.getEncodings=function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"101100110011",A:"1011001001",B:"1010010011",C:"1001001011",D:"1010011001"}},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.codabar=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pharmacode=void 0;var i,r=n(0);var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t);function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return r.number=parseInt(n,10),r}return e.prototype.encode=function(){for(var t=this.number,e="";!isNaN(t)&&0!=t;)t%2==0?(e="11100"+e,t=(t-2)/2):(e="100"+e,t=(t-1)/2);return{data:e=e.slice(0,-2),text:this.text}},e.prototype.valid=function(){return this.number>=3&&this.number<=131070},e}((i=r,i&&i.__esModule?i:{default:i}).default);e.pharmacode=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(7)),r=a(n(8));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e={};for(var n in r.default)r.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,i.default)(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(3),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(9);var s=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.encodings=n,this.options=i}return t.prototype.render=function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var t=0;t<this.encodings.length;t++){var e=(0,a.default)(this.options,this.encodings[t].options);this.drawCanvasBarcode(e,this.encodings[t]),this.drawCanvasText(e,this.encodings[t]),this.moveCanvasDrawing(this.encodings[t])}this.restoreCanvas()},t.prototype.prepareCanvas=function(){var t=this.canvas.getContext("2d");t.save(),(0,o.calculateEncodingAttributes)(this.encodings,this.options,t);var e=(0,o.getTotalWidthOfEncodings)(this.encodings),n=(0,o.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=e+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,t.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(t.fillStyle=this.options.background,t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.translate(this.options.marginLeft,0)},t.prototype.drawCanvasBarcode=function(t,e){var n,i=this.canvas.getContext("2d"),r=e.data;n="top"==t.textPosition?t.marginTop+t.fontSize+t.textMargin:t.marginTop,i.fillStyle=t.lineColor;for(var a=0;a<r.length;a++){var o=a*t.width+e.barcodePadding;"1"===r[a]?i.fillRect(o,n,t.width,t.height):r[a]&&i.fillRect(o,n,t.width,t.height*r[a])}},t.prototype.drawCanvasText=function(t,e){var n=this.canvas.getContext("2d"),i=t.fontOptions+" "+t.fontSize+"px "+t.font;if(t.displayValue){var r,a;a="top"==t.textPosition?t.marginTop+t.fontSize-t.textMargin:t.height+t.textMargin+t.marginTop+t.fontSize,n.font=i,"left"==t.textAlign||e.barcodePadding>0?(r=0,n.textAlign="left"):"right"==t.textAlign?(r=e.width-1,n.textAlign="right"):(r=e.width/2,n.textAlign="center"),n.fillText(e.text,r,a)}},t.prototype.moveCanvasDrawing=function(t){this.canvas.getContext("2d").translate(t.width,0)},t.prototype.restoreCanvas=function(){this.canvas.getContext("2d").restore()},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(38)),r=a(n(40));function a(t){return t&&t.__esModule?t:{default:t}}e.default={CanvasRenderer:i.default,SVGRenderer:r.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(3),a=(i=r,i&&i.__esModule?i:{default:i}),o=n(9);var s="http://www.w3.org/2000/svg",l=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svg=e,this.encodings=n,this.options=i}return t.prototype.render=function(){var t=this.options.marginLeft;this.prepareSVG();for(var e=0;e<this.encodings.length;e++){var n=this.encodings[e],i=(0,a.default)(this.options,n.options),r=u(t,i.marginTop,this.svg);o=i,r.setAttribute("style","fill:"+o.lineColor+";"),this.drawSvgBarcode(r,i,n),this.drawSVGText(r,i,n),t+=n.width}var o},t.prototype.prepareSVG=function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,o.calculateEncodingAttributes)(this.encodings,this.options);var t=(0,o.getTotalWidthOfEncodings)(this.encodings),e=(0,o.getMaximumHeightOfEncodings)(this.encodings),n=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,e),this.options.background&&c(0,0,n,e,this.svg).setAttribute("style","fill:"+this.options.background+";")},t.prototype.drawSvgBarcode=function(t,e,n){var i,r=n.data;i="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var a=0,o=0,s=0;s<r.length;s++)o=s*e.width+n.barcodePadding,"1"===r[s]?a++:a>0&&(c(o-e.width*a,i,e.width*a,e.height,t),a=0);a>0&&c(o-e.width*(a-1),i,e.width*a,e.height,t)},t.prototype.drawSVGText=function(t,e,n){var i=document.createElementNS(s,"text");if(e.displayValue){var r,a;i.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),a="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||n.barcodePadding>0?(r=0,i.setAttribute("text-anchor","start")):"right"==e.textAlign?(r=n.width-1,i.setAttribute("text-anchor","end")):(r=n.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",r),i.setAttribute("y",a),i.appendChild(document.createTextNode(n.text)),t.appendChild(i)}},t.prototype.setSvgAttributes=function(t,e){var n=this.svg;n.setAttribute("width",t+"px"),n.setAttribute("height",e+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+t+" "+e),n.setAttribute("xmlns",s),n.setAttribute("version","1.1"),n.style.transform="translate(0,0)"},t}();function u(t,e,n){var i=document.createElementNS(s,"g");return i.setAttribute("transform","translate("+t+", "+e+")"),n.appendChild(i),i}function c(t,e,n,i,r){var a=document.createElementNS(s,"rect");return a.setAttribute("x",t),a.setAttribute("y",e),a.setAttribute("width",n),a.setAttribute("height",i),r.appendChild(a),a}e.default=l},function(t,e,n){"use strict";var i=h(n(10)),r=h(n(3)),a=h(n(14)),o=h(n(12)),s=h(n(13)),l=h(n(7)),u=h(n(11)),c=n(6),d=h(n(8));function h(t){return t&&t.__esModule?t:{default:t}}var f=function(){},p=function(t,e,n){var i=new f;if(void 0===t)throw Error("No element to render on was provided.");return i._renderProperties=(0,s.default)(t),i._encodings=[],i._options=d.default,i._errorHandler=new u.default(i),void 0!==e&&((n=n||{}).format||(n.format=b()),i.options(n)[n.format](e,n).render()),i};p.getModule=function(t){return i.default[t]};for(var g in i.default)i.default.hasOwnProperty(g)&&(m=i.default,v=g,f.prototype[v]=f.prototype[v.toUpperCase()]=f.prototype[v.toLowerCase()]=function(t,e){var n=this;return n._errorHandler.wrapBarcodeCall(function(){var i=(0,r.default)(n._options,e);i=(0,l.default)(i);var a=m[v],o=y(t,a,i);return n._encodings.push(o),n})});var m,v;function y(t,e,n){var i=new e(t=""+t,n);if(!i.valid())throw new c.InvalidInputException(i.constructor.name,t);var o=i.encode();o=(0,a.default)(o);for(var s=0;s<o.length;s++)o[s].options=(0,r.default)(n,o[s].options);return o}function b(){return i.default.CODE128?"CODE128":Object.keys(i.default)[0]}f.prototype.options=function(t){return this._options=(0,r.default)(this._options,t),this},f.prototype.blank=function(t){var e="0".repeat(t);return this._encodings.push({data:e}),this},f.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,r.default)(this._options,t.options);"auto"==n.format&&(n.format=b()),this._errorHandler.wrapBarcodeCall(function(){var e=y(n.value,i.default[n.format.toUpperCase()],n);x(t,e,n)})}}},f.prototype.render=function(){if(!this._renderProperties)throw new c.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)x(this._renderProperties[t],this._encodings,this._options);else x(this._renderProperties,this._encodings,this._options);return this},f.prototype._defaults=d.default;function x(t,e,n){e=(0,a.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,r.default)(n,e[i].options),(0,o.default)(e[i].options);(0,o.default)(n);new(0,t.renderer)(t.element,e,n).render(),t.afterRender&&t.afterRender()}"undefined"!=typeof window&&(window.JsBarcode=p),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),p(n,t,e)}),t.exports=p}]),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=t()}}(function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n||t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){(function(t){"use strict";function n(){u=!0;for(var t,e,n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}u=!1}var i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var a=0,o=new r(n),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),i=function(){s.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var l=new t.MessageChannel;l.port1.onmessage=n,i=function(){l.port2.postMessage(0)}}var u,c=[];e.exports=function(t){1!==c.push(t)||u||i()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";function i(){}function r(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,t!==i&&l(this,t)}function a(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function o(t,e,n){c(function(){var i;try{i=e(n)}catch(e){return d.reject(t,e)}i===t?d.reject(t,new TypeError("Cannot resolve promise with itself")):d.resolve(t,i)})}function s(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function l(t,e){function n(e){r||(r=!0,d.reject(t,e))}function i(e){r||(r=!0,d.resolve(t,e))}var r=!1,a=u(function(){e(i,n)});"error"===a.status&&n(a.value)}function u(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}var c=t(1),d={},h=["REJECTED"],f=["FULFILLED"],p=["PENDING"];e.exports=n=r,r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===f||"function"!=typeof e&&this.state===h)return this;var n=new this.constructor(i);if(this.state!==p){o(n,this.state===f?t:e,this.outcome)}else this.queue.push(new a(n,t,e));return n},a.prototype.callFulfilled=function(t){d.resolve(this.promise,t)},a.prototype.otherCallFulfilled=function(t){o(this.promise,this.onFulfilled,t)},a.prototype.callRejected=function(t){d.reject(this.promise,t)},a.prototype.otherCallRejected=function(t){o(this.promise,this.onRejected,t)},d.resolve=function(t,e){var n=u(s,e);if("error"===n.status)return d.reject(t,n.value);var i=n.value;if(i)l(t,i);else{t.state=f,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},d.reject=function(t,e){t.state=h,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},n.resolve=function(t){return t instanceof this?t:d.resolve(new this(i),t)},n.reject=function(t){var e=new this(i);return d.reject(e,t)},n.all=function(t){function e(t,e){n.resolve(t).then(function(t){o[e]=t,++s!==r||a||(a=!0,d.resolve(u,o))},function(t){a||(a=!0,d.reject(u,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,a=!1;if(!r)return this.resolve([]);for(var o=new Array(r),s=0,l=-1,u=new this(i);++l<r;)e(t[l],l);return u},n.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,o=new this(i);++a<n;)s=t[a],e.resolve(s).then(function(t){r||(r=!0,d.resolve(o,t))},function(t){r||(r=!0,d.reject(o,t))});var s;return o}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";function i(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}function r(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function a(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function o(t){return"boolean"==typeof v?b.resolve(v):(e=t,new b(function(t){var n=i([""]);e.objectStore(x).put(n,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})).then(function(t){return v=t});var e}function s(t,e){return new b(function(n,i){if(t.db){if(!e)return n(t.db);(function(t){var e=y[t.name],n={};n.promise=new b(function(t){n.resolve=t}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise})(t),t.db.close()}var r=[t.name];e&&r.push(t.version);var a=m.open.apply(m,r);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(x)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(){i(a.error)},a.onsuccess=function(){n(a.result),function(t){var e=y[t.name].deferredOperations.pop();e&&e.resolve()}(t)}})}function l(t){return i([function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}(atob(t.data))],{type:t.type})}function u(t){return t&&t.__local_forage_encoded_blob}function c(t){var e=this,n=e._initReady().then(function(){var t=y[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return a(n,t,t),n}function d(t){var e,n,i,r,a,o=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=k.indexOf(t[e]),i=k.indexOf(t[e+1]),r=k.indexOf(t[e+2]),a=k.indexOf(t[e+3]),c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&a;return u}function h(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=k[n[e]>>2],i+=k[(3&n[e])<<4|n[e+1]>>4],i+=k[(15&n[e+1])<<2|n[e+2]>>6],i+=k[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}function f(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(q(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}function p(t){for(var e in H)if(H.hasOwnProperty(e)&&H[e]===t)return!0;return!1}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){}}();"undefined"==typeof Promise&&void 0!==t&&t(3);var v,y,b=Promise,x="local-forage-detect-blob-support",w=Object.prototype.toString,M={_driver:"asyncStorage",_initStorage:function(t){function e(){return b.resolve()}var n=this,i={db:null};if(t)for(var r in t)i[r]=t[r];y||(y={});var a=y[i.name];a||(a={forages:[],db:null,dbReady:null,deferredOperations:[]},y[i.name]=a),a.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=c);for(var o=[],l=0;l<a.forages.length;l++){var u=a.forages[l];u!==n&&o.push(u._initReady().catch(e))}var d=a.forages.slice(0);return b.all(o).then(function(){return i.db=a.db,s(i,!1)}).then(function(t){return i.db=t,function(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,r=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||n){if(n){var a=t.db.version+1;a>t.version&&(t.version=a)}return!0}return!1}(i,n._defaultConfig.version)?s(i,!0):t}).then(function(t){i.db=a.db=t,n._dbInfo=i;for(var e=0;e<d.length;e++){var r=d[e];r!==n&&(r._dbInfo.db=i.db,r._dbInfo.version=i.version)}})},iterate:function(t,e){var n=this,i=new b(function(e,i){n.ready().then(function(){var r=n._dbInfo,a=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).openCursor(),o=1;a.onsuccess=function(){var n=a.result;if(n){var i=n.value;u(i)&&(i=l(i));var r=t(i,n.key,o++);void 0!==r?e(r):n.continue()}else e()},a.onerror=function(){i(a.error)}}).catch(i)});return r(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new b(function(e,i){n.ready().then(function(){var r=n._dbInfo,a=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),u(t)&&(t=l(t)),e(t)},a.onerror=function(){i(a.error)}}).catch(i)});return r(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var a=new b(function(n,r){var a;i.ready().then(function(){return a=i._dbInfo,"[object Blob]"===w.call(e)?o(a.db).then(function(t){return t?e:(n=e,new b(function(t,e){var i=new FileReader;i.onerror=e,i.onloadend=function(e){var i=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)}));var n}):e}).then(function(e){var i=a.db.transaction(a.storeName,"readwrite"),o=i.objectStore(a.storeName).put(e,t);null===e&&(e=void 0),i.oncomplete=function(){void 0===e&&(e=null),n(e)},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;r(t)}}).catch(r)});return r(a,n),a},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new b(function(e,i){n.ready().then(function(){var r=n._dbInfo,a=r.db.transaction(r.storeName,"readwrite"),o=a.objectStore(r.storeName).delete(t);a.oncomplete=function(){e()},a.onerror=function(){i(o.error)},a.onabort=function(){var t=o.error?o.error:o.transaction.error;i(t)}}).catch(i)});return r(i,e),i},clear:function(t){var e=this,n=new b(function(t,n){e.ready().then(function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readwrite"),a=r.objectStore(i.storeName).clear();r.oncomplete=function(){t()},r.onabort=r.onerror=function(){var t=a.error?a.error:a.transaction.error;n(t)}}).catch(n)});return r(n,t),n},length:function(t){var e=this,n=new b(function(t,n){e.ready().then(function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName).count();r.onsuccess=function(){t(r.result)},r.onerror=function(){n(r.error)}}).catch(n)});return r(n,t),n},key:function(t,e){var n=this,i=new b(function(e,i){return t<0?void e(null):void n.ready().then(function(){var r=n._dbInfo,a=!1,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).openCursor();o.onsuccess=function(){var n=o.result;return n?void(0===t?e(n.key):a?e(n.key):(a=!0,n.advance(t))):void e(null)},o.onerror=function(){i(o.error)}}).catch(i)});return r(i,e),i},keys:function(t){var e=this,n=new b(function(t,n){e.ready().then(function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName).openCursor(),a=[];r.onsuccess=function(){var e=r.result;return e?(a.push(e.key),void e.continue()):void t(a)},r.onerror=function(){n(r.error)}}).catch(n)});return r(n,t),n}},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_="~~local_forage_type~",C=/^~~local_forage_type~([^~]+)~/,S="__lfsc__:",T=S.length,P="arbf",A="blob",E="si08",D="ui08",O="uic8",I="si16",L="si32",F="ur16",$="ui32",z="fl32",B="fl64",j=T+P.length,R=Object.prototype.toString,N={serialize:function(t,e){var n="";if(t&&(n=R.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===R.call(t.buffer))){var i,r=S;t instanceof ArrayBuffer?(i=t,r+=P):(i=t.buffer,"[object Int8Array]"===n?r+=E:"[object Uint8Array]"===n?r+=D:"[object Uint8ClampedArray]"===n?r+=O:"[object Int16Array]"===n?r+=I:"[object Uint16Array]"===n?r+=F:"[object Int32Array]"===n?r+=L:"[object Uint32Array]"===n?r+=$:"[object Float32Array]"===n?r+=z:"[object Float64Array]"===n?r+=B:e(new Error("Failed to get type for BinaryArray"))),e(r+h(i))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=_+t.type+"~"+h(this.result);e(S+A+n)},a.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,T)!==S)return JSON.parse(t);var e,n=t.substring(j),r=t.substring(T,j);if(r===A&&C.test(n)){var a=n.match(C);e=a[1],n=n.substring(a[0].length)}var o=d(n);switch(r){case P:return o;case A:return i([o],{type:e});case E:return new Int8Array(o);case D:return new Uint8Array(o);case O:return new Uint8ClampedArray(o);case I:return new Int16Array(o);case F:return new Uint16Array(o);case L:return new Int32Array(o);case $:return new Uint32Array(o);case z:return new Float32Array(o);case B:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:d,bufferToString:h},U={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var r=new b(function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction(function(r){r.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){e._dbInfo=n,t()},function(t,e){i(e)})})});return n.serializer=N,r},iterate:function(t,e){var n=this,i=new b(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("SELECT * FROM "+r.storeName,[],function(n,i){for(var a=i.rows,o=a.length,s=0;s<o;s++){var l=a.item(s),u=l.value;if(u&&(u=r.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()},function(t,e){i(e)})})}).catch(i)});return r(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new b(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),e(i)},function(t,e){i(e)})})}).catch(i)});return r(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var a=new b(function(n,r){i.ready().then(function(){void 0===e&&(e=null);var a=e,o=i._dbInfo;o.serializer.serialize(e,function(e,i){i?r(i):o.db.transaction(function(i){i.executeSql("INSERT OR REPLACE INTO "+o.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){n(a)},function(t,e){r(e)})},function(t){t.code===t.QUOTA_ERR&&r(t)})})}).catch(r)});return r(a,n),a},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new b(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("DELETE FROM "+r.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){i(e)})})}).catch(i)});return r(i,e),i},clear:function(t){var e=this,n=new b(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){e.executeSql("DELETE FROM "+i.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return r(n,t),n},length:function(t){var e=this,n=new b(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){e.executeSql("SELECT COUNT(key) as c FROM "+i.storeName,[],function(e,n){var i=n.rows.item(0).c;t(i)},function(t,e){n(e)})})}).catch(n)});return r(n,t),n},key:function(t,e){var n=this,i=new b(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)},function(t,e){i(e)})})}).catch(i)});return r(i,e),i},keys:function(t){var e=this,n=new b(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){e.executeSql("SELECT key FROM "+i.storeName,[],function(e,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);t(i)},function(t,e){n(e)})})}).catch(n)});return r(n,t),n}},X={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=e.name+"/",e.storeName!==this._defaultConfig.storeName&&(e.keyPrefix+=e.storeName+"/"),this._dbInfo=e,e.serializer=N,b.resolve()},iterate:function(t,e){var n=this,i=n.ready().then(function(){for(var e=n._dbInfo,i=e.keyPrefix,r=i.length,a=localStorage.length,o=1,s=0;s<a;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(r),o++)))return u}}});return r(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then(function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i});return r(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var a=i.ready().then(function(){void 0===e&&(e=null);var n=e;return new b(function(r,a){var o=i._dbInfo;o.serializer.serialize(e,function(e,i){if(i)a(i);else try{localStorage.setItem(o.keyPrefix+t,e),r(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||a(t),a(t)}})})});return r(a,n),a},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return r(i,e),i},clear:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}});return r(n,t),n},length:function(t){var e=this.keys().then(function(t){return t.length});return r(e,t),e},key:function(t,e){var n=this,i=n.ready().then(function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e});return r(i,e),i},keys:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++)0===localStorage.key(r).indexOf(t.keyPrefix)&&i.push(localStorage.key(r).substring(t.keyPrefix.length));return i});return r(n,t),n}},W={},H={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Y=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],V={description:"",driver:[H.INDEXEDDB,H.WEBSQL,H.LOCALSTORAGE].slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},G={};G[H.INDEXEDDB]=function(){try{return!!m&&!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&m&&"function"==typeof m.open&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),G[H.WEBSQL]="function"==typeof openDatabase,G[H.LOCALSTORAGE]=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(t){return!1}}();var q=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Z=new(function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.INDEXEDDB=H.INDEXEDDB,this.LOCALSTORAGE=H.LOCALSTORAGE,this.WEBSQL=H.WEBSQL,this._defaultConfig=f({},V),this._config=f({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":g(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new b(function(e,n){try{var i=t._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),a=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void n(r);if(p(t._driver))return void n(a);for(var o=Y.concat("_initStorage"),s=0;s<o.length;s++){var l=o[s];if(!l||!t[l]||"function"!=typeof t[l])return void n(r)}var u=b.resolve(!0);"_support"in t&&(u=t._support&&"function"==typeof t._support?t._support():b.resolve(!!t._support)),u.then(function(n){G[i]=n,W[i]=t,e()},n)}catch(t){n(t)}});return a(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=this,r=b.resolve().then(function(){if(!p(t)){if(W[t])return W[t];throw new Error("Driver not found.")}switch(t){case i.INDEXEDDB:return M;case i.LOCALSTORAGE:return X;case i.WEBSQL:return U}});return a(r,e,n),r},t.prototype.getSerializer=function(t){var e=b.resolve(N);return a(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return a(n,t,t),n},t.prototype.setDriver=function(t,e,n){function i(){o._config.driver=o.driver()}function r(t){return o._extend(t),i(),o._ready=o._initStorage(o._config),o._ready}var o=this;q(t)||(t=[t]);var s=this._getSupportedDrivers(t),l=null!==this._driverSet?this._driverSet.catch(function(){return b.resolve()}):b.resolve();return this._driverSet=l.then(function(){var t=s[0];return o._dbInfo=null,o._ready=null,o.getDriver(t).then(function(t){o._driver=t._driver,i(),o._wrapLibraryMethodsWithReady(),o._initDriver=(e=s,function(){function t(){for(;n<e.length;){var a=e[n];return n++,o._dbInfo=null,o._ready=null,o.getDriver(a).then(r).catch(t)}i();var s=new Error("No available storage method found.");return o._driverSet=b.reject(s),o._driverSet}var n=0;return t()});var e})}).catch(function(){i();var t=new Error("No available storage method found.");return o._driverSet=b.reject(t),o._driverSet}),a(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!G[t]},t.prototype._extend=function(t){f(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];this.supports(r)&&e.push(r)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<Y.length;t++)e=this,n=Y[t],e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})};var e,n},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=Z},{3:3}]},{},[4])(4)});function Board(t,e){return{name:t,numberOfColumns:e,columns:[],backlogs:[]}}function Column(t){return{name:t,cards:[]}}function Backlog(t,e,n,i,r){return{name:t,userId:e,css:i,img:r,userName:n,phases:[]}}function Phase(t){return{name:t,cards:[]}}function Card(t,e,n,i,r,a,o,s,l,u,c,d,h,f,p,g,m){return this.title=t,this.status=e,this.details=n,this.id=i,this.schecduleId=r,this.userId=a,this.scheduleName=o,this.startDate=s,this.startTime=l,this.endDate=u,this.endTime=c,this.day=d,this.workplaceId=h,this.workplaceName=f,this.departmentId=p,this.departmentName=g,this.employeeWorkScheduleId=m,this}!function(t){"use strict";t.module("multipleDatePicker",[]).directive("multipleDatePicker",function(){return{restrict:"AE",scope:{ngModel:"=?",highlightDays:"=?",dayClick:"=?",dayHover:"=?",month:"=?",monthChanged:"=?",weekDaysOff:"=?",allDaysOff:"=?",daysAllowed:"=?",sundayFirstDay:"=?",disableNavigation:"=?",disallowBackPastMonths:"=?",disallowGoFuturMonths:"=?",showDaysOfSurroundingMonths:"=?",cssDaysOfSurroundingMonths:"=?",fireEventsForDaysOfSurroundingMonths:"=?",disableDaysBefore:"=?",disableDaysAfter:"=?",changeYearPast:"=?",changeYearFuture:"=?"},template:'<div class="multiple-date-picker"><div class="picker-top-row"><div class="text-center picker-navigate picker-navigate-left-arrow" ng-class="{\'disabled\':disableBackButton}" ng-click="previousMonth()">&lt;</div><div class="text-center picker-month">{{monthToDisplay}} <span ng-if="yearsForSelect.length < 2">{{yearToDisplay}}</span><select ng-if="yearsForSelect.length > 1" ng-model="year" ng-change="changeYear(year)" ng-options="y for y in yearsForSelect"></select></div><div class="text-center picker-navigate picker-navigate-right-arrow" ng-class="{\'disabled\':disableNextButton}" ng-click="nextMonth()">&gt;</div></div><div class="picker-days-week-row"><div class="text-center" ng-repeat="day in daysOfWeek">{{day}}</div></div><div class="picker-days-row"><div class="text-center picker-day {{getDayClasses(day)}}" title="{{day.title}}" ng-repeat="day in days" ng-click="toggleDay($event, day)" ng-mouseover="hoverDay($event, day)" ng-mouseleave="dayHover($event, day)">{{day ? day.mdp.otherMonth && !showDaysOfSurroundingMonths ? \'&nbsp;\' : day.date.format(\'D\') : \'\'}}</div></div></div>',link:function(e){e.ngModel=e.ngModel||[];var n=function(){for(var t=moment().localeData()._weekdaysMin,n=[],i=1;7>i;i++)n.push(t[i]);return e.sundayFirstDay?n.splice(0,0,t[0]):n.push(t[0]),n},i=function(){var t=moment().localeData()._months[e.month.month()];return t.charAt(0).toUpperCase()+t.slice(1)};e.$watch("ngModel",function(){e.generate()},!0),e.$watch("month",function(){e.generate()},!0),e.$watch("highlightDays",function(){e.generate()},!0),e.$watch("weekDaysOff",function(){e.generate()},!0),e.$watch("allDaysOff",function(){e.generate()},!0),e.$watch("daysAllowed",function(){e.generate()},!0),e.$watch(function(){return moment.locale()},function(){e.daysOfWeek=n(),e.monthToDisplay=i()},!0),e.month=e.month||moment().startOf("day"),e.days=[],e.weekDaysOff=e.weekDaysOff||[],e.daysOff=e.daysOff||[],e.disableBackButton=!1,e.disableNextButton=!1,e.daysOfWeek=n(),e.cssDaysOfSurroundingMonths=e.cssDaysOfSurroundingMonths||"picker-empty",e.yearsForSelect=[],e.toggleDay=function(t,n){if(t.preventDefault(),!n.mdp.otherMonth||e.fireEventsForDaysOfSurroundingMonths){var i=!1;t.preventDefault=function(){i=!0},"function"==typeof e.dayClick&&e.dayClick(t,n),n.selectable&&!i&&(n.mdp.selected=!n.mdp.selected,n.mdp.selected?e.ngModel.push(n.date):e.ngModel=e.ngModel.filter(function(t){return!n.date.isSame(t,"day")}))}},e.hoverDay=function(t,n){t.preventDefault();var i=!1;t.preventDefault=function(){i=!0},"function"==typeof e.dayHover&&e.dayHover(t,n),i||(n.mdp.hover="mouseover"===t.type)},e.getDayClasses=function(t){var n="";return!t.css||t.mdp.otherMonth&&!e.showDaysOfSurroundingMonths||(n+=" "+t.css),e.cssDaysOfSurroundingMonths&&t.mdp.otherMonth&&(n+=" "+e.cssDaysOfSurroundingMonths),t.mdp.selected&&(n+=" picker-selected"),t.selectable||(n+=" picker-off"),t.mdp.today&&(n+=" today"),t.mdp.past&&(n+=" past"),t.mdp.future&&(n+=" future"),t.mdp.otherMonth&&(n+=" picker-other-month"),n},e.previousMonth=function(){if(!e.disableBackButton){var t=moment(e.month);e.month=e.month.subtract(1,"month"),"function"==typeof e.monthChanged&&e.monthChanged(e.month,t)}},e.nextMonth=function(){if(!e.disableNextButton){var t=moment(e.month);e.month=e.month.add(1,"month"),"function"==typeof e.monthChanged&&e.monthChanged(e.month,t)}},e.changeYear=function(t){e.month=e.month.year(parseInt(t,10))},e.isDayOff=function(n){return e.allDaysOff||!!e.disableDaysBefore&&moment(n.date).isBefore(e.disableDaysBefore,"day")||!!e.disableDaysAfter&&moment(n.date).isAfter(e.disableDaysAfter,"day")||t.isArray(e.weekDaysOff)&&e.weekDaysOff.some(function(t){return n.date.day()===t})||t.isArray(e.daysOff)&&e.daysOff.some(function(t){return n.date.isSame(t,"day")})||t.isArray(e.daysAllowed)&&!e.daysAllowed.some(function(t){return n.date.isSame(t,"day")})||t.isArray(e.highlightDays)&&e.highlightDays.some(function(t){return n.date.isSame(t.date,"day")&&!t.selectable})},e.isSelected=function(t){return e.ngModel.some(function(e){return t.date.isSame(e,"day")})},e.generate=function(){e.year=e.month.year().toString(),e.yearsForSelect=function(){var t=moment(),n=Math.max(0,parseInt(e.changeYearPast,10)||0),i=Math.max(0,parseInt(e.changeYearFuture,10)||0),r=moment(e.month).subtract(n,"year"),a=moment(e.month).add(i,"year"),o=[];a.add(1,"year");for(var s=moment(r);a.isAfter(s,"YEAR");s.add(1,"year"))e.disallowBackPastMonths&&!s.isAfter(t,"year")&&!s.isSame(t,"year")||e.disallowGoFuturMonths&&!s.isBefore(t,"year")&&!s.isSame(t,"year")||o.push(s.format("YYYY"));return o}(),e.monthToDisplay=i(),e.yearToDisplay=e.month.format("YYYY");var n=moment(e.month).date(0).day(e.sundayFirstDay?0:1).subtract(1,"day");moment(e.month).date(0).diff(n,"day")>6&&(n=n.add(1,"week"));var r=moment(e.month).date(1),a=[],o=moment(),s=moment(r).endOf("month"),l=function(){var i={date:moment(n.add(1,"day")),mdp:{selected:!1}};if(t.isArray(e.highlightDays)){var r=e.highlightDays.filter(function(t){return i.date.isSame(t.date,"day")});i.css=r.length>0?r[0].css:"",i.title=r.length>0?r[0].title:""}return i.selectable=!e.isDayOff(i),i.mdp.selected=e.isSelected(i),i.mdp.today=i.date.isSame(o,"day"),i.mdp.past=i.date.isBefore(o,"day"),i.mdp.future=i.date.isAfter(o,"day"),i.date.isSame(e.month,"month")||(i.mdp.otherMonth=!0),i},u=s.diff(n,"days"),c=e.sundayFirstDay?6:0;s.day()!==c&&(u+=(e.sundayFirstDay?6:7)-s.day());for(var d=0;u>d;d++)a.push(l());e.days=a,function(){var t=moment(),n=moment(e.month).subtract(1,"month"),i=moment(e.month).add(1,"month");e.disableBackButton=e.disableNavigation||e.disallowBackPastMonths&&t.isAfter(n,"month"),e.disableNextButton=e.disableNavigation||e.disallowGoFuturMonths&&t.isBefore(i,"month")}()},e.generate()}}})}(window.angular),function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(t){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,i){t.__listeners[n]=i,e&&e.apply(this,arguments)}}};t("open",function(t){return function(e,i,r){n(this),this.__url=i;try{t.apply(this,[e,i,r])}catch(n){n.message.indexOf("Access is denied")>-1&&(this.__origError=n,t.apply(this,[e,"_fix_for_ie_crossdomain__",r]))}}}),t("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),t("getAllResponseHeaders",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}}),t("abort",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}}),t("setRequestHeader",function(t){return function(e,i){if("__setXHR_"===e){n(this);var r=i(this);r instanceof Function&&r(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=i,t.apply(this,arguments)}}),t("send",function(t){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var i=arguments[0],r={url:n.__url,jsonp:!1,cache:!0,complete:function(t,i){t&&angular.isString(t)&&-1!==t.indexOf("#2174")&&(t=null),n.__completed=!0,!t&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!t&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===t&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==i.status&&e(n,"status",function(){return 0===i.status&&t&&"abort"!==t?500:i.status}),void 0!==i.statusText&&e(n,"statusText",function(){return i.statusText}),e(n,"readyState",function(){return 4}),void 0!==i.response&&e(n,"response",function(){return i.response});var r=i.responseText||(t&&0===i.status&&"abort"!==t?t:void 0);e(n,"responseText",function(){return r}),e(n,"response",function(){return r}),t&&e(n,"err",function(){return t}),n.__fileApiXHR=i,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(t){if(t.target=n,n.__listeners.progress&&n.__listeners.progress(t),n.__total=t.total,n.__loaded=t.loaded,t.total===t.loaded){var e=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},e.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};r.data={},r.files={};for(var a=0;a<i.data.length;a++){var o=i.data[a];null!=o.val&&null!=o.val.name&&null!=o.val.size&&null!=o.val.type?r.files[o.key]=o.val:r.data[o.key]=o.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(r)},1)}else{if(this.__origError)throw this.__origError;t.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}}}}(),function(){function t(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function e(t){var e=0,n=0;if(window.jQuery)return jQuery(t).offset();if(t.offsetParent)do{e+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent}while(t);return{left:e,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=t(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var n,i,r,a,o,s=document.createElement("script"),l=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)n=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)i=window.FileAPI.jsPath;else for(r=0;r<l.length;r++)if((a=(o=l[r].src).search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/))>-1){i=o.substring(0,a+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=i),s.setAttribute("src",n||i+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(s)}FileAPI.ngfFixIE=function(n,i,r){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.bind("mouseenter",function(){var t=i.parent();n.attr("disabled")?t&&t.removeClass("js-fileapi-wrapper"):(i.attr("__ngf_flash_")||(i.unbind("change"),i.unbind("click"),i.bind("change",function(t){a.apply(this,[t]),r.apply(this,[t])}),i.attr("__ngf_flash_","true")),t.addClass("js-fileapi-wrapper"),"input"===(o=n)[0].tagName.toLowerCase()&&o.attr("type")&&"file"===o.attr("type").toLowerCase()||(t.css("position","absolute").css("top",e(n[0]).top+"px").css("left",e(n[0]).left+"px").css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",n.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),i.css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")));var o});var a=function(t){for(var e=FileAPI.getFiles(t),n=0;n<e.length;n++)void 0===e[n].size&&(e[n].size=0),void 0===e[n].name&&(e[n].name="file"),void 0===e[n].type&&(e[n].type="undefined");t.target||(t.target={}),t.target.files=e,t.target.files!==e&&(t.__files_=e),(t.__files_||t.target.files).item=function(e){return(t.__files_||t.target.files)[e]||null}}},FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var i=0;i<n.length;i++)n[i].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var i={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(i.target.result=n.result),i},i=function(i){e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",i)));var r;"load"===i.type?(t.onloadend&&t.onloadend(n("loadend",i)),r=n("load",i),t.onload&&t.onload(r),t.dispatchEvent(r)):"progress"===i.type?(r=n("progress",i),t.onprogress&&t.onprogress(r),t.dispatchEvent(r)):(r=n("error",i),t.onerror&&t.onerror(r),t.dispatchEvent(r))};this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,i)},this.readAsText=function(t){FileAPI.readAsText(t,i)}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(t){return function(e,n){if("__setXHR_"===e){var i=n(this);i instanceof Function&&i(this)}else t.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(t,e,n){var i=this;i.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var r=this.isResumeSupported();function a(a){a.method=a.method||"POST",a.headers=a.headers||{};var o=a._deferred=a._deferred||e.defer(),s=o.promise;function l(t){o.notify&&o.notify(t),s.progressFunc&&n(function(){s.progressFunc(t)})}function u(t){return null!=a._start&&r?{loaded:t.loaded+a._start,total:a._file&&a._file.size||t.total,type:t.type,config:a,lengthComputable:!0,target:t.target}:t}a.disableProgress||(a.headers.__setXHR_=function(){return function(t){t&&t.upload&&t.upload.addEventListener&&(a.__XHR=t,a.xhrFn&&a.xhrFn(t),t.upload.addEventListener("progress",function(t){t.config=a,l(u(t))},!1),t.upload.addEventListener("load",function(t){t.lengthComputable&&(t.config=a,l(u(t)))},!1))}});function c(){t(a).then(function(t){r&&a._chunkSize&&!a._finished&&a._file?(l({loaded:a._end,total:a._file&&a._file.size,config:a,type:"progress"}),i.upload(a,!0)):(a._finished&&delete a._finished,o.resolve(t))},function(t){o.reject(t)},function(t){o.notify(t)})}return r?a._chunkSize&&a._end&&!a._finished?(a._start=a._end,a._end+=a._chunkSize,c()):a.resumeSizeUrl?t.get(a.resumeSizeUrl).then(function(t){a.resumeSizeResponseReader?a._start=a.resumeSizeResponseReader(t.data):a._start=parseInt((null==t.data.size?t.data:t.data.size).toString()),a._chunkSize&&(a._end=a._start+a._chunkSize),c()},function(t){throw t}):a.resumeSize?a.resumeSize().then(function(t){a._start=t,c()},function(t){throw t}):(a._chunkSize&&(a._start=0,a._end=a._start+a._chunkSize),c()):c(),s.success=function(t){return s.then(function(e){t(e.data,e.status,e.headers,a)}),s},s.error=function(t){return s.then(null,function(e){t(e.data,e.status,e.headers,a)}),s},s.progress=function(t){return s.progressFunc=t,s.then(null,null,function(e){t(e)}),s},s.abort=s.pause=function(){return a.__XHR&&n(function(){a.__XHR.abort()}),s},s.xhr=function(t){a.xhrFn=(e=a.xhrFn,function(){e&&e.apply(s,arguments),t.apply(s,arguments)});var e;return s},i.promisesCount++,s.finally(function(){i.promisesCount--}),s}this.isUploadInProgress=function(){return i.promisesCount>0},this.rename=function(t,e){return t.ngfName=e,t},this.jsonBlob=function(t){null==t||angular.isString(t)||(t=JSON.stringify(t));var e=new window.Blob([t],{type:"application/json"});return e._ngfBlob=!0,e},this.json=function(t){return angular.toJson(t)};function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}this.isFile=function(t){return null!=t&&(t instanceof window.Blob||t.flashId&&t.name&&t.size)},this.upload=function(t,e){function n(e,a,o){if(void 0!==a)if(angular.isDate(a)&&(a=a.toISOString()),angular.isString(a))e.append(o,a);else if(i.isFile(a)){var s=function(e,n){if(e._ngfBlob)return e;if(t._file=t._file||e,null!=t._start&&r){t._end&&t._end>=e.size&&(t._finished=!0,t._end=e.size);var i=e.slice(t._start,t._end||e.size);return i.name=e.name,i.ngfName=e.ngfName,t._chunkSize&&(n.append("_chunkSize",t._chunkSize),n.append("_currentChunkSize",t._end-t._start),n.append("_chunkNumber",Math.floor(t._start/t._chunkSize)),n.append("_totalSize",t._file.size)),i}return e}(a,e),l=o.split(",");l[1]&&(s.ngfName=l[1].replace(/^\s+|\s+$/g,""),o=l[0]),t._fileKey=t._fileKey||o,e.append(o,s,s.ngfName||s.name)}else if(angular.isObject(a)){if(a.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+o;a.$$ngfCircularDetection=!0;try{for(var u in a)if(a.hasOwnProperty(u)&&"$$ngfCircularDetection"!==u){var c=null==t.objectKey?"[i]":t.objectKey;a.length&&parseInt(u)>-1&&(c=null==t.arrayKey?c:t.arrayKey),n(e,a[u],o+c.replace(/[ik]/g,u))}}finally{delete a.$$ngfCircularDetection}}else e.append(o,a)}return e||(t=o(t)),t._isDigested||(t._isDigested=!0,t._chunkSize=i.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest?angular.isArray(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push(function(e){var i,r=new window.FormData;e=e||t.fields||{},t.file&&(e.file=t.file);for(i in e)if(e.hasOwnProperty(i)){var a=e[i];t.formDataAppender?t.formDataAppender(r,i,a):n(r,a,i)}return r})),a(t)},this.http=function(e){return(e=o(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:t.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=i.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,a(e)},this.translateScalars=function(t){if(angular.isString(t)){if(t.search(/kb/i)===t.length-2)return parseFloat(1024*t.substring(0,t.length-2));if(t.search(/mb/i)===t.length-2)return parseFloat(1048576*t.substring(0,t.length-2));if(t.search(/gb/i)===t.length-2)return parseFloat(1073741824*t.substring(0,t.length-2));if(t.search(/b/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/s/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/m/i)===t.length-1)return parseFloat(60*t.substring(0,t.length-1));if(t.search(/h/i)===t.length-1)return parseFloat(3600*t.substring(0,t.length-1))}return t},this.urlToBlob=function(n){var i=e.defer();return t({url:n,method:"get",responseType:"arraybuffer"}).then(function(t){var e=new Uint8Array(t.data),n=t.headers("content-type")||"image/WebP",r=new window.Blob([e],{type:n});i.resolve(r)},function(t){i.reject(t)}),i.promise},this.setDefaults=function(t){this.defaults=t||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(t,e,n,i,r){var a=r;a.getAttrWithDefaults=function(t,e){if(null!=t[e])return t[e];var n=a.defaults[e];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},a.attrGetter=function(e,n,i,r){var a=this.getAttrWithDefaults(n,e);if(!i)return a;try{return r?t(a)(i,r):t(a)(i)}catch(t){if(e.search(/min|max|pattern/i))return a;throw t}},a.shouldUpdateOn=function(t,e,n){var i=a.attrGetter("ngModelOptions",e,n);return!i||!i.updateOn||i.updateOn.split(" ").indexOf(t)>-1},a.emptyPromise=function(){var t=i.defer(),n=arguments;return e(function(){t.resolve.apply(t,n)}),t.promise},a.rejectPromise=function(){var t=i.defer(),n=arguments;return e(function(){t.reject.apply(t,n)}),t.promise},a.happyPromise=function(t,n){var r=i.defer();return t.then(function(t){r.resolve(t)},function(t){e(function(){throw t}),r.resolve(n)}),r.promise};function o(t,e,n,r){var o=[a.emptyPromise()];function s(i,s){if(0===i.type.indexOf("image")){if(t.pattern&&!a.validatePattern(i,t.pattern))return;var l=a.resize(i,t.width,t.height,t.quality,t.type,t.ratio,t.centerCrop,function(t,e){return a.attrGetter("ngfResizeIf",n,r,{$width:t,$height:e,$file:i})},!1!==t.restoreExif);o.push(l),l.then(function(t){e.splice(s,1,t)},function(t){i.$error="resize",i.$errorParam=(t?(t.message?t.message:t)+": ":"")+(i&&i.name)})}}for(var l=0;l<e.length;l++)s(e[l],l);return i.all(o)}return a.updateModel=function(n,r,s,l,u,c,d){function h(i,o,u,d,h){r.$$ngfPrevValidFiles=i,r.$$ngfPrevInvalidFiles=o;var f=i&&i.length?i[0]:null,p=o&&o.length?o[0]:null;n&&(a.applyModelValidation(n,i),n.$setViewValue(h?f:i)),l&&t(l)(s,{$files:i,$file:f,$newFiles:u,$duplicateFiles:d,$invalidFiles:o,$invalidFile:p,$event:c});var g=a.attrGetter("ngfModelInvalid",r);g&&e(function(){t(g).assign(s,h?p:o)}),e(function(){})}var f,p,g,m=[],v=[],y=[];function b(){y=[],v=[],angular.forEach(f,function(t){t.$error?v.push(t):y.push(t)})}function x(){function t(){e(function(){h(M?p.concat(y):y,M?g.concat(v):v,u,m,k)},C&&C.debounce?C.debounce.change||C.debounce:0)}(function(t,e,n){var r=a.attrGetter("ngfResize",e,n);if(!r||!a.isResizeSupported()||!t.length)return a.emptyPromise();if(!(r instanceof Function))return o(r,t,e,n);var s=i.defer();r(t).then(function(i){o(i,t,e,n).then(function(t){s.resolve(t)},function(t){s.reject(t)})},function(t){s.reject(t)})})(_?f:y,r,s).then(function(){_?a.validate(f,p.length,n,r,s).then(function(){b(),t()}):t()},function(t){throw"Could not resize files "+t})}p=r.$$ngfPrevValidFiles||[],g=r.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(w=n.$modelValue,p=angular.isArray(w)?w:[w]);var w,M=a.attrGetter("ngfKeep",r,s);f=(u||[]).slice(0),"distinct"!==M&&!0!==a.attrGetter("ngfKeepDistinct",r,s)||function(){function t(t,e){return t.name===e.name&&(t.$ngfOrigSize||t.size)===(e.$ngfOrigSize||e.size)&&t.type===e.type}function e(e){var n;for(n=0;n<p.length;n++)if(t(e,p[n]))return!0;for(n=0;n<g.length;n++)if(t(e,g[n]))return!0;return!1}if(u){f=[],m=[];for(var n=0;n<u.length;n++)e(u[n])?m.push(u[n]):f.push(u[n])}}();var k=!M&&!a.attrGetter("ngfMultiple",r,s)&&!a.attrGetter("multiple",r);if(!M||f.length){a.attrGetter("ngfBeforeModelChange",r,s,{$files:u,$file:u&&u.length?u[0]:null,$newFiles:f,$duplicateFiles:m,$event:c});var _=a.attrGetter("ngfValidateAfterResize",r,s),C=a.attrGetter("ngModelOptions",r,s);a.validate(f,p.length,n,r,s).then(function(){d?h(f,[],u,m,k):(C&&C.allowInvalid||_?y=f:b(),a.attrGetter("ngfFixOrientation",r,s)&&a.isExifSupported()?function(t,e,n){var r=[a.emptyPromise()];return angular.forEach(t,function(i,o){0===i.type.indexOf("image/jpeg")&&a.attrGetter("ngfFixOrientation",e,n,{$file:i})&&r.push(a.happyPromise(a.applyExifRotation(i),i).then(function(e){t.splice(o,1,e)}))}),i.all(r)}(y,r,s).then(function(){x()}):x())})}},a}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(t,e,n,i){var r=[];function a(t,e,n,a,o,s,l,u){var c=function(t,e){return u.attrGetter(t,n,e)};function d(){return"input"===e[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function h(){return c("ngfChange")||c("ngfSelect")}function f(e){if(u.shouldUpdateOn("change",n,t)){for(var i=e.__files_||e.target&&e.target.files,r=[],o=0;o<i.length;o++)r.push(i[o]);u.updateModel(a,n,t,h(),r.length?r:null,e)}}u.registerModelChangeValidator(a,n,t);var p=[];p.push(t.$watch(c("ngfMultiple"),function(){m.attr("multiple",c("ngfMultiple",t))})),p.push(t.$watch(c("ngfCapture"),function(){m.attr("capture",c("ngfCapture",t))})),p.push(t.$watch(c("ngfAccept"),function(){m.attr("accept",c("ngfAccept",t))})),n.$observe("accept",function(){m.attr("accept",c("accept"))}),p.push(function(){n.$$observers&&delete n.$$observers.accept});var g=0;var m=e;function v(e){u.shouldUpdateOn("click",n,t)&&m.val()&&(m.val(null),u.updateModel(a,n,t,h(),null,e,!0))}d()||(m=function(){if(d())return e;var t=angular.element('<input type="file">');!function(t){if(e!==t)for(var n=0;n<e[0].attributes.length;n++){var i=e[0].attributes[n];"type"!==i.name&&"class"!==i.name&&"style"!==i.name&&(null!=i.value&&""!==i.value||("required"===i.name&&(i.value="required"),"multiple"===i.name&&(i.value="multiple")),t.attr(i.name,"id"===i.name?"ngf-"+i.value:i.value))}}(t);var n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),r.push({el:e,ref:n}),document.body.appendChild(n.append(t)[0]),t}()),m.bind("change",f),d()?e.bind("click",v):e.bind("click touchstart touchend",function(n){if(e.attr("disabled"))return!1;if(!c("ngfSelectDisabled",t)){var a=function(t){var e=t.changedTouches||t.originalEvent&&t.originalEvent.changedTouches;if("touchstart"===t.type)return g=e?e[0].clientY:0,!0;if(t.stopPropagation(),t.preventDefault(),"touchend"===t.type){var n=e?e[0].clientY:0;if(Math.abs(n-g)>20)return!1}}(n);if(null!=a)return a;v(n);try{d()||document.body.contains(m[0])||(r.push({el:e,ref:m.parent()}),document.body.appendChild(m.parent()[0]),m.bind("change",f))}catch(t){}return function(t){var e=t.match(/Android[^\d]*(\d+)\.(\d+)/);if(e&&e.length>2){var n=i.defaults.androidFixMinorVersion||4;return parseInt(e[1])<4||parseInt(e[1])===n&&parseInt(e[2])<n}return-1===t.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(t)}(navigator.userAgent)?setTimeout(function(){m[0].click()},0):m[0].click(),!1}});function y(t){if(m&&!m.attr("__ngf_ie10_Fix_")){if(!m[0].parentNode)return void(m=null);t.preventDefault(),t.stopPropagation(),m.unbind("click");var e=m.clone();return m.replaceWith(e),(m=e).attr("__ngf_ie10_Fix_","true"),m.bind("change",f),m.bind("click",y),m[0].click(),!1}m.removeAttr("__ngf_ie10_Fix_")}-1!==navigator.appVersion.indexOf("MSIE 10")&&m.bind("click",y),a&&a.$formatters.push(function(t){return null!=t&&0!==t.length||m.val()&&m.val(null),t}),t.$on("$destroy",function(){d()||m.parent().remove(),angular.forEach(p,function(t){t()})}),s(function(){for(var t=0;t<r.length;t++){var e=r[t];document.body.contains(e.el[0])||(r.splice(t,1),e.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(e,m,f)}return{restrict:"AEC",require:"?ngModel",link:function(t,n,r,o){a(t,n,r,o,0,e,0,i)}}}]),function(){ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(t,e,n){var i=t;return i.base64DataUrl=function(t){if(angular.isArray(t)){var e=n.defer(),r=0;return angular.forEach(t,function(n){i.dataUrl(n,!0).finally(function(){if(++r===t.length){var n=[];angular.forEach(t,function(t){n.push(t.$ngfDataUrl)}),e.resolve(n,t)}})}),e.promise}return i.dataUrl(t,!0)},i.dataUrl=function(t,r){if(!t)return i.emptyPromise(t,t);if(r&&null!=t.$ngfDataUrl||!r&&null!=t.$ngfBlobUrl)return i.emptyPromise(r?t.$ngfDataUrl:t.$ngfBlobUrl,t);var a=r?t.$$ngfDataUrlPromise:t.$$ngfBlobUrlPromise;if(a)return a;var o=n.defer();return e(function(){if(window.FileReader&&t&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||t.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||t.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!r){var a;try{a=n.createObjectURL(t)}catch(n){return void e(function(){t.$ngfBlobUrl="",o.reject()})}e(function(){if(t.$ngfBlobUrl=a,a){o.resolve(a,t),i.blobUrls=i.blobUrls||[],i.blobUrlsTotalSize=i.blobUrlsTotalSize||0,i.blobUrls.push({url:a,size:t.size}),i.blobUrlsTotalSize+=t.size||0;for(var e=i.defaults.blobUrlsMaxMemory||268435456,r=i.defaults.blobUrlsMaxQueueSize||200;(i.blobUrlsTotalSize>e||i.blobUrls.length>r)&&i.blobUrls.length>1;){var s=i.blobUrls.splice(0,1)[0];n.revokeObjectURL(s.url),i.blobUrlsTotalSize-=s.size}}})}else{var s=new FileReader;s.onload=function(n){e(function(){t.$ngfDataUrl=n.target.result,o.resolve(n.target.result,t),e(function(){delete t.$ngfDataUrl},1e3)})},s.onerror=function(){e(function(){t.$ngfDataUrl="",o.reject()})},s.readAsDataURL(t)}}else e(function(){t[r?"$ngfDataUrl":"$ngfBlobUrl"]="",o.reject()})}),(a=r?t.$$ngfDataUrlPromise=o.promise:t.$$ngfBlobUrlPromise=o.promise).finally(function(){delete t[r?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),a},i}]);function t(t,e,n,i,r,a,o,s){function l(a){var o=t.attrGetter("ngfNoObjectUrl",r,n);t.dataUrl(a,o).finally(function(){e(function(){var t=(o?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;s?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ng-hide"):i.addClass("ng-hide")})})}e(function(){var e=n.$watch(r[a],function(e){var n=o;if("ngfThumbnail"===a&&(n||(n={width:i[0].clientWidth,height:i[0].clientHeight}),0===n.width&&window.getComputedStyle)){var r=getComputedStyle(i[0]);n={width:parseInt(r.width.slice(0,-2)),height:parseInt(r.height.slice(0,-2))}}if(angular.isString(e))return i.removeClass("ng-hide"),s?i.css("background-image","url('"+e+"')"):i.attr("src",e);!e||!e.type||0!==e.type.search((u=i[0],"img"===u.tagName.toLowerCase()?"image":"audio"===u.tagName.toLowerCase()?"audio":"video"===u.tagName.toLowerCase()?"video":/./))||s&&0!==e.type.indexOf("image")?i.addClass("ng-hide"):n&&t.isResizeSupported()?t.resize(e,n.width,n.height,n.quality).then(function(t){l(t)},function(t){throw t}):l(e);var u});n.$on("$destroy",function(){e()})})}ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){t(e,n,i,r,a,"ngfSrc",e.attrGetter("ngfResize",a,i),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){t(e,n,i,r,a,"ngfBackground",e.attrGetter("ngfResize",a,i),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){var o=e.attrGetter("ngfSize",a,i);t(e,n,i,r,a,"ngfThumbnail",o,e.attrGetter("ngfAsBackground",a,i))}}}]),ngFileUpload.config(["$compileProvider",function(t){t.imgSrcSanitizationWhitelist&&t.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),t.aHrefSanitizationWhitelist&&t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(t,e){return function(n,i,r){if(angular.isString(n))return e.trustAsResourceUrl(n);var a=n&&((i?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!a?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,t.dataUrl(n,i)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&a?r?e.trustAsResourceUrl(a):a:n)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(t,e,n){var i=t;function r(t){var e="",n=[];if(t.length>2&&"/"===t[0]&&"/"===t[t.length-1])e=t.substring(1,t.length-1);else{var i=t.split(",");if(i.length>1)for(var a=0;a<i.length;a++){var o=r(i[a]);o.regexp?(e+="("+o.regexp+")",a<i.length-1&&(e+="|")):n=n.concat(o.excludes)}else 0===t.indexOf("!")?n.push("^((?!"+r(t.substring(1)).regexp+").)*$"):(0===t.indexOf(".")&&(t="*"+t),e=(e="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:e,excludes:n}}i.validatePattern=function(t,e){if(!e)return!0;var n=r(e),i=!0;if(n.regexp&&n.regexp.length){var a=new RegExp(n.regexp,"i");i=null!=t.type&&a.test(t.type)||null!=t.name&&a.test(t.name)}for(var o=n.excludes.length;o--;){var s=new RegExp(n.excludes[o],"i");i=i&&(null==t.type||s.test(t.type))&&(null==t.name||s.test(t.name))}return i},i.ratioToFloat=function(t){var e=t.toString(),n=e.search(/[x:]/i);return e=n>-1?parseFloat(e.substring(0,n))/parseFloat(e.substring(n+1)):parseFloat(e)},i.registerModelChangeValidator=function(t,e,n){t&&t.$formatters.push(function(r){t.$dirty&&(r&&!angular.isArray(r)&&(r=[r]),i.validate(r,0,t,e,n).then(function(){i.applyModelValidation(t,r)}))})};return i.applyModelValidation=function(t,e){n=t,null==e||n.$dirty||(n.$setDirty?n.$setDirty():n.$dirty=!0);var n;angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},i.getValidationAttr=function(t,e,n,r,a){var o="ngf"+n[0].toUpperCase()+n.substr(1),s=i.attrGetter(o,t,e,{$file:a});if(null==s&&(s=i.attrGetter("ngfValidate",t,e,{$file:a}))){var l=(r||n).split(".");s=s[l[0]],l.length>1&&(s=s&&s[l[1]])}return s},i.validate=function(t,n,r,a,o){(r=r||{}).$ngfValidations=r.$ngfValidations||[],angular.forEach(r.$ngfValidations,function(t){t.valid=!0});var s=function(t,e){return i.attrGetter(t,a,o,e)};if(null==t||0===t.length)return i.emptyPromise(r);t=void 0===t.length?[t]:t.slice(0);function l(e,n,s){if(t){for(var l=t.length,u=null;l--;){var c=t[l];if(c){var d=i.getValidationAttr(a,o,e,n,c);null!=d&&(s(c,d,l)||(c.$error=e,(c.$errorMessages=c.$errorMessages||{})[e]=!0,c.$errorParam=d,t.splice(l,1),u=!1))}}null!==u&&r.$ngfValidations.push({name:e,valid:u})}}l("maxFiles",null,function(t,e,i){return n+i<e}),l("pattern",null,i.validatePattern),l("minSize","size.min",function(t,e){return t.size+.1>=i.translateScalars(e)}),l("maxSize","size.max",function(t,e){return t.size-.1<=i.translateScalars(e)});var u=0;if(l("maxTotalSize",null,function(e,n){return!((u+=e.size)>i.translateScalars(n))||(t.splice(0,t.length),!1)}),l("validateFn",null,function(t,e){return!0===e||null===e||""===e}),!t.length)return i.emptyPromise(r,r.$ngfValidations);function c(n,l,u,c,d){function h(t,e,i){null!=i?c(e,i).then(function(r){d(r,i)?t.resolve():(e.$error=n,(e.$errorMessages=e.$errorMessages||{})[n]=!0,e.$errorParam=i,t.reject())},function(){s("ngfValidateForce",{$file:e})?(e.$error=n,(e.$errorMessages=e.$errorMessages||{})[n]=!0,e.$errorParam=i,t.reject()):t.resolve()}):t.resolve()}var f=[i.emptyPromise()];if(t)return t=void 0===t.length?[t]:t,angular.forEach(t,function(t){var r=e.defer();f.push(r.promise),!u||null!=t.type&&0===t.type.search(u)?"dimensions"===n&&null!=i.attrGetter("ngfDimensions",a)?i.imageDimensions(t).then(function(e){h(r,t,s("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){r.reject()}):"duration"===n&&null!=i.attrGetter("ngfDuration",a)?i.mediaDuration(t).then(function(e){h(r,t,s("ngfDuration",{$file:t,$duration:e}))},function(){r.reject()}):h(r,t,i.getValidationAttr(a,o,n,l,t)):r.resolve()}),e.all(f).then(function(){r.$ngfValidations.push({name:n,valid:!0})},function(){r.$ngfValidations.push({name:n,valid:!1})})}var d=e.defer(),h=[];return h.push(i.happyPromise(c("maxHeight","height.max",/image/,this.imageDimensions,function(t,e){return t.height<=e}))),h.push(i.happyPromise(c("minHeight","height.min",/image/,this.imageDimensions,function(t,e){return t.height>=e}))),h.push(i.happyPromise(c("maxWidth","width.max",/image/,this.imageDimensions,function(t,e){return t.width<=e}))),h.push(i.happyPromise(c("minWidth","width.min",/image/,this.imageDimensions,function(t,e){return t.width>=e}))),h.push(i.happyPromise(c("dimensions",null,/image/,function(t,e){return i.emptyPromise(e)},function(t){return t}))),h.push(i.happyPromise(c("ratio",null,/image/,this.imageDimensions,function(t,e){for(var n=e.toString().split(","),r=!1,a=0;a<n.length;a++)Math.abs(t.width/t.height-i.ratioToFloat(n[a]))<1e-4&&(r=!0);return r}))),h.push(i.happyPromise(c("maxRatio","ratio.max",/image/,this.imageDimensions,function(t,e){return t.width/t.height-i.ratioToFloat(e)<1e-4}))),h.push(i.happyPromise(c("minRatio","ratio.min",/image/,this.imageDimensions,function(t,e){return t.width/t.height-i.ratioToFloat(e)>-1e-4}))),h.push(i.happyPromise(c("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(t,e){return t<=i.translateScalars(e)}))),h.push(i.happyPromise(c("minDuration","duration.min",/audio|video/,this.mediaDuration,function(t,e){return t>=i.translateScalars(e)}))),h.push(i.happyPromise(c("duration",null,/audio|video/,function(t,e){return i.emptyPromise(e)},function(t){return t}))),h.push(i.happyPromise(c("validateAsyncFn",null,null,function(t,e){return e},function(t){return!0===t||null===t||""===t}))),e.all(h).then(function(){d.resolve(r,r.$ngfValidations)})},i.imageDimensions=function(t){if(t.$ngfWidth&&t.$ngfHeight){var r=e.defer();return n(function(){r.resolve({width:t.$ngfWidth,height:t.$ngfHeight})}),r.promise}if(t.$ngfDimensionPromise)return t.$ngfDimensionPromise;var a=e.defer();return n(function(){0===t.type.indexOf("image")?i.dataUrl(t).then(function(e){var i=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function r(){var e=i[0].clientWidth,n=i[0].clientHeight;i.remove(),t.$ngfWidth=e,t.$ngfHeight=n,a.resolve({width:e,height:n})}function o(){i.remove(),a.reject("load error")}i.on("load",r),i.on("error",o);var s=0;function l(){n(function(){i[0].parentNode&&(i[0].clientWidth?r():s>10?o():l())},1e3)}l(),angular.element(document.getElementsByTagName("body")[0]).append(i)},function(){a.reject("load error")}):a.reject("not image")}),t.$ngfDimensionPromise=a.promise,t.$ngfDimensionPromise.finally(function(){delete t.$ngfDimensionPromise}),t.$ngfDimensionPromise},i.mediaDuration=function(t){if(t.$ngfDuration){var r=e.defer();return n(function(){r.resolve(t.$ngfDuration)}),r.promise}if(t.$ngfDurationPromise)return t.$ngfDurationPromise;var a=e.defer();return n(function(){0===t.type.indexOf("audio")||0===t.type.indexOf("video")?i.dataUrl(t).then(function(e){var i=angular.element(0===t.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function r(){var e=i[0].duration;t.$ngfDuration=e,i.remove(),a.resolve(e)}function o(){i.remove(),a.reject("load error")}i.on("loadedmetadata",r),i.on("error",o);var s=0;function l(){n(function(){i[0].parentNode&&(i[0].duration?r():s>10?o():l())},1e3)}l(),angular.element(document.body).append(i)},function(){a.reject("load error")}):a.reject("not media")}),t.$ngfDurationPromise=a.promise,t.$ngfDurationPromise.finally(function(){delete t.$ngfDurationPromise}),t.$ngfDurationPromise},i}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(t,e){var n=t,i=function(t,i,r,a,o,s,l,u){var c=e.defer(),d=document.createElement("canvas"),h=document.createElement("img");return h.onload=function(){if(null==u||!1!==u(h.width,h.height))try{if(s){var t=n.ratioToFloat(s);h.width/h.height<t?(i=h.width,r=i/t):(r=h.height,i=r*t)}i||(i=h.width),r||(r=h.height);var e=function(t,e,n,i,r){var a=r?Math.max(n/t,i/e):Math.min(n/t,i/e);return{width:t*a,height:e*a,marginX:t*a-n,marginY:e*a-i}}(h.width,h.height,i,r,l);d.width=Math.min(e.width,i),d.height=Math.min(e.height,r);d.getContext("2d").drawImage(h,Math.min(0,-e.marginX/2),Math.min(0,-e.marginY/2),e.width,e.height),c.resolve(d.toDataURL(o||"image/WebP",a||.934))}catch(t){c.reject(t)}else c.reject("resizeIf")},h.onerror=function(){c.reject()},h.src=t,c.promise};return n.dataUrltoBlob=function(t,e,n){for(var i=t.split(","),r=i[0].match(/:(.*?);/)[1],a=atob(i[1]),o=a.length,s=new Uint8Array(o);o--;)s[o]=a.charCodeAt(o);var l=new window.Blob([s],{type:r});return l.name=e,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var t=document.createElement("canvas");return window.atob&&t.getContext&&t.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(t){this.$ngfName=t},configurable:!0}),n.resize=function(t,r,a,o,s,l,u,c,d){if(0!==t.type.indexOf("image"))return n.emptyPromise(t);var h=e.defer();return n.dataUrl(t,!0).then(function(e){i(e,r,a,o,s||t.type,l,u,c).then(function(i){if("image/jpeg"===t.type&&d)try{i=n.restoreExif(e,i)}catch(t){setTimeout(function(){throw t},1)}try{var r=n.dataUrltoBlob(i,t.name,t.size);h.resolve(r)}catch(t){h.reject(t)}},function(e){"resizeIf"===e&&h.resolve(t),h.reject(e)})},function(t){h.reject(t)}),h.promise},n}]),function(){ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(e,n,i,r,a,o){return{restrict:"AEC",require:"?ngModel",link:function(a,s,l,u){!function(e,n,i,r,a,o,s,l,u,c){var d=t(),h=function(t,e,n){return l.attrGetter(t,i,e,n)};h("dropAvailable")&&o(function(){e[h("dropAvailable")]?e[h("dropAvailable")].value=d:e[h("dropAvailable")]=d});if(!d)return void(!0===h("ngfHideOnDropNotAvailable",e)&&n.css("display","none"));function f(){return n.attr("disabled")||h("ngfDropDisabled",e)}null==h("ngfSelect")&&l.registerModelChangeValidator(r,i,e);var p,g=null,m=a(h("ngfStopPropagation")),v=1;n[0].addEventListener("dragover",function(t){if(!f()&&l.shouldUpdateOn("drop",i,e)){if(t.preventDefault(),m(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}o.cancel(g),p||(p="C",function(t,e,n,i){var r=h("ngfDragOverClass",t,{$event:n}),a="dragover";if(angular.isString(r))a=r;else if(r&&(r.delay&&(v=r.delay),r.accept||r.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var s=r.pattern||h("ngfPattern",t,{$event:n}),u=o.length;u--;){if(!l.validatePattern(o[u],s)){a=r.reject;break}a=r.accept}else a=r.accept}i(a)}(e,0,t,function(i){p=i,n.addClass(p),h("ngfDrag",e,{$isDragging:!0,$class:p,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!f()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),m(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!f()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),m(e)&&t.stopPropagation(),g=o(function(){p&&n.removeClass(p),p=null,h("ngfDrag",e,{$isDragging:!1,$event:t})},v||100))},!1),n[0].addEventListener("drop",function(t){if(!f()&&l.shouldUpdateOn("drop",i,e)){t.preventDefault(),m(e)&&t.stopPropagation(),p&&n.removeClass(p),p=null;var r,a=t.dataTransfer.items;try{r=t.dataTransfer&&t.dataTransfer.getData&&t.dataTransfer.getData("text/html")}catch(t){}(function(t,n,r,a){var o=l.getValidationAttr(i,e,"maxFiles")||Number.MAX_VALUE,u=l.getValidationAttr(i,e,"maxTotalSize")||Number.MAX_VALUE,d=h("ngfIncludeDir",e),f=[],p=0;function g(t,e){var n=c.defer();if(null!=t)if(t.isDirectory){var i=[l.emptyPromise()];if(d){var r={type:"directory"};r.name=r.path=(e||"")+t.name+t.name,f.push(r)}var a=t.createReader(),s=[],h=function(){a.readEntries(function(r){try{r.length?(s=s.concat(Array.prototype.slice.call(r||[],0)),h()):(angular.forEach(s.slice(0),function(n){f.length<=o&&p<=u&&i.push(g(n,(e||"")+t.name+"/"))}),c.all(i).then(function(){n.resolve()},function(t){n.reject(t)}))}catch(t){n.reject(t)}},function(t){n.reject(t)})};h()}else t.file(function(t){try{t.path=(e||"")+t.name,d&&(t=l.rename(t,t.path)),f.push(t),p+=t.size,n.resolve()}catch(t){n.reject(t)}},function(t){n.reject(t)});return n.promise}var m=[l.emptyPromise()];if(t&&t.length>0&&"file"!==s.protocol())for(var v=0;v<t.length;v++){if(t[v].webkitGetAsEntry&&t[v].webkitGetAsEntry()&&t[v].webkitGetAsEntry().isDirectory){var y=t[v].webkitGetAsEntry();if(y.isDirectory&&!r)continue;null!=y&&m.push(g(y))}else{var b=t[v].getAsFile();null!=b&&(f.push(b),p+=b.size)}if(f.length>o||p>u||!a&&f.length>0)break}else if(null!=n)for(var x=0;x<n.length;x++){var w=n.item(x);if((w.type||w.size>0)&&(f.push(w),p+=w.size),f.length>o||p>u||!a&&f.length>0)break}var M=c.defer();return c.all(m).then(function(){if(a||d||!f.length)M.resolve(f);else{for(var t=0;f[t]&&"directory"===f[t].type;)t++;M.resolve([f[t]])}},function(t){M.reject(t)}),M.promise})(a,t.dataTransfer.files,!1!==h("ngfAllowDir",e),h("multiple")||h("ngfMultiple",e)).then(function(e){e.length?y(e,t):b("dropUrl",r).then(function(e){y(e,t)})})}},!1),n[0].addEventListener("paste",function(t){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&h("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!f()&&l.shouldUpdateOn("paste",i,e)){var n=[],r=t.clipboardData||t.originalEvent.clipboardData;if(r&&r.items)for(var a=0;a<r.items.length;a++)-1!==r.items[a].type.indexOf("image")&&n.push(r.items[a].getAsFile());n.length?y(n,t):b("pasteUrl",r).then(function(e){y(e,t)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&h("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(t){t.metaKey||t.ctrlKey||t.preventDefault()}));function y(t,n){l.updateModel(r,i,e,h("ngfChange")||h("ngfDrop"),t,n)}function b(t,n){if(!l.shouldUpdateOn(t,i,e)||!n)return l.rejectPromise([]);var r=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(t,e,n){r.push(n)});var a=[],o=[];if(r.length){angular.forEach(r,function(t){a.push(l.urlToBlob(t).then(function(t){o.push(t)}))});var s=c.defer();return c.all(a).then(function(){s.resolve(o)},function(t){s.reject(t)}),s.promise}return l.emptyPromise()}}(a,s,l,u,e,n,i,r,0,o)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,i){return function(r,a,o){if(t()){var s=e(i.attrGetter("ngfDropAvailable",o));n(function(){s(r),s.assign&&s.assign(r,!0)})}}}]);function t(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t&&!/Edge\/12./i.test(navigator.userAgent)}}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(t,e){var n=t;n.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&n.isResizeSupported()};n.readOrientation=function(t){var n=e.defer(),i=new FileReader,r=t.slice?t.slice(0,65536):t;return i.readAsArrayBuffer(r),i.onerror=function(t){return n.reject(t)},i.onload=function(t){var e={orientation:1},i=new DataView(this.result);if(65496!==i.getUint16(0,!1))return n.resolve(e);for(var r=i.byteLength,a=2;a<r;){var o=i.getUint16(a,!1);if(a+=2,65505===o){if(1165519206!==i.getUint32(a+=2,!1))return n.resolve(e);var s=18761===i.getUint16(a+=6,!1);a+=i.getUint32(a+4,s);var l=i.getUint16(a,s);a+=2;for(var u=0;u<l;u++)if(274===i.getUint16(a+12*u,s)){var c=i.getUint16(a+12*u+8,s);return c>=2&&c<=8&&(i.setUint16(a+12*u+8,1,s),e.fixedArrayBuffer=t.target.result),e.orientation=c,n.resolve(e)}}else{if(65280!=(65280&o))break;a+=i.getUint16(a,!1)}}return n.resolve(e)},n.promise};return n.applyExifRotation=function(t){if(0!==t.type.indexOf("image/jpeg"))return n.emptyPromise(t);var i=e.defer();return n.readOrientation(t).then(function(e){if(e.orientation<2||e.orientation>8)return i.resolve(t);n.dataUrl(t,!0).then(function(r){var a=document.createElement("canvas"),o=document.createElement("img");o.onload=function(){try{a.width=e.orientation>4?o.height:o.width,a.height=e.orientation>4?o.width:o.height;var r=a.getContext("2d");!function(t,e,n,i){switch(e){case 2:return t.transform(-1,0,0,1,n,0);case 3:return t.transform(-1,0,0,-1,n,i);case 4:return t.transform(1,0,0,-1,0,i);case 5:return t.transform(0,1,1,0,0,0);case 6:return t.transform(0,1,-1,0,i,0);case 7:return t.transform(0,-1,-1,0,i,n);case 8:t.transform(0,-1,1,0,0,n)}}(r,e.orientation,o.width,o.height),r.drawImage(o,0,0);var s=a.toDataURL(t.type||"image/WebP",.934);s=n.restoreExif(function(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return window.btoa(e)}(e.fixedArrayBuffer),s);var l=n.dataUrltoBlob(s,t.name);i.resolve(l)}catch(t){return i.reject(t)}},o.onerror=function(){i.reject()},o.src=r},function(t){i.reject(t)})},function(t){i.reject(t)}),i.promise},n.restoreExif=function(t,e){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(t){var e,n,i,r,a,o="",s="",l="",u=0;do{i=(e=t[u++])>>2,r=(3&e)<<4|(n=t[u++])>>4,a=(15&n)<<2|(s=t[u++])>>6,l=63&s,isNaN(n)?a=l=64:isNaN(s)&&(l=64),o=o+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),e=n=s="",i=r=a=l=""}while(u<t.length);return o},n.restore=function(t,e){t.match("data:image/jpeg;base64,")&&(t=t.replace("data:image/jpeg;base64,",""));var n=this.decode64(t),i=this.slice2Segments(n),r=this.exifManipulation(e,i);return"data:image/jpeg;base64,"+this.encode64(r)},n.exifManipulation=function(t,e){var n=this.getExifArray(e),i=this.insertExif(t,n);return new Uint8Array(i)},n.getExifArray=function(t){for(var e,n=0;n<t.length;n++)if(255===(e=t[n])[0]&225===e[1])return e;return[]},n.insertExif=function(t,e){var n=t.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),a=i.slice(0,r),o=i.slice(r),s=a;return s=(s=s.concat(e)).concat(o)},n.slice2Segments=function(t){for(var e=0,n=[];!(255===t[e]&218===t[e+1]);){if(255===t[e]&216===t[e+1])e+=2;else{var i=e+(256*t[e+2]+t[e+3])+2,r=t.slice(e,i);n.push(r),e=i}if(e>t.length)break}return n},n.decode64=function(t){var e,n,i,r,a="",o="",s=0,l=[];/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=this.KEY_STR.indexOf(t.charAt(s++))<<2|(i=this.KEY_STR.indexOf(t.charAt(s++)))>>4,n=(15&i)<<4|(r=this.KEY_STR.indexOf(t.charAt(s++)))>>2,a=(3&r)<<6|(o=this.KEY_STR.indexOf(t.charAt(s++))),l.push(e),64!==r&&l.push(n),64!==o&&l.push(a),e=n=a="",i=r=o=""}while(s<t.length);return l},n.restore(t,e)},n}]),function(t,e,n){"use strict";n.module("googlechart",[]).value("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}}).provider("googleJsapiUrl",function(){var t="https:",e="//www.google.com/jsapi";this.setProtocol=function(e){t=e},this.setUrl=function(t){e=t},this.$get=function(){return(t||"")+e}}).factory("googleChartApiPromise",["$rootScope","$q","googleChartApiConfig","googleJsapiUrl",function(i,r,a,o){var s=r.defer(),l=function(){var t={callback:function(){var t=a.optionalSettings.callback;i.$apply(function(){s.resolve()}),n.isFunction(t)&&t.call(this)}};t=n.extend({},a.optionalSettings,t),e.google.load("visualization",a.version,t)},u=t.getElementsByTagName("head")[0],c=t.createElement("script");return c.setAttribute("type","text/javascript"),c.src=o,c.addEventListener?c.addEventListener("load",l,!1):c.onreadystatechange=function(){"loaded"!==c.readyState&&"complete"!==c.readyState||(c.onreadystatechange=null,l())},u.appendChild(c),s.promise}]).directive("googleChart",["$timeout","$window","$rootScope","googleChartApiPromise",function(t,e,i,r){return{restrict:"A",scope:{beforeDraw:"&",chart:"=chart",onReady:"&",onSelect:"&",select:"&"},link:function(e,a,o){e.$watch(function(){return e.chart?{customFormatters:e.chart.customFormatters,data:e.chart.data,formatters:e.chart.formatters,options:e.chart.options,type:e.chart.type,view:e.chart.view}:e.chart},function(){c()},!0);var s=i.$on("resizeMsg",function(){t(function(){e.chartWrapper&&c()})});e.$on("$destroy",function(){s()}),e.oldChartFormatters={};function l(t,i,r){if(void 0!==e.chart.formatters[t]){if(!n.equals(e.chart.formatters[t],e.oldChartFormatters[t]))if(e.oldChartFormatters[t]=e.chart.formatters[t],e.formatters[t]=[],"color"===t)for(var a=0;a<e.chart.formatters[t].length;a++){var o=new i;for(l=0;l<e.chart.formatters[t][a].formats.length;l++){var s=e.chart.formatters[t][a].formats[l];void 0!==s.fromBgColor&&void 0!==s.toBgColor?o.addGradientRange(s.from,s.to,s.color,s.fromBgColor,s.toBgColor):o.addRange(s.from,s.to,s.color,s.bgcolor)}e.formatters[t].push(o)}else for(var l=0;l<e.chart.formatters[t].length;l++)e.formatters[t].push(new i(e.chart.formatters[t][l]));for(l=0;l<e.formatters[t].length;l++)e.chart.formatters[t][l].columnNum<r.getNumberOfColumns()&&e.formatters[t][l].format(r,e.chart.formatters[t][l].columnNum);"arrow"!==t&&"bar"!==t&&"color"!==t||(e.chart.options.allowHtml=!0)}}function u(){u.triggered||void 0==e.chart||(u.triggered=!0,t(function(){if(void 0===e.chartWrapper){var n={chartType:e.chart.type,dataTable:e.chart.data,view:e.chart.view,options:e.chart.options,containerId:a[0]};e.chartWrapper=new google.visualization.ChartWrapper(n),google.visualization.events.addListener(e.chartWrapper,"ready",function(){e.chart.displayed=!0,e.$apply(function(t){t.onReady({chartWrapper:t.chartWrapper})})}),google.visualization.events.addListener(e.chartWrapper,"error",function(t){console.log("Chart not displayed due to error: "+t.message+". Full error object follows."),console.log(t)}),google.visualization.events.addListener(e.chartWrapper,"select",function(){var t=e.chartWrapper.getChart().getSelection()[0];e.$apply(function(){o.select?(console.log("Angular-Google-Chart: The 'select' attribute is deprecated and will be removed in a future release.  Please use 'onSelect'."),e.select({selectedItem:t})):e.onSelect({selectedItem:t})})})}else e.chartWrapper.setChartType(e.chart.type),e.chartWrapper.setDataTable(e.chart.data),e.chartWrapper.setView(e.chart.view),e.chartWrapper.setOptions(e.chart.options);void 0===e.formatters&&(e.formatters={}),void 0!==e.chart.formatters&&(l("number",google.visualization.NumberFormat,e.chartWrapper.getDataTable()),l("arrow",google.visualization.ArrowFormat,e.chartWrapper.getDataTable()),l("date",google.visualization.DateFormat,e.chartWrapper.getDataTable()),l("bar",google.visualization.BarFormat,e.chartWrapper.getDataTable()),l("color",google.visualization.ColorFormat,e.chartWrapper.getDataTable()));var i=e.chart.customFormatters;if(void 0!==i)for(var r in i)l(r,i[r],e.chartWrapper.getDataTable());t(function(){e.beforeDraw({chartWrapper:e.chartWrapper}),e.chartWrapper.draw(),u.triggered=!1})},0,!0))}function c(){r.then(function(){u()})}}}}]).run(["$rootScope","$window",function(t,e){n.element(e).bind("resize",function(){t.$emit("resizeMsg")})}])}(document,window,window.angular),function(){"use strict";var t=angular.module("ngImgCrop",[]);t.factory("cropAreaCircle",["cropArea",function(t){var e=function(){t.apply(this,arguments),this._boxResizeBaseSize=20,this._boxResizeNormalRatio=.9,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1};return(e.prototype=new t)._calcCirclePerimeterCoords=function(t){var e=this._size/2,n=t*(Math.PI/180);return[this._x+e*Math.cos(n),this._y+e*Math.sin(n)]},e.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},e.prototype._isCoordWithinArea=function(t){return Math.sqrt((t[0]-this._x)*(t[0]-this._x)+(t[1]-this._y)*(t[1]-this._y))<this._size/2},e.prototype._isCoordWithinBoxResize=function(t){var e=this._calcResizeIconCenterCoords(),n=this._boxResizeHoverSize/2;return t[0]>e[0]-n&&t[0]<e[0]+n&&t[1]>e[1]-n&&t[1]<e[1]+n},e.prototype._drawArea=function(t,e,n){t.arc(e[0],e[1],n/2,0,2*Math.PI)},e.prototype.draw=function(){t.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},e.prototype.processMouseMove=function(t,e){var n="default",i=!1;if(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)this._x=t-this._posDragStartX,this._y=e-this._posDragStartY,this._areaIsHover=!0,n="move",i=!0,this._events.trigger("area-move");else if(this._boxResizeIsDragging){n="nesw-resize";var r,a,o;r=(a=t-this._posResizeStartX)>(o=this._posResizeStartY-e)?this._posResizeStartSize+2*o:this._posResizeStartSize+2*a,this._size=Math.max(this._minSize,r),this._boxResizeIsHover=!0,i=!0,this._events.trigger("area-resize")}else this._isCoordWithinBoxResize([t,e])?(n="nesw-resize",this._areaIsHover=!1,this._boxResizeIsHover=!0,i=!0):this._isCoordWithinArea([t,e])&&(n="move",this._areaIsHover=!0,i=!0);return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:n}),i},e.prototype.processMouseDown=function(t,e){this._isCoordWithinBoxResize([t,e])?(this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=t,this._posResizeStartY=e,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([t,e])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1,this._posDragStartX=t-this._x,this._posDragStartY=e-this._y,this._events.trigger("area-move-start"))},e.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0},e}]),t.factory("cropAreaSquare",["cropArea",function(t){var e=function(){t.apply(this,arguments),this._resizeCtrlBaseRadius=10,this._resizeCtrlNormalRatio=.75,this._resizeCtrlHoverRatio=1,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return(e.prototype=new t)._calcSquareCorners=function(){var t=this._size/2;return[[this._x-t,this._y-t],[this._x+t,this._y-t],[this._x-t,this._y+t],[this._x+t,this._y+t]]},e.prototype._calcSquareDimensions=function(){var t=this._size/2;return{left:this._x-t,top:this._y-t,right:this._x+t,bottom:this._y+t}},e.prototype._isCoordWithinArea=function(t){var e=this._calcSquareDimensions();return t[0]>=e.left&&t[0]<=e.right&&t[1]>=e.top&&t[1]<=e.bottom},e.prototype._isCoordWithinResizeCtrl=function(t){for(var e=this._calcSquareCorners(),n=-1,i=0,r=e.length;i<r;i++){var a=e[i];if(t[0]>a[0]-this._resizeCtrlHoverRadius&&t[0]<a[0]+this._resizeCtrlHoverRadius&&t[1]>a[1]-this._resizeCtrlHoverRadius&&t[1]<a[1]+this._resizeCtrlHoverRadius){n=i;break}}return n},e.prototype._drawArea=function(t,e,n){var i=n/2;t.rect(e[0]-i,e[1]-i,n,n)},e.prototype.draw=function(){t.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var e=this._calcSquareCorners(),n=0,i=e.length;n<i;n++){var r=e[n];this._cropCanvas.drawIconResizeCircle(r,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===n?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},e.prototype.processMouseMove=function(t,e){var n="default",i=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this._x=t-this._posDragStartX,this._y=e-this._posDragStartY,this._areaIsHover=!0,n="move",i=!0,this._events.trigger("area-move");else if(this._resizeCtrlIsDragging>-1){var r,a;switch(this._resizeCtrlIsDragging){case 0:r=-1,a=-1,n="nwse-resize";break;case 1:r=1,a=-1,n="nesw-resize";break;case 2:r=-1,a=1,n="nesw-resize";break;case 3:r=1,a=1,n="nwse-resize"}var o,s=(t-this._posResizeStartX)*r,l=(e-this._posResizeStartY)*a;o=s>l?this._posResizeStartSize+l:this._posResizeStartSize+s;var u=this._size;this._size=Math.max(this._minSize,o);var c=(this._size-u)/2;this._x+=c*r,this._y+=c*a,this._resizeCtrlIsHover=this._resizeCtrlIsDragging,i=!0,this._events.trigger("area-resize")}else{var d=this._isCoordWithinResizeCtrl([t,e]);if(d>-1){switch(d){case 0:n="nwse-resize";break;case 1:case 2:n="nesw-resize";break;case 3:n="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=d,i=!0}else this._isCoordWithinArea([t,e])&&(n="move",this._areaIsHover=!0,i=!0)}return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:n}),i},e.prototype.processMouseDown=function(t,e){var n=this._isCoordWithinResizeCtrl([t,e]);n>-1?(this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=n,this._resizeCtrlIsHover=n,this._posResizeStartX=t,this._posResizeStartY=e,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([t,e])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1,this._posDragStartX=t-this._x,this._posDragStartY=e-this._y,this._events.trigger("area-move-start"))},e.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._resizeCtrlIsDragging>-1&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},e}]),t.factory("cropArea",["cropCanvas",function(t){var e=function(e,n){this._ctx=e,this._events=n,this._minSize=80,this._cropCanvas=new t(e),this._image=new Image,this._x=0,this._y=0,this._size=200};return e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(t){this._image=t},e.prototype.getX=function(){return this._x},e.prototype.setX=function(t){this._x=t,this._dontDragOutside()},e.prototype.getY=function(){return this._y},e.prototype.setY=function(t){this._y=t,this._dontDragOutside()},e.prototype.getSize=function(){return this._size},e.prototype.setSize=function(t){this._size=Math.max(this._minSize,t),this._dontDragOutside()},e.prototype.getMinSize=function(){return this._minSize},e.prototype.setMinSize=function(t){this._minSize=t,this._size=Math.max(this._minSize,this._size),this._dontDragOutside()},e.prototype._dontDragOutside=function(){var t=this._ctx.canvas.height,e=this._ctx.canvas.width;this._size>e&&(this._size=e),this._size>t&&(this._size=t),this._x<this._size/2&&(this._x=this._size/2),this._x>e-this._size/2&&(this._x=e-this._size/2),this._y<this._size/2&&(this._y=this._size/2),this._y>t-this._size/2&&(this._y=t-this._size/2)},e.prototype._drawArea=function(){},e.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,[this._x,this._y],this._size,this._drawArea)},e.prototype.processMouseMove=function(){},e.prototype.processMouseDown=function(){},e.prototype.processMouseUp=function(){},e}]),t.factory("cropCanvas",[function(){var t=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],e=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],n=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],i=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],r=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],a=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],o=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],s=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],l="#fff",u="#fff",c="#444",d="#fff",h="#fff",f="#444",p="#fff";return function(g){var m=function(t,e,n){return[n*t[0]+e[0],n*t[1]+e[1]]},v=function(t,e,n,i){g.save(),g.fillStyle=e,g.beginPath();var r,a=m(t[0],n,i);g.moveTo(a[0],a[1]);for(var o in t)o>0&&(r=m(t[o],n,i),g.lineTo(r[0],r[1]));g.lineTo(a[0],a[1]),g.fill(),g.closePath(),g.restore()};this.drawIconMove=function(t,e){v(r,p,t,e),v(a,p,t,e),v(o,p,t,e),v(s,p,t,e)},this.drawIconResizeCircle=function(t,e,n){var i=e*n;g.save(),g.strokeStyle=h,g.lineWidth=2,g.fillStyle=f,g.beginPath(),g.arc(t[0],t[1],i,0,2*Math.PI),g.fill(),g.stroke(),g.closePath(),g.restore()},this.drawIconResizeBoxBase=function(t,e,n){var i=e*n;g.save(),g.strokeStyle=u,g.lineWidth=2,g.fillStyle=c,g.fillRect(t[0]-i/2,t[1]-i/2,i,i),g.strokeRect(t[0]-i/2,t[1]-i/2,i,i),g.restore()},this.drawIconResizeBoxNESW=function(t,i,r){this.drawIconResizeBoxBase(t,i,r),v(e,d,t,r),v(n,d,t,r)},this.drawIconResizeBoxNWSE=function(e,n,r){this.drawIconResizeBoxBase(e,n,r),v(t,d,e,r),v(i,d,e,r)},this.drawCropArea=function(t,e,n,i){var r=t.width/g.canvas.width,a=t.height/g.canvas.height,o=e[0]-n/2,s=e[1]-n/2;g.save(),g.strokeStyle=l,g.lineWidth=2,g.beginPath(),i(g,e,n),g.stroke(),g.clip(),n>0&&g.drawImage(t,o*r,s*a,n*r,n*a,o,s,n,n),g.beginPath(),i(g,e,n),g.stroke(),g.clip(),g.restore()}}}]),t.service("cropEXIF",[function(){var t=!1,e=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},n=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},i=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},r=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function a(t){return!!t.exifdata}function o(e,n){function i(i){var r=s(i),a=function(e){var n=new DataView(e);t&&console.log("Got file of length "+e.byteLength);if(255!=n.getUint8(0)||216!=n.getUint8(1))return t&&console.log("Not a valid JPEG"),!1;var i=2,r=e.byteLength;for(;i<r;){if(c=i,56===(l=n).getUint8(c)&&66===l.getUint8(c+1)&&73===l.getUint8(c+2)&&77===l.getUint8(c+3)&&4===l.getUint8(c+4)&&4===l.getUint8(c+5)){var a=n.getUint8(i+7);a%2!=0&&(a+=1),0===a&&(a=4);var o=i+8+a,s=n.getUint16(i+6+a);return u(e,o,s)}i++}var l,c}(i);e.exifdata=r||{},e.iptcdata=a||{},n&&n.call(e)}if(e.src)if(/^data\:/i.test(e.src)){i(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),i=n.length,r=new ArrayBuffer(i),a=new Uint8Array(r),o=0;o<i;o++)a[o]=n.charCodeAt(o);return r}(e.src))}else if(/^blob\:/i.test(e.src)){(a=new FileReader).onload=function(t){i(t.target.result)},function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},n.send()}(e.src,function(t){a.readAsArrayBuffer(t)})}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";i(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var a;(a=new FileReader).onload=function(e){t&&console.log("Got file of length "+e.target.result.byteLength),i(e.target.result)},a.readAsArrayBuffer(e)}}function s(e){var n=new DataView(e);if(t&&console.log("Got file of length "+e.byteLength),255!=n.getUint8(0)||216!=n.getUint8(1))return t&&console.log("Not a valid JPEG"),!1;for(var i,r=2,a=e.byteLength;r<a;){if(255!=n.getUint8(r))return t&&console.log("Not a valid marker at offset "+r+", found: "+n.getUint8(r)),!1;if(i=n.getUint8(r+1),t&&console.log(i),225==i)return t&&console.log("Found 0xFFE1 marker"),f(n,r+4,n.getUint16(r+2));r+=2+n.getUint16(r+2)}}var l={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function u(t,e,n){for(var i,r,a,o,s=new DataView(t),u={},c=e;c<e+n;)28===s.getUint8(c)&&2===s.getUint8(c+1)&&(o=s.getUint8(c+2))in l&&((a=s.getInt16(c+3))+5,r=l[o],i=h(s,c+5,a),u.hasOwnProperty(r)?u[r]instanceof Array?u[r].push(i):u[r]=[u[r],i]:u[r]=i),c++;return u}function c(e,n,i,r,a){var o,s,l,u=e.getUint16(i,!a),c={};for(l=0;l<u;l++)o=i+12*l+2,!(s=r[e.getUint16(o,!a)])&&t&&console.log("Unknown tag: "+e.getUint16(o,!a)),c[s]=d(e,o,n,i,a);return c}function d(t,e,n,i,r){var a,o,s,l,u,c,d=t.getUint16(e+2,!r),f=t.getUint32(e+4,!r),p=t.getUint32(e+8,!r)+n;switch(d){case 1:case 7:if(1==f)return t.getUint8(e+8,!r);for(a=f>4?p:e+8,o=[],l=0;l<f;l++)o[l]=t.getUint8(a+l);return o;case 2:return h(t,a=f>4?p:e+8,f-1);case 3:if(1==f)return t.getUint16(e+8,!r);for(a=f>2?p:e+8,o=[],l=0;l<f;l++)o[l]=t.getUint16(a+2*l,!r);return o;case 4:if(1==f)return t.getUint32(e+8,!r);for(o=[],l=0;l<f;l++)o[l]=t.getUint32(p+4*l,!r);return o;case 5:if(1==f)return u=t.getUint32(p,!r),c=t.getUint32(p+4,!r),(s=new Number(u/c)).numerator=u,s.denominator=c,s;for(o=[],l=0;l<f;l++)u=t.getUint32(p+8*l,!r),c=t.getUint32(p+4+8*l,!r),o[l]=new Number(u/c),o[l].numerator=u,o[l].denominator=c;return o;case 9:if(1==f)return t.getInt32(e+8,!r);for(o=[],l=0;l<f;l++)o[l]=t.getInt32(p+4*l,!r);return o;case 10:if(1==f)return t.getInt32(p,!r)/t.getInt32(p+4,!r);for(o=[],l=0;l<f;l++)o[l]=t.getInt32(p+8*l,!r)/t.getInt32(p+4+8*l,!r);return o}}function h(t,e,n){for(var i="",r=e;r<e+n;r++)i+=String.fromCharCode(t.getUint8(r));return i}function f(a,o){if("Exif"!=h(a,o,4))return t&&console.log("Not valid EXIF data! "+h(a,o,4)),!1;var s,l,u,d,f,p=o+6;if(18761==a.getUint16(p))s=!1;else{if(19789!=a.getUint16(p))return t&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;s=!0}if(42!=a.getUint16(p+2,!s))return t&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var g=a.getUint32(p+4,!s);if(g<8)return t&&console.log("Not valid TIFF data! (First offset less than 8)",a.getUint32(p+4,!s)),!1;if((l=c(a,p,p+g,n,s)).ExifIFDPointer){d=c(a,p,p+l.ExifIFDPointer,e,s);for(u in d){switch(u){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":d[u]=r[u][d[u]];break;case"ExifVersion":case"FlashpixVersion":d[u]=String.fromCharCode(d[u][0],d[u][1],d[u][2],d[u][3]);break;case"ComponentsConfiguration":d[u]=r.Components[d[u][0]]+r.Components[d[u][1]]+r.Components[d[u][2]]+r.Components[d[u][3]]}l[u]=d[u]}}if(l.GPSInfoIFDPointer){f=c(a,p,p+l.GPSInfoIFDPointer,i,s);for(u in f){switch(u){case"GPSVersionID":f[u]=f[u][0]+"."+f[u][1]+"."+f[u][2]+"."+f[u][3]}l[u]=f[u]}}return l}this.getData=function(t,e){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(a(t)?e&&e.call(t):o(t,e),!0)},this.getTag=function(t,e){if(a(t))return t.exifdata[e]},this.getAllTags=function(t){if(!a(t))return{};var e,n=t.exifdata,i={};for(e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i},this.pretty=function(t){if(!a(t))return"";var e,n=t.exifdata,i="";for(e in n)n.hasOwnProperty(e)&&("object"==typeof n[e]?n[e]instanceof Number?i+=e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":i+=e+" : ["+n[e].length+" values]\r\n":i+=e+" : "+n[e]+"\r\n");return i},this.readFromBinaryFile=function(t){return s(t)}}]),t.factory("cropHost",["$document","cropAreaCircle","cropAreaSquare","cropEXIF",function(t,e,n,i){var r=function(t){var e=t.getBoundingClientRect(),n=document.body,i=document.documentElement,r=window.pageYOffset||i.scrollTop||n.scrollTop,a=window.pageXOffset||i.scrollLeft||n.scrollLeft,o=i.clientTop||n.clientTop||0,s=i.clientLeft||n.clientLeft||0,l=e.top+r-o,u=e.left+a-s;return{top:Math.round(l),left:Math.round(u)}};return function(a,o,s){var l=null,u=null,c=null,d=[100,100],h=[300,300],f=200,p="image/png",g=null;function m(){l.clearRect(0,0,l.canvas.width,l.canvas.height),null!==u&&(l.drawImage(u,0,0,l.canvas.width,l.canvas.height),l.save(),l.fillStyle="rgba(0, 0, 0, 0.65)",l.fillRect(0,0,l.canvas.width,l.canvas.height),l.restore(),c.draw())}var v=function(){if(null!==u){c.setImage(u);var t=[u.width,u.height],e=u.width/u.height,n=t;n[0]>h[0]?(n[0]=h[0],n[1]=n[0]/e):n[0]<d[0]&&(n[0]=d[0],n[1]=n[0]/e),n[1]>h[1]?(n[1]=h[1],n[0]=n[1]*e):n[1]<d[1]&&(n[1]=d[1],n[0]=n[1]*e),a.prop("width",n[0]).prop("height",n[1]).css({"margin-left":-n[0]/2+"px","margin-top":-n[1]/2+"px"}),c.setX(l.canvas.width/2),c.setY(l.canvas.height/2),c.setSize(Math.min(200,l.canvas.width/2,l.canvas.height/2))}else a.prop("width",0).prop("height",0).css({"margin-top":0});m()},y=function(t){return angular.isDefined(t.changedTouches)?t.changedTouches:t.originalEvent.changedTouches},b=function(t){if(null!==u){var e,n,i=r(l.canvas);"touchmove"===t.type?(e=y(t)[0].pageX,n=y(t)[0].pageY):(e=t.pageX,n=t.pageY),c.processMouseMove(e-i.left,n-i.top),m()}},x=function(t){if(t.preventDefault(),t.stopPropagation(),null!==u){var e,n,i=r(l.canvas);"touchstart"===t.type?(e=y(t)[0].pageX,n=y(t)[0].pageY):(e=t.pageX,n=t.pageY),c.processMouseDown(e-i.left,n-i.top),m()}},w=function(t){if(null!==u){var e,n,i=r(l.canvas);"touchend"===t.type?(e=y(t)[0].pageX,n=y(t)[0].pageY):(e=t.pageX,n=t.pageY),c.processMouseUp(e-i.left,n-i.top),m()}};this.getResultImageDataURI=function(){var t,e;return t=(e=angular.element("<canvas></canvas>")[0]).getContext("2d"),e.width=f,e.height=f,null!==u&&t.drawImage(u,(c.getX()-c.getSize()/2)*(u.width/l.canvas.width),(c.getY()-c.getSize()/2)*(u.height/l.canvas.height),c.getSize()*(u.width/l.canvas.width),c.getSize()*(u.height/l.canvas.height),0,0,f,f),null!==g?e.toDataURL(p,g):e.toDataURL(p)},this.setNewImageSource=function(t){if(u=null,v(),s.trigger("image-updated"),t){var e=new Image;"http"===t.substring(0,4).toLowerCase()&&(e.crossOrigin="anonymous"),e.onload=function(){s.trigger("load-done"),i.getData(e,function(){var t=i.getTag(e,"Orientation");if([3,6,8].indexOf(t)>-1){var n=document.createElement("canvas"),r=n.getContext("2d"),a=e.width,o=e.height,l=0,c=0,d=0;switch(t){case 3:l=-e.width,c=-e.height,d=180;break;case 6:a=e.height,o=e.width,c=-e.height,d=90;break;case 8:a=e.height,o=e.width,l=-e.width,d=270}n.width=a,n.height=o,r.rotate(d*Math.PI/180),r.drawImage(e,l,c),(u=new Image).src=n.toDataURL("image/png")}else u=e;v(),s.trigger("image-updated")})},e.onerror=function(){s.trigger("load-error")},s.trigger("load-start"),e.src=t}},this.setMaxDimensions=function(t,e){if(h=[t,e],null!==u){var n=l.canvas.width,i=l.canvas.height,r=[u.width,u.height],o=u.width/u.height,s=r;s[0]>h[0]?(s[0]=h[0],s[1]=s[0]/o):s[0]<d[0]&&(s[0]=d[0],s[1]=s[0]/o),s[1]>h[1]?(s[1]=h[1],s[0]=s[1]*o):s[1]<d[1]&&(s[1]=d[1],s[0]=s[1]*o),a.prop("width",s[0]).prop("height",s[1]).css({"margin-left":-s[0]/2+"px","margin-top":-s[1]/2+"px"});var f=l.canvas.width/n,p=l.canvas.height/i,g=Math.min(f,p);c.setX(c.getX()*f),c.setY(c.getY()*p),c.setSize(c.getSize()*g)}else a.prop("width",0).prop("height",0).css({"margin-top":0});m()},this.setAreaMinSize=function(t){t=parseInt(t,10),isNaN(t)||(c.setMinSize(t),m())},this.setResultImageSize=function(t){t=parseInt(t,10),isNaN(t)||(f=t)},this.setResultImageFormat=function(t){p=t},this.setResultImageQuality=function(t){t=parseFloat(t),!isNaN(t)&&t>=0&&t<=1&&(g=t)},this.setAreaType=function(t){var i=c.getSize(),r=c.getMinSize(),a=c.getX(),o=c.getY(),d=e;"square"===t&&(d=n),(c=new d(l,s)).setMinSize(r),c.setSize(i),c.setX(a),c.setY(o),null!==u&&c.setImage(u),m()},l=a[0].getContext("2d"),c=new e(l,s),t.on("mousemove",b),a.on("mousedown",x),t.on("mouseup",w),t.on("touchmove",b),a.on("touchstart",x),t.on("touchend",w),this.destroy=function(){t.off("mousemove",b),a.off("mousedown",x),t.off("mouseup",b),t.off("touchmove",b),a.off("touchstart",x),t.off("touchend",b),a.remove()}}}]),t.factory("cropPubSub",[function(){return function(){var t={};this.on=function(e,n){return e.split(" ").forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)}),this},this.trigger=function(e,n){return angular.forEach(t[e],function(t){t.call(null,n)}),this}}}]),t.directive("imgCrop",["$timeout","cropHost","cropPubSub",function(t,e,n){return{restrict:"E",scope:{image:"=",resultImage:"=",changeOnFly:"=",areaType:"@",areaMinSize:"=",resultImageSize:"=",resultImageFormat:"@",resultImageQuality:"=",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas></canvas>",controller:["$scope",function(t){t.events=new n}],link:function(n,i){var r,a=n.events,o=new e(i.find("canvas"),{},a),s=function(t){var e=o.getResultImageDataURI();r!==e&&(r=e,angular.isDefined(t.resultImage)&&(t.resultImage=e),t.onChange({$dataURI:t.resultImage}))},l=function(e){return function(){t(function(){n.$apply(function(t){e(t)})})}};a.on("load-start",l(function(t){t.onLoadBegin({})})).on("load-done",l(function(t){t.onLoadDone({})})).on("load-error",l(function(t){t.onLoadError({})})).on("area-move area-resize",l(function(t){t.changeOnFly&&s(t)})).on("area-move-end area-resize-end image-updated",l(function(t){s(t)})),n.$watch("image",function(){o.setNewImageSource(n.image)}),n.$watch("areaType",function(){o.setAreaType(n.areaType),s(n)}),n.$watch("areaMinSize",function(){o.setAreaMinSize(n.areaMinSize),s(n)}),n.$watch("resultImageSize",function(){o.setResultImageSize(n.resultImageSize),s(n)}),n.$watch("resultImageFormat",function(){o.setResultImageFormat(n.resultImageFormat),s(n)}),n.$watch("resultImageQuality",function(){o.setResultImageQuality(n.resultImageQuality),s(n)}),n.$watch(function(){return[i[0].clientWidth,i[0].clientHeight]},function(t){o.setMaxDimensions(t[0],t[1]),s(n)},!0),n.$on("$destroy",function(){o.destroy()})}}}])}(),function(t,e){"object"==typeof exports?module.exports=e(require("angular")):"function"==typeof define&&define.amd?define(["angular"],e):e(t.angular)}(this,function(angular){return angular.module("ngMap",[]),function(){"use strict";var t,e=function(e,n,i,r,a,o,s){t=a;var l=this;l.mapOptions,l.mapEvents,l.eventListeners,l.addObject=function(t,e){if(l.map){l.map[t]=l.map[t]||{};var n=Object.keys(l.map[t]).length;l.map[t][e.id||n]=e,l.map instanceof google.maps.Map&&("infoWindows"!=t&&e.setMap&&e.setMap&&e.setMap(l.map),e.centered&&e.position&&l.map.setCenter(e.position),"markers"==t&&l.objectChanged("markers"),"customMarkers"==t&&l.objectChanged("customMarkers"))}},l.deleteObject=function(t,e){if(e.map){var n=e.map[t];for(var i in n)n[i]===e&&(google.maps.event.clearInstanceListeners(e),delete n[i]);e.map&&e.setMap&&e.setMap(null),"markers"==t&&l.objectChanged("markers"),"customMarkers"==t&&l.objectChanged("customMarkers")}},l.observeAttrSetObj=function(e,n,i){if(n.noWatcher)return!1;for(var r=t.getAttrsToObserve(e),a=0;a<r.length;a++){var s=r[a];n.$observe(s,o.observeAndSet(s,i))}},l.zoomToIncludeMarkers=function(){var t=new google.maps.LatLngBounds;for(var e in l.map.markers)t.extend(l.map.markers[e].getPosition());for(var n in l.map.customMarkers)t.extend(l.map.customMarkers[n].getPosition());l.mapOptions.maximumZoom&&(l.enableMaximumZoomCheck=!0),l.map.fitBounds(t)},l.objectChanged=function(t){!l.map||"markers"!=t&&"customMarkers"!=t||"auto"!=l.map.zoomToIncludeMarkers||l.zoomToIncludeMarkers()},l.initializeMap=function(){var a=l.mapOptions,c=l.mapEvents,d=l.map;if(l.map=s.getMapInstance(n[0]),o.setStyle(n[0]),d){var h=t.filter(i),f=t.getOptions(h),p=t.getControlOptions(h);a=angular.extend(f,p);for(var g in d){var m=d[g];if("object"==typeof m)for(var v in m)l.addObject(g,m[v])}l.map.showInfoWindow=l.showInfoWindow,l.map.hideInfoWindow=l.hideInfoWindow}a.zoom=a.zoom||15;var y=a.center;if(!a.center||"string"==typeof y&&y.match(/\{\{.*\}\}/))a.center=new google.maps.LatLng(0,0);else if(!(y instanceof google.maps.LatLng)){var b=a.center;delete a.center,o.getGeoLocation(b,a.geoLocationOptions).then(function(t){l.map.setCenter(t);var n=a.geoCallback;n&&r(n)(e)},function(){a.geoFallbackCenter&&l.map.setCenter(a.geoFallbackCenter)})}l.map.setOptions(a);for(var x in c){var w=c[x],M=google.maps.event.addListener(l.map,x,w);l.eventListeners[x]=M}l.observeAttrSetObj(u,i,l.map),l.singleInfoWindow=a.singleInfoWindow,google.maps.event.trigger(l.map,"resize"),google.maps.event.addListenerOnce(l.map,"idle",function(){o.addMap(l),a.zoomToIncludeMarkers&&l.zoomToIncludeMarkers(),e.map=l.map,e.$emit("mapInitialized",l.map),i.mapInitialized&&r(i.mapInitialized)(e,{map:l.map})}),a.zoomToIncludeMarkers&&a.maximumZoom&&google.maps.event.addListener(l.map,"zoom_changed",function(){1==l.enableMaximumZoomCheck&&(l.enableMaximumZoomCheck=!1,google.maps.event.addListenerOnce(l.map,"bounds_changed",function(){l.map.setZoom(Math.min(a.maximumZoom,l.map.getZoom()))}))})},e.google=google;var u=t.orgAttributes(n),c=t.filter(i),d=t.getOptions(c,{scope:e}),h=t.getControlOptions(c),f=angular.extend(d,h),p=t.getEvents(e,c);if(Object.keys(p).length,l.mapOptions=f,l.mapEvents=p,l.eventListeners={},d.lazyInit){if(i.id&&i.id.startsWith("{{")&&i.id.endsWith("}}"))var g=i.id.slice(2,-2),m=r(g)(e);else m=i.id;l.map={id:m},o.addMap(l)}else l.initializeMap();d.triggerResize&&google.maps.event.trigger(l.map,"resize"),n.bind("$destroy",function(){s.returnMapInstance(l.map),o.deleteMap(l)})};e.$inject=["$scope","$element","$attrs","$parse","Attr2MapOptions","NgMap","NgMapPool"],angular.module("ngMap").controller("__MapController",e)}(),function(){"use strict";var t,e=function(e,i,r,a){a=a[0]||a[1];var o=t.orgAttributes(i),s=t.filter(r),l=t.getOptions(s,{scope:e}),u=t.getEvents(e,s),c=n(l,u);a.addObject("bicyclingLayers",c),a.observeAttrSetObj(o,r,c),i.bind("$destroy",function(){a.deleteObject("bicyclingLayers",c)})},n=function(t,e){var n=new google.maps.BicyclingLayer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n},i=function(n){return t=n,{restrict:"E",require:["?^map","?^ngMap"],link:e}};i.$inject=["Attr2MapOptions"],angular.module("ngMap").directive("bicyclingLayer",i)}(),function(){"use strict";var t,e,n=function(n,i,r,a){a=a[0]||a[1];var o=t.filter(r),s=t.getOptions(o,{scope:n}),l=t.getEvents(n,o),u=i[0].parentElement.removeChild(i[0]);e(u.innerHTML.trim())(n);for(var c in l)google.maps.event.addDomListener(u,c,l[c]);a.addObject("customControls",u);var d=s.position;a.map.controls[google.maps.ControlPosition[d]].push(u),i.bind("$destroy",function(){a.deleteObject("customControls",u)})},i=function(i,r,a){return t=i,e=r,a,{restrict:"E",require:["?^map","?^ngMap"],link:n}};i.$inject=["Attr2MapOptions","$compile","NgMap"],angular.module("ngMap").directive("customControl",i)}(),function(){"use strict";var t,e,n,i,r=function(t){t=t||{},this.el=document.createElement("div"),this.el.style.display="inline-block",this.el.style.visibility="hidden",this.visible=!0;for(var e in t)this[e]=t[e]},a=function(a,o,s,l){return t=s,e=a,n=o,i=l,{restrict:"E",require:["?^map","?^ngMap"],compile:function(a){(r.prototype=new google.maps.OverlayView).setContent=function(t,e){this.el.innerHTML=t,this.el.style.position="absolute",e&&n(angular.element(this.el).contents())(e)},r.prototype.getDraggable=function(){return this.draggable},r.prototype.setDraggable=function(t){this.draggable=t},r.prototype.getPosition=function(){return this.position},r.prototype.setPosition=function(t){if(t&&(this.position=t),this.getProjection()&&"function"==typeof this.position.lng){var n=this.getProjection().fromLatLngToDivPixel(this.position),i=this,r=function(){var t=Math.round(n.x-i.el.offsetWidth/2),e=Math.round(n.y-i.el.offsetHeight-10);i.el.style.left=t+"px",i.el.style.top=e+"px",i.el.style.visibility="visible"};i.el.offsetWidth&&i.el.offsetHeight?r():e(r,300)}},r.prototype.setZIndex=function(t){t&&(this.zIndex=t),this.el.style.zIndex=this.zIndex},r.prototype.getVisible=function(){return this.visible},r.prototype.setVisible=function(t){this.el.style.display=t?"inline-block":"none",this.visible=t},r.prototype.addClass=function(t){var e=this.el.className.trim().split(" ");-1==e.indexOf(t)&&e.push(t),this.el.className=e.join(" ")},r.prototype.removeClass=function(t){var e=this.el.className.split(" "),n=e.indexOf(t);n>-1&&e.splice(n,1),this.el.className=e.join(" ")},r.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this.el)},r.prototype.draw=function(){this.setPosition(),this.setZIndex(this.zIndex),this.setVisible(this.visible)},r.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)},a[0].style.display="none";var o=a.html(),s=[];return(o.match(/{{([^}]+)}}/g)||[]).forEach(function(t){var e=t.replace("{{","").replace("}}","");-1==t.indexOf("::")&&-1==t.indexOf("this.")&&-1==s.indexOf(e)&&s.push(t.replace("{{","").replace("}}",""))}),l=o,u=s,function(n,a,o,s){s=s[0]||s[1];var c=t.orgAttributes(a),d=t.filter(o),h=t.getOptions(d,{scope:n}),f=t.getEvents(n,d);a[0].style.display="none";var p=new r(h);e(function(){n.$watch("["+u.join(",")+"]",function(){p.setContent(l,n)},!0),p.setContent(a[0].innerHTML,n);var t=a[0].firstElementChild.className;p.addClass("custom-marker"),p.addClass(t),h.position instanceof google.maps.LatLng||i.getGeoLocation(h.position).then(function(t){p.setPosition(t)})});for(var g in f)google.maps.event.addDomListener(p.el,g,f[g]);s.addObject("customMarkers",p),s.observeAttrSetObj(c,o,p),a.bind("$destroy",function(){s.deleteObject("customMarkers",p)})};var l,u}}};a.$inject=["$timeout","$compile","Attr2MapOptions","NgMap"],angular.module("ngMap").directive("customMarker",a)}(),function(){"use strict";var t,e,n,i=function(t,i){var r=new google.maps.DirectionsService,a=i;a.travelMode=a.travelMode||"DRIVING";var o=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(var s in a)-1===o.indexOf(s)&&delete a[s];a.waypoints&&("[]"==a.waypoints||""===a.waypoints)&&delete a.waypoints;var l=function(n){r.route(n,function(n,i){i==google.maps.DirectionsStatus.OK&&e(function(){t.setDirections(n)})})};a.origin&&a.destination&&("current-location"==a.origin?n.getCurrentPosition().then(function(t){a.origin=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),l(a)}):"current-location"==a.destination?n.getCurrentPosition().then(function(t){a.destination=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),l(a)}):l(a))},r=function(r,a,o,s){var l=r;t=s,e=a,n=o;return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,a,o){o=o[0]||o[1];var s=l.orgAttributes(r),u=l.filter(a),c=l.getOptions(u,{scope:n}),d=l.getEvents(n,u),h=l.getAttrsToObserve(s),f=function(t,e){t.panel&&(t.panel=document.getElementById(t.panel)||document.querySelector(t.panel));var n=new google.maps.DirectionsRenderer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n}(c,d);o.addObject("directionsRenderers",f),h.forEach(function(t){n=t,a.$observe(n,function(t){if("panel"==n)e(function(){var e=document.getElementById(t)||document.querySelector(t);e&&f.setPanel(e)});else if(c[n]!==t){var r=l.toOptionValue(t,{key:n});c[n]=r,i(f,c)}});var n}),t.getMap().then(function(){i(f,c)}),r.bind("$destroy",function(){o.deleteObject("directionsRenderers",f)})}}};r.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"],angular.module("ngMap").directive("directions",r)}(),function(){"use strict";angular.module("ngMap").directive("drawingManager",["Attr2MapOptions",function(t){var e=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,r){r=r[0]||r[1];var a=e.filter(i),o=e.getOptions(a,{scope:t}),s=e.getControlOptions(a),l=e.getEvents(t,a),u=new google.maps.drawing.DrawingManager({drawingMode:o.drawingmode,drawingControl:o.drawingcontrol,drawingControlOptions:s.drawingControlOptions,circleOptions:o.circleoptions,markerOptions:o.markeroptions,polygonOptions:o.polygonoptions,polylineOptions:o.polylineoptions,rectangleOptions:o.rectangleoptions});i.$observe("drawingControlOptions",function(t){u.drawingControlOptions=e.getControlOptions({drawingControlOptions:t}).drawingControlOptions,u.setDrawingMode(null),u.setMap(r.map)});for(var c in l)google.maps.event.addListener(u,c,l[c]);r.addObject("mapDrawingManager",u),n.bind("$destroy",function(){r.deleteObject("mapDrawingManager",u)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(t){var e=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,r){r=r[0]||r[1];var a=e.filter(i),o=e.getOptions(a,{scope:t}),s=e.getEvents(t,a,s),l=function(t,e){var n=new google.maps.visualization.DynamicMapsEngineLayer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n}(o,s);r.addObject("mapsEngineLayers",l)}}}])}(),function(){"use strict";angular.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(t){var e=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,r){r=r[0]||r[1];var a=e.filter(i),o=e.getOptions(a,{scope:t}),s=e.getEvents(t,a,s),l=function(t,e){var n=new google.maps.FusionTablesLayer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n}(o,s);r.addObject("fusionTablesLayers",l)}}}])}(),function(){"use strict";angular.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(t,e){var n=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,i,r,a){a=a[0]||a[1];var o=n.filter(r),s=n.getOptions(o,{scope:t});if(s.data=e[r.data]||t[r.data],!(s.data instanceof Array))throw"invalid heatmap data";s.data=new google.maps.MVCArray(s.data);var l=new google.maps.visualization.HeatmapLayer(s);n.getEvents(t,o),a.addObject("heatmapLayers",l)}}}])}(),function(){"use strict";var t=function(t,e,n,i,r){var a=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,o,s,l){l=l[0]||l[1],o.css("display","none");var u,c=a.orgAttributes(o),d=a.filter(s),h=a.getOptions(d,{scope:t}),f=a.getEvents(t,d);!h.position||h.position instanceof google.maps.LatLng||(u=h.position);var p=function(t,i,r){var a;!t.position||t.position instanceof google.maps.LatLng||delete t.position,a=new google.maps.InfoWindow(t);for(var o in i)o&&google.maps.event.addListener(a,o,i[o]);var s=r.html().trim();if(1!=angular.element(s).length)throw"info-window working as a template must have a container";return a.__template=s.replace(/\s?ng-non-bindable[='"]+/,""),a.__open=function(t,i,r){n(function(){r&&(i.anchor=r);var n=e(a.__template)(i);a.setContent(n[0]),i.$apply(),r&&r.getPosition?a.open(t,r):r&&r instanceof google.maps.LatLng?(a.open(t),a.setPosition(r)):a.open(t),a.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})},a}(h,f,o);u&&r.getGeoLocation(u).then(function(e){p.setPosition(e),p.__open(l.map,t,e);var n=s.geoCallback;n&&i(n)(t)}),l.addObject("infoWindows",p),l.observeAttrSetObj(c,s,p),l.showInfoWindow=l.map.showInfoWindow=l.showInfoWindow||function(e,n,i){var r="string"==typeof e?e:n,a="string"==typeof e?n:i;if("string"==typeof a)if(void 0!==l.map.markers&&void 0!==l.map.markers[a])a=l.map.markers[a];else{if(void 0===l.map.customMarkers[a])throw new Error("Cant open info window for id "+a+". Marker or CustomMarker is not defined");a=l.map.customMarkers[a]}var o=l.map.infoWindows[r],s=a||(this.getPosition?this:null);o.__open(l.map,t,s),l.singleInfoWindow&&(l.lastInfoWindow&&t.hideInfoWindow(l.lastInfoWindow),l.lastInfoWindow=r)},l.hideInfoWindow=l.map.hideInfoWindow=l.hideInfoWindow||function(t,e){var n="string"==typeof t?t:e;l.map.infoWindows[n].close()},t.showInfoWindow=l.map.showInfoWindow,t.hideInfoWindow=l.map.hideInfoWindow,r.getMap().then(function(e){if(p.visible&&p.__open(e,t),p.visibleOnMarker){var n=p.visibleOnMarker;p.__open(e,t,e.markers[n])}})}}};t.$inject=["Attr2MapOptions","$compile","$timeout","$parse","NgMap"],angular.module("ngMap").directive("infoWindow",t)}(),function(){"use strict";angular.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(t){var e=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,r){r=r[0]||r[1];var a=e.orgAttributes(n),o=e.filter(i),s=function(t,e){var n=new google.maps.KmlLayer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n}(e.getOptions(o,{scope:t}),e.getEvents(t,o));r.addObject("kmlLayers",s),r.observeAttrSetObj(a,i,s),n.bind("$destroy",function(){r.deleteObject("kmlLayers",s)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(t,e){var n=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,i,r){var a=n.filter(r),o=n.getOptions(a,{scope:t}),s=n.getEvents(t,a,s);e.getMap().then(function(e){for(var n in o){var i=o[n];"function"==typeof t[i]?e.data[n](t[i]):e.data[n](i)}for(var r in s)e.data.addListener(r,s[r])})}}}])}(),function(){"use strict";var t,e,n,i=function(i,r,a){var o=a.mapLazyLoadParams||a.mapLazyLoad;if(window.lazyLoadCallback=function(){t(function(){r.html(n),e(r.contents())(i)},100)},void 0===window.google||void 0===window.google.maps){var s=document.createElement("script");s.src=o+(o.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+s.src+'"]')||document.body.appendChild(s)}else r.html(n),e(r.contents())(i)},r=function(t,e){return e.mapLazyLoad,n=t.html(),e.mapLazyLoad,(void 0===window.google||void 0===window.google.maps)&&(t.html(""),{pre:i})},a=function(n,i){return e=n,t=i,{compile:r}};a.$inject=["$compile","$timeout"],angular.module("ngMap").directive("mapLazyLoad",a)}(),function(){"use strict";angular.module("ngMap").directive("mapType",["$parse","NgMap",function(t,e){return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,i,r,a){a=a[0]||a[1];var o,s=r.name;if(!s)throw"invalid map-type name";if(!(o=t(r.object)(n)))throw"invalid map-type object";e.getMap().then(function(t){t.mapTypes.set(s,o)}),a.addObject("mapTypes",o)}}}])}(),function(){"use strict";var t=function(){return{restrict:"AE",controller:"__MapController",controllerAs:"ngmap"}};angular.module("ngMap").directive("map",[t]),angular.module("ngMap").directive("ngMap",[t])}(),function(){"use strict";angular.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(t){var e=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,r){r=r[0]||r[1];var a=e.filter(i),o=e.getOptions(a,{scope:t}),s=e.getEvents(t,a,s),l=function(t,e){var n=new google.maps.visualization.MapsEngineLayer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n}(o,s);r.addObject("mapsEngineLayers",l)}}}])}(),function(){"use strict";var t,e,n,i=function(i,r,a,o){o=o[0]||o[1];var s,l=t.orgAttributes(r),u=t.filter(a),c=t.getOptions(u,i,{scope:i}),d=t.getEvents(i,u);c.position instanceof google.maps.LatLng||(s=c.position);var h=function(t,e){var i;if(n.defaultOptions.marker)for(var r in n.defaultOptions.marker)void 0===t[r]&&(t[r]=n.defaultOptions.marker[r]);t.position instanceof google.maps.LatLng||(t.position=new google.maps.LatLng(0,0)),i=new google.maps.Marker(t),Object.keys(e).length;for(var a in e)a&&google.maps.event.addListener(i,a,e[a]);return i}(c,d);o.addObject("markers",h),s&&n.getGeoLocation(s).then(function(t){h.setPosition(t),c.centered&&h.map.setCenter(t);var n=a.geoCallback;n&&e(n)(i)}),o.observeAttrSetObj(l,a,h),r.bind("$destroy",function(){o.deleteObject("markers",h)})},r=function(r,a,o){return t=r,e=a,n=o,{restrict:"E",require:["^?map","?^ngMap"],link:i}};r.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("marker",r)}(),function(){"use strict";angular.module("ngMap").directive("overlayMapType",["NgMap",function(t){return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,n,i,r){r=r[0]||r[1];var a=i.initMethod||"insertAt",o=e[i.object];t.getMap().then(function(t){if("insertAt"==a){var e=parseInt(i.index,10);t.overlayMapTypes.insertAt(e,o)}else"push"==a&&t.overlayMapTypes.push(o)}),r.addObject("overlayMapTypes",o)}}}])}(),function(){"use strict";var t=function(t,e){var n=t;return{restrict:"A",require:"?ngModel",link:function(t,i,r,a){if("false"===r.placesAutoComplete)return!1;var o=n.filter(r),s=n.getOptions(o,{scope:t}),l=n.getEvents(t,o),u=new google.maps.places.Autocomplete(i[0],s);for(var c in l)google.maps.event.addListener(u,c,l[c]);var d=function(){e(function(){a&&a.$setViewValue(i.val())},100)};google.maps.event.addListener(u,"place_changed",d),i[0].addEventListener("change",d),r.$observe("types",function(t){if(t){var e=n.toOptionValue(t,{key:"types"});u.setTypes(e)}})}}};t.$inject=["Attr2MapOptions","$timeout"],angular.module("ngMap").directive("placesAutoComplete",t)}(),function(){"use strict";var t=function(t,e,n){var i=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,r,a,o){o=o[0]||o[1];var s,l,u=i.orgAttributes(r),c=i.filter(a),d=i.getOptions(c,{scope:t}),h=i.getEvents(t,c);l=d.name,d.center instanceof google.maps.LatLng||(s=d.center);var f=function(t,e){var n,i=t.name;switch(delete t.name,i){case"circle":t.center instanceof google.maps.LatLng||(t.center=new google.maps.LatLng(0,0)),n=new google.maps.Circle(t);break;case"polygon":n=new google.maps.Polygon(t);break;case"polyline":n=new google.maps.Polyline(t);break;case"rectangle":n=new google.maps.Rectangle(t);break;case"groundOverlay":case"image":var r=t.url,a={opacity:t.opacity,clickable:t.clickable,id:t.id};n=new google.maps.GroundOverlay(r,t.bounds,a)}for(var o in e)e[o]&&google.maps.event.addListener(n,o,e[o]);return n}(d,h);o.addObject("shapes",f),s&&"circle"==l&&n.getGeoLocation(s).then(function(n){f.setCenter(n),f.centered&&f.map.setCenter(n);var i=a.geoCallback;i&&e(i)(t)}),o.observeAttrSetObj(u,a,f),r.bind("$destroy",function(){o.deleteObject("shapes",f)})}}};t.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("shape",t)}(),function(){"use strict";var t=function(t,e){var n=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,i,r){var a=n.filter(r),o=n.getOptions(a,{scope:t}),s=n.getControlOptions(a),l=angular.extend(o,s),u=n.getEvents(t,a);e.getMap().then(function(t){var e=function(t,e,n){var i,r;e.container&&(r=document.getElementById(e.container),r=r||document.querySelector(e.container)),r?i=new google.maps.StreetViewPanorama(r,e):(i=t.getStreetView()).setOptions(e);for(var a in n)a&&google.maps.event.addListener(i,a,n[a]);return i}(t,l,u);t.setStreetView(e),!e.getPosition()&&e.setPosition(t.getCenter()),google.maps.event.addListener(e,"position_changed",function(){e.getPosition()!==t.getCenter()&&t.setCenter(e.getPosition())});var n=google.maps.event.addListener(t,"center_changed",function(){e.setPosition(t.getCenter()),google.maps.event.removeListener(n)})})}}};t.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("streetViewPanorama",t)}(),function(){"use strict";angular.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(t){var e=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,r){r=r[0]||r[1];var a=e.orgAttributes(n),o=e.filter(i),s=function(t,e){var n=new google.maps.TrafficLayer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n}(e.getOptions(o,{scope:t}),e.getEvents(t,o));r.addObject("trafficLayers",s),r.observeAttrSetObj(a,i,s),n.bind("$destroy",function(){r.deleteObject("trafficLayers",s)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(t){var e=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,r){r=r[0]||r[1];var a=e.orgAttributes(n),o=e.filter(i),s=function(t,e){var n=new google.maps.TransitLayer(t);for(var i in e)google.maps.event.addListener(n,i,e[i]);return n}(e.getOptions(o,{scope:t}),e.getEvents(t,o));r.addObject("transitLayers",s),r.observeAttrSetObj(a,i,s),n.bind("$destroy",function(){r.deleteObject("transitLayers",s)})}}}])}(),function(){"use strict";var t=/([\:\-\_]+(.))/g,e=/^moz([A-Z])/;angular.module("ngMap").filter("camelCase",function(){return function(n){return n.replace(t,function(t,e,n,i){return i?n.toUpperCase():n}).replace(e,"Moz$1")}})}(),function(){"use strict";angular.module("ngMap").filter("jsonize",function(){return function(t){try{return JSON.parse(t),t}catch(e){return t.replace(/([\$\w]+)\s*:/g,function(t,e){return'"'+e+'":'}).replace(/'([^']+)'/g,function(t,e){return'"'+e+'"'})}}})}(),function(){"use strict";var isoDateRE=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,Attr2MapOptions=function($parse,$timeout,$log,NavigatorGeolocation,GeoCoder,camelCaseFilter,jsonizeFilter){var orgAttributes=function(t){t.length>0&&(t=t[0]);for(var e={},n=0;n<t.attributes.length;n++){var i=t.attributes[n];e[i.name]=i.value}return e},getJSON=function(t){return t.match(/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/)&&(t="["+t+"]"),JSON.parse(jsonizeFilter(t))},getLatLng=function(t){var e=t;return t[0].constructor==Array?e=t.map(function(t){return new google.maps.LatLng(t[0],t[1])}):!isNaN(parseFloat(t[0]))&&isFinite(t[0])&&(e=new google.maps.LatLng(e[0],e[1])),e},toOptionValue=function(input,options){var output;try{output=getNumber(input)}catch(err){try{var output=getJSON(input);if(output instanceof Array)output=output[0].constructor==Object?output:getLatLng(output);else if(output===Object(output)){var newOptions=options;newOptions.doNotConverStringToNumber=!0,output=getOptions(output,newOptions)}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(t){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(t){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=options.key.charAt(0).toUpperCase()+options.key.slice(1);options.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(t){output=input}else if(input.match(isoDateRE))try{output=new Date(input)}catch(t){output=input}else if(input.match(/^{/)&&options.scope)try{var expr=input.replace(/{{/,"").replace(/}}/g,"");output=options.scope.$eval(expr)}catch(t){output=input}else output=input}}if(("center"==options.key||"center"==options.key)&&output instanceof Array&&(output=new google.maps.LatLng(output[0],output[1])),"bounds"==options.key&&output instanceof Array&&(output=new google.maps.LatLngBounds(output[0],output[1])),"icons"==options.key&&output instanceof Array)for(var i=0;i<output.length;i++){var el=output[i];el.icon.path.match(/^[A-Z_]+$/)&&(el.icon.path=google.maps.SymbolPath[el.icon.path])}if("icon"==options.key&&output instanceof Object){(""+output.path).match(/^[A-Z_]+$/)&&(output.path=google.maps.SymbolPath[output.path]);for(var key in output){var arr=output[key];"anchor"==key||"origin"==key||"labelOrigin"==key?output[key]=new google.maps.Point(arr[0],arr[1]):("size"==key||"scaledSize"==key)&&(output[key]=new google.maps.Size(arr[0],arr[1]))}}return output},getAttrsToObserve=function(t){var e=[];if(!t.noWatcher)for(var n in t){var i=t[n];i&&i.match(/\{\{.*\}\}/)&&e.push(camelCaseFilter(n))}return e},filter=function(t){var e={};for(var n in t)n.match(/^\$/)||n.match(/^ng[A-Z]/)||(e[n]=t[n]);return e},getOptions=function(t,e){e=e||{};var n={};for(var i in t)if(t[i]||0===t[i]){if(i.match(/^on[A-Z]/))continue;if(i.match(/ControlOptions$/))continue;n[i]="string"!=typeof t[i]?t[i]:e.doNotConverStringToNumber&&t[i].match(/^[0-9]+$/)?t[i]:toOptionValue(t[i],{key:i,scope:e.scope})}return n},getEvents=function(t,e){var n={},i=function(t){return"_"+t.toLowerCase()},r=function(e){var n=e.match(/([^\(]+)\(([^\)]*)\)/),i=n[1],r=n[2].replace(/event[ ,]*/,""),a=$parse("["+r+"]");return function(e){var n=a(t),r=i.split(".").reduce(function(t,e){return t[e]},t);r&&r.apply(this,[e].concat(n)),$timeout(function(){t.$apply()})}};for(var a in e)if(e[a]){if(!a.match(/^on[A-Z]/))continue;var o=a.replace(/^on/,"");o=(o=o.charAt(0).toLowerCase()+o.slice(1)).replace(/([A-Z])/g,i);var s=e[a];n[o]=new r(s)}return n},getControlOptions=function(t){var e={};if("object"!=typeof t)return!1;for(var n in t)if(t[n]){if(!n.match(/(.*)ControlOptions$/))continue;var i=t[n].replace(/'/g,'"');i=i.replace(/([^"]+)|("[^"]+")/g,function(t,e,n){return e?e.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):n});try{var r=JSON.parse(i);for(var a in r)if(r[a]){var o=r[a];if("string"==typeof o?o=o.toUpperCase():"mapTypeIds"===a&&(o=o.map(function(t){return t.match(/^[A-Z]+$/)?google.maps.MapTypeId[t.toUpperCase()]:t})),"style"===a){var s=(n.charAt(0).toUpperCase()+n.slice(1)).replace(/Options$/,"")+"Style";r[a]=google.maps[s][o]}else r[a]="position"===a?google.maps.ControlPosition[o]:o}e[n]=r}catch(t){}}return e};return{filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};Attr2MapOptions.$inject=["$parse","$timeout","$log","NavigatorGeolocation","GeoCoder","camelCaseFilter","jsonizeFilter"],angular.module("ngMap").service("Attr2MapOptions",Attr2MapOptions)}(),function(){"use strict";var t,e=function(e){var n=t.defer();return(new google.maps.Geocoder).geocode(e,function(t,e){e==google.maps.GeocoderStatus.OK?n.resolve(t):n.reject(e)}),n.promise},n=function(n){return t=n,{geocode:e}};n.$inject=["$q"],angular.module("ngMap").service("GeoCoder",n)}(),function(){"use strict";var t,e=function(e){var n=t.defer();return navigator.geolocation?(void 0===e?e={timeout:5e3}:void 0===e.timeout&&(e.timeout=5e3),navigator.geolocation.getCurrentPosition(function(t){n.resolve(t)},function(t){n.reject(t)},e)):n.reject("Browser Geolocation service failed."),n.promise},n=function(n){return t=n,{getCurrentPosition:e}};n.$inject=["$q"],angular.module("ngMap").service("NavigatorGeolocation",n)}(),function(){"use strict";var t,e,n,i=[],r=function(r){var a=function(t,e){for(var n,r=0;r<i.length;r++){var a=i[r];if(a.id==e&&!a.inUse){var o=a.getDiv();t.appendChild(o),n=a;break}}return n}(r,r.id)||function(t){for(var e,n=0;n<i.length;n++){var r=i[n];if(!r.id&&!r.inUse){var a=r.getDiv();t.appendChild(a),e=r;break}}return e}(r);return a?n(function(){google.maps.event.trigger(a,"idle")},100):a=function(n){var r=e.createElement("div");r.style.width="100%",r.style.height="100%",n.appendChild(r);var a=new t.google.maps.Map(r,{});return i.push(a),a}(r),a.inUse=!0,a},a=function(t){t.inUse=!1},o=function(){for(var t=0;t<i.length;t++)i[t]=null;i=[]},s=function(s,l,u){return e=s[0],t=l,n=u,{mapInstances:i,resetMapInstances:o,getMapInstance:r,returnMapInstance:a}};s.$inject=["$document","$window","$timeout"],angular.module("ngMap").factory("NgMapPool",s)}(),function(){"use strict";var t,e,n,i,r,a,o,s={},l=function(n,i){var r;return n.currentStyle?r=n.currentStyle[i]:t.getComputedStyle&&(r=e.defaultView.getComputedStyle(n,null).getPropertyValue(i)),r},u=function(t){var e=s[t||0];return e.map instanceof google.maps.Map?void 0:(e.initializeMap(),e.map)},c=function(e){function i(n){s[e]?r.resolve(s[e].map):n>a?r.reject("could not find map"):t.setTimeout(function(){i(n+100)},100)}e=(e="object"==typeof e?e.id:e)||0;var r=n.defer(),a=2e3;return i(0),r.promise},d=function(t){if(t.map){var e=Object.keys(s).length;s[t.map.id||e]=t}},h=function(t){var e=Object.keys(s).length-1,n=t.map.id||e;if(t.map){for(var i in t.eventListeners){var r=t.eventListeners[i];google.maps.event.removeListener(r)}t.map.controls&&t.map.controls.forEach(function(t){t.clear()})}t.map.heatmapLayers&&Object.keys(t.map.heatmapLayers).forEach(function(e){t.deleteObject("heatmapLayers",t.map.heatmapLayers[e])}),delete s[n]},f=function(t,e){var r=n.defer();return!t||t.match(/^current/i)?i.getCurrentPosition(e).then(function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new google.maps.LatLng(e,n);r.resolve(i)},function(t){r.reject(t)}):a.geocode({address:t}).then(function(t){r.resolve(t[0].geometry.location)},function(t){r.reject(t)}),r.promise},p=function(t,e){return function(n){if(n){var i=o("set-"+t),a=r.toOptionValue(n,{key:t});e[i]&&(t.match(/center|position/)&&"string"==typeof a?f(a).then(function(t){e[i](t)}):e[i](a))}}},g=function(t){"true"==t.getAttribute("default-style")?(t.style.display="block",t.style.height="300px"):("block"!=l(t,"display")&&(t.style.display="block"),l(t,"height").match(/^(0|auto)/)&&(t.style.height="300px"))};angular.module("ngMap").provider("NgMap",function(){var s={};this.setDefaultOptions=function(t){s=t};var l=function(l,m,v,y,b,x,w){return t=l,e=m[0],n=v,i=y,r=b,a=x,o=w,{defaultOptions:s,addMap:d,deleteMap:h,getMap:c,initMap:u,setStyle:g,getGeoLocation:f,observeAndSet:p}};l.$inject=["$window","$document","$q","NavigatorGeolocation","Attr2MapOptions","GeoCoder","camelCaseFilter"],this.$get=l})}(),function(){"use strict";var t,e=function(e,n){n=n||e.getCenter();var i=t.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(n||e.getCenter,100,function(t,e){e===google.maps.StreetViewStatus.OK?i.resolve(t.location.pano):i.resolve(!1)}),i.promise},n=function(t,e){new google.maps.StreetViewPanorama(t.getDiv(),{enableCloseButton:!0}).setPano(e)},i=function(i){return t=i,{getPanorama:e,setPanorama:n}};i.$inject=["$q"],angular.module("ngMap").service("StreetView",i)}(),"ngMap"}),function(){"use strict";angular.module("as.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"as-sortable-item-handle",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden",dragging:"as-sortable-dragging"})}(),function(){"use strict";angular.module("as.sortable").factory("$helper",["$document","$window",function(t,e){return{height:function(t){return t[0].getBoundingClientRect().height},width:function(t){return t[0].getBoundingClientRect().width},offset:function(n,i){var r=n[0].getBoundingClientRect();return i||(i=t[0].documentElement),{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(e.pageYOffset||i.scrollTop-i.offsetTop),left:r.left+(e.pageXOffset||i.scrollLeft-i.offsetLeft)}},eventObj:function(t){var e=t;return void 0!==t.targetTouches?e=t.targetTouches.item(0):void 0!==t.originalEvent&&void 0!==t.originalEvent.targetTouches&&(e=t.originalEvent.targetTouches.item(0)),e},isTouchInvalid:function(t){var e=!1;return void 0!==t.touches&&t.touches.length>1?e=!0:void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&t.originalEvent.touches.length>1&&(e=!0),e},positionStarted:function(t,e,n){var i={};return i.offsetX=t.pageX-this.offset(e,n).left,i.offsetY=t.pageY-this.offset(e,n).top,i.startX=i.lastX=t.pageX,i.startY=i.lastY=t.pageY,i.nowX=i.nowY=i.distX=i.distY=i.dirAx=0,i.dirX=i.dirY=i.lastDirX=i.lastDirY=i.distAxX=i.distAxY=0,i},calculatePosition:function(t,e){t.lastX=t.nowX,t.lastY=t.nowY,t.nowX=e.pageX,t.nowY=e.pageY,t.distX=t.nowX-t.lastX,t.distY=t.nowY-t.lastY,t.lastDirX=t.dirX,t.lastDirY=t.dirY,t.dirX=0===t.distX?0:t.distX>0?1:-1,t.dirY=0===t.distY?0:t.distY>0?1:-1;var n=Math.abs(t.distX)>Math.abs(t.distY)?1:0;t.dirAx!==n?(t.distAxX=0,t.distAxY=0):(t.distAxX+=Math.abs(t.distX),0!==t.dirX&&t.dirX!==t.lastDirX&&(t.distAxX=0),t.distAxY+=Math.abs(t.distY),0!==t.dirY&&t.dirY!==t.lastDirY&&(t.distAxY=0)),t.dirAx=n},movePosition:function(t,e,n,i,r,a){var o,s="relative"===r;e.x=t.pageX-n.offsetX,e.y=t.pageY-n.offsetY,i&&(o=this.offset(i,a),s&&(e.x-=o.left,e.y-=o.top,o.left=0,o.top=0),e.x<o.left?e.x=o.left:e.x>=o.width+o.left-this.offset(e).width&&(e.x=o.width+o.left-this.offset(e).width),e.y<o.top?e.y=o.top:e.y>=o.height+o.top-this.offset(e).height&&(e.y=o.height+o.top-this.offset(e).height)),e.css({left:e.x+"px",top:e.y+"px"}),this.calculatePosition(n,t)},dragItem:function(t){return{index:t.index(),parent:t.sortableScope,source:t,targetElement:null,targetElementOffset:null,sourceInfo:{index:t.index(),itemScope:t.itemScope,sortableScope:t.sortableScope},canMove:function(t,e,n){return this.targetElement!==e?(this.targetElement=e,this.targetElementOffset=n,!0):(t.dirX*(n.left-this.targetElementOffset.left)>0||t.dirY*(n.top-this.targetElementOffset.top)>0)&&(this.targetElementOffset=n,!0)},moveTo:function(t,e){this.parent=t,this.isSameParent()&&this.source.index()<e&&!this.sourceInfo.sortableScope.cloning&&(e-=1),this.index=e},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.cloning?this.parent.options.clone||this.parent.insertItem(this.index,angular.copy(this.source.modelValue)):(this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),(this.parent.options.allowDuplicates||this.parent.modelValue.indexOf(this.source.modelValue)<0)&&this.parent.insertItem(this.index,this.source.modelValue))}}},noDrag:function(t){return void 0!==t.attr("no-drag")||void 0!==t.attr("data-no-drag")},findAncestor:function(t,e){t=t[0];for(var n=Element.matches||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector;(t=t.parentElement)&&!n.call(t,e););return t?angular.element(t):angular.element(document.body)}}}])}(),function(){"use strict";var t=angular.module("as.sortable");t.controller("as.sortable.sortableController",["$scope",function(t){this.scope=t,t.modelValue=null,t.callbacks=null,t.type="sortable",t.options={longTouch:!1},t.isDisabled=!1,t.insertItem=function(e,n){t.options.allowDuplicates?t.modelValue.splice(e,0,angular.copy(n)):t.modelValue.splice(e,0,n)},t.removeItem=function(e){var n=null;return e>-1&&(n=t.modelValue.splice(e,1)[0]),n},t.isEmpty=function(){return t.modelValue&&0===t.modelValue.length},t.accept=function(e,n,i){return t.callbacks.accept(e,n,i)}}]),t.directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"as.sortable.sortableController",link:function(t,e,n,i){var r,a;(r=i)&&(r.$render=function(){t.modelValue=r.$modelValue},t.element=e,e.data("_scope",t),(a={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragMove:null,dragCancel:null,dragEnd:null}).accept=function(t,e,n){return!0},a.orderChanged=function(t){},a.itemMoved=function(t){},a.dragStart=function(t){},a.dragMove=angular.noop,a.dragCancel=function(t){},a.dragEnd=function(t){},t.$watch(n.asSortable,function(e,n){angular.forEach(e,function(e,n){a[n]?"function"==typeof e&&(a[n]=e):t.options[n]=e}),t.callbacks=a},!0),angular.isDefined(n.isDisabled)&&t.$watch(n.isDisabled,function(e,n){angular.isUndefined(e)||(t.isDisabled=e)},!0))}}})}(),function(){"use strict";var t=angular.module("as.sortable");t.controller("as.sortable.sortableItemHandleController",["$scope",function(t){this.scope=t,t.itemScope=null,t.type="handle"}]);function e(t,n){return!(!n||"HTML"===n.nodeName)&&(n.parentNode===t||e(t,n.parentNode))}t.directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document","$timeout",function(t,n,i,r,a){return{require:"^asSortableItem",scope:!0,restrict:"A",controller:"as.sortable.sortableItemHandleController",link:function(o,s,l,u){var c,d,h,f,p,g,m,v,y,b,x,w,M,k,_,C,S,T,P,A,E,D,O,I,L,F,$,z,B=!1,j=!1;A="ontouchstart"in i,E=/iPad|iPhone|iPod/.test(i.navigator.userAgent)&&!i.MSStream,t.handleClass&&s.addClass(t.handleClass),o.itemScope=u.scope,s.data("_scope",o),o.$watchGroup(["sortableScope.isDisabled","sortableScope.options.longTouch"],function(t){B!==t[0]?(B=t[0])?S():C():j!==t[1]?(j=t[1],S(),C()):C()}),o.$on("$destroy",function(){angular.element(r[0].body).unbind("keydown",z)}),F=function(t){return"function"==typeof o.sortableScope.options.placeholder?angular.element(o.sortableScope.options.placeholder(t)):"string"==typeof o.sortableScope.options.placeholder?angular.element(o.sortableScope.options.placeholder):angular.element(r[0].createElement(t.element.prop("tagName")))},v=function(t){var e,i=function(){angular.element(r).unbind("mousemove",a),angular.element(r).unbind("touchmove",a),s.unbind("mouseup",i),s.unbind("touchend",i),s.unbind("touchcancel",i)},a=function(r){r.preventDefault();var a=n.eventObj(r);e||(e={clientX:a.clientX,clientY:a.clientY}),Math.abs(a.clientX-e.clientX)+Math.abs(a.clientY-e.clientY)>10&&(i(),b(t))};angular.element(r).bind("mousemove",a),angular.element(r).bind("touchmove",a),s.bind("mouseup",i),s.bind("touchend",i),s.bind("touchcancel",i),t.stopPropagation()},b=function(e){var i,a;(A||2!==e.button&&3!==e.which)&&(A&&n.isTouchInvalid(e)||!L&&k(e)&&(L=!0,e.preventDefault(),i=n.eventObj(e),o.sortableScope=o.sortableScope||o.itemScope.sortableScope,o.callbacks=o.callbacks||o.itemScope.callbacks,o.itemScope.sortableScope.options.clone||o.itemScope.sortableScope.options.ctrlClone&&e.ctrlKey?o.itemScope.sortableScope.cloning=!0:o.itemScope.sortableScope.cloning=!1,y=angular.element(r[0].querySelector(o.sortableScope.options.scrollableContainer)).length>0?r[0].querySelector(o.sortableScope.options.scrollableContainer):r[0].documentElement,(g=o.sortableScope.options.containment?n.findAncestor(s,o.sortableScope.options.containment):angular.element(r[0].body)).css("cursor","move"),g.css("cursor","-webkit-grabbing"),g.css("cursor","-moz-grabbing"),g.addClass("as-sortable-un-selectable"),m=o.sortableScope.options.containerPositioning||"absolute",p=n.dragItem(o),a=o.itemScope.element.prop("tagName"),(c=angular.element(r[0].createElement(o.sortableScope.element.prop("tagName"))).addClass(o.sortableScope.element.attr("class")).addClass(t.dragClass)).css("width",n.width(o.itemScope.element)+"px"),c.css("height",n.height(o.itemScope.element)+"px"),(d=F(o.itemScope).addClass(t.placeHolderClass).addClass(o.sortableScope.options.additionalPlaceholderClass)).css("width",n.width(o.itemScope.element)+"px"),d.css("height",n.height(o.itemScope.element)+"px"),h=angular.element(r[0].createElement(a)),t.hiddenClass&&h.addClass(t.hiddenClass),f=n.positionStarted(i,o.itemScope.element,y),o.itemScope.sortableScope.options.clone||o.itemScope.element.after(d),o.itemScope.sortableScope.cloning?c.append(o.itemScope.element.clone()):(o.itemScope.element.after(h),c.append(o.itemScope.element)),g.append(c),n.movePosition(i,c,f,g,m,y),o.sortableScope.$apply(function(){o.callbacks.dragStart(p.eventArgs())}),T()))},k=function(t){var e,i,r;for(r=(i=N(e=angular.element(t.target)))&&"handle"===i.type;r&&e[0]!==s[0];)n.noDrag(e)&&(r=!1),e=e.parent();return r};function R(t,e){"table-row"!==d.css("display")&&d.css("display","block"),e.sortableScope.options.clone||(t[0].parentNode.insertBefore(d[0],t[0]),p.moveTo(e.sortableScope,e.index()))}x=function(a){var s,l,u,h,v;if((!A||!n.isTouchInvalid(a))&&L){if(c){if(a.preventDefault(),s=n.eventObj(a),o.callbacks.dragMove!==angular.noop&&o.sortableScope.$apply(function(){o.callbacks.dragMove(f,g,s)}),l=s.pageX-r[0].documentElement.scrollLeft,u=s.pageY-(i.pageYOffset||r[0].documentElement.scrollTop),c.addClass(t.hiddenClass),v=angular.element(r[0].elementFromPoint(l,u)),c.removeClass(t.hiddenClass),n.movePosition(s,c,f,g,m,y),c.addClass(t.dragging),!(h=N(v))||!h.type)return;if("handle"===h.type&&(h=h.itemScope),"item"!==h.type&&"sortable"!==h.type)return;if("item"===h.type&&h.accept(o,h.sortableScope,h)){v=h.element;var b=n.offset(v,y);if(!p.canMove(f,v,b))return;var x=_(h.sortableScope.element);x<0?R(v,h):x<=h.index()?(w=v,M=h,"table-row"!==d.css("display")&&d.css("display","block"),M.sortableScope.options.clone||(w.after(d),p.moveTo(M.sortableScope,M.index()+1))):R(v,h)}"sortable"===h.type&&h.accept(o,h)&&!e(h.element[0],v[0])&&($(v)||h.options.clone||(v[0].appendChild(d[0]),p.moveTo(h,h.modelValue.length)))}var w,M}};function N(t){for(var e;!e&&t.length;)(e=t.data("_scope"))||(t=t.parent());return e}_=function(e){var n,i;if(e.hasClass(t.placeHolderClass))return 0;for(n=e.children(),i=0;i<n.length;i+=1)if(angular.element(n[i]).hasClass(t.placeHolderClass))return i;return-1},$=function(t){return _(t)>=0};function U(){o.itemScope.sortableScope.cloning||h.replaceWith(o.itemScope.element),d.remove(),c.remove(),c=null,L=!1,g.css("cursor",""),g.removeClass("as-sortable-un-selectable")}w=function(t){L&&(t.preventDefault(),c&&(U(),p.apply(),o.sortableScope.$apply(function(){p.isSameParent()?p.isOrderChanged()&&o.callbacks.orderChanged(p.eventArgs()):o.callbacks.itemMoved(p.eventArgs())}),o.sortableScope.$apply(function(){o.callbacks.dragEnd(p.eventArgs())}),p=null),P())},M=function(t){L&&(t.preventDefault(),c&&(U(),o.sortableScope.$apply(function(){o.callbacks.dragCancel(p.eventArgs())}),p=null),P())},C=function(){A&&(j?E?(s.bind("touchstart",D),s.bind("touchend",O),s.bind("touchmove",O)):s.bind("contextmenu",v):s.bind("touchstart",v)),s.bind("mousedown",v)},S=function(){s.unbind("touchstart",D),s.unbind("touchend",O),s.unbind("touchmove",O),s.unbind("contextmenu",v),s.unbind("touchstart",v),s.unbind("mousedown",v)},D=function(t){I=a(function(){v(t)},500)},O=function(){a.cancel(I)},z=function(t){27===t.keyCode&&M(t)},angular.element(r[0].body).bind("keydown",z),T=function(){angular.element(r).bind("touchmove",x),angular.element(r).bind("touchend",w),angular.element(r).bind("touchcancel",M),angular.element(r).bind("mousemove",x),angular.element(r).bind("mouseup",w)},P=function(){angular.element(r).unbind("touchend",w),angular.element(r).unbind("touchcancel",M),angular.element(r).unbind("touchmove",x),angular.element(r).unbind("mouseup",w),angular.element(r).unbind("mousemove",x)}}}}])}(),function(){"use strict";var t=angular.module("as.sortable");t.controller("as.sortable.sortableItemController",["$scope",function(t){this.scope=t,t.sortableScope=null,t.modelValue=null,t.type="item",t.index=function(){return t.$index},t.itemData=function(){return t.sortableScope.modelValue[t.$index]}}]),t.directive("asSortableItem",["sortableConfig",function(t){return{require:["^asSortable","?ngModel"],restrict:"A",controller:"as.sortable.sortableItemController",link:function(e,n,i,r){var a=r[0],o=r[1];t.itemClass&&n.addClass(t.itemClass),e.sortableScope=a.scope,o?o.$render=function(){e.modelValue=o.$modelValue}:e.modelValue=a.scope.modelValue[e.$index],e.element=n,n.data("_scope",e)}}}])}(),function(t){window.angular.module("ngPrint",[]).directive("ngPrint",[function(){var t=document.getElementById("printSection");return t||((t=document.createElement("div")).id="printSection",document.body.appendChild(t)),{link:function(e,n,i){n.on("click",function(){var e=document.getElementById(i.printElementId);e&&function(e){var n=e.cloneNode(!0);t.innerHTML="",t.appendChild(n),window.print()}(e)}),window.onafterprint=function(){t.innerHTML=""}},restrict:"A"}}])}(),function(){var t={};t.dev=!1,t.tooltip=t.tooltip||{},t.utils=t.utils||{},t.models=t.models||{},t.charts={},t.logs={},t.dom={},t.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),t.dev&&(t.dispatch.on("render_start",function(){t.logs.startTime=+new Date}),t.dispatch.on("render_end",function(){t.logs.endTime=+new Date,t.logs.totalTime=t.logs.endTime-t.logs.startTime,t.log("total",t.logs.totalTime)})),t.log=function(){if(t.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(t.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){Function.prototype.bind.call(console.log,console).apply(console,arguments)}return arguments[arguments.length-1]},t.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},t.render=function(e){e=e||1,t.render.active=!0,t.dispatch.render_start();var n=function(){for(var i,r,a=0;e>a&&(r=t.render.queue[a]);a++)i=r.generate(),typeof r.callback==typeof Function&&r.callback(i);t.render.queue.splice(0,a),t.render.queue.length?setTimeout(n):(t.dispatch.render_end(),t.render.active=!1)};setTimeout(n)},t.render.active=!1,t.render.queue=[],t.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),t.render.queue.push(e),t.render.active||t.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=t),"undefined"!=typeof window&&(window.nv=t),t.dom.write=function(t){return void 0!==window.fastdom?fastdom.write(t):t()},t.dom.read=function(t){return void 0!==window.fastdom?fastdom.read(t):t()},t.interactiveGuideline=function(){"use strict";function e(d){d.each(function(d){function h(){var t=d3.mouse(this),i=t[0],r=t[1],l=!0,u=!1;if(c&&(i=d3.event.offsetX,r=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(u=!0)),l&&(i-=a.left,r-=a.top),0>i||0>r||i>p||r>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(n.nvPointerEventsClass)))return;return s.elementMouseout({mouseX:i,mouseY:r}),e.renderGuideLine(null),void n.hidden(!0)}n.hidden(!1);var d=o.invert(i);s.elementMousemove({mouseX:i,mouseY:r,pointXValue:d}),"dblclick"===d3.event.type&&s.elementDblclick({mouseX:i,mouseY:r,pointXValue:d}),"click"===d3.event.type&&s.elementClick({mouseX:i,mouseY:r,pointXValue:d})}var f=d3.select(this),p=i||960,g=r||400,m=f.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]);m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),u&&(u.on("touchmove",h).on("mousemove",h,!0).on("mouseout",h,!0).on("dblclick",h).on("click",h),e.guideLine=null,e.renderGuideLine=function(n){l&&(e.guideLine&&e.guideLine.attr("x1")===n||t.dom.write(function(){var e=m.select(".nv-interactiveGuideLine").selectAll("line").data(null!=n?[t.utils.NaNtoZero(n)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",g).attr("y2",0),e.exit().remove()}))})})}var n=t.models.tooltip();n.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var i=null,r=null,a={left:0,top:0},o=d3.scale.linear(),s=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),l=!0,u=null,c="ActiveXObject"in window;return e.dispatch=s,e.tooltip=n,e.margin=function(t){return arguments.length?(a.top=void 0!==t.top?t.top:a.top,a.left=void 0!==t.left?t.left:a.left,e):a},e.width=function(t){return arguments.length?(i=t,e):i},e.height=function(t){return arguments.length?(r=t,e):r},e.xScale=function(t){return arguments.length?(o=t,e):o},e.showGuideLine=function(t){return arguments.length?(l=t,e):l},e.svgContainer=function(t){return arguments.length?(u=t,e):u},e},t.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var i;i="function"!=typeof n?function(t){return t.x}:n;var r=d3.bisector(function(t,e){return i(t)-e}).left,a=d3.max([0,r(t,e)-1]),o=i(t[a]);if(void 0===o&&(o=a),o===e)return a;var s=d3.min([a+1,t.length-1]),l=i(t[s]);return void 0===l&&(l=s),Math.abs(l-e)>=Math.abs(o-e)?a:s},t.nearestValueIndex=function(t,e,n){"use strict";var i=1/0,r=null;return t.forEach(function(t,a){var o=Math.abs(e-t);null!=t&&i>=o&&n>o&&(i=o,r=a)}),r},function(){"use strict";t.models.tooltip=function(){function e(){if(g&&C(n)){!function(){if(l){var t=d3.select(l);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"),10)/e[2];f.left=f.left*n,f.top=f.top*n}}}();var i=f.left,r=null!==o?o:f.top;return t.dom.write(function(){!function(){if(!d){var t;t=l||document.body,(d=d3.select(t).append("div").attr("class","nvtooltip "+(s||"xy-tooltip")).attr("id",b)).style("top",0).style("left",0),d.style("opacity",0),d.selectAll("div, table, td, tr").classed(x,!0),d.classed(x,!0),h=d.node()}}();var e=_(n);e&&(h.innerHTML=e),l&&y?t.dom.read(function(){var t=l.getElementsByTagName("svg")[0],e={left:0,top:0};if(t){var n=t.getBoundingClientRect(),o=l.getBoundingClientRect(),s=n.top;if(0>s){var u=l.getBoundingClientRect();s=Math.abs(s)>u.height?0:s}e.top=Math.abs(s-o.top),e.left=Math.abs(n.left-o.left)}i+=l.offsetLeft+e.left-2*l.scrollLeft,r+=l.offsetTop+e.top-2*l.scrollTop,a&&a>0&&(r=Math.floor(r/a)*a),S([i,r])}):S([i,r])}),e}}var n=null,i="w",r=25,a=0,o=null,s=null,l=null,u=!0,c=400,d=null,h=null,f={left:null,top:null},p={left:0,top:0},g=!0,m=100,v=!0,y=!1,b="nvtooltip-"+Math.floor(1e5*Math.random()),x="nv-pointer-events-none",w=function(t){return t},M=function(t){return t},k=function(t){return t},_=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));if(v){e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(M(t.value))}var n=e.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});n.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),n.append("td").classed("key",!0).html(function(t,e){return k(t.key,e)}),n.append("td").classed("value",!0).html(function(t,e){return w(t.value,e)}),n.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var i=e.node().outerHTML;return void 0!==t.footer&&(i+="<div class='footer'>"+t.footer+"</div>"),i},C=function(t){if(t&&t.series){if(t.series instanceof Array)return!!t.series.length;if(t.series instanceof Object)return t.series=[t.series],!0}return!1},S=function(e){h&&t.dom.read(function(){var n,a,o=parseInt(h.offsetHeight,10),s=parseInt(h.offsetWidth,10),l=t.utils.windowSize().width,f=t.utils.windowSize().height,g=window.pageYOffset,v=window.pageXOffset;f=window.innerWidth>=document.body.scrollWidth?f:f-16,l=window.innerHeight>=document.body.scrollHeight?l:l-16;var y,b,x=function(t){var e=a;do{isNaN(t.offsetTop)||(e+=t.offsetTop),t=t.offsetParent}while(t);return e},w=function(t){var e=n;do{isNaN(t.offsetLeft)||(e+=t.offsetLeft),t=t.offsetParent}while(t);return e};switch(i){case"e":n=e[0]-s-r,a=e[1]-o/2,y=w(h),b=x(h),v>y&&(n=e[0]+r>v?e[0]+r:v-y+n),g>b&&(a=g-b+a),b+o>g+f&&(a=g+f-b+a-o);break;case"w":n=e[0]+r,a=e[1]-o/2,y=w(h),b=x(h),y+s>l&&(n=e[0]-s-r),g>b&&(a=g+5),b+o>g+f&&(a=g+f-b+a-o);break;case"n":n=e[0]-s/2-5,a=e[1]+r,y=w(h),b=x(h),v>y&&(n=v+5),y+s>l&&(n=n-s/2+5),b+o>g+f&&(a=g+f-b+a-o);break;case"s":n=e[0]-s/2,a=e[1]-o-r,y=w(h),b=x(h),v>y&&(n=v+5),y+s>l&&(n=n-s/2+5),g>b&&(a=g);break;case"none":n=e[0],a=e[1]-r,y=w(h),b=x(h)}n-=p.left,a-=p.top;var M=h.getBoundingClientRect(),k=(g=window.pageYOffset||document.documentElement.scrollTop,v=window.pageXOffset||document.documentElement.scrollLeft,"translate("+(M.left+v)+"px, "+(M.top+g)+"px)"),_="translate("+n+"px, "+a+"px)",C=d3.interpolateString(k,_),S=d.style("opacity")<.1;u?d.transition().delay(c).duration(0).style("opacity",0):d.interrupt().transition().duration(S?0:m).styleTween("transform",function(){return C},"important").style("-webkit-transform",_).style("opacity",1)})};return e.nvPointerEventsClass=x,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{duration:{get:function(){return m},set:function(t){m=t}},gravity:{get:function(){return i},set:function(t){i=t}},distance:{get:function(){return r},set:function(t){r=t}},snapDistance:{get:function(){return a},set:function(t){a=t}},classes:{get:function(){return s},set:function(t){s=t}},chartContainer:{get:function(){return l},set:function(t){l=t}},fixedTop:{get:function(){return o},set:function(t){o=t}},enabled:{get:function(){return g},set:function(t){g=t}},hideDelay:{get:function(){return c},set:function(t){c=t}},contentGenerator:{get:function(){return _},set:function(t){_=t}},valueFormatter:{get:function(){return w},set:function(t){w=t}},headerFormatter:{get:function(){return M},set:function(t){M=t}},keyFormatter:{get:function(){return k},set:function(t){k=t}},headerEnabled:{get:function(){return v},set:function(t){v=t}},_isInteractiveLayer:{get:function(){return y},set:function(t){y=!!t}},position:{get:function(){return f},set:function(t){f.left=void 0!==t.left?t.left:f.left,f.top=void 0!==t.top?t.top:f.top}},offset:{get:function(){return p},set:function(t){p.left=void 0!==t.left?t.left:p.left,p.top=void 0!==t.top?t.top:p.top}},hidden:{get:function(){return u},set:function(t){u!=t&&(u=!!t,e())}},data:{get:function(){return n},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),n=t}},tooltipElem:{get:function(){return h},set:function(){}},id:{get:function(){return b},set:function(){}}}),t.utils.initOptions(e),e}}(),t.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},t.utils.windowResize=function(e){return window.addEventListener?window.addEventListener("resize",e):t.log("ERROR: Failed to bind to window.resize with: ",e),{callback:e,clear:function(){window.removeEventListener("resize",e)}}},t.utils.getColor=function(e){if(void 0===e)return t.utils.defaultColor();if(Array.isArray(e)){var n=d3.scale.ordinal().range(e);return function(t,e){var i=void 0===e?t:e;return t.color||n(i)}}return e},t.utils.defaultColor=function(){return t.utils.getColor(d3.scale.category20().range())},t.utils.customTheme=function(t,e,n){e=e||function(t){return t.key};var i=(n=n||d3.scale.category20().range()).length;return function(r){var a=e(r);return"function"==typeof t[a]?t[a]():void 0!==t[a]?t[a]:(i||(i=n.length),n[i-=1])}},t.utils.pjax=function(e,n){var i=function(i){d3.html(i,function(i){var r=d3.select(n).node();r.parentNode.replaceChild(d3.select(i).select(n).node(),r),t.utils.pjax(e,n)})};d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),i(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&i(d3.event.state)})},t.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px",""),10);return t.text().length*e*.5}return 0},t.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||1/0===t||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},t.utils.renderWatch=function(e,n){if(!(this instanceof t.utils.renderWatch))return new t.utils.renderWatch(e,n);var i=void 0!==n?n:250,r=[],a=this;this.models=function(t){return[].slice.call(arguments,0).forEach(function(t){t.__rendered=!1,(e=t).dispatch.on("renderEnd",function(){e.__rendered=!0,a.renderEnd("model")}),r.indexOf(t)<0&&r.push(t);var e}),this},this.reset=function(t){void 0!==t&&(i=t),r=[]},this.transition=function(t,e,n){if(n=(e=arguments.length>1?[].slice.call(arguments,1):[]).length>1?e.pop():void 0!==i?i:250,t.__rendered=!1,r.indexOf(t)<0&&r.push(t),0===n)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;t.__rendered=0===t.length||!!t.every(function(t){return!t.length});var o=0;return t.transition().duration(n).each(function(){++o}).each("end",function(){0==--o&&(t.__rendered=!0,a.renderEnd.apply(this,e))})},this.renderEnd=function(){r.every(function(t){return t.__rendered})&&(r.forEach(function(t){t.__rendered=!1}),e.renderEnd.apply(this,arguments))}},t.utils.deepExtend=function(e){(arguments.length>1?[].slice.call(arguments,1):[]).forEach(function(n){for(var i in n){var r=e[i]instanceof Array,a="object"==typeof e[i],o="object"==typeof n[i];a&&!r&&o?t.utils.deepExtend(e[i],n[i]):e[i]=n[i]}})},t.utils.state=function(){if(!(this instanceof t.utils.state))return new t.utils.state;var e={},n=function(){},i=function(){return{}},r=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){n(t,!0)}),this.getter=function(t){return i=t,this},this.setter=function(t,e){return e||(e=function(){}),n=function(n,i){t(n),i&&e()},this},this.init=function(e){r=r||{},t.utils.deepExtend(r,e)};this.update=function(){r&&(n(r,!1),r=null),function(){var t=i();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)void 0===e[n]&&(e[n]={}),e[n]=t[n],!0;return!0}.call(this)&&this.dispatch.change(e)}},t.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},t.utils.calcTicksX=function(e,n){for(var i=1,r=0;r<n.length;r+=1){var a=n[r]&&n[r].values?n[r].values.length:0;i=a>i?a:i}return t.log("Requested number of ticks: ",e),t.log("Calculated max values to be: ",i),e=1>(e=e>i?e=i-1:e)?1:e,e=Math.floor(e),t.log("Calculating tick count as: ",e),e},t.utils.calcTicksY=function(e,n){return t.utils.calcTicksX(e,n)},t.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},t.utils.initOptions=function(e){e._overrides=e._overrides||{};var n=Object.getOwnPropertyNames(e._options||{}),i=Object.getOwnPropertyNames(e._calls||{});n=n.concat(i);for(var r in n)t.utils.initOption(e,n[r])},t.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},t.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},t.utils.symbolMap=d3.map(),t.utils.symbol=function(){function e(e,r){var a=n.call(this,e,r),o=i.call(this,e,r);return-1!==d3.svg.symbolTypes.indexOf(a)?d3.svg.symbol().type(a).size(o)():t.utils.symbolMap.get(a)(o)}var n,i=64;return e.type=function(t){return arguments.length?(n=d3.functor(t),e):n},e.size=function(t){return arguments.length?(i=d3.functor(t),e):i},e},t.utils.inheritOptions=function(e,n){var i=Object.getOwnPropertyNames(n._options||{}),r=Object.getOwnPropertyNames(n._calls||{}),a=n._inherited||[],o=n._d3options||[],s=i.concat(r).concat(a).concat(o);s.unshift(n),s.unshift(e),d3.rebind.apply(this,s),e._inherited=t.utils.arrayUnique(i.concat(r).concat(a).concat(i).concat(e._inherited||[])),e._d3options=t.utils.arrayUnique(o.concat(e._d3options||[]))},t.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},t.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},t.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},t.utils.availableHeight=function(e,n,i){return t.utils.sanitizeHeight(e,n)-i.top-i.bottom},t.utils.availableWidth=function(e,n,i){return t.utils.sanitizeWidth(e,n)-i.left-i.right},t.utils.noData=function(e,n){var i=e.options(),r=i.margin(),a=i.noData(),o=null==a?["No Data Available."]:[a],s=t.utils.availableHeight(i.height(),n,r),l=t.utils.availableWidth(i.width(),n,r),u=r.left+l/2,c=r.top+s/2;n.selectAll("g").remove();var d=n.selectAll(".nv-noData").data(o);d.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),d.attr("x",u).attr("y",c).text(function(t){return t})},t.models.axis=function(){"use strict";function e(o){return y.reset(),o.each(function(e){var o=d3.select(this);t.utils.initSVG(o);var g=o.selectAll("g.nv-wrap.nv-axis").data([e]),m=(g.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),g.select("g"));null!==f?n.ticks(f):("top"==n.orient()||"bottom"==n.orient())&&n.ticks(Math.abs(i.range()[1]-i.range()[0])/100),m.watchTransition(y,"axis").call(n),v=v||n.scale();var b=n.tickFormat();null==b&&(b=v.tickFormat());var x=m.selectAll("text.nv-axislabel").data([s||null]);x.exit().remove();var w,M,k;switch(n.orient()){case"top":x.enter().append("text").attr("class","nv-axislabel"),k=i.range().length<2?0:2===i.range().length?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]),x.attr("text-anchor","middle").attr("y",0).attr("x",k/2),l&&(M=g.selectAll("g.nv-axisMaxMin").data(i.domain()),M.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),M.exit().remove(),M.attr("transform",function(e){return"translate("+t.utils.NaNtoZero(i(e))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),M.watchTransition(y,"min-max top").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(i.range()[n])+",0)"}));break;case"bottom":w=p+36;var _=30,C=0,S=m.selectAll("g").select("text"),T="";if(u%360){S.each(function(){var t=this.getBoundingClientRect(),e=t.width;C=t.height,e>_&&(_=e)}),T="rotate("+u+" 0,"+(C/2+n.tickPadding())+")";var P=Math.abs(Math.sin(u*Math.PI/180));w=(P?P*_:_)+30,S.attr("transform",T).style("text-anchor",u%360>0?"start":"end")}x.enter().append("text").attr("class","nv-axislabel"),k=i.range().length<2?0:2===i.range().length?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]),x.attr("text-anchor","middle").attr("y",w).attr("x",k/2),l&&(M=g.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]]),M.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),M.exit().remove(),M.attr("transform",function(e){return"translate("+t.utils.NaNtoZero(i(e)+(h?i.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",T).style("text-anchor",u?u%360>0?"start":"end":"middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),M.watchTransition(y,"min-max bottom").attr("transform",function(e){return"translate("+t.utils.NaNtoZero(i(e)+(h?i.rangeBand()/2:0))+",0)"})),d&&S.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",c?"middle":"begin").attr("transform",c?"rotate(90)":"").attr("y",c?12-Math.max(r.right,a):-10).attr("x",c?d3.max(i.range())/2:n.tickPadding()),l&&(M=g.selectAll("g.nv-axisMaxMin").data(i.domain()),M.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),M.exit().remove(),M.attr("transform",function(e){return"translate(0,"+t.utils.NaNtoZero(i(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),M.watchTransition(y,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"}).select("text").style("opacity",1));break;case"left":x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",c?"middle":"end").attr("transform",c?"rotate(-90)":"").attr("y",c?25-Math.max(r.left,a)-(p||0):-10).attr("x",c?-d3.max(i.range())/2:-n.tickPadding()),l&&(M=g.selectAll("g.nv-axisMaxMin").data(i.domain()),M.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),M.exit().remove(),M.attr("transform",function(e){return"translate(0,"+t.utils.NaNtoZero(v(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),M.watchTransition(y,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"}).select("text").style("opacity",1))}if(x.text(function(t){return t}),!l||"left"!==n.orient()&&"right"!==n.orient()||(m.selectAll("g").each(function(t){d3.select(this).select("text").attr("opacity",1),(i(t)<i.range()[1]+10||i(t)>i.range()[0]-10)&&((t>1e-10||-1e-10>t)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),i.domain()[0]==i.domain()[1]&&0==i.domain()[0]&&g.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===n.orient()||"bottom"===n.orient())){var A=[];g.selectAll("g.nv-axisMaxMin").each(function(t,e){try{A.push(e?i(t)-this.getBoundingClientRect().width-4:i(t)+this.getBoundingClientRect().width+4)}catch(n){A.push(e?i(t)-4:i(t)+4)}}),m.selectAll("g").each(function(t){(i(t)<A[0]||i(t)>A[1])&&(t>1e-10||-1e-10>t?d3.select(this).remove():d3.select(this).select("text").remove())})}m.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),v=i.copy()}),y.renderEnd("axis immediate"),e}var n=d3.svg.axis(),i=d3.scale.linear(),r={top:0,right:0,bottom:0,left:0},a=75,o=60,s=null,l=!0,u=0,c=!0,d=!1,h=!1,f=null,p=0,g=250,m=d3.dispatch("renderEnd");n.scale(i).orient("bottom").tickFormat(function(t){return t});var v,y=t.utils.renderWatch(m,g);return e.axis=n,e.dispatch=m,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{axisLabelDistance:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return d},set:function(t){d=t}},rotateLabels:{get:function(){return u},set:function(t){u=t}},rotateYLabel:{get:function(){return c},set:function(t){c=t}},showMaxMin:{get:function(){return l},set:function(t){l=t}},axisLabel:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return o},set:function(t){o=t}},ticks:{get:function(){return f},set:function(t){f=t}},width:{get:function(){return a},set:function(t){a=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},duration:{get:function(){return g},set:function(t){g=t,y.reset(g)}},scale:{get:function(){return i},set:function(r){i=r,n.scale(i),h="function"==typeof i.rangeBands,t.utils.inheritOptionsD3(e,i,["domain","range","rangeBand","rangeBands"])}}}),t.utils.initOptions(e),t.utils.inheritOptionsD3(e,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),t.utils.inheritOptionsD3(e,i,["domain","range","rangeBand","rangeBands"]),e},t.models.boxPlot=function(){"use strict";function e(d){return w.reset(),d.each(function(e){var d=u-l.left-l.right,g=c-l.top-l.bottom;v=d3.select(this),t.utils.initSVG(v),h.domain(n||e.map(function(t,e){return p(t,e)})).rangeBands(r||[0,d],.1);var M=[];if(!i){M=[d3.min(e.map(function(t){var e=[];return e.push(t.values.Q1),t.values.hasOwnProperty("whisker_low")&&null!==t.values.whisker_low&&e.push(t.values.whisker_low),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.min(e)})),d3.max(e.map(function(t){var e=[];return e.push(t.values.Q3),t.values.hasOwnProperty("whisker_high")&&null!==t.values.whisker_high&&e.push(t.values.whisker_high),t.values.hasOwnProperty("outliers")&&null!==t.values.outliers&&(e=e.concat(t.values.outliers)),d3.max(e)}))]}f.domain(i||M),f.range(a||[g,0]),o=o||h,s=s||f.copy().range([f(0),f(0)]);var k=v.selectAll("g.nv-wrap").data([e]);k.enter().append("g").attr("class","nvd3 nv-wrap"),k.attr("transform","translate("+l.left+","+l.top+")");var _=k.selectAll(".nv-boxplot").data(function(t){return t}),C=_.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);_.attr("class","nv-boxplot").attr("transform",function(t,e){return"translate("+(h(p(t,e))+.05*h.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),_.watchTransition(w,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(t,n){return n*b/e.length}).attr("transform",function(t,e){return"translate("+(h(p(t,e))+.05*h.rangeBand())+", 0)"}),_.exit().remove(),C.each(function(t,e){var n=d3.select(this);["low","high"].forEach(function(i){t.values.hasOwnProperty("whisker_"+i)&&null!==t.values["whisker_"+i]&&(n.append("line").style("stroke",t.color?t.color:m(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+i),n.append("line").style("stroke",t.color?t.color:m(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+i))})});var S=_.selectAll(".nv-boxplot-outlier").data(function(t){return t.values.hasOwnProperty("outliers")&&null!==t.values.outliers?t.values.outliers:[]});S.enter().append("circle").style("fill",function(t,e,n){return m(t,n)}).style("stroke",function(t,e,n){return m(t,n)}).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),y.elementMouseover({series:{key:t,color:m(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),y.elementMouseout({series:{key:t,color:m(t,n)},e:d3.event})}).on("mousemove",function(){y.elementMousemove({e:d3.event})}),S.attr("class","nv-boxplot-outlier"),S.watchTransition(w,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*h.rangeBand()).attr("cy",function(t){return f(t)}).attr("r","3"),S.exit().remove();var T=function(){return null===x?.9*h.rangeBand():Math.min(75,.9*h.rangeBand())},P=function(){return.45*h.rangeBand()-T()/2},A=function(){return.45*h.rangeBand()+T()/2};["low","high"].forEach(function(t){var e="low"===t?"Q1":"Q3";_.select("line.nv-boxplot-whisker.nv-boxplot-"+t).watchTransition(w,"nv-boxplot: boxplots").attr("x1",.45*h.rangeBand()).attr("y1",function(e){return f(e.values["whisker_"+t])}).attr("x2",.45*h.rangeBand()).attr("y2",function(t){return f(t.values[e])}),_.select("line.nv-boxplot-tick.nv-boxplot-"+t).watchTransition(w,"nv-boxplot: boxplots").attr("x1",P).attr("y1",function(e){return f(e.values["whisker_"+t])}).attr("x2",A).attr("y2",function(e){return f(e.values["whisker_"+t])})}),["low","high"].forEach(function(t){C.selectAll(".nv-boxplot-"+t).on("mouseover",function(e,n,i){d3.select(this).classed("hover",!0),y.elementMouseover({series:{key:e.values["whisker_"+t],color:m(e,i)},e:d3.event})}).on("mouseout",function(e,n,i){d3.select(this).classed("hover",!1),y.elementMouseout({series:{key:e.values["whisker_"+t],color:m(e,i)},e:d3.event})}).on("mousemove",function(){y.elementMousemove({e:d3.event})})}),C.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),y.elementMouseover({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||m(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||m(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||m(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),y.elementMouseout({key:t.label,value:t.label,series:[{key:"Q3",value:t.values.Q3,color:t.color||m(t,e)},{key:"Q2",value:t.values.Q2,color:t.color||m(t,e)},{key:"Q1",value:t.values.Q1,color:t.color||m(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(){y.elementMousemove({e:d3.event})}),_.select("rect.nv-boxplot-box").watchTransition(w,"nv-boxplot: boxes").attr("y",function(t){return f(t.values.Q3)}).attr("width",T).attr("x",P).attr("height",function(t){return Math.abs(f(t.values.Q3)-f(t.values.Q1))||1}).style("fill",function(t,e){return t.color||m(t,e)}).style("stroke",function(t,e){return t.color||m(t,e)}),C.append("line").attr("class","nv-boxplot-median"),_.select("line.nv-boxplot-median").watchTransition(w,"nv-boxplot: boxplots line").attr("x1",P).attr("y1",function(t){return f(t.values.Q2)}).attr("x2",A).attr("y2",function(t){return f(t.values.Q2)}),o=h.copy(),s=f.copy()}),w.renderEnd("nv-boxplot immediate"),e}var n,i,r,a,o,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),f=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},m=t.utils.defaultColor(),v=null,y=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),b=250,x=null,w=t.utils.renderWatch(y,b);return e.dispatch=y,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},maxBoxWidth:{get:function(){return x},set:function(t){x=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return a},set:function(t){a=t}},id:{get:function(){return d},set:function(t){d=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}},duration:{get:function(){return b},set:function(t){b=t,w.reset(b)}}}),t.utils.initOptions(e),e},t.models.boxPlotChart=function(){"use strict";function e(c){return b.reset(),b.models(r),d&&b.models(a),h&&b.models(o),c.each(function(c){var g=d3.select(this);t.utils.initSVG(g);var b=(l||parseInt(g.style("width"))||960)-s.left-s.right,x=(u||parseInt(g.style("height"))||400)-s.top-s.bottom;if(e.update=function(){v.beforeUpdate(),g.transition().duration(y).call(e)},e.container=this,!(c&&c.length&&c.filter(function(t){return t.values.hasOwnProperty("Q1")&&t.values.hasOwnProperty("Q2")&&t.values.hasOwnProperty("Q3")}).length)){var w=g.selectAll(".nv-noData").data([m]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",s.left+b/2).attr("y",s.top+x/2).text(function(t){return t}),e}g.selectAll(".nv-noData").remove(),n=r.xScale(),i=r.yScale().clamp(!0);var M=g.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([c]),k=M.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),_=k.append("defs"),C=M.select("g");k.append("g").attr("class","nv-x nv-axis"),k.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),k.append("g").attr("class","nv-barsWrap"),C.attr("transform","translate("+s.left+","+s.top+")"),f&&C.select(".nv-y.nv-axis").attr("transform","translate("+b+",0)"),r.width(b).height(x);if(C.select(".nv-barsWrap").datum(c.filter(function(t){return!t.disabled})).transition().call(r),_.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),C.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",n.rangeBand()*(p?2:1)).attr("height",16).attr("x",-n.rangeBand()/(p?1:2)),d){a.scale(n).ticks(t.utils.calcTicksX(b/100,c)).tickSize(-x,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),C.select(".nv-x.nv-axis").call(a);var S=C.select(".nv-x.nv-axis").selectAll("g");p&&S.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}h&&(o.scale(i).ticks(Math.floor(x/36)).tickSize(-b,0),C.select(".nv-y.nv-axis").call(o)),C.select(".nv-zeroLine line").attr("x1",0).attr("x2",b).attr("y1",i(0)).attr("y2",i(0))}),b.renderEnd("nv-boxplot chart immediate"),e}var n,i,r=t.models.boxPlot(),a=t.models.axis(),o=t.models.axis(),s={top:15,right:10,bottom:50,left:60},l=null,u=null,c=t.utils.getColor(),d=!0,h=!0,f=!1,p=!1,g=t.models.tooltip(),m="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),y=250;a.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(f?"right":"left").tickFormat(d3.format(",.1f")),g.duration(0);var b=t.utils.renderWatch(v,y);return r.dispatch.on("elementMouseover.tooltip",function(t){g.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){g.data(t).hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(){g.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.dispatch=v,e.boxplot=r,e.xAxis=a,e.yAxis=o,e.tooltip=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},staggerLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return d},set:function(t){d=t}},showYAxis:{get:function(){return h},set:function(t){h=t}},tooltips:{get:function(){return tooltips},set:function(t){tooltips=t}},tooltipContent:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return y},set:function(t){y=t,b.reset(y),r.duration(y),a.duration(y),o.duration(y)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),r.color(c)}},rightAlignYAxis:{get:function(){return f},set:function(t){f=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.bullet=function(){"use strict";function e(i){return i.each(function(e,i){var g=h-n.left-n.right,y=f-n.top-n.bottom;p=d3.select(this),t.utils.initSVG(p);var b=a.call(this,e,i).slice().sort(d3.descending),x=o.call(this,e,i).slice().sort(d3.descending),w=s.call(this,e,i).slice().sort(d3.descending),M=l.call(this,e,i).slice(),k=u.call(this,e,i).slice(),_=c.call(this,e,i).slice(),C=d3.scale.linear().domain(d3.extent(d3.merge([d,b]))).range(r?[g,0]:[0,g]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(C.range()),this.__chart__=C;var S=d3.min(b),T=d3.max(b),P=b[1],A=p.selectAll("g.nv-wrap.nv-bullet").data([e]),E=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),D=A.select("g");E.append("rect").attr("class","nv-range nv-rangeMax"),E.append("rect").attr("class","nv-range nv-rangeAvg"),E.append("rect").attr("class","nv-range nv-rangeMin"),E.append("rect").attr("class","nv-measure"),A.attr("transform","translate("+n.left+","+n.top+")");var O=function(t){return Math.abs(C(t)-C(0))},I=function(t){return C(0>t?t:0)};D.select("rect.nv-rangeMax").attr("height",y).attr("width",O(T>0?T:S)).attr("x",I(T>0?T:S)).datum(T>0?T:S),D.select("rect.nv-rangeAvg").attr("height",y).attr("width",O(P)).attr("x",I(P)).datum(P),D.select("rect.nv-rangeMin").attr("height",y).attr("width",O(T)).attr("x",I(T)).attr("width",O(T>0?S:T)).attr("x",I(T>0?S:T)).datum(T>0?S:T),D.select("rect.nv-measure").style("fill",m).attr("height",y/3).attr("y",y/3).attr("width",0>w?C(0)-C(w[0]):C(w[0])-C(0)).attr("x",I(w)).on("mouseover",function(){v.elementMouseover({value:w[0],label:_[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){v.elementMousemove({value:w[0],label:_[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){v.elementMouseout({value:w[0],label:_[0]||"Current",color:d3.select(this).style("fill")})});var L=y/6,F=x.map(function(t,e){return{value:t,label:k[e]}});E.selectAll("path.nv-markerTriangle").data(F).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(t){return"translate("+C(t.value)+","+y/2+")"}).attr("d","M0,"+L+"L"+L+","+-L+" "+-L+","+-L+"Z").on("mouseover",function(t){v.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[C(t.value),y/2]})}).on("mousemove",function(t){v.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t){v.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),A.selectAll(".nv-range").on("mouseover",function(t,e){var n=M[e]||(e?1==e?"Mean":"Minimum":"Maximum");v.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})}).on("mousemove",function(){v.elementMousemove({value:w[0],label:_[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){var n=M[e]||(e?1==e?"Mean":"Minimum":"Maximum");v.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})})}),e}var n={top:0,right:0,bottom:0,left:0},i="left",r=!1,a=function(t){return t.ranges},o=function(t){return t.markers?t.markers:[0]},s=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},u=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.measureLabels?t.measureLabels:[]},d=[0],h=380,f=30,p=null,g=null,m=t.utils.getColor(["#1f77b4"]),v=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");return e.dispatch=v,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return o},set:function(t){o=t}},measures:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return d},set:function(t){d=t}},width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return f},set:function(t){f=t}},tickFormat:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},orient:{get:function(){return i},set:function(t){r="right"==(i=t)||"bottom"==i}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.bulletChart=function(){"use strict";function e(i){return i.each(function(r,p){var g=d3.select(this);t.utils.initSVG(g);var m=t.utils.availableWidth(c,g,o),v=d-o.top-o.bottom;if(e.update=function(){e(i)},e.container=this,!r||!s.call(this,r,p))return t.utils.noData(e,g),e;g.selectAll(".nv-noData").remove();var y=s.call(this,r,p).slice().sort(d3.descending),b=l.call(this,r,p).slice().sort(d3.descending),x=u.call(this,r,p).slice().sort(d3.descending),w=g.selectAll("g.nv-wrap.nv-bulletChart").data([r]),M=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),k=w.select("g");M.append("g").attr("class","nv-bulletWrap"),M.append("g").attr("class","nv-titles"),w.attr("transform","translate("+o.left+","+o.top+")");var _=d3.scale.linear().domain([0,Math.max(y[0],b[0],x[0])]).range(a?[m,0]:[0,m]),C=this.__chart__||d3.scale.linear().domain([0,1/0]).range(_.range());this.__chart__=_;var S=M.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(d-o.top-o.bottom)/2+")");S.append("text").attr("class","nv-title").text(function(t){return t.title}),S.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),n.width(m).height(v);var T=k.select(".nv-bulletWrap");d3.transition(T).call(n);var P=h||_.tickFormat(m/100),A=k.selectAll("g.nv-tick").data(_.ticks(f||m/50),function(t){return this.textContent||P(t)}),E=A.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+C(t)+",0)"}).style("opacity",1e-6);E.append("line").attr("y1",v).attr("y2",7*v/6),E.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*v/6).text(P);var D=d3.transition(A).attr("transform",function(t){return"translate("+_(t)+",0)"}).style("opacity",1);D.select("line").attr("y1",v).attr("y2",7*v/6),D.select("text").attr("y",7*v/6),d3.transition(A.exit()).attr("transform",function(t){return"translate("+_(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),e}var n=t.models.bullet(),i=t.models.tooltip(),r="left",a=!1,o={top:5,right:40,bottom:20,left:120},s=function(t){return t.ranges},l=function(t){return t.markers?t.markers:[0]},u=function(t){return t.measures},c=null,d=55,h=null,f=null,p=null,g=d3.dispatch("tooltipShow","tooltipHide");return i.duration(0).headerEnabled(!1),n.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},i.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(){i.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(){i.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.bullet=n,e.dispatch=g,e.tooltip=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{ranges:{get:function(){return s},set:function(t){s=t}},markers:{get:function(){return l},set:function(t){l=t}},measures:{get:function(){return u},set:function(t){u=t}},width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},tickFormat:{get:function(){return h},set:function(t){h=t}},ticks:{get:function(){return f},set:function(t){f=t}},noData:{get:function(){return p},set:function(t){p=t}},tooltips:{get:function(){return i.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),i.enabled(!!e)}},tooltipContent:{get:function(){return i.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),i.contentGenerator(e)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},orient:{get:function(){return r},set:function(t){a="right"==(r=t)||"bottom"==r}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.candlestickBar=function(){"use strict";function e(k){return k.each(function(e){n=d3.select(this);var k=t.utils.availableWidth(l,n,s),_=t.utils.availableHeight(u,n,s);t.utils.initSVG(n);var S=k/e[0].values.length*.45;d.domain(i||d3.extent(e[0].values.map(f).concat(b))),d.range(w?a||[.5*k/e[0].values.length,k*(e[0].values.length-.5)/e[0].values.length]:a||[5+S/2,k-S/2-5]),h.domain(r||[d3.min(e[0].values.map(y).concat(x)),d3.max(e[0].values.map(v).concat(x))]).range(o||[_,0]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]:[-1,1]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]:[-1,1]);var T=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([e[0].values]),P=T.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),A=P.append("defs"),E=P.append("g"),D=T.select("g");E.append("g").attr("class","nv-ticks"),T.attr("transform","translate("+s.left+","+s.top+")"),n.on("click",function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:c})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),T.select("#nv-chart-clip-path-"+c+" rect").attr("width",k).attr("height",_),D.attr("clip-path",M?"url(#nv-chart-clip-path-"+c+")":"");var O=T.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});O.exit().remove();var I=O.enter().append("g").attr("class",function(t,e,n){return(g(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});I.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+d(f(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return h(v(t,e))}).attr("x2",0).attr("y2",function(t,e){return h(y(t,e))}),I.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(d(f(t,e))-S/2)+","+(h(p(t,e))-(g(t,e)>m(t,e)?h(m(t,e))-h(g(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",S).attr("height",function(t,e){var n=g(t,e),i=m(t,e);return n>i?h(i)-h(n):h(n)-h(i)}),n.selectAll(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return h(v(t,e))}).attr("x2",0).attr("y2",function(t,e){return h(y(t,e))}),n.selectAll(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(d(f(t,e))-S/2)+","+(h(p(t,e))-(g(t,e)>m(t,e)?h(m(t,e))-h(g(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",S).attr("height",function(t,e){var n=g(t,e),i=m(t,e);return n>i?h(i)-h(n):h(n)-h(i)})}),e}var n,i,r,a,o,s={top:0,right:0,bottom:0,left:0},l=null,u=null,c=Math.floor(1e4*Math.random()),d=d3.scale.linear(),h=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},g=function(t){return t.open},m=function(t){return t.close},v=function(t){return t.high},y=function(t){return t.low},b=[],x=[],w=!1,M=!0,k=t.utils.defaultColor(),_=!1,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return e.highlightPoint=function(t,i){e.clearHighlights(),n.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",i)},e.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},e.dispatch=C,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return i},set:function(t){i=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return x},set:function(t){x=t}},padData:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return M},set:function(t){M=t}},id:{get:function(){return c},set:function(t){c=t}},interactive:{get:function(){return _},set:function(t){_=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return g()},set:function(t){g=t}},close:{get:function(){return m()},set:function(t){m=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!=t.top?t.top:s.top,s.right=void 0!=t.right?t.right:s.right,s.bottom=void 0!=t.bottom?t.bottom:s.bottom,s.left=void 0!=t.left?t.left:s.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.cumulativeLineChart=function(){"use strict";function e(c){return O.reset(),O.models(r),m&&O.models(a),v&&O.models(o),c.each(function(c){function C(){et.data([D]);var t=e.duration();e.duration(0),e.update(),e.duration(t)}var O=d3.select(this);t.utils.initSVG(O),O.classed("nv-chart-"+M,!0);var $=this,z=t.utils.availableWidth(f,O,d),B=t.utils.availableHeight(p,O,d);if(e.update=function(){0===P?O.call(e):O.transition().duration(P).call(e)},e.container=this,k.setter(L(c),e.update).getter(I(c)).update(),k.disabled=c.map(function(t){return!!t.disabled}),!_){var j;_={};for(j in k)_[j]=k[j]instanceof Array?k[j].slice(0):k[j]}var R=d3.behavior.drag().on("dragstart",function(){d3.select(e.container).style("cursor","ew-resize")}).on("drag",function(){D.x=d3.event.x,D.i=Math.round(E.invert(D.x)),C()}).on("dragend",function(){d3.select(e.container).style("cursor","auto"),k.index=D.i,T.stateChange(k)});if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return t.utils.noData(e,O),e;if(O.selectAll(".nv-noData").remove(),n=r.xScale(),i=r.yScale(),w)r.yDomain(null);else{var N=c.filter(function(t){return!t.disabled}).map(function(t){var e=d3.extent(t.values,r.y());return e[0]<-.95&&(e[0]=-.95),[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),U=[d3.min(N,function(t){return t[0]}),d3.max(N,function(t){return t[1]})];r.yDomain(U)}E.domain([0,c[0].values.length-1]).range([0,z]).clamp(!0);X=D.i,W=c,F||(F=r.y()),c=W.map(function(t){if(!t.values)return t;var e=t.values[X];if(null==e)return t;var n=F(e,X);return-.95>n&&!A?(t.tempDisabled=!0,t):(t.tempDisabled=!1,t.values=t.values.map(function(t,e){return t.display={y:(F(t,e)-n)/(1+n)},t}),t)});var X,W,H=x?"none":"all",Y=O.selectAll("g.nv-wrap.nv-cumulativeLine").data([c]),V=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),G=Y.select("g");if(V.append("g").attr("class","nv-interactive"),V.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-background"),V.append("g").attr("class","nv-linesWrap").style("pointer-events",H),V.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),V.append("g").attr("class","nv-legendWrap"),V.append("g").attr("class","nv-controlsWrap"),g&&(s.width(z),G.select(".nv-legendWrap").datum(c).call(s),d.top!=s.height()&&(d.top=s.height(),B=t.utils.availableHeight(p,O,d)),G.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),b){var q=[{key:"Re-scale y-axis",disabled:!w}];l.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),G.select(".nv-controlsWrap").datum(q).attr("transform","translate(0,"+-d.top+")").call(l)}Y.attr("transform","translate("+d.left+","+d.top+")"),y&&G.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)");var Z=c.filter(function(t){return t.tempDisabled});Y.select(".tempDisabled").remove(),Z.length&&Y.append("text").attr("class","tempDisabled").attr("x",z/2).attr("y","-.71em").style("text-anchor","end").text(Z.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),x&&(u.width(z).height(B).margin({left:d.left,top:d.top}).svgContainer(O).xScale(n),Y.select(".nv-interactive").call(u)),V.select(".nv-background").append("rect"),G.select(".nv-background rect").attr("width",z).attr("height",B),r.y(function(t){return t.display.y}).width(z).height(B).color(c.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!c[e].disabled&&!c[e].tempDisabled}));var K=G.select(".nv-linesWrap").datum(c.filter(function(t){return!t.disabled&&!t.tempDisabled}));K.call(r),c.forEach(function(t,e){t.seriesIndex=e});var J=c.filter(function(t){return!t.disabled&&!!S(t)}),Q=G.select(".nv-avgLinesWrap").selectAll("line").data(J,function(t){return t.key}),tt=function(t){var e=i(S(t));return 0>e?0:e>B?B:e};Q.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t){return r.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",z).attr("y1",tt).attr("y2",tt),Q.style("stroke-opacity",function(t){var e=i(S(t));return 0>e||e>B?0:1}).attr("x1",0).attr("x2",z).attr("y1",tt).attr("y2",tt),Q.exit().remove();var et=K.selectAll(".nv-indexLine").data([D]);et.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(R),et.attr("transform",function(t){return"translate("+E(t.i)+",0)"}).attr("height",B),m&&(a.scale(n)._ticks(t.utils.calcTicksX(z/70,c)).tickSize(-B,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),G.select(".nv-x.nv-axis").call(a)),v&&(o.scale(i)._ticks(t.utils.calcTicksY(B/36,c)).tickSize(-z,0),G.select(".nv-y.nv-axis").call(o)),G.select(".nv-background rect").on("click",function(){D.x=d3.mouse(this)[0],D.i=Math.round(E.invert(D.x)),k.index=D.i,T.stateChange(k),C()}),r.dispatch.on("elementClick",function(t){D.i=t.pointIndex,D.x=E(D.i),k.index=D.i,T.stateChange(k),C()}),l.dispatch.on("legendClick",function(t){t.disabled=!t.disabled,w=!t.disabled,k.rescaleY=w,T.stateChange(k),e.update()}),s.dispatch.on("stateChange",function(t){for(var n in t)k[n]=t[n];T.stateChange(k),e.update()}),u.dispatch.on("elementMousemove",function(n){r.clearHighlights();var i,s,l,f=[];if(c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,o){s=t.interactiveBisect(a.values,n.pointXValue,e.x()),r.highlightPoint(o,s,!0);var u=a.values[s];void 0!==u&&(void 0===i&&(i=u),void 0===l&&(l=e.xScale()(e.x()(u,s))),f.push({key:a.key,value:e.y()(u,s),color:h(a,a.seriesIndex)}))}),f.length>2){var p=e.yScale().invert(n.mouseY),g=.03*Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),m=t.nearestValueIndex(f.map(function(t){return t.value}),p,g);null!==m&&(f[m].highlight=!0)}var v=a.tickFormat()(e.x()(i,s),s);u.tooltip.position({left:l+d.left,top:n.mouseY+d.top}).chartContainer($.parentNode).valueFormatter(function(t){return o.tickFormat()(t)}).data({value:v,series:f})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(){r.clearHighlights()}),T.on("changeState",function(t){void 0!==t.disabled&&(c.forEach(function(e,n){e.disabled=t.disabled[n]}),k.disabled=t.disabled),void 0!==t.index&&(D.i=t.index,D.x=E(D.i),k.index=t.index,et.data([D])),void 0!==t.rescaleY&&(w=t.rescaleY),e.update()})}),O.renderEnd("cumulativeLineChart immediate"),e}var n,i,r=t.models.line(),a=t.models.axis(),o=t.models.axis(),s=t.models.legend(),l=t.models.legend(),u=t.interactiveGuideline(),c=t.models.tooltip(),d={top:30,right:30,bottom:50,left:60},h=t.utils.defaultColor(),f=null,p=null,g=!0,m=!0,v=!0,y=!1,b=!0,x=!1,w=!0,M=r.id(),k=t.utils.state(),_=null,C=null,S=function(t){return t.average},T=d3.dispatch("stateChange","changeState","renderEnd"),P=250,A=!1;k.index=0,k.rescaleY=w,a.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),c.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return a.tickFormat()(t,e)}),l.updateState(!1);var E=d3.scale.linear(),D={i:0,x:0},O=t.utils.renderWatch(T,P),I=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:D.i,rescaleY:w}}},L=function(t){return function(e){void 0!==e.index&&(D.i=e.index),void 0!==e.rescaleY&&(w=e.rescaleY),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};r.dispatch.on("elementMouseover.tooltip",function(t){var n={x:e.x()(t.point),y:e.y()(t.point),color:t.point.color};t.point=n,c.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(){c.hidden(!0)});var F=null;return e.dispatch=T,e.lines=r,e.legend=s,e.controls=l,e.xAxis=a,e.yAxis=o,e.interactiveLayer=u,e.state=k,e.tooltip=c,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return p},set:function(t){p=t}},rescaleY:{get:function(){return w},set:function(t){w=t}},showControls:{get:function(){return b},set:function(t){b=t}},showLegend:{get:function(){return g},set:function(t){g=t}},average:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return C},set:function(t){C=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},noErrorCheck:{get:function(){return A},set:function(t){A=t}},tooltips:{get:function(){return c.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),c.enabled(!!e)}},tooltipContent:{get:function(){return c.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),c.contentGenerator(e)}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),s.color(h)}},useInteractiveGuideline:{get:function(){return x},set:function(t){x=t,!0===t&&(e.interactive(!1),e.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,o.orient(t?"right":"left")}},duration:{get:function(){return P},set:function(t){P=t,r.duration(P),a.duration(P),o.duration(P),O.reset(P)}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.discreteBar=function(){"use strict";function e(h){return _.reset(),h.each(function(e){var h=c-u.left-u.right,k=d-u.top-u.bottom;n=d3.select(this),t.utils.initSVG(n),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var C=i&&r?[]:e.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0}})});f.domain(i||d3.merge(C).map(function(t){return t.x})).rangeBands(a||[0,h],.1),p.domain(r||d3.extent(d3.merge(C).map(function(t){return t.y}).concat(v))),p.range(b?o||[k-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]:o||[k,0]),s=s||f,l=l||p.copy().range([p(0),p(0)]);var S=n.selectAll("g.nv-wrap.nv-discretebar").data([e]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");S.select("g"),T.append("g").attr("class","nv-groups"),S.attr("transform","translate("+u.left+","+u.top+")");var P=S.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),P.exit().watchTransition(_,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),P.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),P.watchTransition(_,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var A=P.selectAll("g.nv-bar").data(function(t){return t.values});A.exit().remove();var E=A.enter().append("g").attr("transform",function(t,e){return"translate("+(f(g(t,e))+.05*f.rangeBand())+", "+p(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),w.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),w.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){w.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){w.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){w.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});E.append("rect").attr("height",0).attr("width",.9*f.rangeBand()/e.length),b?(E.append("text").attr("text-anchor","middle"),A.select("text").text(function(t,e){return x(m(t,e))}).watchTransition(_,"discreteBar: bars text").attr("x",.9*f.rangeBand()/2).attr("y",function(t,e){return m(t,e)<0?p(m(t,e))-p(0)+12:-4})):A.selectAll("text").remove(),A.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||y(t,e)}).style("stroke",function(t,e){return t.color||y(t,e)}).select("rect").attr("class",M).watchTransition(_,"discreteBar: bars rect").attr("width",.9*f.rangeBand()/e.length),A.watchTransition(_,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(f(g(t,e))+.05*f.rangeBand())+", "+(m(t,e)<0?p(0):p(0)-p(m(t,e))<1?p(0)-1:p(m(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(p(m(t,e))-p(r&&r[0]||0))||1)}),s=f.copy(),l=p.copy()}),_.renderEnd("discreteBar immediate"),e}var n,i,r,a,o,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,h=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),p=d3.scale.linear(),g=function(t){return t.x},m=function(t){return t.y},v=[0],y=t.utils.defaultColor(),b=!1,x=d3.format(",.2f"),w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),M="discreteBar",k=250,_=t.utils.renderWatch(w,k);return e.dispatch=w,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},forceY:{get:function(){return v},set:function(t){v=t}},showValues:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return i},set:function(t){i=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return o},set:function(t){o=t}},valueFormat:{get:function(){return x},set:function(t){x=t}},id:{get:function(){return h},set:function(t){h=t}},rectClass:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e)}},duration:{get:function(){return k},set:function(t){k=t,_.reset(k)}}}),t.utils.initOptions(e),e},t.models.discreteBarChart=function(){"use strict";function e(s){return b.reset(),b.models(r),h&&b.models(a),f&&b.models(o),s.each(function(s){var d=d3.select(this);t.utils.initSVG(d);var m=t.utils.availableWidth(u,d,l),b=t.utils.availableHeight(c,d,l);if(e.update=function(){v.beforeUpdate(),d.transition().duration(y).call(e)},e.container=this,!(s&&s.length&&s.filter(function(t){return t.values.length}).length))return t.utils.noData(e,d),e;d.selectAll(".nv-noData").remove(),n=r.xScale(),i=r.yScale().clamp(!0);var x=d.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([s]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),M=w.append("defs"),k=x.select("g");w.append("g").attr("class","nv-x nv-axis"),w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),w.append("g").attr("class","nv-barsWrap"),k.attr("transform","translate("+l.left+","+l.top+")"),p&&k.select(".nv-y.nv-axis").attr("transform","translate("+m+",0)"),r.width(m).height(b);if(k.select(".nv-barsWrap").datum(s.filter(function(t){return!t.disabled})).transition().call(r),M.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),k.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",n.rangeBand()*(g?2:1)).attr("height",16).attr("x",-n.rangeBand()/(g?1:2)),h){a.scale(n)._ticks(t.utils.calcTicksX(m/100,s)).tickSize(-b,0),k.select(".nv-x.nv-axis").attr("transform","translate(0,"+(i.range()[0]+(r.showValues()&&i.domain()[0]<0?16:0))+")"),k.select(".nv-x.nv-axis").call(a);var _=k.select(".nv-x.nv-axis").selectAll("g");g&&_.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}f&&(o.scale(i)._ticks(t.utils.calcTicksY(b/36,s)).tickSize(-m,0),k.select(".nv-y.nv-axis").call(o)),k.select(".nv-zeroLine line").attr("x1",0).attr("x2",m).attr("y1",i(0)).attr("y2",i(0))}),b.renderEnd("discreteBar chart immediate"),e}var n,i,r=t.models.discreteBar(),a=t.models.axis(),o=t.models.axis(),s=t.models.tooltip(),l={top:15,right:10,bottom:50,left:60},u=null,c=null,d=t.utils.getColor(),h=!0,f=!0,p=!1,g=!1,m=null,v=d3.dispatch("beforeUpdate","renderEnd"),y=250;a.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),o.orient(p?"right":"left").tickFormat(d3.format(",.1f")),s.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).keyFormatter(function(t,e){return a.tickFormat()(t,e)});var b=t.utils.renderWatch(v,y);return r.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color},s.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(){s.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(){s.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.dispatch=v,e.discretebar=r,e.xAxis=a,e.yAxis=o,e.tooltip=s,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},staggerLabels:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return h},set:function(t){h=t}},showYAxis:{get:function(){return f},set:function(t){f=t}},noData:{get:function(){return m},set:function(t){m=t}},tooltips:{get:function(){return s.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),s.enabled(!!e)}},tooltipContent:{get:function(){return s.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),s.contentGenerator(e)}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return y},set:function(t){y=t,b.reset(y),r.duration(y),a.duration(y),o.duration(y)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),r.color(d)}},rightAlignYAxis:{get:function(){return p},set:function(t){p=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.distribution=function(){"use strict";function e(r){return h.reset(),r.each(function(e){var r=("x"===o?(i.left,i.right):(i.top,i.bottom),"x"==o?"y":"x"),c=d3.select(this);t.utils.initSVG(c),n=n||u;var d=c.selectAll("g.nv-distribution").data([e]),f=(d.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),d.select("g"));d.attr("transform","translate("+i.left+","+i.top+")");var p=f.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});p.enter().append("g"),p.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var g=p.selectAll("line.nv-dist"+o).data(function(t){return t.values});g.enter().append("line").attr(o+"1",function(t,e){return n(s(t,e))}).attr(o+"2",function(t,e){return n(s(t,e))}),h.transition(p.exit().selectAll("line.nv-dist"+o),"dist exit").attr(o+"1",function(t,e){return u(s(t,e))}).attr(o+"2",function(t,e){return u(s(t,e))}).style("stroke-opacity",0).remove(),g.attr("class",function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e}).attr(r+"1",0).attr(r+"2",a),h.transition(g,"dist").attr(o+"1",function(t,e){return u(s(t,e))}).attr(o+"2",function(t,e){return u(s(t,e))}),n=u.copy()}),h.renderEnd("distribution immediate"),e}var n,i={top:0,right:0,bottom:0,left:0},r=400,a=8,o="x",s=function(t){return t[o]},l=t.utils.defaultColor(),u=d3.scale.linear(),c=250,d=d3.dispatch("renderEnd"),h=t.utils.renderWatch(d,c);return e.options=t.utils.optionsFunc.bind(e),e.dispatch=d,e.margin=function(t){return arguments.length?(i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left,e):i},e.width=function(t){return arguments.length?(r=t,e):r},e.axis=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(a=t,e):a},e.getData=function(t){return arguments.length?(s=d3.functor(t),e):s},e.scale=function(t){return arguments.length?(u=t,e):u},e.color=function(n){return arguments.length?(l=t.utils.getColor(n),e):l},e.duration=function(t){return arguments.length?(c=t,h.reset(c),e):c},e},t.models.furiousLegend=function(){"use strict";function e(g){function m(t,e){return"furious"!=p?"#000":h?t.disengaged?o(t,e):"#fff":h?void 0:t.disabled?o(t,e):"#fff"}function v(t,e){return h&&"furious"==p?t.disengaged?"#fff":o(t,e):t.disabled?"#fff":o(t,e)}return g.each(function(e){var g=i-n.left-n.right,y=d3.select(this);t.utils.initSVG(y);var b=y.selectAll("g.nv-legend").data([e]),x=(b.enter().append("g").attr("class","nvd3 nv-legend").append("g"),b.select("g"));b.attr("transform","translate("+n.left+","+n.top+")");var w,M=x.selectAll(".nv-series").data(function(t){return"furious"!=p?t:t.filter(function(t){return!!h||!t.disengaged})}),k=M.enter().append("g").attr("class","nv-series");if("classic"==p)k.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),w=M.select("circle");else if("furious"==p){k.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),w=M.select("rect"),k.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");M.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",m(t,e))})}k.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var _=M.select("text.nv-legend-text");M.on("mouseover",function(t,e){f.legendMouseover(t,e)}).on("mouseout",function(t,e){f.legendMouseout(t,e)}).on("click",function(t,e){f.legendClick(t,e);var n=M.data();if(c){if("classic"==p)d?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==p)if(h)t.disengaged=!t.disengaged,t.userDisabled=void 0==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!h){t.disabled=!t.disabled,t.userDisabled=t.disabled;n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}f.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=p||!h)&&(f.legendDblclick(t,e),c)){var n=M.data();n.forEach(function(t){t.disabled=!0,"furious"==p&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==p&&(t.userDisabled=t.disabled),f.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),M.classed("nv-disabled",function(t){return t.userDisabled}),M.exit().remove(),_.attr("fill",m).text(a);var C;switch(p){case"furious":C=23;break;case"classic":C=20}if(s){var S=[];M.each(function(){var e,n=d3.select(this).select("text");try{if(0>=(e=n.node().getComputedTextLength()))throw Error()}catch(i){e=t.utils.calcApproxTextWidth(n)}S.push(e+l)});for(var T=0,P=0,A=[];g>P&&T<S.length;)A[T]=S[T],P+=S[T++];for(0===T&&(T=1);P>g&&T>1;){A=[],T--;for(var E=0;E<S.length;E++)S[E]>(A[E%T]||0)&&(A[E%T]=S[E]);P=A.reduce(function(t,e){return t+e})}for(var D=[],O=0,I=0;T>O;O++)D[O]=I,I+=A[O];M.attr("transform",function(t,e){return"translate("+D[e%T]+","+(5+Math.floor(e/T)*C)+")"}),u?x.attr("transform","translate("+(i-n.right-P)+","+n.top+")"):x.attr("transform","translate(0,"+n.top+")"),r=n.top+n.bottom+Math.ceil(S.length/T)*C}else{var L,F=5,$=5,z=0;M.attr("transform",function(){var t=d3.select(this).select("text").node().getComputedTextLength()+l;return L=$,i<n.left+n.right+L+t&&($=L=5,F+=C),($+=t)>z&&(z=$),"translate("+L+","+F+")"}),x.attr("transform","translate("+(i-n.right-z)+","+n.top+")"),r=n.top+n.bottom+F+15}"furious"==p&&w.attr("width",function(t,e){return _[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),w.style("fill",v).style("stroke",function(t,e){return t.color||o(t,e)})}),e}var n={top:5,right:0,bottom:5,left:0},i=400,r=20,a=function(t){return t.key},o=t.utils.getColor(),s=!0,l=28,u=!0,c=!0,d=!1,h=!1,f=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),p="classic";return e.dispatch=f,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return a},set:function(t){a=t}},align:{get:function(){return s},set:function(t){s=t}},rightAlign:{get:function(){return u},set:function(t){u=t}},padding:{get:function(){return l},set:function(t){l=t}},updateState:{get:function(){return c},set:function(t){c=t}},radioButtonMode:{get:function(){return d},set:function(t){d=t}},expanded:{get:function(){return h},set:function(t){h=t}},vers:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.historicalBar=function(){"use strict";function e(k){return k.each(function(e){M.reset(),c=d3.select(this);var k=t.utils.availableWidth(s,c,o),_=t.utils.availableHeight(l,c,o);t.utils.initSVG(c),d.domain(n||d3.extent(e[0].values.map(f).concat(g))),d.range(v?r||[.5*k/e[0].values.length,k*(e[0].values.length-.5)/e[0].values.length]:r||[0,k]),h.domain(i||d3.extent(e[0].values.map(p).concat(m))).range(a||[_,0]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]:[-1,1]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]:[-1,1]);var C=c.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([e[0].values]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),T=S.append("defs"),P=S.append("g"),A=C.select("g");P.append("g").attr("class","nv-bars"),C.attr("transform","translate("+o.left+","+o.top+")"),c.on("click",function(t,e){x.chartClick({data:t,index:e,pos:d3.event,id:u})}),T.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),C.select("#nv-chart-clip-path-"+u+" rect").attr("width",k).attr("height",_),A.attr("clip-path",y?"url(#nv-chart-clip-path-"+u+")":"");var E=C.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return f(t,e)});E.exit().remove(),E.enter().append("rect").attr("x",0).attr("y",function(e,n){return t.utils.NaNtoZero(h(Math.max(0,p(e,n))))}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.abs(h(p(e,n))-h(0)))}).attr("transform",function(t,n){return"translate("+(d(f(t,n))-k/e[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){w&&(d3.select(this).classed("hover",!0),x.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){w&&(d3.select(this).classed("hover",!1),x.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){w&&x.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){w&&(x.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(t,e){w&&(x.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),E.attr("fill",function(t,e){return b(t,e)}).attr("class",function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(M,"bars").attr("transform",function(t,n){return"translate("+(d(f(t,n))-k/e[0].values.length*.45)+",0)"}).attr("width",k/e[0].values.length*.9),E.watchTransition(M,"bars").attr("y",function(e,n){var i=p(e,n)<0?h(0):h(0)-h(p(e,n))<1?h(0)-1:h(p(e,n));return t.utils.NaNtoZero(i)}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.max(Math.abs(h(p(e,n))-h(0)),1))})}),M.renderEnd("historicalBar immediate"),e}var n,i,r,a,o={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,d=d3.scale.linear(),h=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},g=[],m=[0],v=!1,y=!0,b=t.utils.defaultColor(),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w=!0,M=t.utils.renderWatch(x,0);return e.highlightPoint=function(t,e){c.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},e.clearHighlights=function(){c.select(".nv-bars .nv-bar.hover").classed("hover",!1)},e.dispatch=x,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},forceX:{get:function(){return g},set:function(t){g=t}},forceY:{get:function(){return m},set:function(t){m=t}},padData:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return a},set:function(t){a=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return b},set:function(e){b=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.historicalBarChart=function(e){"use strict";function n(e){return e.each(function(c){C.reset(),C.models(a),m&&C.models(o),v&&C.models(s);var M=d3.select(this),S=this;t.utils.initSVG(M);var T=t.utils.availableWidth(f,M,d),P=t.utils.availableHeight(p,M,d);if(n.update=function(){M.transition().duration(_).call(n)},n.container=this,x.disabled=c.map(function(t){return!!t.disabled}),!w){var A;w={};for(A in x)w[A]=x[A]instanceof Array?x[A].slice(0):x[A]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return t.utils.noData(n,M),n;M.selectAll(".nv-noData").remove(),i=a.xScale(),r=a.yScale();var E=M.selectAll("g.nv-wrap.nv-historicalBarChart").data([c]),D=E.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),O=E.select("g");D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-barsWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-interactive"),g&&(l.width(T),O.select(".nv-legendWrap").datum(c).call(l),d.top!=l.height()&&(d.top=l.height(),P=t.utils.availableHeight(p,M,d)),E.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),E.attr("transform","translate("+d.left+","+d.top+")"),y&&O.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)"),b&&(u.width(T).height(P).margin({left:d.left,top:d.top}).svgContainer(M).xScale(i),E.select(".nv-interactive").call(u)),a.width(T).height(P).color(c.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!c[e].disabled}));O.select(".nv-barsWrap").datum(c.filter(function(t){return!t.disabled})).transition().call(a),m&&(o.scale(i)._ticks(t.utils.calcTicksX(T/100,c)).tickSize(-P,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),O.select(".nv-x.nv-axis").transition().call(o)),v&&(s.scale(r)._ticks(t.utils.calcTicksY(P/36,c)).tickSize(-T,0),O.select(".nv-y.nv-axis").transition().call(s)),u.dispatch.on("elementMousemove",function(e){a.clearHighlights();var i,r,l,f=[];c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o){r=t.interactiveBisect(o.values,e.pointXValue,n.x()),a.highlightPoint(r,!0);var s=o.values[r];void 0!==s&&(void 0===i&&(i=s),void 0===l&&(l=n.xScale()(n.x()(s,r))),f.push({key:o.key,value:n.y()(s,r),color:h(o,o.seriesIndex),data:o.values[r]}))});var p=o.tickFormat()(n.x()(i,r));u.tooltip.position({left:l+d.left,top:e.mouseY+d.top}).chartContainer(S.parentNode).valueFormatter(function(t){return s.tickFormat()(t)}).data({value:p,index:r,series:f})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(){k.tooltipHide(),a.clearHighlights()}),l.dispatch.on("legendClick",function(t){t.disabled=!t.disabled,c.filter(function(t){return!t.disabled}).length||c.map(function(t){return t.disabled=!1,E.selectAll(".nv-series").classed("disabled",!1),t}),x.disabled=c.map(function(t){return!!t.disabled}),k.stateChange(x),e.transition().call(n)}),l.dispatch.on("legendDblclick",function(t){c.forEach(function(t){t.disabled=!0}),t.disabled=!1,x.disabled=c.map(function(t){return!!t.disabled}),k.stateChange(x),n.update()}),k.on("changeState",function(t){void 0!==t.disabled&&(c.forEach(function(e,n){e.disabled=t.disabled[n]}),x.disabled=t.disabled),n.update()})}),C.renderEnd("historicalBarChart immediate"),n}var i,r,a=e||t.models.historicalBar(),o=t.models.axis(),s=t.models.axis(),l=t.models.legend(),u=t.interactiveGuideline(),c=t.models.tooltip(),d={top:30,right:90,bottom:50,left:90},h=t.utils.defaultColor(),f=null,p=null,g=!1,m=!0,v=!0,y=!1,b=!1,x={},w=null,M=null,k=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),_=250;o.orient("bottom").tickPadding(7),s.orient(y?"right":"left"),c.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)});var C=t.utils.renderWatch(k,0);return a.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:n.x()(t.data),value:n.y()(t.data),color:t.color},c.data(t).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(){c.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(){c.position({top:d3.event.pageY,left:d3.event.pageX})()}),n.dispatch=k,n.bars=a,n.legend=l,n.xAxis=o,n.yAxis=s,n.interactiveLayer=u,n.tooltip=c,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return M},set:function(t){M=t}},tooltips:{get:function(){return c.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),c.enabled(!!e)}},tooltipContent:{get:function(){return c.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),c.contentGenerator(e)}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),l.color(h),a.color(h)}},duration:{get:function(){return _},set:function(t){_=t,C.reset(_),s.duration(_),o.duration(_)}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,s.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,!0===t&&n.interactive(!1)}}}),t.utils.inheritOptions(n,a),t.utils.initOptions(n),n},t.models.ohlcBarChart=function(){var e=t.models.historicalBarChart(t.models.ohlcBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.candlestickBarChart=function(){var e=t.models.historicalBarChart(t.models.candlestickBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.legend=function(){"use strict";function e(g){function m(t,e){return"furious"!=p?"#000":h?t.disengaged?"#000":"#fff":h?void 0:(t.color||(t.color=o(t,e)),t.disabled?t.color:"#fff")}function v(t,e){return h&&"furious"==p&&t.disengaged?"#eee":t.color||o(t,e)}function y(t){return h&&"furious"==p?1:t.disabled?0:1}return g.each(function(e){var o=i-n.left-n.right,g=d3.select(this);t.utils.initSVG(g);var b=g.selectAll("g.nv-legend").data([e]),x=b.enter().append("g").attr("class","nvd3 nv-legend").append("g"),w=b.select("g");b.attr("transform","translate("+n.left+","+n.top+")");var M,k,_=w.selectAll(".nv-series").data(function(t){return"furious"!=p?t:t.filter(function(t){return!!h||!t.disengaged})}),C=_.enter().append("g").attr("class","nv-series");switch(p){case"furious":k=23;break;case"classic":k=20}if("classic"==p)C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),M=_.select("circle");else if("furious"==p){C.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),M=_.select(".nv-legend-symbol"),C.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");_.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",m(t,e))})}C.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var S=_.select("text.nv-legend-text");_.on("mouseover",function(t,e){f.legendMouseover(t,e)}).on("mouseout",function(t,e){f.legendMouseout(t,e)}).on("click",function(t,e){f.legendClick(t,e);var n=_.data();if(c){if("classic"==p)d?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==p)if(h)t.disengaged=!t.disengaged,t.userDisabled=void 0==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!h){t.disabled=!t.disabled,t.userDisabled=t.disabled;n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}f.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=p||!h)&&(f.legendDblclick(t,e),c)){var n=_.data();n.forEach(function(t){t.disabled=!0,"furious"==p&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==p&&(t.userDisabled=t.disabled),f.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),_.classed("nv-disabled",function(t){return t.userDisabled}),_.exit().remove(),S.attr("fill",m).text(a);var T=0;if(s){var P=[];_.each(function(){var e,n=d3.select(this).select("text");try{if(0>=(e=n.node().getComputedTextLength()))throw Error()}catch(i){e=t.utils.calcApproxTextWidth(n)}P.push(e+l)});var A=0,E=[];for(T=0;o>T&&A<P.length;)E[A]=P[A],T+=P[A++];for(0===A&&(A=1);T>o&&A>1;){E=[],A--;for(var D=0;D<P.length;D++)P[D]>(E[D%A]||0)&&(E[D%A]=P[D]);T=E.reduce(function(t,e){return t+e})}for(var O=[],I=0,L=0;A>I;I++)O[I]=L,L+=E[I];_.attr("transform",function(t,e){return"translate("+O[e%A]+","+(5+Math.floor(e/A)*k)+")"}),u?w.attr("transform","translate("+(i-n.right-T)+","+n.top+")"):w.attr("transform","translate(0,"+n.top+")"),r=n.top+n.bottom+Math.ceil(P.length/A)*k}else{var F,$=5,z=5,B=0;_.attr("transform",function(){var t=d3.select(this).select("text").node().getComputedTextLength()+l;return F=z,i<n.left+n.right+F+t&&(z=F=5,$+=k),(z+=t)>B&&(B=z),F+B>T&&(T=F+B),"translate("+F+","+$+")"}),w.attr("transform","translate("+(i-n.right-B)+","+n.top+")"),r=n.top+n.bottom+$+15}if("furious"==p){M.attr("width",function(t,e){return S[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),x.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);w.select(".nv-legend-bg").transition().duration(300).attr("x",-k).attr("width",T+k-12).attr("height",r+10).attr("y",-n.top-10).attr("opacity",h?1:0)}M.style("fill",v).style("fill-opacity",y).style("stroke",v)}),e}var n={top:5,right:0,bottom:5,left:0},i=400,r=20,a=function(t){return t.key},o=t.utils.getColor(),s=!0,l=32,u=!0,c=!0,d=!1,h=!1,f=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),p="classic";return e.dispatch=f,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return a},set:function(t){a=t}},align:{get:function(){return s},set:function(t){s=t}},rightAlign:{get:function(){return u},set:function(t){u=t}},padding:{get:function(){return l},set:function(t){l=t}},updateState:{get:function(){return c},set:function(t){c=t}},radioButtonMode:{get:function(){return d},set:function(t){d=t}},expanded:{get:function(){return h},set:function(t){h=t}},vers:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.line=function(){"use strict";function e(v){return w.reset(),w.models(r),v.each(function(e){l=d3.select(this);var v=t.utils.availableWidth(o,l,a),y=t.utils.availableHeight(s,l,a);t.utils.initSVG(l),n=r.xScale(),i=r.yScale(),b=b||n,x=x||i;var M=l.selectAll("g.nv-wrap.nv-line").data([e]),k=M.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),_=k.append("defs"),C=k.append("g"),S=M.select("g");C.append("g").attr("class","nv-groups"),C.append("g").attr("class","nv-scatterWrap"),M.attr("transform","translate("+a.left+","+a.top+")"),r.width(v).height(y);var T=M.select(".nv-scatterWrap");T.call(r),_.append("clipPath").attr("id","nv-edge-clip-"+r.id()).append("rect"),M.select("#nv-edge-clip-"+r.id()+" rect").attr("width",v).attr("height",y>0?y:0),S.attr("clip-path",g?"url(#nv-edge-clip-"+r.id()+")":""),T.attr("clip-path",g?"url(#nv-edge-clip-"+r.id()+")":"");var P=M.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});P.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||u}).style("fill-opacity",1e-6),P.exit().remove(),P.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return c(t,e)}).style("stroke",function(t,e){return c(t,e)}),P.watchTransition(w,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var A=P.selectAll("path.nv-area").data(function(t){return p(t)?[t]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(m).defined(f).x(function(e,n){return t.utils.NaNtoZero(b(d(e,n)))}).y0(function(e,n){return t.utils.NaNtoZero(x(h(e,n)))}).y1(function(){return x(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[e.values])}),P.exit().selectAll("path.nv-area").remove(),A.watchTransition(w,"line: areaPaths").attr("d",function(e){return d3.svg.area().interpolate(m).defined(f).x(function(e,i){return t.utils.NaNtoZero(n(d(e,i)))}).y0(function(e,n){return t.utils.NaNtoZero(i(h(e,n)))}).y1(function(){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[e.values])});var E=P.selectAll("path.nv-line").data(function(t){return[t.values]});E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(m).defined(f).x(function(e,n){return t.utils.NaNtoZero(b(d(e,n)))}).y(function(e,n){return t.utils.NaNtoZero(x(h(e,n)))})),E.watchTransition(w,"line: linePaths").attr("d",d3.svg.line().interpolate(m).defined(f).x(function(e,i){return t.utils.NaNtoZero(n(d(e,i)))}).y(function(e,n){return t.utils.NaNtoZero(i(h(e,n)))})),b=n.copy(),x=i.copy()}),w.renderEnd("line immediate"),e}var n,i,r=t.models.scatter(),a={top:0,right:0,bottom:0,left:0},o=960,s=500,l=null,u=1.5,c=t.utils.defaultColor(),d=function(t){return t.x},h=function(t){return t.y},f=function(t,e){return!isNaN(h(t,e))&&null!==h(t,e)},p=function(t){return t.area},g=!1,m="linear",v=250,y=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");r.pointSize(16).pointDomain([16,256]);var b,x,w=t.utils.renderWatch(y,v);return e.dispatch=y,e.scatter=r,r.dispatch.on("elementClick",function(){y.elementClick.apply(this,arguments)}),r.dispatch.on("elementMouseover",function(){y.elementMouseover.apply(this,arguments)}),r.dispatch.on("elementMouseout",function(){y.elementMouseout.apply(this,arguments)}),e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return s},set:function(t){s=t}},defined:{get:function(){return f},set:function(t){f=t}},interpolate:{get:function(){return m},set:function(t){m=t}},clipEdge:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return v},set:function(t){v=t,w.reset(v),r.duration(v)}},isArea:{get:function(){return p},set:function(t){p=d3.functor(t)}},x:{get:function(){return d},set:function(t){d=t,r.x(t)}},y:{get:function(){return h},set:function(t){h=t,r.y(t)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),r.color(c)}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.lineChart=function(){"use strict";function e(u){return _.reset(),_.models(r),g&&_.models(a),m&&_.models(o),u.each(function(u){var w=d3.select(this),_=this;t.utils.initSVG(w);var T=t.utils.availableWidth(h,w,c),P=t.utils.availableHeight(f,w,c);if(e.update=function(){0===k?w.call(e):w.transition().duration(k).call(e)},e.container=this,b.setter(S(u),e.update).getter(C(u)).update(),b.disabled=u.map(function(t){return!!t.disabled}),!x){var A;x={};for(A in b)x[A]=b[A]instanceof Array?b[A].slice(0):b[A]}if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(e,w),e;w.selectAll(".nv-noData").remove(),n=r.xScale(),i=r.yScale();var E=w.selectAll("g.nv-wrap.nv-lineChart").data([u]),D=E.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),O=E.select("g");D.append("rect").style("opacity",0),D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-linesWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-interactive"),O.select("rect").attr("width",T).attr("height",P>0?P:0),p&&(s.width(T),O.select(".nv-legendWrap").datum(u).call(s),c.top!=s.height()&&(c.top=s.height(),P=t.utils.availableHeight(f,w,c)),E.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),E.attr("transform","translate("+c.left+","+c.top+")"),v&&O.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)"),y&&(l.width(T).height(P).margin({left:c.left,top:c.top}).svgContainer(w).xScale(n),E.select(".nv-interactive").call(l)),r.width(T).height(P).color(u.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!u[e].disabled}));O.select(".nv-linesWrap").datum(u.filter(function(t){return!t.disabled})).call(r),g&&(a.scale(n)._ticks(t.utils.calcTicksX(T/100,u)).tickSize(-P,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),O.select(".nv-x.nv-axis").call(a)),m&&(o.scale(i)._ticks(t.utils.calcTicksY(P/36,u)).tickSize(-T,0),O.select(".nv-y.nv-axis").call(o)),s.dispatch.on("stateChange",function(t){for(var n in t)b[n]=t[n];M.stateChange(b),e.update()}),l.dispatch.on("elementMousemove",function(n){r.clearHighlights();var i,s,h,f=[];if(u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,o){s=t.interactiveBisect(a.values,n.pointXValue,e.x());var l=a.values[s],u=e.y()(l,s);null!=u&&r.highlightPoint(o,s,!0),void 0!==l&&(void 0===i&&(i=l),void 0===h&&(h=e.xScale()(e.x()(l,s))),f.push({key:a.key,value:u,color:d(a,a.seriesIndex)}))}),f.length>2){var p=e.yScale().invert(n.mouseY),g=.03*Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),m=t.nearestValueIndex(f.map(function(t){return t.value}),p,g);null!==m&&(f[m].highlight=!0)}var v=a.tickFormat()(e.x()(i,s));l.tooltip.position({left:n.mouseX+c.left,top:n.mouseY+c.top}).chartContainer(_.parentNode).valueFormatter(function(t){return null==t?"N/A":o.tickFormat()(t)}).data({value:v,index:s,series:f})(),l.renderGuideLine(h)}),l.dispatch.on("elementClick",function(n){var i,a=[];u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r){var o=t.interactiveBisect(r.values,n.pointXValue,e.x()),s=r.values[o];if(void 0!==s){void 0===i&&(i=e.xScale()(e.x()(s,o)));var l=e.yScale()(e.y()(s,o));a.push({point:s,pointIndex:o,pos:[i,l],seriesIndex:r.seriesIndex,series:r})}}),r.dispatch.elementClick(a)}),l.dispatch.on("elementMouseout",function(){r.clearHighlights()}),M.on("changeState",function(t){void 0!==t.disabled&&u.length===t.disabled.length&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),b.disabled=t.disabled),e.update()})}),_.renderEnd("lineChart immediate"),e}var n,i,r=t.models.line(),a=t.models.axis(),o=t.models.axis(),s=t.models.legend(),l=t.interactiveGuideline(),u=t.models.tooltip(),c={top:30,right:20,bottom:50,left:60},d=t.utils.defaultColor(),h=null,f=null,p=!0,g=!0,m=!0,v=!1,y=!1,b=t.utils.state(),x=null,w=null,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),k=250;a.orient("bottom").tickPadding(7),o.orient(v?"right":"left"),u.valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return a.tickFormat()(t,e)});var _=t.utils.renderWatch(M,k),C=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},S=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return r.dispatch.on("elementMouseover.tooltip",function(t){u.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)}),e.dispatch=M,e.lines=r,e.legend=s,e.xAxis=a,e.yAxis=o,e.interactiveLayer=l,e.tooltip=u,e.dispatch=M,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return x},set:function(t){x=t}},noData:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return u.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!e)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return k},set:function(t){k=t,_.reset(k),r.duration(k),a.duration(k),o.duration(k)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),s.color(d),r.color(d)}},rightAlignYAxis:{get:function(){return v},set:function(t){v=t,o.orient(v?"right":"left")}},useInteractiveGuideline:{get:function(){return y},set:function(t){(y=t)&&(r.interactive(!1),r.useVoronoi(!1))}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.linePlusBarChart=function(){"use strict";function e(w){return w.each(function(w){function F(){L=x.empty()?null:x.extent(),n=x.empty()?r.domain():x.extent(),$.brush({extent:n,brush:x}),x.empty()||x.extent(L),lt.data([x.empty()?r.domain():L]).each(function(t){var e=r(t[0])-r.range()[0],n=r.range()[1]-r(t[1]);d3.select(this).select(".left").attr("width",0>e?0:e),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",0>n?0:n)}),d.width(H).height(Y).color(w.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!w[e].disabled&&w[e].bar})),u.width(H).height(Y).color(w.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!w[e].disabled&&!w[e].bar}));var e=et.select(".nv-focus .nv-barsWrap").datum(q.length?q.map(function(t){return{key:t.key,values:t.values.filter(function(t,e){return d.x()(t,e)>=n[0]&&d.x()(t,e)<=n[1]})}}):[{values:[]}]),s=et.select(".nv-focus .nv-linesWrap").datum(Z[0].disabled?[{values:[]}]:Z.map(function(t){return{area:t.area,fillOpacity:t.fillOpacity,key:t.key,values:t.values.filter(function(t,e){return u.x()(t,e)>=n[0]&&u.x()(t,e)<=n[1]})}}));i=q.length?d.xScale():u.xScale(),f.scale(i)._ticks(t.utils.calcTicksX(H/100,w)).tickSize(-Y,0),f.domain([Math.ceil(n[0]),Math.floor(n[1])]),et.select(".nv-x.nv-axis").transition().duration(z).call(f),e.transition().duration(z).call(d),s.transition().duration(z).call(u),et.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),g.scale(a)._ticks(t.utils.calcTicksY(Y/36,w)).tickSize(-H,0),m.scale(o)._ticks(t.utils.calcTicksY(Y/36,w)).tickSize(q.length?0:-H,0),et.select(".nv-focus .nv-y1.nv-axis").style("opacity",q.length?1:0),et.select(".nv-focus .nv-y2.nv-axis").style("opacity",Z.length&&!Z[0].disabled?1:0).attr("transform","translate("+i.range()[1]+",0)"),et.select(".nv-focus .nv-y1.nv-axis").transition().duration(z).call(g),et.select(".nv-focus .nv-y2.nv-axis").transition().duration(z).call(m)}var W=d3.select(this);t.utils.initSVG(W);var H=t.utils.availableWidth(_,W,M),Y=t.utils.availableHeight(C,W,M)-(E?I:0),V=I-k.top-k.bottom;if(e.update=function(){W.transition().duration(z).call(e)},e.container=this,B.setter(X(w),e.update).getter(U(w)).update(),B.disabled=w.map(function(t){return!!t.disabled}),!j){var G;j={};for(G in B)j[G]=B[G]instanceof Array?B[G].slice(0):B[G]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length))return t.utils.noData(e,W),e;W.selectAll(".nv-noData").remove();var q=w.filter(function(t){return!t.disabled&&t.bar}),Z=w.filter(function(t){return!t.bar});i=d.xScale(),r=p.scale(),a=d.yScale(),o=u.yScale(),s=h.yScale(),l=c.yScale();var K=w.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:T(t,e)}})}),J=w.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:T(t,e)}})});i.range([0,H]),r.domain(d3.extent(d3.merge(K.concat(J)),function(t){return t.x})).range([0,H]);var Q=W.selectAll("g.nv-wrap.nv-linePlusBar").data([w]),tt=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),et=Q.select("g");tt.append("g").attr("class","nv-legendWrap");var nt=tt.append("g").attr("class","nv-focus");nt.append("g").attr("class","nv-x nv-axis"),nt.append("g").attr("class","nv-y1 nv-axis"),nt.append("g").attr("class","nv-y2 nv-axis"),nt.append("g").attr("class","nv-barsWrap"),nt.append("g").attr("class","nv-linesWrap");var it=tt.append("g").attr("class","nv-context");if(it.append("g").attr("class","nv-x nv-axis"),it.append("g").attr("class","nv-y1 nv-axis"),it.append("g").attr("class","nv-y2 nv-axis"),it.append("g").attr("class","nv-barsWrap"),it.append("g").attr("class","nv-linesWrap"),it.append("g").attr("class","nv-brushBackground"),it.append("g").attr("class","nv-x nv-brush"),A){var rt=b.align()?H/2:H,at=b.align()?rt:0;b.width(rt),et.select(".nv-legendWrap").datum(w.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?R:N),t})).call(b),M.top!=b.height()&&(M.top=b.height(),Y=t.utils.availableHeight(C,W,M)-I),et.select(".nv-legendWrap").attr("transform","translate("+at+","+-M.top+")")}Q.attr("transform","translate("+M.left+","+M.top+")"),et.select(".nv-context").style("display",E?"initial":"none"),h.width(H).height(V).color(w.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!w[e].disabled&&w[e].bar})),c.width(H).height(V).color(w.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!w[e].disabled&&!w[e].bar}));var ot=et.select(".nv-context .nv-barsWrap").datum(q.length?q:[{values:[]}]),st=et.select(".nv-context .nv-linesWrap").datum(Z[0].disabled?[{values:[]}]:Z);et.select(".nv-context").attr("transform","translate(0,"+(Y+M.bottom+k.top)+")"),ot.transition().call(h),st.transition().call(c),O&&(p._ticks(t.utils.calcTicksX(H/100,w)).tickSize(-V,0),et.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")"),et.select(".nv-context .nv-x.nv-axis").transition().call(p)),D&&(v.scale(s)._ticks(V/36).tickSize(-H,0),y.scale(l)._ticks(V/36).tickSize(q.length?0:-H,0),et.select(".nv-context .nv-y3.nv-axis").style("opacity",q.length?1:0).attr("transform","translate(0,"+r.range()[0]+")"),et.select(".nv-context .nv-y2.nv-axis").style("opacity",Z.length?1:0).attr("transform","translate("+r.range()[1]+",0)"),et.select(".nv-context .nv-y1.nv-axis").transition().call(v),et.select(".nv-context .nv-y2.nv-axis").transition().call(y)),x.x(r).on("brush",F),L&&x.extent(L);var lt=et.select(".nv-brushBackground").selectAll("g").data([L||x.extent()]),ut=lt.enter().append("g");ut.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",V),ut.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",V);var ct=et.select(".nv-x.nv-brush").call(x);ct.selectAll("rect").attr("height",V),ct.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,i=V/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}),b.dispatch.on("stateChange",function(t){for(var n in t)B[n]=t[n];$.stateChange(B),e.update()}),$.on("changeState",function(t){void 0!==t.disabled&&(w.forEach(function(e,n){e.disabled=t.disabled[n]}),B.disabled=t.disabled),e.update()}),F()}),e}var n,i,r,a,o,s,l,u=t.models.line(),c=t.models.line(),d=t.models.historicalBar(),h=t.models.historicalBar(),f=t.models.axis(),p=t.models.axis(),g=t.models.axis(),m=t.models.axis(),v=t.models.axis(),y=t.models.axis(),b=t.models.legend(),x=d3.svg.brush(),w=t.models.tooltip(),M={top:30,right:30,bottom:30,left:60},k={top:0,right:30,bottom:20,left:60},_=null,C=null,S=function(t){return t.x},T=function(t){return t.y},P=t.utils.defaultColor(),A=!0,E=!0,D=!1,O=!0,I=50,L=null,F=null,$=d3.dispatch("brush","stateChange","changeState"),z=0,B=t.utils.state(),j=null,R=" (left axis)",N=" (right axis)";u.clipEdge(!0),c.interactive(!1),f.orient("bottom").tickPadding(5),g.orient("left"),m.orient("right"),p.orient("bottom").tickPadding(5),v.orient("left"),y.orient("right"),w.headerEnabled(!0).headerFormatter(function(t,e){return f.tickFormat()(t,e)});var U=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},X=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return u.dispatch.on("elementMouseover.tooltip",function(t){w.duration(100).valueFormatter(function(t,e){return m.tickFormat()(t,e)}).data(t).position(t.pos).hidden(!1)}),u.dispatch.on("elementMouseout.tooltip",function(){w.hidden(!0)}),d.dispatch.on("elementMouseover.tooltip",function(t){t.value=e.x()(t.data),t.series={value:e.y()(t.data),color:t.color},w.duration(0).valueFormatter(function(t,e){return g.tickFormat()(t,e)}).data(t).hidden(!1)}),d.dispatch.on("elementMouseout.tooltip",function(){w.hidden(!0)}),d.dispatch.on("elementMousemove.tooltip",function(){w.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.dispatch=$,e.legend=b,e.lines=u,e.lines2=c,e.bars=d,e.bars2=h,e.xAxis=f,e.x2Axis=p,e.y1Axis=g,e.y2Axis=m,e.y3Axis=v,e.y4Axis=y,e.tooltip=w,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return _},set:function(t){_=t}},height:{get:function(){return C},set:function(t){C=t}},showLegend:{get:function(){return A},set:function(t){A=t}},brushExtent:{get:function(){return L},set:function(t){L=t}},noData:{get:function(){return F},set:function(t){F=t}},focusEnable:{get:function(){return E},set:function(t){E=t}},focusHeight:{get:function(){return I},set:function(t){I=t}},focusShowAxisX:{get:function(){return O},set:function(t){O=t}},focusShowAxisY:{get:function(){return D},set:function(t){D=t}},legendLeftAxisHint:{get:function(){return R},set:function(t){R=t}},legendRightAxisHint:{get:function(){return N},set:function(t){N=t}},tooltips:{get:function(){return w.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),w.enabled(!!e)}},tooltipContent:{get:function(){return w.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),w.contentGenerator(e)}},margin:{get:function(){return M},set:function(t){M.top=void 0!==t.top?t.top:M.top,M.right=void 0!==t.right?t.right:M.right,M.bottom=void 0!==t.bottom?t.bottom:M.bottom,M.left=void 0!==t.left?t.left:M.left}},duration:{get:function(){return z},set:function(t){z=t}},color:{get:function(){return P},set:function(e){P=t.utils.getColor(e),b.color(P)}},x:{get:function(){return S},set:function(t){S=t,u.x(t),c.x(t),d.x(t),h.x(t)}},y:{get:function(){return T},set:function(t){T=t,u.y(t),c.y(t),d.y(t),h.y(t)}}}),t.utils.inheritOptions(e,u),t.utils.initOptions(e),e},t.models.lineWithFocusChart=function(){"use strict";function e(p){return p.each(function(p){function C(){_=f.empty()?null:f.extent();var t=f.empty()?r.domain():f.extent();if(!(Math.abs(t[0]-t[1])<=1)){S.brush({extent:t,brush:f}),f.empty()||f.extent(_),W.data([f.empty()?r.domain():_]).each(function(t){var e=r(t[0])-n.range()[0],i=L-r(t[1]);d3.select(this).select(".left").attr("width",0>e?0:e),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",0>i?0:i)});R.select(".nv-focus .nv-linesWrap").datum(p.filter(function(t){return!t.disabled}).map(function(e){return{key:e.key,area:e.area,values:e.values.filter(function(e,n){return o.x()(e,n)>=t[0]&&o.x()(e,n)<=t[1]})}})).transition().duration(T).call(o),R.select(".nv-focus .nv-x.nv-axis").transition().duration(T).call(l),R.select(".nv-focus .nv-y.nv-axis").transition().duration(T).call(u)}}var O=d3.select(this),I=this;t.utils.initSVG(O);var L=t.utils.availableWidth(b,O,m),F=t.utils.availableHeight(x,O,m)-w,$=w-v.top-v.bottom;if(e.update=function(){O.transition().duration(T).call(e)},e.container=this,P.setter(D(p),e.update).getter(E(p)).update(),P.disabled=p.map(function(t){return!!t.disabled}),!A){var z;A={};for(z in P)A[z]=P[z]instanceof Array?P[z].slice(0):P[z]}if(!(p&&p.length&&p.filter(function(t){return t.values.length}).length))return t.utils.noData(e,O),e;O.selectAll(".nv-noData").remove(),n=o.xScale(),i=o.yScale(),r=s.xScale(),a=s.yScale();var B=O.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([p]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),R=B.select("g");j.append("g").attr("class","nv-legendWrap");var N=j.append("g").attr("class","nv-focus");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-linesWrap"),N.append("g").attr("class","nv-interactive");var U=j.append("g").attr("class","nv-context");U.append("g").attr("class","nv-x nv-axis"),U.append("g").attr("class","nv-y nv-axis"),U.append("g").attr("class","nv-linesWrap"),U.append("g").attr("class","nv-brushBackground"),U.append("g").attr("class","nv-x nv-brush"),k&&(h.width(L),R.select(".nv-legendWrap").datum(p).call(h),m.top!=h.height()&&(m.top=h.height(),F=t.utils.availableHeight(x,O,m)-w),R.select(".nv-legendWrap").attr("transform","translate(0,"+-m.top+")")),B.attr("transform","translate("+m.left+","+m.top+")"),M&&(g.width(L).height(F).margin({left:m.left,top:m.top}).svgContainer(O).xScale(n),B.select(".nv-interactive").call(g)),o.width(L).height(F).color(p.map(function(t,e){return t.color||y(t,e)}).filter(function(t,e){return!p[e].disabled})),s.defined(o.defined()).width(L).height($).color(p.map(function(t,e){return t.color||y(t,e)}).filter(function(t,e){return!p[e].disabled})),R.select(".nv-context").attr("transform","translate(0,"+(F+m.bottom+v.top)+")");var X=R.select(".nv-context .nv-linesWrap").datum(p.filter(function(t){return!t.disabled}));d3.transition(X).call(s),l.scale(n)._ticks(t.utils.calcTicksX(L/100,p)).tickSize(-F,0),u.scale(i)._ticks(t.utils.calcTicksY(F/36,p)).tickSize(-L,0),R.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+F+")"),f.x(r).on("brush",function(){C()}),_&&f.extent(_);var W=R.select(".nv-brushBackground").selectAll("g").data([_||f.extent()]),H=W.enter().append("g");H.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",$),H.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",$);var Y=R.select(".nv-x.nv-brush").call(f);Y.selectAll("rect").attr("height",$),Y.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,i=$/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}),C(),c.scale(r)._ticks(t.utils.calcTicksX(L/100,p)).tickSize(-$,0),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d3.transition(R.select(".nv-context .nv-x.nv-axis")).call(c),d.scale(a)._ticks(t.utils.calcTicksY($/36,p)).tickSize(-L,0),d3.transition(R.select(".nv-context .nv-y.nv-axis")).call(d),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),h.dispatch.on("stateChange",function(t){for(var n in t)P[n]=t[n];S.stateChange(P),e.update()}),g.dispatch.on("elementMousemove",function(n){o.clearHighlights();var i,a,s,c=[];if(p.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(l,u){var d=f.empty()?r.domain():f.extent(),h=l.values.filter(function(t,e){return o.x()(t,e)>=d[0]&&o.x()(t,e)<=d[1]}),p=h[a=t.interactiveBisect(h,n.pointXValue,o.x())];null!=e.y()(p,a)&&o.highlightPoint(u,a,!0),void 0!==p&&(void 0===i&&(i=p),void 0===s&&(s=e.xScale()(e.x()(p,a))),c.push({key:l.key,value:e.y()(p,a),color:y(l,l.seriesIndex)}))}),c.length>2){var d=e.yScale().invert(n.mouseY),h=.03*Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),v=t.nearestValueIndex(c.map(function(t){return t.value}),d,h);null!==v&&(c[v].highlight=!0)}var b=l.tickFormat()(e.x()(i,a));g.tooltip.position({left:n.mouseX+m.left,top:n.mouseY+m.top}).chartContainer(I.parentNode).valueFormatter(function(t){return null==t?"N/A":u.tickFormat()(t)}).data({value:b,index:a,series:c})(),g.renderGuideLine(s)}),g.dispatch.on("elementMouseout",function(){o.clearHighlights()}),S.on("changeState",function(t){void 0!==t.disabled&&p.forEach(function(e,n){e.disabled=t.disabled[n]}),e.update()})}),e}var n,i,r,a,o=t.models.line(),s=t.models.line(),l=t.models.axis(),u=t.models.axis(),c=t.models.axis(),d=t.models.axis(),h=t.models.legend(),f=d3.svg.brush(),p=t.models.tooltip(),g=t.interactiveGuideline(),m={top:30,right:30,bottom:30,left:60},v={top:0,right:30,bottom:20,left:60},y=t.utils.defaultColor(),b=null,x=null,w=50,M=!1,k=!0,_=null,C=null,S=d3.dispatch("brush","stateChange","changeState"),T=250,P=t.utils.state(),A=null;o.clipEdge(!0).duration(0),s.interactive(!1),l.orient("bottom").tickPadding(5),u.orient("left"),c.orient("bottom").tickPadding(5),d.orient("left"),p.valueFormatter(function(t,e){return u.tickFormat()(t,e)}).headerFormatter(function(t,e){return l.tickFormat()(t,e)});var E=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},D=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return o.dispatch.on("elementMouseover.tooltip",function(t){p.data(t).position(t.pos).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(){p.hidden(!0)}),e.dispatch=S,e.legend=h,e.lines=o,e.lines2=s,e.xAxis=l,e.yAxis=u,e.x2Axis=c,e.y2Axis=d,e.interactiveLayer=g,e.tooltip=p,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return b},set:function(t){b=t}},height:{get:function(){return x},set:function(t){x=t}},focusHeight:{get:function(){return w},set:function(t){w=t}},showLegend:{get:function(){return k},set:function(t){k=t}},brushExtent:{get:function(){return _},set:function(t){_=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return C},set:function(t){C=t}},tooltips:{get:function(){return p.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),p.enabled(!!e)}},tooltipContent:{get:function(){return p.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),p.contentGenerator(e)}},margin:{get:function(){return m},set:function(t){m.top=void 0!==t.top?t.top:m.top,m.right=void 0!==t.right?t.right:m.right,m.bottom=void 0!==t.bottom?t.bottom:m.bottom,m.left=void 0!==t.left?t.left:m.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e),h.color(y)}},interpolate:{get:function(){return o.interpolate()},set:function(t){o.interpolate(t),s.interpolate(t)}},xTickFormat:{get:function(){return l.tickFormat()},set:function(t){l.tickFormat(t),c.tickFormat(t)}},yTickFormat:{get:function(){return u.tickFormat()},set:function(t){u.tickFormat(t),d.tickFormat(t)}},duration:{get:function(){return T},set:function(t){T=t,u.duration(T),d.duration(T),l.duration(T),c.duration(T)}},x:{get:function(){return o.x()},set:function(t){o.x(t),s.x(t)}},y:{get:function(){return o.y()},set:function(t){o.y(t),s.y(t)}},useInteractiveGuideline:{get:function(){return M},set:function(t){(M=t)&&(o.interactive(!1),o.useVoronoi(!1))}}}),t.utils.inheritOptions(e,o),t.utils.initOptions(e),e},t.models.multiBar=function(){"use strict";function e(E){return P.reset(),E.each(function(e){var E=c-u.left-u.right,D=d-u.top-u.bottom;g=d3.select(this),t.utils.initSVG(g);var O=0;if(k&&e.length&&(k=[{values:e[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),x){var I=d3.layout.stack().offset(w).values(function(t){return t.values}).y(v)(!e.length&&k?k:e);I.forEach(function(t,n){t.nonStackable?(e[n].nonStackableSeries=O++,I[n]=e[n]):n>0&&I[n-1].nonStackable&&I[n].values.map(function(t,e){t.y0-=I[n-1].values[e].y,t.y1=t.y0+t.y})}),e=I}e.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),x&&e[0].values.map(function(t,n){var i=0,r=0;e.map(function(t,a){if(!e[a].nonStackable){var o=t.values[n];o.size=Math.abs(o.y),o.y<0?(o.y1=r,r-=o.size):(o.y1=o.size+i,i+=o.size)}})});var L=i&&r?[]:e.map(function(t,e){return t.values.map(function(t,n){return{x:m(t,n),y:v(t,n),y0:t.y0,y1:t.y1,idx:e}})});h.domain(i||d3.merge(L).map(function(t){return t.x})).rangeBands(a||[0,E],S),f.domain(r||d3.extent(d3.merge(L).map(function(t){var n=t.y;return x&&!e[t.idx].nonStackable&&(n=t.y>0?t.y1:t.y1+t.y),n}).concat(y))).range(o||[D,0]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),f.domain()[0]===f.domain()[1]&&f.domain(f.domain()[0]?[f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]:[-1,1]),s=s||h,l=l||f;var F=g.selectAll("g.nv-wrap.nv-multibar").data([e]),$=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),z=$.append("defs"),B=$.append("g"),j=F.select("g");B.append("g").attr("class","nv-groups"),F.attr("transform","translate("+u.left+","+u.top+")"),z.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect"),F.select("#nv-edge-clip-"+p+" rect").attr("width",E).attr("height",D),j.attr("clip-path",b?"url(#nv-edge-clip-"+p+")":"");var R=F.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});R.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var N=P.transition(R.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,C)).attr("y",function(t){var n=l(0)||0;return x&&e[t.series]&&!e[t.series].nonStackable&&(n=l(t.y0)),n}).attr("height",0).remove();N.delay&&N.delay(function(t,e){return e*(C/(A+1))-e}),R.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return M(t,e)}).style("stroke",function(t,e){return M(t,e)}),R.style("stroke-opacity",1).style("fill-opacity",.75);var U=R.selectAll("rect.nv-bar").data(function(t){return k&&!e.length?k.values:t.values});U.exit().remove(),U.enter().append("rect").attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,n,i){return x&&!e[i].nonStackable?0:i*h.rangeBand()/e.length}).attr("y",function(t,n,i){return l(x&&!e[i].nonStackable?t.y0:0)||0}).attr("height",0).attr("width",function(t,n,i){return h.rangeBand()/(x&&!e[i].nonStackable?1:e.length)}).attr("transform",function(t,e){return"translate("+h(m(t,e))+",0)"}),U.style("fill",function(t,e,n){return M(t,n,e)}).style("stroke",function(t,e,n){return M(t,n,e)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),T.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),T.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){T.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){T.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){T.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),U.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+h(m(t,e))+",0)"}),_&&(n||(n=e.map(function(){return!0})),U.style("fill",function(t,e,i){return d3.rgb(_(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()}).style("stroke",function(t,e,i){return d3.rgb(_(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()}));var X=U.watchTransition(P,"multibar",Math.min(250,C)).delay(function(t,n){return n*C/e[0].values.length});x?X.attr("y",function(t,n,i){return e[i].nonStackable?v(t,n)<0?f(0):f(0)-f(v(t,n))<-1?f(0)-1:f(v(t,n))||0:f(t.y1)}).attr("height",function(t,n,i){return e[i].nonStackable?Math.max(Math.abs(f(v(t,n))-f(0)),1)||0:Math.max(Math.abs(f(t.y+t.y0)-f(t.y0)),1)}).attr("x",function(t,n,i){var r=0;return e[i].nonStackable&&(r=t.series*h.rangeBand()/e.length,e.length!==O&&(r=e[i].nonStackableSeries*h.rangeBand()/(2*O))),r}).attr("width",function(t,n,i){if(e[i].nonStackable){var r=h.rangeBand()/O;return e.length!==O&&(r=h.rangeBand()/(2*O)),r}return h.rangeBand()}):X.attr("x",function(t){return t.series*h.rangeBand()/e.length}).attr("width",h.rangeBand()/e.length).attr("y",function(t,e){return v(t,e)<0?f(0):f(0)-f(v(t,e))<1?f(0)-1:f(v(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(f(v(t,e))-f(0)),1)||0}),s=h.copy(),l=f.copy(),e[0]&&e[0].values&&(A=e[0].values.length)}),P.renderEnd("multibar immediate"),e}var n,i,r,a,o,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,h=d3.scale.ordinal(),f=d3.scale.linear(),p=Math.floor(1e4*Math.random()),g=null,m=function(t){return t.x},v=function(t){return t.y},y=[0],b=!0,x=!1,w="zero",M=t.utils.defaultColor(),k=!1,_=null,C=500,S=.1,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),P=t.utils.renderWatch(T,C),A=0;return e.dispatch=T,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return i},set:function(t){i=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return x},set:function(t){x=t}},stackOffset:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return b},set:function(t){b=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return p},set:function(t){p=t}},hideable:{get:function(){return k},set:function(t){k=t}},groupSpacing:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return C},set:function(t){C=t,P.reset(C)}},color:{get:function(){return M},set:function(e){M=t.utils.getColor(e)}},barColor:{get:function(){return _},set:function(e){_=e?t.utils.getColor(e):null}}}),t.utils.initOptions(e),e},t.models.multiBarChart=function(){"use strict";function e(u){return A.reset(),A.models(r),v&&A.models(a),y&&A.models(o),u.each(function(u){var C=d3.select(this);t.utils.initSVG(C);var A=t.utils.availableWidth(d,C,c),I=t.utils.availableHeight(h,C,c);if(e.update=function(){0===P?C.call(e):C.transition().duration(P).call(e)},e.container=this,k.setter(O(u),e.update).getter(D(u)).update(),k.disabled=u.map(function(t){return!!t.disabled}),!_){var L;_={};for(L in k)_[L]=k[L]instanceof Array?k[L].slice(0):k[L]}if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(e,C),e;C.selectAll(".nv-noData").remove(),n=r.xScale(),i=r.yScale();var F=C.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([u]),$=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),z=F.select("g");if($.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y nv-axis"),$.append("g").attr("class","nv-barsWrap"),$.append("g").attr("class","nv-legendWrap"),$.append("g").attr("class","nv-controlsWrap"),m&&(s.width(A-T()),z.select(".nv-legendWrap").datum(u).call(s),c.top!=s.height()&&(c.top=s.height(),I=t.utils.availableHeight(h,C,c)),z.select(".nv-legendWrap").attr("transform","translate("+T()+","+-c.top+")")),p){var B=[{key:g.grouped||"Grouped",disabled:r.stacked()},{key:g.stacked||"Stacked",disabled:!r.stacked()}];l.width(T()).color(["#444","#444","#444"]),z.select(".nv-controlsWrap").datum(B).attr("transform","translate(0,"+-c.top+")").call(l)}F.attr("transform","translate("+c.left+","+c.top+")"),b&&z.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)"),r.disabled(u.map(function(t){return t.disabled})).width(A).height(I).color(u.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!u[e].disabled}));if(z.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).call(r),v){a.scale(n)._ticks(t.utils.calcTicksX(A/100,u)).tickSize(-I,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),z.select(".nv-x.nv-axis").call(a);var j=z.select(".nv-x.nv-axis > g").selectAll("g");if(j.selectAll("line, text").style("opacity",1),w){var R=function(t,e){return"translate("+t+","+e+")"};j.selectAll("text").attr("transform",function(t,e,n){return R(0,n%2==0?5:17)});var N=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;z.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return R(0,0===e||N%2!=0?17:5)})}x&&j.filter(function(t,e){return e%Math.ceil(u[0].values.length/(A/100))!=0}).selectAll("text, line").style("opacity",0),M&&j.selectAll(".tick text").attr("transform","rotate("+M+" 0,0)").style("text-anchor",M>0?"start":"end"),z.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}y&&(o.scale(i)._ticks(t.utils.calcTicksY(I/36,u)).tickSize(-A,0),z.select(".nv-y.nv-axis").call(o)),s.dispatch.on("stateChange",function(t){for(var n in t)k[n]=t[n];S.stateChange(k),e.update()}),l.dispatch.on("legendClick",function(t){if(t.disabled){switch(B=B.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case g.grouped:r.stacked(!1);break;case"Stacked":case g.stacked:r.stacked(!0)}k.stacked=r.stacked(),S.stateChange(k),e.update()}}),S.on("changeState",function(t){void 0!==t.disabled&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),k.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),k.stacked=t.stacked,E=t.stacked),e.update()})}),A.renderEnd("multibarchart immediate"),e}var n,i,r=t.models.multiBar(),a=t.models.axis(),o=t.models.axis(),s=t.models.legend(),l=t.models.legend(),u=t.models.tooltip(),c={top:30,right:20,bottom:50,left:60},d=null,h=null,f=t.utils.defaultColor(),p=!0,g={},m=!0,v=!0,y=!0,b=!1,x=!0,w=!1,M=0,k=t.utils.state(),_=null,C=null,S=d3.dispatch("stateChange","changeState","renderEnd"),T=function(){return p?180:0},P=250;k.stacked=!1,r.stacked(!1),a.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(b?"right":"left").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return a.tickFormat()(t,e)}),l.updateState(!1);var A=t.utils.renderWatch(S),E=!1,D=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:E}}},O=function(t){return function(e){void 0!==e.stacked&&(E=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return r.dispatch.on("elementMouseover.tooltip",function(t){t.value=e.x()(t.data),t.series={key:t.data.key,value:e.y()(t.data),color:t.color},u.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(){u.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.dispatch=S,e.multibar=r,e.legend=s,e.controls=l,e.xAxis=a,e.yAxis=o,e.state=k,e.tooltip=u,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return p},set:function(t){p=t}},controlLabels:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return C},set:function(t){C=t}},reduceXTicks:{get:function(){return x},set:function(t){x=t}},rotateLabels:{get:function(){return M},set:function(t){M=t}},staggerLabels:{get:function(){return w},set:function(t){w=t}},tooltips:{get:function(){return u.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!e)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return P},set:function(t){P=t,r.duration(P),a.duration(P),o.duration(P),A.reset(P)}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e),s.color(f)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,o.orient(b?"right":"left")}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),s.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.multiBarHorizontal=function(){"use strict";function e(h){return E.reset(),h.each(function(e){var h=c-u.left-u.right,P=d-u.top-u.bottom;f=d3.select(this),t.utils.initSVG(f),M&&(e=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(v)(e)),e.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),M&&e[0].values.map(function(t,n){var i=0,r=0;e.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=r-e.size,r-=e.size):(e.y1=i,i+=e.size)})});var D=i&&r?[]:e.map(function(t){return t.values.map(function(t,e){return{x:m(t,e),y:v(t,e),y0:t.y0,y1:t.y1}})});p.domain(i||d3.merge(D).map(function(t){return t.x})).rangeBands(a||[0,P],S),g.domain(r||d3.extent(d3.merge(D).map(function(t){return M?t.y>0?t.y1+t.y:t.y1:t.y}).concat(b))),g.range(k&&!M?o||[g.domain()[0]<0?C:0,h-(g.domain()[1]>0?C:0)]:o||[0,h]),s=s||p,l=l||d3.scale.linear().domain(g.domain()).range([g(0),g(0)]);var O=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),I=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),L=(I.append("defs"),I.append("g"));O.select("g"),L.append("g").attr("class","nv-groups"),O.attr("transform","translate("+u.left+","+u.top+")");var F=O.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),F.exit().watchTransition(E,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),F.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return x(t,e)}).style("stroke",function(t,e){return x(t,e)}),F.watchTransition(E,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var $=F.selectAll("g.nv-bar").data(function(t){return t.values});$.exit().remove();var z=$.enter().append("g").attr("transform",function(t,n,i){return"translate("+l(M?t.y0:0)+","+(M?0:i*p.rangeBand()/e.length+p(m(t,n)))+")"});z.append("rect").attr("width",0).attr("height",p.rangeBand()/(M?1:e.length)),$.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),A.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),A.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){A.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){A.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){A.elementClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,e){A.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),y(e[0],0)&&(z.append("polyline"),$.select("polyline").attr("fill","none").attr("points",function(t,n){var i=y(t,n),r=.8*p.rangeBand()/(2*(M?1:e.length));return[[(i=(i=i.length?i:[-Math.abs(i),Math.abs(i)]).map(function(t){return g(t)-g(0)}))[0],-r],[i[0],r],[i[0],0],[i[1],0],[i[1],-r],[i[1],r]].map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,n){var i=p.rangeBand()/(2*(M?1:e.length));return"translate("+(v(t,n)<0?0:g(v(t,n))-g(0))+", "+i+")"})),z.append("text"),k&&!M?($.select("text").attr("text-anchor",function(t,e){return v(t,e)<0?"end":"start"}).attr("y",p.rangeBand()/(2*e.length)).attr("dy",".32em").text(function(t,e){var n=T(v(t,e)),i=y(t,e);return void 0===i?n:i.length?n+"+"+T(Math.abs(i[1]))+"-"+T(Math.abs(i[0])):n+""+T(Math.abs(i))}),$.watchTransition(E,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return v(t,e)<0?-4:g(v(t,e))-g(0)+4})):$.selectAll("text").text(""),_&&!M?(z.append("text").classed("nv-bar-label",!0),$.select("text.nv-bar-label").attr("text-anchor",function(t,e){return v(t,e)<0?"start":"end"}).attr("y",p.rangeBand()/(2*e.length)).attr("dy",".32em").text(function(t,e){return m(t,e)}),$.watchTransition(E,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return v(t,e)<0?g(0)-g(v(t,e))+4:-4})):$.selectAll("text.nv-bar-label").text(""),$.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}),w&&(n||(n=e.map(function(){return!0})),$.style("fill",function(t,e,i){return d3.rgb(w(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()}).style("stroke",function(t,e,i){return d3.rgb(w(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[i]).toString()})),M?$.watchTransition(E,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+g(t.y1)+","+p(m(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(g(v(t,e)+t.y0)-g(t.y0))}).attr("height",p.rangeBand()):$.watchTransition(E,"multibarhorizontal: bars").attr("transform",function(t,n){return"translate("+g(v(t,n)<0?v(t,n):0)+","+(t.series*p.rangeBand()/e.length+p(m(t,n)))+")"}).select("rect").attr("height",p.rangeBand()/e.length).attr("width",function(t,e){return Math.max(Math.abs(g(v(t,e))-g(0)),1)}),s=p.copy(),l=g.copy()}),E.renderEnd("multibarHorizontal immediate"),e}var n,i,r,a,o,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,h=Math.floor(1e4*Math.random()),f=null,p=d3.scale.ordinal(),g=d3.scale.linear(),m=function(t){return t.x},v=function(t){return t.y},y=function(t){return t.yErr},b=[0],x=t.utils.defaultColor(),w=null,M=!1,k=!1,_=!1,C=60,S=.1,T=d3.format(",.2f"),P=250,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),E=t.utils.renderWatch(A,P);return e.dispatch=A,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return v},set:function(t){v=t}},yErr:{get:function(){return y},set:function(t){y=t}},xScale:{get:function(){return p},set:function(t){p=t}},yScale:{get:function(){return g},set:function(t){g=t}},xDomain:{get:function(){return i},set:function(t){i=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return a},set:function(t){a=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return b},set:function(t){b=t}},stacked:{get:function(){return M},set:function(t){M=t}},showValues:{get:function(){return k},set:function(t){k=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return h},set:function(t){h=t}},valueFormat:{get:function(){return T},set:function(t){T=t}},valuePadding:{get:function(){return C},set:function(t){C=t}},groupSpacing:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return P},set:function(t){P=t,E.reset(P)}},color:{get:function(){return x},set:function(e){x=t.utils.getColor(e)}},barColor:{get:function(){return w},set:function(e){w=e?t.utils.getColor(e):null}}}),t.utils.initOptions(e),e},t.models.multiBarHorizontalChart=function(){"use strict";function e(u){return P.reset(),P.models(r),v&&P.models(a),y&&P.models(o),u.each(function(u){var M=d3.select(this);t.utils.initSVG(M);var P=t.utils.availableWidth(d,M,c),A=t.utils.availableHeight(h,M,c);if(e.update=function(){M.transition().duration(C).call(e)},e.container=this,b=r.stacked(),x.setter(T(u),e.update).getter(S(u)).update(),x.disabled=u.map(function(t){return!!t.disabled}),!w){var E;w={};for(E in x)w[E]=x[E]instanceof Array?x[E].slice(0):x[E]}if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(e,M),e;M.selectAll(".nv-noData").remove(),n=r.xScale(),i=r.yScale();var D=M.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([u]),O=D.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),I=D.select("g");if(O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),O.append("g").attr("class","nv-barsWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-controlsWrap"),m&&(s.width(P-_()),I.select(".nv-legendWrap").datum(u).call(s),c.top!=s.height()&&(c.top=s.height(),A=t.utils.availableHeight(h,M,c)),I.select(".nv-legendWrap").attr("transform","translate("+_()+","+-c.top+")")),p){var L=[{key:g.grouped||"Grouped",disabled:r.stacked()},{key:g.stacked||"Stacked",disabled:!r.stacked()}];l.width(_()).color(["#444","#444","#444"]),I.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-c.top+")").call(l)}D.attr("transform","translate("+c.left+","+c.top+")"),r.disabled(u.map(function(t){return t.disabled})).width(P).height(A).color(u.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!u[e].disabled}));if(I.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).transition().call(r),v){a.scale(n)._ticks(t.utils.calcTicksY(A/24,u)).tickSize(-P,0),I.select(".nv-x.nv-axis").call(a);I.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")}y&&(o.scale(i)._ticks(t.utils.calcTicksX(P/100,u)).tickSize(-A,0),I.select(".nv-y.nv-axis").attr("transform","translate(0,"+A+")"),I.select(".nv-y.nv-axis").call(o)),I.select(".nv-zeroLine line").attr("x1",i(0)).attr("x2",i(0)).attr("y1",0).attr("y2",-A),s.dispatch.on("stateChange",function(t){for(var n in t)x[n]=t[n];k.stateChange(x),e.update()}),l.dispatch.on("legendClick",function(t){if(t.disabled){switch(L=L.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":r.stacked(!1);break;case"Stacked":r.stacked(!0)}x.stacked=r.stacked(),k.stateChange(x),b=r.stacked(),e.update()}}),k.on("changeState",function(t){void 0!==t.disabled&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),x.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),x.stacked=t.stacked,b=t.stacked),e.update()})}),P.renderEnd("multibar horizontal chart immediate"),e}var n,i,r=t.models.multiBarHorizontal(),a=t.models.axis(),o=t.models.axis(),s=t.models.legend().height(30),l=t.models.legend().height(30),u=t.models.tooltip(),c={top:30,right:20,bottom:50,left:60},d=null,h=null,f=t.utils.defaultColor(),p=!0,g={},m=!0,v=!0,y=!0,b=!1,x=t.utils.state(),w=null,M=null,k=d3.dispatch("stateChange","changeState","renderEnd"),_=function(){return p?180:0},C=250;x.stacked=!1,r.stacked(b),a.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),o.orient("bottom").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return a.tickFormat()(t,e)}),l.updateState(!1);var S=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:b}}},T=function(t){return function(e){void 0!==e.stacked&&(b=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},P=t.utils.renderWatch(k,C);return r.dispatch.on("elementMouseover.tooltip",function(t){t.value=e.x()(t.data),t.series={key:t.data.key,value:e.y()(t.data),color:t.color},u.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(){u.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.dispatch=k,e.multibar=r,e.legend=s,e.controls=l,e.xAxis=a,e.yAxis=o,e.state=x,e.tooltip=u,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return p},set:function(t){p=t}},controlLabels:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return M},set:function(t){M=t}},tooltips:{get:function(){return u.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),u.enabled(!!e)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),u.contentGenerator(e)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return C},set:function(t){C=t,P.reset(C),r.duration(C),a.duration(C),o.duration(C)}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e),s.color(f)}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),s.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.multiChart=function(){"use strict";function e(u){return u.each(function(u){function c(t){var e=2===u[t.seriesIndex].yAxis?C:_;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color},T.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function d(t){var e=2===u[t.seriesIndex].yAxis?C:_;t.point.x=w.x()(t.point),t.point.y=w.y()(t.point),T.duration(100).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).position(t.pos).hidden(!1)}function f(t){var e=2===u[t.data.series].yAxis?C:_;t.value=b.x()(t.data),t.series={value:b.y()(t.data),color:t.color},T.duration(0).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}var P=d3.select(this);t.utils.initSVG(P),e.update=function(){P.transition().call(e)},e.container=this;var A=t.utils.availableWidth(o,P,r),E=t.utils.availableHeight(s,P,r),D=u.filter(function(t){return"line"==t.type&&1==t.yAxis}),O=u.filter(function(t){return"line"==t.type&&2==t.yAxis}),I=u.filter(function(t){return"bar"==t.type&&1==t.yAxis}),L=u.filter(function(t){return"bar"==t.type&&2==t.yAxis}),F=u.filter(function(t){return"area"==t.type&&1==t.yAxis}),$=u.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(e,P),e;P.selectAll(".nv-noData").remove();var z=u.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})}),B=u.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})});p.domain(d3.extent(d3.merge(z.concat(B)),function(t){return t.x})).range([0,A]);var j=P.selectAll("g.wrap.multiChart").data([u]),R=j.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y1 nv-axis"),R.append("g").attr("class","nv-y2 nv-axis"),R.append("g").attr("class","lines1Wrap"),R.append("g").attr("class","lines2Wrap"),R.append("g").attr("class","bars1Wrap"),R.append("g").attr("class","bars2Wrap"),R.append("g").attr("class","stack1Wrap"),R.append("g").attr("class","stack2Wrap"),R.append("g").attr("class","legendWrap");var N=j.select("g"),U=u.map(function(t,e){return u[e].color||a(t,e)});if(l){var X=S.align()?A/2:A,W=S.align()?X:0;S.width(X),S.color(U),N.select(".legendWrap").datum(u.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(S),r.top!=S.height()&&(r.top=S.height(),E=t.utils.availableHeight(s,P,r)),N.select(".legendWrap").attr("transform","translate("+W+","+-r.top+")")}v.width(A).height(E).interpolate(h).color(U.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"line"==u[e].type})),y.width(A).height(E).interpolate(h).color(U.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"line"==u[e].type})),b.width(A).height(E).color(U.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"bar"==u[e].type})),x.width(A).height(E).color(U.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"bar"==u[e].type})),w.width(A).height(E).color(U.filter(function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"area"==u[e].type})),M.width(A).height(E).color(U.filter(function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"area"==u[e].type})),N.attr("transform","translate("+r.left+","+r.top+")");var H=N.select(".lines1Wrap").datum(D.filter(function(t){return!t.disabled})),Y=N.select(".bars1Wrap").datum(I.filter(function(t){return!t.disabled})),V=N.select(".stack1Wrap").datum(F.filter(function(t){return!t.disabled})),G=N.select(".lines2Wrap").datum(O.filter(function(t){return!t.disabled})),q=N.select(".bars2Wrap").datum(L.filter(function(t){return!t.disabled})),Z=N.select(".stack2Wrap").datum($.filter(function(t){return!t.disabled})),K=F.length?F.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],J=$.length?$.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];g.domain(n||d3.extent(d3.merge(z).concat(K),function(t){return t.y})).range([0,E]),m.domain(i||d3.extent(d3.merge(B).concat(J),function(t){return t.y})).range([0,E]),v.yDomain(g.domain()),b.yDomain(g.domain()),w.yDomain(g.domain()),y.yDomain(m.domain()),x.yDomain(m.domain()),M.yDomain(m.domain()),F.length&&d3.transition(V).call(w),$.length&&d3.transition(Z).call(M),I.length&&d3.transition(Y).call(b),L.length&&d3.transition(q).call(x),D.length&&d3.transition(H).call(v),O.length&&d3.transition(G).call(y),k._ticks(t.utils.calcTicksX(A/100,u)).tickSize(-E,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+E+")"),d3.transition(N.select(".nv-x.nv-axis")).call(k),_._ticks(t.utils.calcTicksY(E/36,u)).tickSize(-A,0),d3.transition(N.select(".nv-y1.nv-axis")).call(_),C._ticks(t.utils.calcTicksY(E/36,u)).tickSize(-A,0),d3.transition(N.select(".nv-y2.nv-axis")).call(C),N.select(".nv-y1.nv-axis").classed("nv-disabled",!z.length).attr("transform","translate("+p.range()[0]+",0)"),N.select(".nv-y2.nv-axis").classed("nv-disabled",!B.length).attr("transform","translate("+p.range()[1]+",0)"),S.dispatch.on("stateChange",function(){e.update()}),v.dispatch.on("elementMouseover.tooltip",c),y.dispatch.on("elementMouseover.tooltip",c),v.dispatch.on("elementMouseout.tooltip",function(){T.hidden(!0)}),y.dispatch.on("elementMouseout.tooltip",function(){T.hidden(!0)}),w.dispatch.on("elementMouseover.tooltip",d),M.dispatch.on("elementMouseover.tooltip",d),w.dispatch.on("elementMouseout.tooltip",function(){T.hidden(!0)}),M.dispatch.on("elementMouseout.tooltip",function(){T.hidden(!0)}),b.dispatch.on("elementMouseover.tooltip",f),x.dispatch.on("elementMouseover.tooltip",f),b.dispatch.on("elementMouseout.tooltip",function(){T.hidden(!0)}),x.dispatch.on("elementMouseout.tooltip",function(){T.hidden(!0)}),b.dispatch.on("elementMousemove.tooltip",function(){T.position({top:d3.event.pageY,left:d3.event.pageX})()}),x.dispatch.on("elementMousemove.tooltip",function(){T.position({top:d3.event.pageY,left:d3.event.pageX})()})}),e}var n,i,r={top:30,right:20,bottom:50,left:60},a=t.utils.defaultColor(),o=null,s=null,l=!0,u=null,c=function(t){return t.x},d=function(t){return t.y},h="monotone",f=!0,p=d3.scale.linear(),g=d3.scale.linear(),m=d3.scale.linear(),v=t.models.line().yScale(g),y=t.models.line().yScale(m),b=t.models.multiBar().stacked(!1).yScale(g),x=t.models.multiBar().stacked(!1).yScale(m),w=t.models.stackedArea().yScale(g),M=t.models.stackedArea().yScale(m),k=t.models.axis().scale(p).orient("bottom").tickPadding(5),_=t.models.axis().scale(g).orient("left"),C=t.models.axis().scale(m).orient("right"),S=t.models.legend().height(30),T=t.models.tooltip(),P=d3.dispatch();return e.dispatch=P,e.lines1=v,e.lines2=y,e.bars1=b,e.bars2=x,e.stack1=w,e.stack2=M,e.xAxis=k,e.yAxis1=_,e.yAxis2=C,e.tooltip=T,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return s},set:function(t){s=t}},showLegend:{get:function(){return l},set:function(t){l=t}},yDomain1:{get:function(){return n},set:function(t){n=t}},yDomain2:{get:function(){return i},set:function(t){i=t}},noData:{get:function(){return u},set:function(t){u=t}},interpolate:{get:function(){return h},set:function(t){h=t}},tooltips:{get:function(){return T.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),T.enabled(!!e)}},tooltipContent:{get:function(){return T.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),T.contentGenerator(e)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}},x:{get:function(){return c},set:function(t){c=t,v.x(t),y.x(t),b.x(t),x.x(t),w.x(t),M.x(t)}},y:{get:function(){return d},set:function(t){d=t,v.y(t),y.y(t),w.y(t),M.y(t),b.y(t),x.y(t)}},useVoronoi:{get:function(){return f},set:function(t){f=t,v.useVoronoi(t),y.useVoronoi(t),w.useVoronoi(t),M.useVoronoi(t)}}}),t.utils.initOptions(e),e},t.models.ohlcBar=function(){"use strict";function e(_){return _.each(function(e){c=d3.select(this);var _=t.utils.availableWidth(s,c,o),S=t.utils.availableHeight(l,c,o);t.utils.initSVG(c);var T=_/e[0].values.length*.9;d.domain(n||d3.extent(e[0].values.map(f).concat(b))),d.range(w?r||[.5*_/e[0].values.length,_*(e[0].values.length-.5)/e[0].values.length]:r||[5+T/2,_-T/2-5]),h.domain(i||[d3.min(e[0].values.map(y).concat(x)),d3.max(e[0].values.map(v).concat(x))]).range(a||[S,0]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]:[-1,1]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]:[-1,1]);var P=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),A=P.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),E=A.append("defs"),D=A.append("g"),O=P.select("g");D.append("g").attr("class","nv-ticks"),P.attr("transform","translate("+o.left+","+o.top+")"),c.on("click",function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:u})}),E.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),P.select("#nv-chart-clip-path-"+u+" rect").attr("width",_).attr("height",S),O.attr("clip-path",M?"url(#nv-chart-clip-path-"+u+")":"");var I=P.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});I.exit().remove(),I.enter().append("path").attr("class",function(t,e,n){return(g(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(h(g(t,e))-h(v(t,e)))+"l"+-T/2+",0l"+T/2+",0l0,"+(h(y(t,e))-h(g(t,e)))+"l0,"+(h(m(t,e))-h(y(t,e)))+"l"+T/2+",0l"+-T/2+",0z"}).attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(v(t,e))+")"}).attr("fill",function(){return k[0]}).attr("stroke",function(){return k[0]}).attr("x",0).attr("y",function(t,e){return h(Math.max(0,p(t,e)))}).attr("height",function(t,e){return Math.abs(h(p(t,e))-h(0))}),I.attr("class",function(t,e,n){return(g(t,e)>m(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(I).attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(v(t,e))+")"}).attr("d",function(t,n){var i=_/e[0].values.length*.9;return"m0,0l0,"+(h(g(t,n))-h(v(t,n)))+"l"+-i/2+",0l"+i/2+",0l0,"+(h(y(t,n))-h(g(t,n)))+"l0,"+(h(m(t,n))-h(y(t,n)))+"l"+i/2+",0l"+-i/2+",0z"})}),e}var n,i,r,a,o={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,d=d3.scale.linear(),h=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},g=function(t){return t.open},m=function(t){return t.close},v=function(t){return t.high},y=function(t){return t.low},b=[],x=[],w=!1,M=!0,k=t.utils.defaultColor(),_=!1,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return e.highlightPoint=function(t,n){e.clearHighlights(),c.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",n)},e.clearHighlights=function(){c.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},e.dispatch=C,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return x},set:function(t){x=t}},padData:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return M},set:function(t){M=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return _},set:function(t){_=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return g()},set:function(t){g=t}},close:{get:function(){return m()},set:function(t){m=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!=t.top?t.top:o.top,o.right=void 0!=t.right?t.right:o.right,o.bottom=void 0!=t.bottom?t.bottom:o.bottom,o.left=void 0!=t.left?t.left:o.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.parallelCoordinates=function(){"use strict";function e(g){return g.each(function(e){function g(t){return T(s.map(function(e){if(isNaN(t[e])||isNaN(parseFloat(t[e]))){var n=o[e].domain(),i=o[e].range(),r=n[0]-(n[1]-n[0])/9;if(D.indexOf(e)<0){var s=d3.scale.linear().domain([r,n[1]]).range([x-12,i[1]]);o[e].brush.y(s),D.push(e)}return[a(e),o[e](r)]}return D.length>0?(C.style("display","inline"),S.style("display","inline")):(C.style("display","none"),S.style("display","none")),[a(e),o[e](t[e])]}))}function m(){var t=s.filter(function(t){return!o[t].brush.empty()}),e=t.map(function(t){return o[t].brush.extent()});c=[],t.forEach(function(t,n){c[n]={dimension:t,extent:e[n]}}),d=[],L.style("display",function(n){var i=t.every(function(t,i){return!(!isNaN(n[t])||e[i][0]!=o[t].brush.y().domain()[0])||e[i][0]<=n[t]&&n[t]<=e[i][1]});return i&&d.push(n),i?null:"none"}),p.brush({filters:c,active:d})}function v(t){var e=h[t];return null==e?a(t):e}var y=d3.select(this),b=t.utils.availableWidth(i,y,n),x=t.utils.availableHeight(r,y,n);t.utils.initSVG(y),d=e,a.rangePoints([0,b],1).domain(s);var w={};s.forEach(function(t){var n=d3.extent(e,function(e){return+e[t]});return w[t]=!1,void 0===n[0]&&(w[t]=!0,n[0]=0,n[1]=0),n[0]===n[1]&&(n[0]=n[0]-1,n[1]=n[1]+1),o[t]=d3.scale.linear().domain(n).range([.9*(x-12),0]),o[t].brush=d3.svg.brush().y(o[t]).on("brush",m),"name"!=t});var M=y.selectAll("g.nv-wrap.nv-parallelCoordinates").data([e]),k=M.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),_=M.select("g");k.append("g").attr("class","nv-parallelCoordinates background"),k.append("g").attr("class","nv-parallelCoordinates foreground"),k.append("g").attr("class","nv-parallelCoordinates missingValuesline"),M.attr("transform","translate("+n.left+","+n.top+")");var C,S,T=d3.svg.line().interpolate("cardinal").tension(f),P=d3.svg.axis().orient("left"),A=d3.behavior.drag().on("dragstart",function(t){h[t]=this.parentNode.__origin__=a(t),I.attr("visibility","hidden")}).on("drag",function(t){h[t]=Math.min(b,Math.max(0,this.parentNode.__origin__+=d3.event.x)),L.attr("d",g),s.sort(function(t,e){return v(t)-v(e)}),a.domain(s),F.attr("transform",function(t){return"translate("+v(t)+")"})}).on("dragend",function(t){delete this.parentNode.__origin__,delete h[t],d3.select(this.parentNode).attr("transform","translate("+a(t)+")"),L.attr("d",g),I.attr("d",g).attr("visibility",null)}),E=a.range()[1]-a.range()[0],D=[],O=[0+E/2,x-12,b-E/2,x-12];(C=M.select(".missingValuesline").selectAll("line").data([O])).enter().append("line"),C.exit().remove(),C.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),(S=M.select(".missingValuesline").selectAll("text").data(["undefined values"])).append("text").data(["undefined values"]),S.enter().append("text"),S.exit().remove(),S.attr("y",x).attr("x",b-92-E/2).text(function(t){return t});var I=M.select(".background").selectAll("path").data(e);I.enter().append("path"),I.exit().remove(),I.attr("d",g);var L=M.select(".foreground").selectAll("path").data(e);L.enter().append("path"),L.exit().remove(),L.attr("d",g).attr("stroke",u),L.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),p.elementMouseover({label:t.name,data:t.data,index:e,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})}),L.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),p.elementMouseout({label:t.name,data:t.data,index:e})});var F=_.selectAll(".dimension").data(s),$=F.enter().append("g").attr("class","nv-parallelCoordinates dimension");$.append("g").attr("class","nv-parallelCoordinates nv-axis"),$.append("g").attr("class","nv-parallelCoordinates-brush"),$.append("text").attr("class","nv-parallelCoordinates nv-label"),F.attr("transform",function(t){return"translate("+a(t)+",0)"}),F.exit().remove(),F.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(t){p.elementMouseover({dim:t,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(t){p.elementMouseout({dim:t})}).call(A),F.select(".nv-axis").each(function(t,e){d3.select(this).call(P.scale(o[t]).tickFormat(d3.format(l[e])))}),F.select(".nv-parallelCoordinates-brush").each(function(t){d3.select(this).call(o[t].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),e}var n={top:30,right:0,bottom:10,left:0},i=null,r=null,a=d3.scale.ordinal(),o={},s=[],l=[],u=t.utils.defaultColor(),c=[],d=[],h=[],f=1,p=d3.dispatch("brush","elementMouseover","elementMouseout");return e.dispatch=p,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return r},set:function(t){r=t}},dimensionNames:{get:function(){return s},set:function(t){s=t}},dimensionFormats:{get:function(){return l},set:function(t){l=t}},lineTension:{get:function(){return f},set:function(t){f=t}},dimensions:{get:function(){return s},set:function(e){t.deprecated("dimensions","use dimensionNames instead"),s=e}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.pie=function(){"use strict";function e(E){return A.reset(),E.each(function(e){var E=i-n.left-n.right,D=r-n.top-n.bottom,O=Math.min(E,D)/2,I=[],L=[];if(l=d3.select(this),0===C.length)for(var F=O-O/5,$=_*O,z=0;z<e[0].length;z++)I.push(F),L.push($);else I=C.map(function(t){return(t.outer-t.outer/5)*O}),L=C.map(function(t){return(t.inner-t.inner/5)*O}),_=d3.min(C.map(function(t){return t.inner-t.inner/5}));t.utils.initSVG(l);var B=l.selectAll(".nv-wrap.nv-pie").data(e),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+s).append("g"),R=B.select("g"),N=j.append("g").attr("class","nv-pie");j.append("g").attr("class","nv-pieLabels"),B.attr("transform","translate("+n.left+","+n.top+")"),R.select(".nv-pie").attr("transform","translate("+E/2+","+D/2+")"),R.select(".nv-pieLabels").attr("transform","translate("+E/2+","+D/2+")"),l.on("click",function(t,e){S.chartClick({data:t,index:e,pos:d3.event,id:s})}),T=[],P=[];for(z=0;z<e[0].length;z++){var U=d3.svg.arc().outerRadius(I[z]),X=d3.svg.arc().outerRadius(I[z]+5);!1!==x&&(U.startAngle(x),X.startAngle(x)),!1!==M&&(U.endAngle(M),X.endAngle(M)),g&&(U.innerRadius(L[z]),X.innerRadius(L[z])),U.cornerRadius&&k&&(U.cornerRadius(k),X.cornerRadius(k)),T.push(U),P.push(X)}var W=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:o(t)});W.padAngle&&w&&W.padAngle(w),g&&m&&(N.append("text").attr("class","nv-pie-title"),B.select(".nv-pie-title").style("text-anchor","middle").text(function(){return m}).style("font-size",Math.min(E,D)*_*2/(m.length+2)+"px").attr("dy","0.35em").attr("transform",function(){return"translate(0, "+y+")"}));var H=B.select(".nv-pie").selectAll(".nv-slice").data(W),Y=B.select(".nv-pieLabels").selectAll(".nv-label").data(W);H.exit().remove(),Y.exit().remove();var V=H.enter().append("g");if(V.attr("class","nv-slice"),V.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),v&&d3.select(this).select("path").transition().duration(70).attr("d",P[e]),S.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill")})}),V.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),v&&d3.select(this).select("path").transition().duration(50).attr("d",T[e]),S.elementMouseout({data:t.data,index:e})}),V.on("mousemove",function(t,e){S.elementMousemove({data:t.data,index:e})}),V.on("click",function(t,e){S.elementClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),V.on("dblclick",function(t,e){S.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),H.attr("fill",function(t,e){return u(t.data,e)}),H.attr("stroke",function(t,e){return u(t.data,e)}),V.append("path").each(function(t){this._current=t}),H.select("path").transition().attr("d",function(t,e){return T[e](t)}).attrTween("d",function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,g||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return T[e](n(t))}}),d){var G=[];for(z=0;z<e[0].length;z++)G.push(T[z]),h?g&&(G[z]=d3.svg.arc().outerRadius(T[z].outerRadius()),!1!==x&&G[z].startAngle(x),!1!==M&&G[z].endAngle(M)):g||G[z].innerRadius(0);Y.enter().append("g").classed("nv-label",!0).each(function(t){var e=d3.select(this);e.attr("transform",function(t,e){if(b){t.outerRadius=I[e]+10,t.innerRadius=I[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+G[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=O+10,t.innerRadius=O+15,"translate("+G[e].centroid(t)+")"}),e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),e.append("text").style("text-anchor",b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var q={},Z=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)};Y.watchTransition(A,"pie labels").attr("transform",function(t,e){if(b){t.outerRadius=I[e]+10,t.innerRadius=I[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+G[e].centroid(t)+") rotate("+n+")"}t.outerRadius=O+10,t.innerRadius=O+15;var i=G[e].centroid(t);if(t.value){var r=Z(i);q[r]&&(i[1]-=14),q[Z(i)]=!0}return"translate("+i+")"}),Y.select(".nv-label text").style("text-anchor",function(t){return b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=(t.endAngle-t.startAngle)/(2*Math.PI),i="";if(!t.value||p>n)return"";if("function"==typeof f)i=f(t,e,{key:a(t.data),value:o(t.data),percent:c(n)});else switch(f){case"key":i=a(t.data);break;case"value":i=c(o(t.data));break;case"percent":i=d3.format("%")(n)}return i})}}),A.renderEnd("pie immediate"),e}var n={top:0,right:0,bottom:0,left:0},i=500,r=500,a=function(t){return t.x},o=function(t){return t.y},s=Math.floor(1e4*Math.random()),l=null,u=t.utils.defaultColor(),c=d3.format(",.2f"),d=!0,h=!1,f="key",p=.02,g=!1,m=!1,v=!0,y=0,b=!1,x=!1,w=!1,M=!1,k=0,_=.5,C=[],S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=[],P=[],A=t.utils.renderWatch(S);return e.dispatch=S,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{arcsRadius:{get:function(){return C},set:function(t){C=t}},width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return r},set:function(t){r=t}},showLabels:{get:function(){return d},set:function(t){d=t}},title:{get:function(){return m},set:function(t){m=t}},titleOffset:{get:function(){return y},set:function(t){y=t}},labelThreshold:{get:function(){return p},set:function(t){p=t}},valueFormat:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return a},set:function(t){a=t}},id:{get:function(){return s},set:function(t){s=t}},endAngle:{get:function(){return M},set:function(t){M=t}},startAngle:{get:function(){return x},set:function(t){x=t}},padAngle:{get:function(){return w},set:function(t){w=t}},cornerRadius:{get:function(){return k},set:function(t){k=t}},donutRatio:{get:function(){return _},set:function(t){_=t}},labelsOutside:{get:function(){return h},set:function(t){h=t}},labelSunbeamLayout:{get:function(){return b},set:function(t){b=t}},donut:{get:function(){return g},set:function(t){g=t}},growOnHover:{get:function(){return v},set:function(t){v=t}},pieLabelsOutside:{get:function(){return h},set:function(e){h=e,t.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return h},set:function(e){h=e,t.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return c},set:function(e){c=e,t.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},y:{get:function(){return o},set:function(t){o=d3.functor(t)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}},labelType:{get:function(){return f},set:function(t){f=t||"key"}}}),t.utils.initOptions(e),e},t.models.pieChart=function(){"use strict";function e(r){return m.reset(),m.models(n),r.each(function(r){var c=d3.select(this);t.utils.initSVG(c);var f=t.utils.availableWidth(o,c,a),p=t.utils.availableHeight(s,c,a);if(e.update=function(){c.transition().call(e)},e.container=this,d.setter(y(r),e.update).getter(v(r)).update(),d.disabled=r.map(function(t){return!!t.disabled}),!h){var m;h={};for(m in d)h[m]=d[m]instanceof Array?d[m].slice(0):d[m]}if(!r||!r.length)return t.utils.noData(e,c),e;c.selectAll(".nv-noData").remove();var b=c.selectAll("g.nv-wrap.nv-pieChart").data([r]),x=b.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),w=b.select("g");if(x.append("g").attr("class","nv-pieWrap"),x.append("g").attr("class","nv-legendWrap"),l)if("top"===u)i.width(f).key(n.x()),b.select(".nv-legendWrap").datum(r).call(i),a.top!=i.height()&&(a.top=i.height(),p=t.utils.availableHeight(s,c,a)),b.select(".nv-legendWrap").attr("transform","translate(0,"+-a.top+")");else if("right"===u){var M=t.models.legend().width();M>f/2&&(M=f/2),i.height(p).key(n.x()),i.width(M),f-=i.width(),b.select(".nv-legendWrap").datum(r).call(i).attr("transform","translate("+f+",0)")}b.attr("transform","translate("+a.left+","+a.top+")"),n.width(f).height(p);var k=w.select(".nv-pieWrap").datum([r]);d3.transition(k).call(n),i.dispatch.on("stateChange",function(t){for(var n in t)d[n]=t[n];g.stateChange(d),e.update()}),g.on("changeState",function(t){void 0!==t.disabled&&(r.forEach(function(e,n){e.disabled=t.disabled[n]}),d.disabled=t.disabled),e.update()})}),m.renderEnd("pieChart immediate"),e}var n=t.models.pie(),i=t.models.legend(),r=t.models.tooltip(),a={top:30,right:20,bottom:20,left:20},o=null,s=null,l=!0,u="top",c=t.utils.defaultColor(),d=t.utils.state(),h=null,f=null,p=250,g=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");r.headerEnabled(!1).duration(0).valueFormatter(function(t,e){return n.valueFormat()(t,e)});var m=t.utils.renderWatch(g),v=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},y=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return n.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color},r.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(){r.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.legend=i,e.dispatch=g,e.pie=n,e.tooltip=r,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{noData:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return l},set:function(t){l=t}},legendPosition:{get:function(){return u},set:function(t){u=t}},defaultState:{get:function(){return h},set:function(t){h=t}},tooltips:{get:function(){return r.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),r.enabled(!!e)}},tooltipContent:{get:function(){return r.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),r.contentGenerator(e)}},color:{get:function(){return c},set:function(t){c=t,i.color(c),n.color(c)}},duration:{get:function(){return p},set:function(t){p=t,m.reset(p)}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.scatter=function(){"use strict";function e(j){return N.reset(),j.each(function(e){d=d3.select(this);var j=t.utils.availableWidth(s,d,o),X=t.utils.availableHeight(l,d,o);t.utils.initSVG(d),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var W=E&&D&&L?[]:d3.merge(e.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),size:v(t,e)}})}));h.domain(E||d3.extent(W.map(function(t){return t.x}).concat(b))),h.range(_&&e[0]?O||[(j*C+j)/(2*e[0].values.length),j-j*(1+C)/(2*e[0].values.length)]:O||[0,j]),f.domain(D||d3.extent(W.map(function(t){return t.y}).concat(x))).range(I||[X,0]),p.domain(L||d3.extent(W.map(function(t){return t.size}).concat(w))).range(F||U),$=h.domain()[0]===h.domain()[1]||f.domain()[0]===f.domain()[1],h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),f.domain()[0]===f.domain()[1]&&f.domain(f.domain()[0]?[f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]:[-1,1]),isNaN(h.domain()[0])&&h.domain([-1,1]),isNaN(f.domain()[0])&&f.domain([-1,1]),n=n||h,i=i||f,r=r||p;var H=d.selectAll("g.nv-wrap.nv-scatter").data([e]),Y=H.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+c),V=Y.append("defs"),G=Y.append("g"),q=H.select("g");H.classed("nv-single-point",$),G.append("g").attr("class","nv-groups"),G.append("g").attr("class","nv-point-paths"),Y.append("g").attr("class","nv-point-clips"),H.attr("transform","translate("+o.left+","+o.top+")"),V.append("clipPath").attr("id","nv-edge-clip-"+c).append("rect"),H.select("#nv-edge-clip-"+c+" rect").attr("width",j).attr("height",X>0?X:0),q.attr("clip-path",S?"url(#nv-edge-clip-"+c+")":""),R=!0;var Z=H.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});Z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Z.exit().remove(),Z.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),Z.watchTransition(N,"scatter: groups").style("fill",function(t,e){return u(t,e)}).style("stroke",function(t,e){return u(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var K=Z.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return k(t[0],e)})});K.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+n(g(t[0],t[1]))+","+i(m(t[0],t[1]))+")"}).attr("d",t.utils.symbol().type(function(t){return y(t[0])}).size(function(t){return p(v(t[0],t[1]))})),K.exit().remove(),Z.exit().selectAll("path.nv-point").watchTransition(N,"scatter exit").attr("transform",function(t){return"translate("+h(g(t[0],t[1]))+","+f(m(t[0],t[1]))+")"}).remove(),K.each(function(t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t[1],!0).classed("nv-noninteractive",!M).classed("hover",!1)}),K.watchTransition(N,"scatter points").attr("transform",function(t){return"translate("+h(g(t[0],t[1]))+","+f(m(t[0],t[1]))+")"}).attr("d",t.utils.symbol().type(function(t){return y(t[0])}).size(function(t){return p(v(t[0],t[1]))})),clearTimeout(a),a=setTimeout(function(){if(R=!1,!M)return!1;if(!0===B){var t=d3.merge(e.map(function(t,e){return t.values.map(function(t,n){var i=g(t,n),r=m(t,n);return[h(i)+1e-4*Math.random(),f(r)+1e-4*Math.random(),e,n,t]}).filter(function(t,e){return k(t[4],e)})}));if(0==t.length)return!1;t.length<3&&(t.push([h.range()[0]-20,f.range()[0]-20,null,null]),t.push([h.range()[1]+20,f.range()[1]+20,null,null]),t.push([h.range()[0]-20,f.range()[0]+20,null,null]),t.push([h.range()[1]+20,f.range()[1]-20,null,null]));var n=d3.geom.polygon([[-10,-10],[-10,l+10],[s+10,l+10],[s+10,-10]]),i=d3.geom.voronoi(t).map(function(e,i){return{data:n.clip(e),series:t[i][2],point:t[i][3]}});H.select(".nv-point-paths").selectAll("path").remove();var r=H.select(".nv-point-paths").selectAll("path").data(i),a=r.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+e+")"});P&&a.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),T&&(H.select(".nv-point-clips").selectAll("clipPath").remove(),H.select(".nv-point-clips").selectAll("clipPath").data(t).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",A));var c=function(t,n){if(R)return 0;var i=e[t.series];if(void 0!==i){var r=i.values[t.point];r.color=u(i,t.series),r.x=g(r),r.y=m(r);var a=d.node().getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop,l=window.pageXOffset||document.documentElement.scrollLeft;n({point:r,series:i,pos:{left:h(g(r,t.point))+a.left+l+o.left+10,top:f(m(r,t.point))+a.top+s+o.top+10},seriesIndex:t.series,pointIndex:t.point})}};r.on("click",function(t){c(t,z.elementClick)}).on("dblclick",function(t){c(t,z.elementDblClick)}).on("mouseover",function(t){c(t,z.elementMouseover)}).on("mouseout",function(t){c(t,z.elementMouseout)})}else H.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,n){if(R||!e[t.series])return 0;var i=e[t.series],r=i.values[n];z.elementClick({point:r,series:i,pos:[h(g(r,n))+o.left,f(m(r,n))+o.top],seriesIndex:t.series,pointIndex:n})}).on("dblclick",function(t,n){if(R||!e[t.series])return 0;var i=e[t.series],r=i.values[n];z.elementDblClick({point:r,series:i,pos:[h(g(r,n))+o.left,f(m(r,n))+o.top],seriesIndex:t.series,pointIndex:n})}).on("mouseover",function(t,n){if(R||!e[t.series])return 0;var i=e[t.series],r=i.values[n];z.elementMouseover({point:r,series:i,pos:[h(g(r,n))+o.left,f(m(r,n))+o.top],seriesIndex:t.series,pointIndex:n,color:u(t,n)})}).on("mouseout",function(t,n){if(R||!e[t.series])return 0;var i=e[t.series],r=i.values[n];z.elementMouseout({point:r,series:i,seriesIndex:t.series,pointIndex:n,color:u(t,n)})})},300),n=h.copy(),i=f.copy(),r=p.copy()}),N.renderEnd("scatter immediate"),e}var n,i,r,a,o={top:0,right:0,bottom:0,left:0},s=null,l=null,u=t.utils.defaultColor(),c=Math.floor(1e5*Math.random()),d=null,h=d3.scale.linear(),f=d3.scale.linear(),p=d3.scale.linear(),g=function(t){return t.x},m=function(t){return t.y},v=function(t){return t.size||1},y=function(t){return t.shape||"circle"},b=[],x=[],w=[],M=!0,k=function(t){return!t.notActive},_=!1,C=.1,S=!1,T=!0,P=!1,A=function(){return 25},E=null,D=null,O=null,I=null,L=null,F=null,$=!1,z=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),B=!0,j=250,R=!1,N=t.utils.renderWatch(z,j),U=[16,256];return e.dispatch=z,e.options=t.utils.optionsFunc.bind(e),e._calls=new function(){this.clearHighlights=function(){return t.dom.write(function(){d.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(e,n,i){t.dom.write(function(){d.select(" .nv-series-"+e+" .nv-point-"+n).classed("hover",i)})}},z.on("elementMouseover.point",function(t){M&&e._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),z.on("elementMouseout.point",function(t){M&&e._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return f},set:function(t){f=t}},pointScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return E},set:function(t){E=t}},yDomain:{get:function(){return D},set:function(t){D=t}},pointDomain:{get:function(){return L},set:function(t){L=t}},xRange:{get:function(){return O},set:function(t){O=t}},yRange:{get:function(){return I},set:function(t){I=t}},pointRange:{get:function(){return F},set:function(t){F=t}},forceX:{get:function(){return b},set:function(t){b=t}},forceY:{get:function(){return x},set:function(t){x=t}},forcePoint:{get:function(){return w},set:function(t){w=t}},interactive:{get:function(){return M},set:function(t){M=t}},pointActive:{get:function(){return k},set:function(t){k=t}},padDataOuter:{get:function(){return C},set:function(t){C=t}},padData:{get:function(){return _},set:function(t){_=t}},clipEdge:{get:function(){return S},set:function(t){S=t}},clipVoronoi:{get:function(){return T},set:function(t){T=t}},clipRadius:{get:function(){return A},set:function(t){A=t}},showVoronoi:{get:function(){return P},set:function(t){P=t}},id:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return g},set:function(t){g=d3.functor(t)}},y:{get:function(){return m},set:function(t){m=d3.functor(t)}},pointSize:{get:function(){return v},set:function(t){v=d3.functor(t)}},pointShape:{get:function(){return y},set:function(t){y=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return j},set:function(t){j=t,N.reset(j)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}},useVoronoi:{get:function(){return B},set:function(t){!1===(B=t)&&(T=!1)}}}),t.utils.initOptions(e),e},t.models.scatterChart=function(){"use strict";function e(C){return T.reset(),T.models(n),b&&T.models(i),x&&T.models(r),m&&T.models(o),v&&T.models(s),C.each(function(C){h=d3.select(this),t.utils.initSVG(h);var E=t.utils.availableWidth(c,h,u),D=t.utils.availableHeight(d,h,u);if(e.update=function(){0===S?h.call(e):h.transition().duration(S).call(e)},e.container=this,M.setter(A(C),e.update).getter(P(C)).update(),M.disabled=C.map(function(t){return!!t.disabled}),!k){var O;k={};for(O in M)k[O]=M[O]instanceof Array?M[O].slice(0):M[O]}if(!(C&&C.length&&C.filter(function(t){return t.values.length}).length))return t.utils.noData(e,h),T.renderEnd("scatter immediate"),e;h.selectAll(".nv-noData").remove(),p=n.xScale(),g=n.yScale();var I=h.selectAll("g.nv-wrap.nv-scatterChart").data([C]),L=I.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+n.id()).append("g"),F=I.select("g");if(L.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-scatterWrap"),L.append("g").attr("class","nv-regressionLinesWrap"),L.append("g").attr("class","nv-distWrap"),L.append("g").attr("class","nv-legendWrap"),w&&F.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),y){var $=E;a.width($),I.select(".nv-legendWrap").datum(C).call(a),u.top!=a.height()&&(u.top=a.height(),D=t.utils.availableHeight(d,h,u)),I.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")}I.attr("transform","translate("+u.left+","+u.top+")"),n.width(E).height(D).color(C.map(function(t,e){return t.color=t.color||f(t,e),t.color}).filter(function(t,e){return!C[e].disabled})),I.select(".nv-scatterWrap").datum(C.filter(function(t){return!t.disabled})).call(n),I.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+n.id()+")");var z=I.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});z.enter().append("g").attr("class","nv-regLines");var B=z.selectAll(".nv-regLine").data(function(t){return[t]});B.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),B.filter(function(t){return t.intercept&&t.slope}).watchTransition(T,"scatterPlusLineChart: regline").attr("x1",p.range()[0]).attr("x2",p.range()[1]).attr("y1",function(t){return g(p.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t){return g(p.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return f(t,n)}).style("stroke-opacity",function(t){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),b&&(i.scale(p)._ticks(t.utils.calcTicksX(E/100,C)).tickSize(-D,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")").call(i)),x&&(r.scale(g)._ticks(t.utils.calcTicksY(D/36,C)).tickSize(-E,0),F.select(".nv-y.nv-axis").call(r)),m&&(o.getData(n.x()).scale(p).width(E).color(C.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!C[e].disabled})),L.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),F.select(".nv-distributionX").attr("transform","translate(0,"+g.range()[0]+")").datum(C.filter(function(t){return!t.disabled})).call(o)),v&&(s.getData(n.y()).scale(g).width(D).color(C.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!C[e].disabled})),L.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),F.select(".nv-distributionY").attr("transform","translate("+(w?E:-s.size())+",0)").datum(C.filter(function(t){return!t.disabled})).call(s)),a.dispatch.on("stateChange",function(t){for(var n in t)M[n]=t[n];_.stateChange(M),e.update()}),_.on("changeState",function(t){void 0!==t.disabled&&(C.forEach(function(e,n){e.disabled=t.disabled[n]}),M.disabled=t.disabled),e.update()}),n.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0),h.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),h.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",s.size())}),n.dispatch.on("elementMouseover.tooltip",function(t){h.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos.top-D-u.top),h.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos.left+o.size()-u.left),l.position(t.pos).data(t).hidden(!1)}),p.copy(),g.copy()}),T.renderEnd("scatter with line immediate"),e}var n=t.models.scatter(),i=t.models.axis(),r=t.models.axis(),a=t.models.legend(),o=t.models.distribution(),s=t.models.distribution(),l=t.models.tooltip(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,h=null,f=t.utils.defaultColor(),p=n.xScale(),g=n.yScale(),m=!1,v=!1,y=!0,b=!0,x=!0,w=!1,M=t.utils.state(),k=null,_=d3.dispatch("stateChange","changeState","renderEnd"),C=null,S=250;n.xScale(p).yScale(g),i.orient("bottom").tickPadding(10),r.orient(w?"right":"left").tickPadding(10),o.axis("x"),s.axis("y"),l.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return r.tickFormat()(t,e)});var T=t.utils.renderWatch(_,S),P=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},A=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return e.dispatch=_,e.scatter=n,e.legend=a,e.xAxis=i,e.yAxis=r,e.distX=o,e.distY=s,e.tooltip=l,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},container:{get:function(){return h},set:function(t){h=t}},showDistX:{get:function(){return m},set:function(t){m=t}},showDistY:{get:function(){return v},set:function(t){v=t}},showLegend:{get:function(){return y},set:function(t){y=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return C},set:function(t){C=t}},duration:{get:function(){return S},set:function(t){S=t}},tooltips:{get:function(){return l.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),l.enabled(!!e)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),l.contentGenerator(e)}},tooltipXContent:{get:function(){return l.contentGenerator()},set:function(){t.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return l.contentGenerator()},set:function(){t.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,r.orient(t?"right":"left")}},color:{get:function(){return f},set:function(e){f=t.utils.getColor(e),a.color(f),o.color(f),s.color(f)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.sparkline=function(){"use strict";function e(c){return c.each(function(e){var c=s-o.left-o.right,m=l-o.top-o.bottom;u=d3.select(this),t.utils.initSVG(u),d.domain(n||d3.extent(e,f)).range(r||[0,c]),h.domain(i||d3.extent(e,p)).range(a||[m,0]);var v=u.selectAll("g.nv-wrap.nv-sparkline").data([e]);v.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),v.select("g"),v.attr("transform","translate("+o.left+","+o.top+")");var y=v.selectAll("path").data(function(t){return[t]});y.enter().append("path"),y.exit().remove(),y.style("stroke",function(t,e){return t.color||g(t,e)}).attr("d",d3.svg.line().x(function(t,e){return d(f(t,e))}).y(function(t,e){return h(p(t,e))}));var b=v.selectAll("circle.nv-point").data(function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return p(t,e)}),i=e(n.lastIndexOf(h.domain()[1]));return[e(n.indexOf(h.domain()[0])),i,e(n.length-1)].filter(function(t){return null!=t})});b.enter().append("circle"),b.exit().remove(),b.attr("cx",function(t){return d(f(t,t.pointIndex))}).attr("cy",function(t){return h(p(t,t.pointIndex))}).attr("r",2).attr("class",function(t){return f(t,t.pointIndex)==d.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==h.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),e}var n,i,r,a,o={top:2,right:0,bottom:2,left:0},s=400,l=32,u=null,c=!0,d=d3.scale.linear(),h=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},g=t.utils.getColor(["#000"]);return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return a},set:function(t){a=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},animate:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return f},set:function(t){f=d3.functor(t)}},y:{get:function(){return p},set:function(t){p=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.sparklinePlus=function(){"use strict";function e(g){return g.each(function(g){function m(){if(!u){var t=k.selectAll(".nv-hoverValue").data(l),e=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+n(r.x()(g[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(e.append("line").attr("x1",0).attr("y1",-a.top).attr("x2",0).attr("y2",b),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-a.top).attr("text-anchor","end").attr("dy",".9em"),k.select(".nv-hoverValue .nv-xValue").text(c(r.x()(g[l[0]],l[0]))),e.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-a.top).attr("text-anchor","start").attr("dy",".9em"),k.select(".nv-hoverValue .nv-yValue").text(d(r.y()(g[l[0]],l[0]))))}}var v=d3.select(this);t.utils.initSVG(v);var y=t.utils.availableWidth(o,v,a),b=t.utils.availableHeight(s,v,a);if(e.update=function(){v.call(e)},e.container=this,!g||!g.length)return t.utils.noData(e,v),e;v.selectAll(".nv-noData").remove();var x=r.y()(g[g.length-1],g.length-1);n=r.xScale(),i=r.yScale();var w=v.selectAll("g.nv-wrap.nv-sparklineplus").data([g]),M=w.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),k=w.select("g");M.append("g").attr("class","nv-sparklineWrap"),M.append("g").attr("class","nv-valueWrap"),M.append("g").attr("class","nv-hoverArea"),w.attr("transform","translate("+a.left+","+a.top+")");var _=k.select(".nv-sparklineWrap");if(r.width(y).height(b),_.call(r),h){var C=k.select(".nv-valueWrap").selectAll(".nv-currentValue").data([x]);C.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),C.attr("x",y+(p?a.right:0)).attr("y",f?function(t){return i(t)}:0).style("fill",r.color()(g[g.length-1],g.length-1)).text(d(x))}M.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!u){var t=d3.mouse(this)[0]-a.left;l=[function(t,e){for(var n=Math.abs(r.x()(t[0],0)-e),i=0,a=0;a<t.length;a++)Math.abs(r.x()(t[a],a)-e)<n&&(n=Math.abs(r.x()(t[a],a)-e),i=a);return i}(g,Math.round(n.invert(t)))],m()}}).on("click",function(){u=!u}).on("mouseout",function(){l=[],m()}),k.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-a.left+","+-a.top+")"}).attr("width",y+a.left+a.right).attr("height",b+a.top)}),e}var n,i,r=t.models.sparkline(),a={top:15,right:100,bottom:10,left:50},o=null,s=null,l=[],u=!1,c=d3.format(",r"),d=d3.format(",.2f"),h=!0,f=!0,p=!1,g=null;return e.sparkline=r,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return s},set:function(t){s=t}},xTickFormat:{get:function(){return c},set:function(t){c=t}},yTickFormat:{get:function(){return d},set:function(t){d=t}},showLastValue:{get:function(){return h},set:function(t){h=t}},alignValue:{get:function(){return f},set:function(t){f=t}},rightAlignValue:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.stackedArea=function(){"use strict";function e(h){return x.reset(),x.models(v),h.each(function(h){var y=a-r.left-r.right,w=o-r.top-r.bottom;u=d3.select(this),t.utils.initSVG(u),n=v.xScale(),i=v.yScale();var M=h;h.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var k=h.filter(function(t){return!t.disabled});h=d3.layout.stack().order(p).offset(f).values(function(t){return t.values}).x(c).y(d).out(function(t,e,n){t.display={y:n,y0:e}})(k);var _=u.selectAll("g.nv-wrap.nv-stackedarea").data([h]),C=_.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),S=C.append("defs"),T=C.append("g"),P=_.select("g");T.append("g").attr("class","nv-areaWrap"),T.append("g").attr("class","nv-scatterWrap"),_.attr("transform","translate("+r.left+","+r.top+")"),0==v.forceY().length&&v.forceY().push(0),v.width(y).height(w).x(c).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(h.map(function(t){return t.color||s(t,t.seriesIndex)}));P.select(".nv-scatterWrap").datum(h).call(v),S.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),_.select("#nv-edge-clip-"+l+" rect").attr("width",y).attr("height",w),P.attr("clip-path",m?"url(#nv-edge-clip-"+l+")":"");var A=d3.svg.area().x(function(t,e){return n(c(t,e))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y+t.display.y0)}).interpolate(g),E=d3.svg.area().x(function(t,e){return n(c(t,e))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y0)}),D=P.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});D.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t){return E(t.values,t.seriesIndex)}).on("mouseover",function(t){d3.select(this).classed("hover",!0),b.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t){d3.select(this).classed("hover",!1),b.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t){d3.select(this).classed("hover",!1),b.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),D.exit().remove(),D.style("fill",function(t){return t.color||s(t,t.seriesIndex)}).style("stroke",function(t){return t.color||s(t,t.seriesIndex)}),D.watchTransition(x,"stackedArea path").attr("d",function(t,e){return A(t.values,e)}),v.dispatch.on("elementMouseover.area",function(t){P.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),v.dispatch.on("elementMouseout.area",function(t){P.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),e.d3_stackedOffset_stackPercent=function(t){var e,n,i,r=t.length,a=t[0].length,o=[];for(n=0;a>n;++n){for(e=0,i=0;e<M.length;e++)i+=d(M[e].values[n]);if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=0}for(n=0;a>n;++n)o[n]=0;return o}}),x.renderEnd("stackedArea immediate"),e}var n,i,r={top:0,right:0,bottom:0,left:0},a=960,o=500,s=t.utils.defaultColor(),l=Math.floor(1e5*Math.random()),u=null,c=function(t){return t.x},d=function(t){return t.y},h="stack",f="zero",p="default",g="linear",m=!1,v=t.models.scatter(),y=250,b=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");v.pointSize(2.2).pointDomain([2.2,2.2]);var x=t.utils.renderWatch(b,y);return e.dispatch=b,e.scatter=v,v.dispatch.on("elementClick",function(){b.elementClick.apply(this,arguments)}),v.dispatch.on("elementMouseover",function(){b.elementMouseover.apply(this,arguments)}),v.dispatch.on("elementMouseout",function(){b.elementMouseout.apply(this,arguments)}),e.interpolate=function(t){return arguments.length?(g=t,e):g},e.duration=function(t){return arguments.length?(y=t,x.reset(y),v.duration(y),e):y},e.dispatch=b,e.scatter=v,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},offset:{get:function(){return f},set:function(t){f=t}},order:{get:function(){return p},set:function(t){p=t}},interpolate:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return c},set:function(t){c=d3.functor(t)}},y:{get:function(){return d},set:function(t){d=d3.functor(t)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},style:{get:function(){return h},set:function(t){switch(h=t){case"stack":e.offset("zero"),e.order("default");break;case"stream":e.offset("wiggle"),e.order("inside-out");break;case"stream-center":e.offset("silhouette"),e.order("inside-out");break;case"expand":e.offset("expand"),e.order("default");break;case"stack_percent":e.offset(e.d3_stackedOffset_stackPercent),e.order("default")}}},duration:{get:function(){return y},set:function(t){y=t,x.reset(y),v.duration(y)}}}),t.utils.inheritOptions(e,v),t.utils.initOptions(e),e},t.models.stackedAreaChart=function(){"use strict";function e(c){return D.reset(),D.models(r),v&&D.models(a),y&&D.models(o),c.each(function(c){var k=d3.select(this),D=this;t.utils.initSVG(k);var F=t.utils.availableWidth(h,k,d),$=t.utils.availableHeight(f,k,d);if(e.update=function(){k.transition().duration(P).call(e)},e.container=this,w.setter(I(c),e.update).getter(O(c)).update(),w.disabled=c.map(function(t){return!!t.disabled}),!M){var z;M={};for(z in w)M[z]=w[z]instanceof Array?w[z].slice(0):w[z]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return t.utils.noData(e,k),e;k.selectAll(".nv-noData").remove(),n=r.xScale(),i=r.yScale();var B=k.selectAll("g.nv-wrap.nv-stackedAreaChart").data([c]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),R=B.select("g");if(j.append("rect").style("opacity",0),j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-stackedWrap"),j.append("g").attr("class","nv-legendWrap"),j.append("g").attr("class","nv-controlsWrap"),j.append("g").attr("class","nv-interactive"),R.select("rect").attr("width",F).attr("height",$),m){var N=g?F-C:F;s.width(N),R.select(".nv-legendWrap").datum(c).call(s),d.top!=s.height()&&(d.top=s.height(),$=t.utils.availableHeight(f,k,d)),R.select(".nv-legendWrap").attr("transform","translate("+(F-N)+","+-d.top+")")}if(g){var U=[{key:T.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=r.style(),style:"stack"},{key:T.stream||"Stream",metaKey:"Stream",disabled:"stream"!=r.style(),style:"stream"},{key:T.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=r.style(),style:"expand"},{key:T.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=r.style(),style:"stack_percent"}];C=S.length/3*260,U=U.filter(function(t){return-1!==S.indexOf(t.metaKey)}),l.width(C).color(["#444","#444","#444"]),R.select(".nv-controlsWrap").datum(U).call(l),d.top!=Math.max(l.height(),s.height())&&(d.top=Math.max(l.height(),s.height()),$=t.utils.availableHeight(f,k,d)),R.select(".nv-controlsWrap").attr("transform","translate(0,"+-d.top+")")}B.attr("transform","translate("+d.left+","+d.top+")"),b&&R.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)"),x&&(u.width(F).height($).margin({left:d.left,top:d.top}).svgContainer(k).xScale(n),B.select(".nv-interactive").call(u)),r.width(F).height($);if(R.select(".nv-stackedWrap").datum(c).transition().call(r),v&&(a.scale(n)._ticks(t.utils.calcTicksX(F/100,c)).tickSize(-$,0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+$+")"),R.select(".nv-x.nv-axis").transition().duration(0).call(a)),y){var X;if(X="wiggle"===r.offset()?0:t.utils.calcTicksY($/36,c),o.scale(i)._ticks(X).tickSize(-F,0),"expand"===r.style()||"stack_percent"===r.style()){var W=o.tickFormat();A&&W===L||(A=W),o.tickFormat(L)}else A&&(o.tickFormat(A),A=null);R.select(".nv-y.nv-axis").transition().duration(0).call(o)}r.dispatch.on("areaClick.toggle",function(t){c.forEach(1===c.filter(function(t){return!t.disabled}).length?function(t){t.disabled=!1}:function(e,n){e.disabled=n!=t.seriesIndex}),w.disabled=c.map(function(t){return!!t.disabled}),_.stateChange(w),e.update()}),s.dispatch.on("stateChange",function(t){for(var n in t)w[n]=t[n];_.stateChange(w),e.update()}),l.dispatch.on("legendClick",function(t){t.disabled&&(U=U.map(function(t){return t.disabled=!0,t}),t.disabled=!1,r.style(t.style),w.style=r.style(),_.stateChange(w),e.update())}),u.dispatch.on("elementMousemove",function(n){r.clearHighlights();var i,o,s,l=[];if(c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,u){o=t.interactiveBisect(a.values,n.pointXValue,e.x());var c=a.values[o];if(null!=e.y()(c,o)&&r.highlightPoint(u,o,!0),void 0!==c){void 0===i&&(i=c),void 0===s&&(s=e.xScale()(e.x()(c,o)));var d="expand"==r.style()?c.display.y:e.y()(c,o);l.push({key:a.key,value:d,color:p(a,a.seriesIndex),stackedValue:c.display})}}),l.reverse(),l.length>2){var h=e.yScale().invert(n.mouseY),f=null;l.forEach(function(t,e){h=Math.abs(h);var n=Math.abs(t.stackedValue.y0),i=Math.abs(t.stackedValue.y);return h>=n&&i+n>=h?void(f=e):void 0}),null!=f&&(l[f].highlight=!0)}var g=a.tickFormat()(e.x()(i,o)),m=u.tooltip.valueFormatter();"expand"===r.style()||"stack_percent"===r.style()?(E||(E=m),m=d3.format(".1%")):E&&(m=E,E=null),u.tooltip.position({left:s+d.left,top:n.mouseY+d.top}).chartContainer(D.parentNode).valueFormatter(m).data({value:g,series:l})(),u.renderGuideLine(s)}),u.dispatch.on("elementMouseout",function(){r.clearHighlights()}),_.on("changeState",function(t){void 0!==t.disabled&&c.length===t.disabled.length&&(c.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),void 0!==t.style&&(r.style(t.style),t.style),e.update()})}),D.renderEnd("stacked Area chart immediate"),e}var n,i,r=t.models.stackedArea(),a=t.models.axis(),o=t.models.axis(),s=t.models.legend(),l=t.models.legend(),u=t.interactiveGuideline(),c=t.models.tooltip(),d={top:30,right:25,bottom:50,left:60},h=null,f=null,p=t.utils.defaultColor(),g=!0,m=!0,v=!0,y=!0,b=!1,x=!1,w=t.utils.state(),M=null,k=null,_=d3.dispatch("stateChange","changeState","renderEnd"),C=250,S=["Stacked","Stream","Expanded"],T={},P=250;w.style=r.style(),a.orient("bottom").tickPadding(7),o.orient(b?"right":"left"),c.headerFormatter(function(t,e){return a.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)}),u.tooltip.headerFormatter(function(t,e){return a.tickFormat()(t,e)}).valueFormatter(function(t,e){return o.tickFormat()(t,e)});var A=null,E=null;l.updateState(!1);var D=t.utils.renderWatch(_),O=(r.style(),function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:r.style()}}}),I=function(t){return function(e){void 0!==e.style&&e.style,void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},L=d3.format("%");return r.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=r.x()(t.point),t.point.y=r.y()(t.point),c.data(t).position(t.pos).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(){c.hidden(!0)}),e.dispatch=_,e.stacked=r,e.legend=s,e.controls=l,e.xAxis=a,e.yAxis=o,e.interactiveLayer=u,e.tooltip=c,e.dispatch=_,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return k},set:function(t){k=t}},showControls:{get:function(){return g},set:function(t){g=t}},controlLabels:{get:function(){return T},set:function(t){T=t}},controlOptions:{get:function(){return S},set:function(t){S=t}},tooltips:{get:function(){return c.enabled()},set:function(e){t.deprecated("tooltips","use chart.tooltip.enabled() instead"),c.enabled(!!e)}},tooltipContent:{get:function(){return c.contentGenerator()},set:function(e){t.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),c.contentGenerator(e)}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return P},set:function(t){P=t,D.reset(P),r.duration(P),a.duration(P),o.duration(P)}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),s.color(p),r.color(p)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,o.orient(b?"right":"left")}},useInteractiveGuideline:{get:function(){return x},set:function(t){x=!!t,e.interactive(!t),e.useVoronoi(!t),r.scatter.interactive(!t)}}}),t.utils.inheritOptions(e,r),t.utils.initOptions(e),e},t.models.sunburst=function(){"use strict";function e(x){return b.reset(),x.each(function(e){function b(t){t.x0=t.x,t.dx0=t.dx}function x(t){var e=d3.interpolate(g.domain(),[t.x,t.x+t.dx]),n=d3.interpolate(m.domain(),[t.y,1]),i=d3.interpolate(m.range(),[t.y?20:0,_]);return function(t,r){return r?function(){return y(t)}:function(r){return g.domain(e(r)),m.domain(n(r)).range(i(r)),y(t)}}}d=d3.select(this);var w,M=t.utils.availableWidth(o,d,a),k=t.utils.availableHeight(s,d,a),_=Math.min(M,k)/2;t.utils.initSVG(d);var C=d.selectAll(".nv-wrap.nv-sunburst").data(e),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+c).selectAll("nv-sunburst");C.attr("transform","translate("+M/2+","+k/2+")"),d.on("click",function(t,e){p.chartClick({data:t,index:e,pos:d3.event,id:c})}),m.range([0,_]),n=n||e,r=e[0],v.value(u[l]||u.count),w=S.data(v.nodes).enter().append("path").attr("d",y).style("fill",function(t){return h((t.children?t:t.parent).name)}).style("stroke","#FFF").on("click",function(t){i!==n&&n!==t&&(i=n),n=t,w.transition().duration(f).attrTween("d",x(t))}).each(b).on("dblclick",function(t){i.parent==t&&w.transition().duration(f).attrTween("d",x(r))}).each(b).on("mouseover",function(t){d3.select(this).classed("hover",!0).style("opacity",.8),p.elementMouseover({data:t,color:d3.select(this).style("fill")})}).on("mouseout",function(t){d3.select(this).classed("hover",!1).style("opacity",1),p.elementMouseout({data:t})}).on("mousemove",function(t){p.elementMousemove({data:t})})}),b.renderEnd("sunburst immediate"),e}var n,i,r,a={top:0,right:0,bottom:0,left:0},o=null,s=null,l="count",u={count:function(){return 1},size:function(t){return t.size}},c=Math.floor(1e4*Math.random()),d=null,h=t.utils.defaultColor(),f=500,p=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),g=d3.scale.linear().range([0,2*Math.PI]),m=d3.scale.sqrt(),v=d3.layout.partition().sort(null).value(function(){return 1}),y=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,g(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,g(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,m(t.y))}).outerRadius(function(t){return Math.max(0,m(t.y+t.dy))}),b=t.utils.renderWatch(p);return e.dispatch=p,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return s},set:function(t){s=t}},mode:{get:function(){return l},set:function(t){l=t}},id:{get:function(){return c},set:function(t){c=t}},duration:{get:function(){return f},set:function(t){f=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!=t.top?t.top:a.top,a.right=void 0!=t.right?t.right:a.right,a.bottom=void 0!=t.bottom?t.bottom:a.bottom,a.left=void 0!=t.left?t.left:a.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.sunburstChart=function(){"use strict";function e(i){return h.reset(),h.models(n),i.each(function(i){var s=d3.select(this);t.utils.initSVG(s);var l=t.utils.availableWidth(a,s,r),u=t.utils.availableHeight(o,s,r);if(e.update=function(){0===c?s.call(e):s.transition().duration(c).call(e)},e.container=this,!i||!i.length)return t.utils.noData(e,s),e;s.selectAll(".nv-noData").remove();var d=s.selectAll("g.nv-wrap.nv-sunburstChart").data(i),h=d.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),f=d.select("g");h.append("g").attr("class","nv-sunburstWrap"),d.attr("transform","translate("+r.left+","+r.top+")"),n.width(l).height(u);var p=f.select(".nv-sunburstWrap").datum(i);d3.transition(p).call(n)}),h.renderEnd("sunburstChart immediate"),e}var n=t.models.sunburst(),i=t.models.tooltip(),r={top:30,right:20,bottom:20,left:20},a=null,o=null,s=t.utils.defaultColor(),l=(Math.round(1e5*Math.random()),null),u=null,c=250,d=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),h=t.utils.renderWatch(d);return i.headerEnabled(!1).duration(0).valueFormatter(function(t){return t}),n.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.size,color:t.color},i.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(){i.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(){i.position({top:d3.event.pageY,left:d3.event.pageX})()}),e.dispatch=d,e.sunburst=n,e.tooltip=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{noData:{get:function(){return u},set:function(t){u=t}},defaultState:{get:function(){return l},set:function(t){l=t}},color:{get:function(){return s},set:function(t){s=t,n.color(s)}},duration:{get:function(){return c},set:function(t){c=t,h.reset(c),n.duration(c)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.version="1.8.1"}();var AppServices=angular.module("AngularSpringApp.services",[]);AppServices.value("version","0.1"),AppServices.service("loggedInStatus",function(t,e){return{validSession:function(){e.post("session/ValidateSession/"+t.get("sessionId")).success(function(t){return"SUCCESSFUL"==t.status}).error(function(){!1})}}}),AppServices.service("testUserStatus",function(){var t="",e="",n="",i="",r="";return{getSessionId:function(){return t},setSessionId:function(e){t=e},getName:function(){return e},setName:function(t){e=t},getTestCode:function(){return n},setTestCode:function(t){n=t},getEmail:function(){return alert(i),i},setEmail:function(t){alert(t),i=t},getTestTakerId:function(){return r},setTestTakerId:function(t){r=t}}});var timerModule=angular.module("timer",[]).directive("timer",["$compile",function(t){return{restrict:"EAC",replace:!1,scope:{interval:"=interval",startTimeAttr:"=startTime",endTimeAttr:"=endTime",countdownattr:"=countdown",finishCallback:"&finishCallback",autoStart:"&autoStart",maxTimeUnit:"="},controller:["$scope","$element","$attrs","$timeout",function(e,n,i,r){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.autoStart=i.autoStart||i.autostart,0===n.html().trim().length?n.append(t("<span>{{millis}}</span>")(e)):n.append(t(n.contents())(e)),e.startTime=null,e.endTime=null,e.timeoutId=null,e.countdown=e.countdownattr&&parseInt(e.countdownattr,10)>=0?parseInt(e.countdownattr,10):void 0,e.isRunning=!1,e.$on("timer-start",function(){e.start()}),e.$on("timer-resume",function(){e.resume()}),e.$on("timer-stop",function(){e.stop()}),e.$on("timer-clear",function(){e.clear()}),e.$on("timer-set-countdown",function(t,n){e.countdown=n});function a(){e.timeoutId&&clearTimeout(e.timeoutId)}e.start=n[0].start=function(){e.startTime=e.startTimeAttr?new Date(e.startTimeAttr):new Date,e.endTime=e.endTimeAttr?new Date(e.endTimeAttr):null,e.countdown||(e.countdown=e.countdownattr&&parseInt(e.countdownattr,10)>0?parseInt(e.countdownattr,10):void 0),a(),s(),e.isRunning=!0},e.resume=n[0].resume=function(){a(),e.countdownattr&&(e.countdown+=1),e.startTime=new Date-(e.stoppedTime-e.startTime),s(),e.isRunning=!0},e.stop=e.pause=n[0].stop=n[0].pause=function(){var t=e.timeoutId;e.clear(),e.$emit("timer-stopped",{timeoutId:t,millis:e.millis,seconds:e.seconds,minutes:e.minutes,hours:e.hours,days:e.days})},e.clear=n[0].clear=function(){e.stoppedTime=new Date,a(),e.timeoutId=null,e.isRunning=!1},n.bind("$destroy",function(){a(),e.isRunning=!1});function o(){e.maxTimeUnit&&"day"!==e.maxTimeUnit?"second"===e.maxTimeUnit?(e.seconds=Math.floor(e.millis/1e3),e.minutes=0,e.hours=0,e.days=0,e.months=0,e.years=0):"minute"===e.maxTimeUnit?(e.seconds=Math.floor(e.millis/1e3%60),e.minutes=Math.floor(e.millis/6e4),e.hours=0,e.days=0,e.months=0,e.years=0):"hour"===e.maxTimeUnit?(e.seconds=Math.floor(e.millis/1e3%60),e.minutes=Math.floor(e.millis/6e4%60),e.hours=Math.floor(e.millis/36e5),e.days=0,e.months=0,e.years=0):"month"===e.maxTimeUnit?(e.seconds=Math.floor(e.millis/1e3%60),e.minutes=Math.floor(e.millis/6e4%60),e.hours=Math.floor(e.millis/36e5%24),e.days=Math.floor(e.millis/36e5/24%30),e.months=Math.floor(e.millis/36e5/24/30),e.years=0):"year"===e.maxTimeUnit&&(e.seconds=Math.floor(e.millis/1e3%60),e.minutes=Math.floor(e.millis/6e4%60),e.hours=Math.floor(e.millis/36e5%24),e.days=Math.floor(e.millis/36e5/24%30),e.months=Math.floor(e.millis/36e5/24/30%12),e.years=Math.floor(e.millis/36e5/24/365)):(e.seconds=Math.floor(e.millis/1e3%60),e.minutes=Math.floor(e.millis/6e4%60),e.hours=Math.floor(e.millis/36e5%24),e.days=Math.floor(e.millis/36e5/24),e.months=0,e.years=0),e.secondsS=1==e.seconds?"":"s",e.minutesS=1==e.minutes?"":"s",e.hoursS=1==e.hours?"":"s",e.daysS=1==e.days?"":"s",e.monthsS=1==e.months?"":"s",e.yearsS=1==e.years?"":"s",e.sseconds=e.seconds<10?"0"+e.seconds:e.seconds,e.mminutes=e.minutes<10?"0"+e.minutes:e.minutes,e.hhours=e.hours<10?"0"+e.hours:e.hours,e.ddays=e.days<10?"0"+e.days:e.days,e.mmonths=e.months<10?"0"+e.months:e.months,e.yyears=e.years<10?"0"+e.years:e.years}e.countdownattr?(e.millis=1e3*e.countdownattr,e.addCDSeconds=n[0].addCDSeconds=function(t){e.countdown+=t,e.$digest(),e.isRunning||e.start()},e.$on("timer-add-cd-seconds",function(t,n){r(function(){e.addCDSeconds(n)})}),e.$on("timer-set-countdown-seconds",function(t,n){e.isRunning||e.clear(),e.countdown=n,e.millis=1e3*n,o()})):e.millis=0,o();var s=function(){e.millis=new Date-e.startTime;var t=e.millis%1e3;if(e.endTimeAttr&&(e.millis=e.endTime-new Date,t=e.interval-e.millis%1e3),e.countdownattr&&(e.millis=1e3*e.countdown),e.millis<0)return e.stop(),e.millis=0,o(),void(e.finishCallback&&e.$eval(e.finishCallback));o(),e.timeoutId=setTimeout(function(){s(),e.$digest()},e.interval-t),e.$emit("timer-tick",{timeoutId:e.timeoutId,millis:e.millis}),e.countdown>0?e.countdown--:e.countdown<=0&&(e.stop(),e.finishCallback&&e.$eval(e.finishCallback))};void 0!==e.autoStart&&!0!==e.autoStart||e.start()}]}}]);"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports=timerModule),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(t,e,n,i){var r=i.has("$animateCss")?i.get("$animateCss"):null;return{link:function(i,a,o){function s(){a.removeClass("collapsing").addClass("collapse").css({height:"auto"}),c(i)}function l(){a.css({height:"0"}),a.removeClass("collapsing").addClass("collapse"),h(i)}var u=n(o.expanding),c=n(o.expanded),d=n(o.collapsing),h=n(o.collapsed);i.$eval(o.uibCollapse)||a.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css({height:"auto"}),i.$watch(o.uibCollapse,function(n){n?a.hasClass("collapse")||a.hasClass("in")?e.resolve(d(i)).then(function(){a.css({height:a[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),r?r(a,{removeClass:"in",to:{height:"0"}}).start().finally(l):t.removeClass(a,"in",{to:{height:"0"}}).then(l)}):l():a.hasClass("collapse")&&a.hasClass("in")||e.resolve(u(i)).then(function(){a.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),r?r(a,{addClass:"in",easing:"ease",to:{height:a[0].scrollHeight+"px"}}).start().finally(s):t.addClass(a,"in",{to:{height:a[0].scrollHeight+"px"}}).then(s)})})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(t,e,n){this.groups=[],this.closeOthers=function(i){(angular.isDefined(e.closeOthers)?t.$eval(e.closeOthers):n.closeOthers)&&angular.forEach(this.groups,function(t){t!==i&&(t.isOpen=!1)})},this.addGroup=function(t){var e=this;this.groups.push(t),t.$on("$destroy",function(n){e.removeGroup(t)})},this.removeGroup=function(t){var e=this.groups.indexOf(t);-1!==e&&this.groups.splice(e,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(t){this.heading=t}},link:function(t,e,n,i){i.addGroup(t),t.openClass=n.openClass||"panel-open",t.panelClass=n.panelClass||"panel-default",t.$watch("isOpen",function(n){e.toggleClass(t.openClass,!!n),n&&i.closeOthers(t)}),t.toggleOpen=function(e){t.isDisabled||e&&32!==e.which||(t.isOpen=!t.isOpen)};var r="accordiongroup-"+t.$id+"-"+Math.floor(1e4*Math.random());t.headingId=r+"-tab",t.panelId=r+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(t,e,n,i,r){i.setHeading(r(t,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(t,e,n,i){t.$watch(function(){return i[n.uibAccordionTransclude]},function(t){if(t){var n=angular.element(e[0].querySelector("[uib-accordion-header]"));n.html(""),n.append(t)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(t,e,n,i){t.closeable=!!e.close;var r=angular.isDefined(e.dismissOnTimeout)?n(e.dismissOnTimeout)(t.$parent):null;r&&i(function(){t.close()},parseInt(r,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(t,e){return e.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(t){this.activeClass=t.activeClass||"active",this.toggleEvent=t.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(t){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(e,n,i,r){var a=r[0],o=r[1],s=t(i.uibUncheckable);n.find("input").css({display:"none"}),o.$render=function(){n.toggleClass(a.activeClass,angular.equals(o.$modelValue,e.$eval(i.uibBtnRadio)))},n.on(a.toggleEvent,function(){if(!i.disabled){var t=n.hasClass(a.activeClass);t&&!angular.isDefined(i.uncheckable)||e.$apply(function(){o.$setViewValue(t?null:e.$eval(i.uibBtnRadio)),o.$render()})}}),i.uibUncheckable&&e.$watch(s,function(t){i.$set("uncheckable",t?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(t,e,n,i){function r(){return a(n.btnCheckboxTrue,!0)}function a(e,n){return angular.isDefined(e)?t.$eval(e):n}var o=i[0],s=i[1];e.find("input").css({display:"none"}),s.$render=function(){e.toggleClass(o.activeClass,angular.equals(s.$modelValue,r()))},e.on(o.toggleEvent,function(){n.disabled||t.$apply(function(){s.$setViewValue(e.hasClass(o.activeClass)?a(n.btnCheckboxFalse,!1):r()),s.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(t,e,n,i,r){function a(){for(;y.length;)y.shift()}function o(t){for(var e=0;e<g.length;e++)g[e].slide.active=e===t}function s(n,i,l){if(!b){if(angular.extend(n,{direction:l}),angular.extend(g[v].slide||{},{direction:l}),r.enabled(e)&&!t.$currentTransition&&g[i].element&&p.slides.length>1){g[i].element.data(m,n.direction);var u=p.getCurrentIndex();angular.isNumber(u)&&g[u].element&&g[u].element.data(m,n.direction),t.$currentTransition=!0,r.on("addClass",g[i].element,function(e,n){if("close"===n&&(t.$currentTransition=null,r.off("addClass",e),y.length)){var i=y.pop().slide,o=i.index,l=o>p.getCurrentIndex()?"next":"prev";a(),s(i,o,l)}})}t.active=n.index,v=n.index,o(i),c()}}function l(t){for(var e=0;e<g.length;e++)if(g[e].slide===t)return e}function u(){h&&(n.cancel(h),h=null)}function c(){u();var e=+t.interval;!isNaN(e)&&e>0&&(h=n(d,e))}function d(){var e=+t.interval;f&&!isNaN(e)&&e>0&&g.length?t.next():t.pause()}var h,f,p=this,g=p.slides=t.slides=[],m="uib-slideDirection",v=t.active,y=[],b=!1;p.addSlide=function(e,n){g.push({slide:e,element:n}),g.sort(function(t,e){return+t.slide.index-+e.slide.index}),(e.index===t.active||1===g.length&&!angular.isNumber(t.active))&&(t.$currentTransition&&(t.$currentTransition=null),v=e.index,t.active=e.index,o(v),p.select(g[l(e)]),1===g.length&&t.play())},p.getCurrentIndex=function(){for(var t=0;t<g.length;t++)if(g[t].slide.index===v)return t},p.next=t.next=function(){var e=(p.getCurrentIndex()+1)%g.length;return 0===e&&t.noWrap()?void t.pause():p.select(g[e],"next")},p.prev=t.prev=function(){var e=p.getCurrentIndex()-1<0?g.length-1:p.getCurrentIndex()-1;return t.noWrap()&&e===g.length-1?void t.pause():p.select(g[e],"prev")},p.removeSlide=function(e){var n=l(e),i=y.indexOf(g[n]);-1!==i&&y.splice(i,1),g.splice(n,1),g.length>0&&v===n?n>=g.length?(v=g.length-1,t.active=v,o(v),p.select(g[g.length-1])):(v=n,t.active=v,o(v),p.select(g[n])):v>n&&(v--,t.active=v),0===g.length&&(v=null,t.active=null,a())},p.select=t.select=function(e,n){var i=l(e.slide);void 0===n&&(n=i>p.getCurrentIndex()?"next":"prev"),e.slide.index===v||t.$currentTransition?e&&e.slide.index!==v&&t.$currentTransition&&y.push(g[i]):s(e.slide,i,n)},t.indexOfSlide=function(t){return+t.slide.index},t.isActive=function(e){return t.active===e.slide.index},t.isPrevDisabled=function(){return 0===t.active&&t.noWrap()},t.isNextDisabled=function(){return t.active===g.length-1&&t.noWrap()},t.pause=function(){t.noPause||(f=!1,u())},t.play=function(){f||(f=!0,c())},t.$on("$destroy",function(){b=!0,u()}),t.$watch("noTransition",function(t){r.enabled(e,!t)}),t.$watch("interval",c),t.$watchCollection("slides",function(e){e.length||(t.$currentTransition=null,a())}),t.$watch("active",function(t){if(angular.isNumber(t)&&v!==t){for(var e=0;e<g.length;e++)if(g[e].slide.index===t){t=e;break}g[t]&&(o(t),p.select(g[t]),v=t)}})}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(t,e){return e.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(t,e,n,i){i.addSlide(t,e),t.$on("$destroy",function(){i.removeSlide(t)})}}}).animation(".item",["$animateCss",function(t){function e(t,e,n){t.removeClass(e),n&&n()}return{beforeAddClass:function(n,i,r){if("active"===i){var a=n.data("uib-slideDirection"),o="next"===a?"left":"right",s=e.bind(this,n,o+" "+a,r);return n.addClass(a),t(n,{addClass:o}).start().done(s),function(){!0}}r()},beforeRemoveClass:function(n,i,r){if("active"===i){var a="next"===n.data("uib-slideDirection")?"left":"right",o=e.bind(this,n,a,r);return t(n,{addClass:a}).start().done(o),function(){!0}}r()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(t,e,n,i){function r(t,e){var n=[],r=t.split(""),a=t.indexOf("'");if(a>-1){var o=!1;t=t.split("");for(var s=a;s<t.length;s++)o?("'"===t[s]&&(s+1<t.length&&"'"===t[s+1]?(t[s+1]="$",r[s+1]=""):(r[s]="",o=!1)),t[s]="$"):"'"===t[s]&&(t[s]="$",r[s]="",o=!0);t=t.join("")}return angular.forEach(c,function(i){var a=t.indexOf(i.key);if(a>-1){t=t.split(""),r[a]="("+i.regex+")",t[a]="$";for(var o=a+1,s=a+i.key.length;s>o;o++)r[o]="",t[o]="$";t=t.join(""),n.push({index:a,key:i.key,apply:i[e],matcher:i.regex})}}),{regex:new RegExp("^"+r.join("")+"$"),map:i(n,"index")}}function a(t){return parseInt(t,10)}function o(t,e){var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function s(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function l(t,e,n){return s(t,(n=n?-1:1)*(o(e,t.getTimezoneOffset())-t.getTimezoneOffset()))}var u,c,d=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){u=e.id,this.parsers={},this.formatters={},c=[{key:"yyyy",regex:"\\d{4}",apply:function(t){this.year=+t},formatter:function(t){var e=new Date;return e.setFullYear(Math.abs(t.getFullYear())),n(e,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(t){t=+t,this.year=69>t?t+2e3:t+1900},formatter:function(t){var e=new Date;return e.setFullYear(Math.abs(t.getFullYear())),n(e,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(t){this.year=+t},formatter:function(t){var e=new Date;return e.setFullYear(Math.abs(t.getFullYear())),n(e,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(t){this.month=t-1},formatter:function(t){var e=t.getMonth();return/^[0-9]$/.test(e)?n(t,"MM"):n(t,"M")}},{key:"MMMM",regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)},formatter:function(t){return n(t,"MMMM")}},{key:"MMM",regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)},formatter:function(t){return n(t,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(t){this.month=t-1},formatter:function(t){return n(t,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(t){this.month=t-1},formatter:function(t){return n(t,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t},formatter:function(t){var e=t.getDate();return/^[1-9]$/.test(e)?n(t,"dd"):n(t,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t},formatter:function(t){return n(t,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t},formatter:function(t){return n(t,"d")}},{key:"EEEE",regex:e.DATETIME_FORMATS.DAY.join("|"),formatter:function(t){return n(t,"EEEE")}},{key:"EEE",regex:e.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(t){return n(t,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(t){this.minutes=+t},formatter:function(t){return n(t,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(t){this.minutes=+t},formatter:function(t){return n(t,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(t){this.milliseconds=+t},formatter:function(t){return n(t,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(t){this.seconds=+t},formatter:function(t){return n(t,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(t){this.seconds=+t},formatter:function(t){return n(t,"s")}},{key:"a",regex:e.DATETIME_FORMATS.AMPMS.join("|"),apply:function(t){12===this.hours&&(this.hours=0),"PM"===t&&(this.hours+=12)},formatter:function(t){return n(t,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(t){var e=t.match(/([+-])(\d{2})(\d{2})/),n=e[1],i=e[2],r=e[3];this.hours+=a(n+i),this.minutes+=a(n+r)},formatter:function(t){return n(t,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(t){return n(t,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(t){return n(t,"w")}},{key:"GGGG",regex:e.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(t){return n(t,"GGGG")}},{key:"GGG",regex:e.DATETIME_FORMATS.ERAS.join("|"),formatter:function(t){return n(t,"GGG")}},{key:"GG",regex:e.DATETIME_FORMATS.ERAS.join("|"),formatter:function(t){return n(t,"GG")}},{key:"G",regex:e.DATETIME_FORMATS.ERAS.join("|"),formatter:function(t){return n(t,"G")}}]},this.init(),this.filter=function(t,n){if(!angular.isDate(t)||isNaN(t)||!n)return"";n=e.DATETIME_FORMATS[n]||n,e.id!==u&&this.init(),this.formatters[n]||(this.formatters[n]=r(n,"formatter"));var i=this.formatters[n].map,a=n;return i.reduce(function(e,n,r){var o=a.match(new RegExp("(.*)"+n.key));o&&angular.isString(o[1])&&(e+=o[1],a=a.replace(o[1]+n.key,""));var s=r===i.length-1?a:"";return n.apply?e+n.apply.call(null,t)+s:e+s},"")},this.parse=function(n,i,a){if(!angular.isString(n)||!i)return n;i=(i=e.DATETIME_FORMATS[i]||i).replace(d,"\\$&"),e.id!==u&&this.init(),this.parsers[i]||(this.parsers[i]=r(i,"apply"));var o=this.parsers[i],s=o.regex,l=o.map,c=n.match(s),h=!1;if(c&&c.length){var f,p;angular.isDate(a)&&!isNaN(a.getTime())?f={year:a.getFullYear(),month:a.getMonth(),date:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds(),milliseconds:a.getMilliseconds()}:(a&&t.warn("dateparser:","baseDate is not a valid date"),f={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var g=1,m=c.length;m>g;g++){var v=l[g-1];"Z"===v.matcher&&(h=!0),v.apply&&v.apply.call(f,c[g])}var y=h?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,b=h?Date.prototype.setUTCHours:Date.prototype.setHours;return x=f.year,w=f.month,!(1>(M=f.date))&&(1===w&&M>28?29===M&&(x%4==0&&x%100!=0||x%400==0):3!==w&&5!==w&&8!==w&&10!==w||31>M)&&(!angular.isDate(a)||isNaN(a.getTime())||h?(p=new Date(0),y.call(p,f.year,f.month,f.date),b.call(p,f.hours||0,f.minutes||0,f.seconds||0,f.milliseconds||0)):(p=new Date(a),y.call(p,f.year,f.month,f.date),b.call(p,f.hours,f.minutes,f.seconds,f.milliseconds))),p}var x,w,M},this.toTimezone=function(t,e){return t&&e?l(t,e):t},this.fromTimezone=function(t,e){return t&&e?l(t,e,!0):t},this.timezoneToOffset=o,this.addDateMinutes=s,this.convertTimezoneToLocal=l}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(t){var e=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,n=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(i,r){function a(t){var e=t.targetScope,n=o.indexOf(e);if(o.splice(n,1),s.splice(n,1),o.length){var i=o[0];angular.forEach(l,function(t){t.scope===e&&(t.watcher=i.$watch(t.compareWithExp,t.watchFn),t.scope=i)})}else l={}}var o=[],s=[],l={},u=r.uibIsClass.match(e),c=u[2],d=u[1].split(",");return function(e,i,r){o.push(e),s.push({scope:e,element:i}),d.forEach(function(i,r){!function(e,i){var r=e.match(n),a=i.$eval(r[1]),o=r[2],u=l[e];if(!u){var d=function(e){var n=null;s.some(function(t){var i=t.scope.$eval(c);return i===e?(n=t,!0):void 0}),u.lastActivated!==n&&(u.lastActivated&&t.removeClass(u.lastActivated.element,a),n&&t.addClass(n.element,a),u.lastActivated=n)};l[e]=u={lastActivated:null,scope:i,watchFn:d,compareWithExp:o,watcher:i.$watch(o,d)}}u.watchFn(i.$eval(o))}(i,e)}),e.$on("$destroy",a)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(t,e,n,i,r,a,o,s,l,u,c){function d(e){t.datepickerMode=e,t.datepickerOptions.datepickerMode=e}var h=this,f={$setViewValue:angular.noop},p={},g=[];e.datepickerOptions,t.datepickerOptions||(t.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(e){switch(e){case"customClass":case"dateDisabled":t[e]=t.datepickerOptions[e]||angular.noop;break;case"datepickerMode":t.datepickerMode=angular.isDefined(t.datepickerOptions.datepickerMode)?t.datepickerOptions.datepickerMode:s.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":h[e]=angular.isDefined(t.datepickerOptions[e])?i(t.datepickerOptions[e])(t.$parent):s[e];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":h[e]=angular.isDefined(t.datepickerOptions[e])?t.datepickerOptions[e]:s[e];break;case"startingDay":angular.isDefined(t.datepickerOptions.startingDay)?h.startingDay=t.datepickerOptions.startingDay:angular.isNumber(s.startingDay)?h.startingDay=s.startingDay:h.startingDay=(r.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":t.$watch("datepickerOptions."+e,function(t){t?angular.isDate(t)?h[e]=c.fromTimezone(new Date(t),p.timezone):(l&&a.warn("Literal date support has been deprecated, please switch to date object usage"),h[e]=new Date(o(t,"medium"))):h[e]=s[e]?c.fromTimezone(new Date(s[e]),p.timezone):null,h.refreshView()});break;case"maxMode":case"minMode":t.datepickerOptions[e]?t.$watch(function(){return t.datepickerOptions[e]},function(n){h[e]=t[e]=angular.isDefined(n)?n:datepickerOptions[e],("minMode"===e&&h.modes.indexOf(t.datepickerOptions.datepickerMode)<h.modes.indexOf(h[e])||"maxMode"===e&&h.modes.indexOf(t.datepickerOptions.datepickerMode)>h.modes.indexOf(h[e]))&&(t.datepickerMode=h[e],t.datepickerOptions.datepickerMode=h[e])}):h[e]=t[e]=s[e]||null}}),t.uniqueId="datepicker-"+t.$id+"-"+Math.floor(1e4*Math.random()),t.disabled=angular.isDefined(e.disabled)||!1,angular.isDefined(e.ngDisabled)&&g.push(t.$parent.$watch(e.ngDisabled,function(e){t.disabled=e,h.refreshView()})),t.isActive=function(e){return 0===h.compare(e.date,h.activeDate)&&(t.activeDateId=e.uid,!0)},this.init=function(e){f=e,p=e.$options||s.ngModelOptions,t.datepickerOptions.initDate?(h.activeDate=c.fromTimezone(t.datepickerOptions.initDate,p.timezone)||new Date,t.$watch("datepickerOptions.initDate",function(t){t&&(f.$isEmpty(f.$modelValue)||f.$invalid)&&(h.activeDate=c.fromTimezone(t,p.timezone),h.refreshView())})):h.activeDate=new Date,this.activeDate=f.$modelValue?c.fromTimezone(new Date(f.$modelValue),p.timezone):c.fromTimezone(new Date,p.timezone),f.$render=function(){h.render()}},this.render=function(){if(f.$viewValue){var t=new Date(f.$viewValue);!isNaN(t)?this.activeDate=c.fromTimezone(t,p.timezone):u||a.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){t.selectedDt=null,this._refreshView(),t.activeDt&&(t.activeDateId=t.activeDt.uid);var e=f.$viewValue?new Date(f.$viewValue):null;e=c.fromTimezone(e,p.timezone),f.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,n){var i=f.$viewValue?new Date(f.$viewValue):null;i=c.fromTimezone(i,p.timezone);var r=new Date;r=c.fromTimezone(r,p.timezone);var a=this.compare(e,r),o={date:e,label:c.filter(e,n),selected:i&&0===this.compare(e,i),disabled:this.isDisabled(e),past:0>a,current:0===a,future:a>0,customClass:this.customClass(e)||null};return i&&0===this.compare(e,i)&&(t.selectedDt=o),h.activeDate&&0===this.compare(o.date,h.activeDate)&&(t.activeDt=o),o},this.isDisabled=function(e){return t.disabled||this.minDate&&this.compare(e,this.minDate)<0||this.maxDate&&this.compare(e,this.maxDate)>0||t.dateDisabled&&t.dateDisabled({date:e,mode:t.datepickerMode})},this.customClass=function(e){return t.customClass({date:e,mode:t.datepickerMode})},this.split=function(t,e){for(var n=[];t.length>0;)n.push(t.splice(0,e));return n},t.select=function(e){if(t.datepickerMode===h.minMode){var n=f.$viewValue?c.fromTimezone(new Date(f.$viewValue),p.timezone):new Date(0,0,0,0,0,0,0);n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n=c.toTimezone(n,p.timezone),f.$setViewValue(n),f.$render()}else h.activeDate=e,d(h.modes[h.modes.indexOf(t.datepickerMode)-1]),t.$emit("uib:datepicker.mode");t.$broadcast("uib:datepicker.focus")},t.move=function(t){var e=h.activeDate.getFullYear()+t*(h.step.years||0),n=h.activeDate.getMonth()+t*(h.step.months||0);h.activeDate.setFullYear(e,n,1),h.refreshView()},t.toggleMode=function(e){e=e||1,t.datepickerMode===h.maxMode&&1===e||t.datepickerMode===h.minMode&&-1===e||(d(h.modes[h.modes.indexOf(t.datepickerMode)+e]),t.$emit("uib:datepicker.mode"))},t.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};t.$on("uib:datepicker.focus",function(){h.element[0].focus()}),t.keydown=function(e){var n=t.keys[e.which];if(n&&!e.shiftKey&&!e.altKey&&!t.disabled)if(e.preventDefault(),h.shortcutPropagation||e.stopPropagation(),"enter"===n||"space"===n){if(h.isDisabled(h.activeDate))return;t.select(h.activeDate)}else!e.ctrlKey||"up"!==n&&"down"!==n?(h.handleKeyDown(n,e),h.refreshView()):t.toggleMode("up"===n?1:-1)},t.$on("$destroy",function(){for(;g.length;)g.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(t,e,n){function i(t,e){return 1!==e||t%4!=0||t%100==0&&t%400!=0?a[e]:29}function r(t){var e=new Date(t);e.setDate(e.getDate()+4-(e.getDay()||7));var n=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((n-e)/864e5)/7)+1}var a=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=e,this.init=function(e){angular.extend(e,this),t.showWeeks=e.showWeeks,e.refreshView()},this.getDates=function(t,e){for(var n,i=new Array(e),r=new Date(t),a=0;e>a;)n=new Date(r),i[a++]=n,r.setDate(r.getDate()+1);return i},this._refreshView=function(){var e=this.activeDate.getFullYear(),i=this.activeDate.getMonth(),a=new Date(this.activeDate);a.setFullYear(e,i,1);var o=this.startingDay-a.getDay(),s=o>0?7-o:-o,l=new Date(a);s>0&&l.setDate(1-s);for(var u=this.getDates(l,42),c=0;42>c;c++)u[c]=angular.extend(this.createDateObject(u[c],this.formatDay),{secondary:u[c].getMonth()!==i,uid:t.uniqueId+"-"+c});t.labels=new Array(7);for(var d=0;7>d;d++)t.labels[d]={abbr:n(u[d].date,this.formatDayHeader),full:n(u[d].date,"EEEE")};if(t.title=n(this.activeDate,this.formatDayTitle),t.rows=this.split(u,7),t.showWeeks){t.weekNumbers=[];for(var h=(11-this.startingDay)%7,f=t.rows.length,p=0;f>p;p++)t.weekNumbers.push(r(t.rows[p][h].date))}},this.compare=function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n.setFullYear(t.getFullYear()),i.setFullYear(e.getFullYear()),n-i},this.handleKeyDown=function(t,e){var n=this.activeDate.getDate();if("left"===t)n-=1;else if("up"===t)n-=7;else if("right"===t)n+=1;else if("down"===t)n+=7;else if("pageup"===t||"pagedown"===t){var r=this.activeDate.getMonth()+("pageup"===t?-1:1);this.activeDate.setMonth(r,1),n=Math.min(i(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===t?n=1:"end"===t&&(n=i(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(t,e,n){this.step={years:1},this.element=e,this.init=function(t){angular.extend(t,this),t.refreshView()},this._refreshView=function(){for(var e,i=new Array(12),r=this.activeDate.getFullYear(),a=0;12>a;a++)e=new Date(this.activeDate),e.setFullYear(r,a,1),i[a]=angular.extend(this.createDateObject(e,this.formatMonth),{uid:t.uniqueId+"-"+a});t.title=n(this.activeDate,this.formatMonthTitle),t.rows=this.split(i,3)},this.compare=function(t,e){var n=new Date(t.getFullYear(),t.getMonth()),i=new Date(e.getFullYear(),e.getMonth());return n.setFullYear(t.getFullYear()),i.setFullYear(e.getFullYear()),n-i},this.handleKeyDown=function(t,e){var n=this.activeDate.getMonth();if("left"===t)n-=1;else if("up"===t)n-=3;else if("right"===t)n+=1;else if("down"===t)n+=3;else if("pageup"===t||"pagedown"===t){var i=this.activeDate.getFullYear()+("pageup"===t?-1:1);this.activeDate.setFullYear(i)}else"home"===t?n=0:"end"===t&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(t,e,n){function i(t){return parseInt((t-1)/a,10)*a+1}var r,a;this.element=e,this.yearpickerInit=function(){r=this.yearColumns,a=this.yearRows*r,this.step={years:a}},this._refreshView=function(){for(var e,n=new Array(a),o=0,s=i(this.activeDate.getFullYear());a>o;o++)e=new Date(this.activeDate),e.setFullYear(s+o,0,1),n[o]=angular.extend(this.createDateObject(e,this.formatYear),{uid:t.uniqueId+"-"+o});t.title=[n[0].label,n[a-1].label].join(" - "),t.rows=this.split(n,r),t.columns=r},this.compare=function(t,e){return t.getFullYear()-e.getFullYear()},this.handleKeyDown=function(t,e){var n=this.activeDate.getFullYear();"left"===t?n-=1:"up"===t?n-=r:"right"===t?n+=1:"down"===t?n+=r:"pageup"===t||"pagedown"===t?n+=("pageup"===t?-1:1)*a:"home"===t?n=i(this.activeDate.getFullYear()):"end"===t&&(n=i(this.activeDate.getFullYear())+a-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(t,e,n,i){var r=i[0],a=i[1];r.init(a)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(t,e,n,i){var r=i[0];i[1].init(r)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(t,e,n,i){var r=i[0];i[1].init(r)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(t,e,n,i){var r=i[0];angular.extend(r,i[1]),r.yearpickerInit(),r.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(t,e){var n,i,r={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},a={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},o=/(HTML|BODY)/;return{getRawNode:function(t){return t.nodeName?t:t[0]||t},parseStyle:function(t){return t=parseFloat(t),isFinite(t)?t:0},offsetParent:function(n){for(var i=(n=this.getRawNode(n)).offsetParent||t[0].documentElement;i&&i!==t[0].documentElement&&(r=i,"static"===(e.getComputedStyle(r).position||"static"));)i=i.offsetParent;var r;return i||t[0].documentElement},scrollbarWidth:function(r){if(r){if(angular.isUndefined(i)){var a=t.find("body");a.addClass("uib-position-body-scrollbar-measure"),i=e.innerWidth-a[0].clientWidth,i=isFinite(i)?i:0,a.removeClass("uib-position-body-scrollbar-measure")}return i}if(angular.isUndefined(n)){var o=angular.element('<div class="uib-position-scrollbar-measure"></div>');t.find("body").append(o),n=o[0].offsetWidth-o[0].clientWidth,n=isFinite(n)?n:0,o.remove()}return n},scrollbarPadding:function(t){t=this.getRawNode(t);var n=e.getComputedStyle(t),i=this.parseStyle(n.paddingRight),r=this.parseStyle(n.paddingBottom),a=this.scrollParent(t,!1,!0),s=this.scrollbarWidth(a,o.test(a.tagName));return{scrollbarWidth:s,widthOverflow:a.scrollWidth>a.clientWidth,right:i+s,originalRight:i,heightOverflow:a.scrollHeight>a.clientHeight,bottom:r+s,originalBottom:r}},isScrollable:function(t,n){t=this.getRawNode(t);var i=n?r.hidden:r.normal,a=e.getComputedStyle(t);return i.test(a.overflow+a.overflowY+a.overflowX)},scrollParent:function(n,i,a){n=this.getRawNode(n);var o=i?r.hidden:r.normal,s=t[0].documentElement,l=e.getComputedStyle(n);if(a&&o.test(l.overflow+l.overflowY+l.overflowX))return n;var u="absolute"===l.position,c=n.parentElement||s;if(c===s||"fixed"===l.position)return s;for(;c.parentElement&&c!==s;){var d=e.getComputedStyle(c);if(u&&"static"!==d.position&&(u=!1),!u&&o.test(d.overflow+d.overflowY+d.overflowX))break;c=c.parentElement}return c},position:function(n,i){n=this.getRawNode(n);var r=this.offset(n);if(i){var a=e.getComputedStyle(n);r.top-=this.parseStyle(a.marginTop),r.left-=this.parseStyle(a.marginLeft)}var o=this.offsetParent(n),s={top:0,left:0};return o!==t[0].documentElement&&(s=this.offset(o),s.top+=o.clientTop-o.scrollTop,s.left+=o.clientLeft-o.scrollLeft),{width:Math.round(angular.isNumber(r.width)?r.width:n.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:n.offsetHeight),top:Math.round(r.top-s.top),left:Math.round(r.left-s.left)}},offset:function(n){var i=(n=this.getRawNode(n)).getBoundingClientRect();return{width:Math.round(angular.isNumber(i.width)?i.width:n.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:n.offsetHeight),top:Math.round(i.top+(e.pageYOffset||t[0].documentElement.scrollTop)),left:Math.round(i.left+(e.pageXOffset||t[0].documentElement.scrollLeft))}},viewportOffset:function(n,i,r){r=!1!==r;var a=(n=this.getRawNode(n)).getBoundingClientRect(),o={top:0,left:0,bottom:0,right:0},s=i?t[0].documentElement:this.scrollParent(n),l=s.getBoundingClientRect();if(o.top=l.top+s.clientTop,o.left=l.left+s.clientLeft,s===t[0].documentElement&&(o.top+=e.pageYOffset,o.left+=e.pageXOffset),o.bottom=o.top+s.clientHeight,o.right=o.left+s.clientWidth,r){var u=e.getComputedStyle(s);o.top+=this.parseStyle(u.paddingTop),o.bottom-=this.parseStyle(u.paddingBottom),o.left+=this.parseStyle(u.paddingLeft),o.right-=this.parseStyle(u.paddingRight)}return{top:Math.round(a.top-o.top),bottom:Math.round(o.bottom-a.bottom),left:Math.round(a.left-o.left),right:Math.round(o.right-a.right)}},parsePlacement:function(t){var e=a.auto.test(t);return e&&(t=t.replace(a.auto,"")),(t=t.split("-"))[0]=t[0]||"top",a.primary.test(t[0])||(t[0]="top"),t[1]=t[1]||"center",a.secondary.test(t[1])||(t[1]="center"),t[2]=!!e,t},positionElements:function(t,n,i,r){t=this.getRawNode(t),n=this.getRawNode(n);var o=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),s=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");i=this.parsePlacement(i);var l=r?this.offset(t):this.position(t),u={top:0,left:0,placement:""};if(i[2]){var c=this.viewportOffset(t,r),d=e.getComputedStyle(n),h=o+Math.round(Math.abs(this.parseStyle(d.marginLeft)+this.parseStyle(d.marginRight))),f=s+Math.round(Math.abs(this.parseStyle(d.marginTop)+this.parseStyle(d.marginBottom)));if(i[0]="top"===i[0]&&f>c.top&&f<=c.bottom?"bottom":"bottom"===i[0]&&f>c.bottom&&f<=c.top?"top":"left"===i[0]&&h>c.left&&h<=c.right?"right":"right"===i[0]&&h>c.right&&h<=c.left?"left":i[0],i[1]="top"===i[1]&&f-l.height>c.bottom&&f-l.height<=c.top?"bottom":"bottom"===i[1]&&f-l.height>c.top&&f-l.height<=c.bottom?"top":"left"===i[1]&&h-l.width>c.right&&h-l.width<=c.left?"right":"right"===i[1]&&h-l.width>c.left&&h-l.width<=c.right?"left":i[1],"center"===i[1])if(a.vertical.test(i[0])){var p=l.width/2-o/2;c.left+p<0&&h-l.width<=c.right?i[1]="left":c.right+p<0&&h-l.width<=c.left&&(i[1]="right")}else{var g=l.height/2-f/2;c.top+g<0&&f-l.height<=c.bottom?i[1]="top":c.bottom+g<0&&f-l.height<=c.top&&(i[1]="bottom")}}switch(i[0]){case"top":u.top=l.top-s;break;case"bottom":u.top=l.top+l.height;break;case"left":u.left=l.left-o;break;case"right":u.left=l.left+l.width}switch(i[1]){case"top":u.top=l.top;break;case"bottom":u.top=l.top+l.height-s;break;case"left":u.left=l.left;break;case"right":u.left=l.left+l.width-o;break;case"center":a.vertical.test(i[0])?u.left=l.left+l.width/2-o/2:u.top=l.top+l.height/2-s/2}return u.top=Math.round(u.top),u.left=Math.round(u.left),u.placement="center"===i[1]?i[0]:i[0]+"-"+i[1],u},positionArrow:function(t,n){var i=(t=this.getRawNode(t)).querySelector(".tooltip-inner, .popover-inner");if(i){var r=angular.element(i).hasClass("tooltip-inner"),o=r?t.querySelector(".tooltip-arrow"):t.querySelector(".arrow");if(o){var s={top:"",bottom:"",left:"",right:""};if("center"===(n=this.parsePlacement(n))[1])return void angular.element(o).css(s);var l="border-"+n[0]+"-width",u=e.getComputedStyle(o)[l],c="border-";c+=a.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],c+="-radius";var d=e.getComputedStyle(r?i:t)[c];switch(n[0]){case"top":s.bottom=r?"0":"-"+u;break;case"bottom":s.top=r?"0":"-"+u;break;case"left":s.right=r?"0":"-"+u;break;case"right":s.left=r?"0":"-"+u}s[n[1]]=d,angular.element(o).css(s)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(t,e,n,i,r,a,o,s,l,u,c,d,h,f,p,g){function m(e){var n=d.parse(e,M,t.date);if(isNaN(n))for(var i=0;i<L.length;i++)if(n=d.parse(e,L[i],t.date),!isNaN(n))return n;return n}function v(t){if(angular.isNumber(t)&&(t=new Date(t)),!t)return null;if(angular.isDate(t)&&!isNaN(t))return t;if(angular.isString(t)){var e=m(t);if(!isNaN(e))return d.toTimezone(e,F)}return D.$options&&D.$options.allowInvalid?t:void 0}function y(t,e){var i=t||e;return!n.ngRequired&&!i||(angular.isNumber(i)&&(i=new Date(i)),!i||(!(!angular.isDate(i)||isNaN(i))||!!angular.isString(i)&&!isNaN(m(e))))}function b(n){if(t.isOpen||!t.disabled){var i=I[0],r=e[0].contains(n.target),a=void 0!==i.contains&&i.contains(n.target);!t.isOpen||r||a||t.$apply(function(){t.isOpen=!1})}}function x(n){27===n.which&&t.isOpen?(n.preventDefault(),n.stopPropagation(),t.$apply(function(){t.isOpen=!1}),e[0].focus()):40!==n.which||t.isOpen||(n.preventDefault(),n.stopPropagation(),t.$apply(function(){t.isOpen=!0}))}function w(){if(t.isOpen){var i=angular.element(I[0].querySelector(".uib-datepicker-popup")),r=n.popupPlacement?n.popupPlacement:h.placement,a=u.positionElements(e,i,r,_);i.css({top:a.top+"px",left:a.left+"px"}),i.hasClass("uib-position-measure")&&i.removeClass("uib-position-measure")}}var M,k,_,C,S,T,P,A,E,D,O,I,L,F,$=!1,z=[];this.init=function(r){if(D=r,O=r.$options,k=angular.isDefined(n.closeOnDateSelection)?t.$parent.$eval(n.closeOnDateSelection):h.closeOnDateSelection,_=angular.isDefined(n.datepickerAppendToBody)?t.$parent.$eval(n.datepickerAppendToBody):h.appendToBody,C=angular.isDefined(n.onOpenFocus)?t.$parent.$eval(n.onOpenFocus):h.onOpenFocus,S=angular.isDefined(n.datepickerPopupTemplateUrl)?n.datepickerPopupTemplateUrl:h.datepickerPopupTemplateUrl,T=angular.isDefined(n.datepickerTemplateUrl)?n.datepickerTemplateUrl:h.datepickerTemplateUrl,L=angular.isDefined(n.altInputFormats)?t.$parent.$eval(n.altInputFormats):h.altInputFormats,t.showButtonBar=angular.isDefined(n.showButtonBar)?t.$parent.$eval(n.showButtonBar):h.showButtonBar,h.html5Types[n.type]?(M=h.html5Types[n.type],$=!0):(M=n.uibDatepickerPopup||h.datepickerPopup,n.$observe("uibDatepickerPopup",function(t,e){var n=t||h.datepickerPopup;if(n!==M&&(M=n,D.$modelValue=null,!M))throw new Error("uibDatepickerPopup must have a date format specified.")})),!M)throw new Error("uibDatepickerPopup must have a date format specified.");if($&&n.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");P=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),O?(F=O.timezone,t.ngModelOptions=angular.copy(O),t.ngModelOptions.timezone=null,!0===t.ngModelOptions.updateOnDefault&&(t.ngModelOptions.updateOn=t.ngModelOptions.updateOn?t.ngModelOptions.updateOn+" default":"default"),P.attr("ng-model-options","ngModelOptions")):F=null,P.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":S}),(A=angular.element(P.children()[0])).attr("template-url",T),t.datepickerOptions||(t.datepickerOptions={}),$&&"month"===n.type&&(t.datepickerOptions.datepickerMode="month",t.datepickerOptions.minMode="month"),A.attr("datepicker-options","datepickerOptions"),$?D.$formatters.push(function(e){return t.date=d.fromTimezone(e,F),e}):(D.$$parserName="date",D.$validators.date=y,D.$parsers.unshift(v),D.$formatters.push(function(e){return D.$isEmpty(e)?(t.date=e,e):(t.date=d.fromTimezone(e,F),angular.isNumber(t.date)&&(t.date=new Date(t.date)),d.filter(t.date,M))})),D.$viewChangeListeners.push(function(){t.date=m(D.$viewValue)}),e.on("keydown",x),I=i(P)(t),P.remove(),_?s.find("body").append(I):e.after(I),t.$on("$destroy",function(){for(!0===t.isOpen&&(l.$$phase||t.$apply(function(){t.isOpen=!1})),I.remove(),e.off("keydown",x),s.off("click",b),E&&E.off("scroll",w),angular.element(o).off("resize",w);z.length;)z.shift()()})},t.getText=function(e){return t[e+"Text"]||h[e+"Text"]},t.isDisabled=function(e){"today"===e&&(e=d.fromTimezone(new Date,F));var n={};return angular.forEach(["minDate","maxDate"],function(e){t.datepickerOptions[e]?angular.isDate(t.datepickerOptions[e])?n[e]=d.fromTimezone(new Date(t.datepickerOptions[e]),F):(g&&r.warn("Literal date support has been deprecated, please switch to date object usage"),n[e]=new Date(c(t.datepickerOptions[e],"medium"))):n[e]=null}),t.datepickerOptions&&n.minDate&&t.compare(e,n.minDate)<0||n.maxDate&&t.compare(e,n.maxDate)>0},t.compare=function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate())-new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.dateSelection=function(n){angular.isDefined(n)&&(t.date=n);var i=t.date?d.filter(t.date,M):null;e.val(i),D.$setViewValue(i),k&&(t.isOpen=!1,e[0].focus())},t.keydown=function(n){27===n.which&&(n.stopPropagation(),t.isOpen=!1,e[0].focus())},t.select=function(e,n){if(n.stopPropagation(),"today"===e){var i=new Date;angular.isDate(t.date)?(e=new Date(t.date)).setFullYear(i.getFullYear(),i.getMonth(),i.getDate()):e=new Date(i.setHours(0,0,0,0))}t.dateSelection(e)},t.close=function(n){n.stopPropagation(),t.isOpen=!1,e[0].focus()},t.disabled=angular.isDefined(n.disabled)||!1,n.ngDisabled&&z.push(t.$parent.$watch(a(n.ngDisabled),function(e){t.disabled=e})),t.$watch("isOpen",function(i){i?t.disabled?t.isOpen=!1:f(function(){w(),C&&t.$broadcast("uib:datepicker.focus"),s.on("click",b);var i=n.popupPlacement?n.popupPlacement:h.placement;_||u.parsePlacement(i)[2]?(E=E||angular.element(u.scrollParent(e)))&&E.on("scroll",w):E=null,angular.element(o).on("resize",w)},0,!1):(s.off("click",b),E&&E.off("scroll",w),angular.element(o).off("resize",w))}),t.$on("uib:datepicker.mode",function(){f(w,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(t,e,n,i){var r=i[0];i[1].init(r)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(t){return function(e,n){var i;return function(){var r=this,a=Array.prototype.slice.call(arguments);i&&t.cancel(i),i=t(function(){e.apply(r,a)},n)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(t,e){var n=null;this.open=function(e,a){n||(t.on("click",i),a.on("keydown",r)),n&&n!==e&&(n.isOpen=!1),n=e},this.close=function(e,a){n===e&&(n=null,t.off("click",i),a.off("keydown",r))};var i=function(t){if(n&&!(t&&"disabled"===n.getAutoClose()||t&&3===t.which)){var i=n.getToggleElement();if(!(t&&i&&i[0].contains(t.target))){var r=n.getDropdownElement();t&&"outsideClick"===n.getAutoClose()&&r&&r[0].contains(t.target)||(n.isOpen=!1,e.$$phase||n.$apply())}}},r=function(t){27===t.which?(t.stopPropagation(),n.focusToggleElement(),i()):n.isKeynavEnabled()&&-1!==[38,40].indexOf(t.which)&&n.isOpen&&(t.preventDefault(),t.stopPropagation(),n.focusDropdownEntry(t.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(t,e,n,i,r,a,o,s,l,u,c){var d,h,f=this,p=t.$new(),g=r.appendToOpenClass,m=r.openClass,v=angular.noop,y=n.onToggle?i(n.onToggle):angular.noop,b=!1,x=null,w=!1,M=l.find("body");e.addClass("dropdown"),this.init=function(){if(n.isOpen&&(h=i(n.isOpen),v=h.assign,t.$watch(h,function(t){p.isOpen=!!t})),angular.isDefined(n.dropdownAppendTo)){var r=i(n.dropdownAppendTo)(p);r&&(x=angular.element(r))}b=angular.isDefined(n.dropdownAppendToBody),w=angular.isDefined(n.keyboardNav),b&&!x&&(x=M),x&&f.dropdownMenu&&(x.append(f.dropdownMenu),e.on("$destroy",function(){f.dropdownMenu.remove()}))},this.toggle=function(t){return p.isOpen=arguments.length?!!t:!p.isOpen,angular.isFunction(v)&&v(p,p.isOpen),p.isOpen},this.isOpen=function(){return p.isOpen},p.getToggleElement=function(){return f.toggleElement},p.getAutoClose=function(){return n.autoClose||"always"},p.getElement=function(){return e},p.isKeynavEnabled=function(){return w},p.focusDropdownEntry=function(t){var n=f.dropdownMenu?angular.element(f.dropdownMenu).find("a"):e.find("ul").eq(0).find("a");switch(t){case 40:angular.isNumber(f.selectedOption)?f.selectedOption=f.selectedOption===n.length-1?f.selectedOption:f.selectedOption+1:f.selectedOption=0;break;case 38:angular.isNumber(f.selectedOption)?f.selectedOption=0===f.selectedOption?0:f.selectedOption-1:f.selectedOption=n.length-1}n[f.selectedOption].focus()},p.getDropdownElement=function(){return f.dropdownMenu},p.focusToggleElement=function(){f.toggleElement&&f.toggleElement[0].focus()},p.$watch("isOpen",function(n,i){if(x&&f.dropdownMenu){var r,l,h=s.positionElements(e,f.dropdownMenu,"bottom-left",!0);if(r={top:h.top+"px",display:n?"block":"none"},(l=f.dropdownMenu.hasClass("dropdown-menu-right"))?(r.left="auto",r.right=window.innerWidth-(h.left+e.prop("offsetWidth"))+"px"):(r.left=h.left+"px",r.right="auto"),!b){var w=s.offset(x);r.top=h.top-w.top+"px",l?r.right=window.innerWidth-(h.left-w.left+e.prop("offsetWidth"))+"px":r.left=h.left-w.left+"px"}f.dropdownMenu.css(r)}var M=x||e;if(M.hasClass(x?g:m)===!n&&o[n?"addClass":"removeClass"](M,x?g:m).then(function(){angular.isDefined(n)&&n!==i&&y(t,{open:!!n})}),n)f.dropdownMenuTemplateUrl&&c(f.dropdownMenuTemplateUrl).then(function(t){d=p.$new(),u(t.trim())(d,function(t){var e=t;f.dropdownMenu.replaceWith(e),f.dropdownMenu=e})}),p.focusToggleElement(),a.open(p,e);else{if(f.dropdownMenuTemplateUrl){d&&d.$destroy();var k=angular.element('<ul class="dropdown-menu"></ul>');f.dropdownMenu.replaceWith(k),f.dropdownMenu=k}a.close(p,e),f.selectedOption=null}angular.isFunction(v)&&v(t,n)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(t,e,n,i){i.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(t,e,n,i){if(i&&!angular.isDefined(n.dropdownNested)){e.addClass("dropdown-menu");var r=n.templateUrl;r&&(i.dropdownMenuTemplateUrl=r),i.dropdownMenu||(i.dropdownMenu=e)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(t,e,n,i){if(i){e.addClass("dropdown-toggle"),i.toggleElement=e;var r=function(r){r.preventDefault(),e.hasClass("disabled")||n.disabled||t.$apply(function(){i.toggle()})};e.bind("click",r),e.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(i.isOpen,function(t){e.attr("aria-expanded",!!t)}),t.$on("$destroy",function(){e.unbind("click",r)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var t=[];return{add:function(e,n){t.push({key:e,value:n})},get:function(e){for(var n=0;n<t.length;n++)if(e===t[n].key)return t[n]},keys:function(){for(var e=[],n=0;n<t.length;n++)e.push(t[n].key);return e},top:function(){return t[t.length-1]},remove:function(e){for(var n=-1,i=0;i<t.length;i++)if(e===t[i].key){n=i;break}return t.splice(n,1)[0]},removeTop:function(){return t.splice(t.length-1,1)[0]},length:function(){return t.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var t={};return{entries:function(){return Object.keys(t).map(function(e){return{key:e,value:t[e]}})},get:function(e){return t[e]},hasKey:function(e){return!!t[e]},keys:function(){return Object.keys(t)},put:function(e,n){t[e]||(t[e]=[]),t[e].push(n)},remove:function(e,n){var i=t[e];if(i){var r=i.indexOf(n);-1!==r&&i.splice(r,1),i.length||delete t[e]}}}}}}).provider("$uibResolve",function(){var t=this;this.resolver=null,this.setResolver=function(t){this.resolver=t},this.$get=["$injector","$q",function(e,n){var i=t.resolver?e.get(t.resolver):null;return{resolve:function(t,r,a,o){if(i)return i.resolve(t,r,a,o);var s=[];return angular.forEach(t,function(t){angular.isFunction(t)||angular.isArray(t)?s.push(n.resolve(e.invoke(t))):angular.isString(t)?s.push(n.resolve(e.get(t))):s.push(n.resolve(t))}),n.all(s).then(function(e){var n={},i=0;return angular.forEach(t,function(t,r){n[r]=e[i++]}),n})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(t,e,n){function i(e,i,r){r.modalInClass&&(t.addClass(i,r.modalInClass),e.$on(n.NOW_CLOSING_EVENT,function(n,a){var o=a();e.modalOptions.animation?t.removeClass(i,r.modalInClass).then(o):o()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(t,e){return t.addClass(e.backdropClass),i}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(t,e,n,i){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/modal/window.html"},link:function(r,a,o){a.addClass(o.windowClass||""),a.addClass(o.windowTopClass||""),r.size=o.size,r.close=function(e){var n=t.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),t.dismiss(n.key,"backdrop click"))},a.on("click",r.close),r.$isRendered=!0;var s=e.defer();o.$observe("modalRender",function(t){"true"===t&&s.resolve()}),s.promise.then(function(){var s=null;o.modalInClass&&(s=n(a,{addClass:o.modalInClass}).start(),r.$on(t.NOW_CLOSING_EVENT,function(t,e){var i=e();n(a,{removeClass:o.modalInClass}).start().then(i)})),e.when(s).then(function(){var e=t.getTop();if(e&&t.modalRendered(e.key),!i[0].activeElement||!a[0].contains(i[0].activeElement)){var n=a[0].querySelector("[autofocus]");n?n.focus():a[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(t,e){e.modalAnimation&&t.addClass(e.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(t,e,n,i,r){r(t.$parent,function(t){e.empty(),e.append(t)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(t,e,n,i,r,a,o,s,l){function u(){for(var t=-1,e=b.keys(),n=0;n<e.length;n++)b.get(e[n]).value.backdrop&&(t=n);return t>-1&&M>t&&(t=M),t}function c(t,e){var n=b.get(t).value,i=n.appendTo;b.remove(t),(k=b.top())&&(M=parseInt(k.value.modalDomEl.attr("index"),10)),h(n.modalDomEl,n.modalScope,function(){var e=n.openedClass||y;x.remove(e,t);var r=x.hasKey(e);i.toggleClass(e,r),!r&&v&&v.heightOverflow&&v.scrollbarWidth&&(v.originalRight?i.css({paddingRight:v.originalRight+"px"}):i.css({paddingRight:""}),v=null),d(!0)},n.closedDeferred),function(){if(g&&-1===u()){h(g,m,function(){null}),g=void 0,m=void 0}}(),e&&e.focus?e.focus():i.focus&&i.focus()}function d(t){var e;b.length()>0&&(e=b.top().value,e.modalDomEl.toggleClass(e.windowTopClass||"",t))}function h(e,n,i,r){function o(){o.done||(o.done=!0,t.leave(e).then(function(){e.remove(),r&&r.resolve()}),n.$destroy(),i&&i())}var s,l=null;return n.$broadcast(w.NOW_CLOSING_EVENT,function(){return s||(s=a.defer(),l=s.promise),function(){s.resolve()}}),a.when(l).then(o)}function f(t){if(t.isDefaultPrevented())return t;var e=b.top();if(e)switch(t.which){case 27:e.value.keyboard&&(t.preventDefault(),r.$apply(function(){w.dismiss(e.key,"escape key press")}));break;case 9:var n=w.loadFocusElementList(e),i=!1;t.shiftKey?(w.isFocusInFirstItem(t,n)||w.isModalFocused(t,e))&&(i=w.focusLastFocusableElement(n)):w.isFocusInLastItem(t,n)&&(i=w.focusFirstFocusableElement(n)),i&&(t.preventDefault(),t.stopPropagation())}}function p(t,e,n){return!t.value.modalScope.$broadcast("modal.closing",e,n).defaultPrevented}var g,m,v,y="modal-open",b=s.createNew(),x=o.createNew(),w={NOW_CLOSING_EVENT:"modal.stack.now-closing"},M=0,k=null;return r.$watch(u,function(t){m&&(m.index=t)}),n.on("keydown",f),r.$on("$destroy",function(){n.off("keydown",f)}),w.open=function(e,a){var o=n[0].activeElement,s=a.openedClass||y;d(!1),k=b.top(),b.add(e,{deferred:a.deferred,renderDeferred:a.renderDeferred,closedDeferred:a.closedDeferred,modalScope:a.scope,backdrop:a.backdrop,keyboard:a.keyboard,openedClass:a.openedClass,windowTopClass:a.windowTopClass,animation:a.animation,appendTo:a.appendTo}),x.put(s,e);var c=a.appendTo,h=u();if(!c.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");h>=0&&!g&&(m=r.$new(!0),m.modalOptions=a,m.index=h,g=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),g.attr("backdrop-class",a.backdropClass),a.animation&&g.attr("modal-animation","true"),i(g)(m),t.enter(g,c),v=l.scrollbarPadding(c),v.heightOverflow&&v.scrollbarWidth&&c.css({paddingRight:v.right+"px"})),M=k?parseInt(k.value.modalDomEl.attr("index"),10)+1:0;var f=angular.element('<div uib-modal-window="modal-window"></div>');f.attr({"template-url":a.windowTemplateUrl,"window-class":a.windowClass,"window-top-class":a.windowTopClass,size:a.size,index:M,animate:"animate"}).html(a.content),a.animation&&f.attr("modal-animation","true"),c.addClass(s),t.enter(i(f)(a.scope),c),b.top().value.modalDomEl=f,b.top().value.modalOpener=o},w.close=function(t,e){var n=b.get(t);return n&&p(n,e,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(e),c(t,n.value.modalOpener),!0):!n},w.dismiss=function(t,e){var n=b.get(t);return n&&p(n,e,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(e),c(t,n.value.modalOpener),!0):!n},w.dismissAll=function(t){for(var e=this.getTop();e&&this.dismiss(e.key,t);)e=this.getTop()},w.getTop=function(){return b.top()},w.modalRendered=function(t){var e=b.get(t);e&&e.value.renderDeferred.resolve()},w.focusFirstFocusableElement=function(t){return t.length>0&&(t[0].focus(),!0)},w.focusLastFocusableElement=function(t){return t.length>0&&(t[t.length-1].focus(),!0)},w.isModalFocused=function(t,e){if(t&&e){var n=e.value.modalDomEl;if(n&&n.length)return(t.target||t.srcElement)===n[0]}return!1},w.isFocusInFirstItem=function(t,e){return e.length>0&&(t.target||t.srcElement)===e[0]},w.isFocusInLastItem=function(t,e){return e.length>0&&(t.target||t.srcElement)===e[e.length-1]},w.loadFocusElementList=function(t){if(t){var e=t.value.modalDomEl;if(e&&e.length){var n=e[0].querySelectorAll("a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]");return n?Array.prototype.filter.call(n,function(t){return!!((e=t).offsetWidth||e.offsetHeight||e.getClientRects().length);var e}):n}}},w}]).provider("$uibModal",function(){var t={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(e,n,i,r,a,o,s){var l={},u=null;return l.getPromiseChain=function(){return u},l.open=function(l){function c(){return y}var d=n.defer(),h=n.defer(),f=n.defer(),p=n.defer(),g={result:d.promise,opened:h.promise,closed:f.promise,rendered:p.promise,close:function(t){return s.close(g,t)},dismiss:function(t){return s.dismiss(g,t)}};if((l=angular.extend({},t.options,l)).resolve=l.resolve||{},l.appendTo=l.appendTo||i.find("body").eq(0),!l.template&&!l.templateUrl)throw new Error("One of template or templateUrl options is required.");var m,v,y=n.all([(v=l,v.template?n.when(v.template):r(angular.isFunction(v.templateUrl)?v.templateUrl():v.templateUrl)),o.resolve(l.resolve,{},null,null)]);return m=u=n.all([u]).then(c,c).then(function(t){var n=l.scope||e,i=n.$new();i.$close=g.close,i.$dismiss=g.dismiss,i.$on("$destroy",function(){i.$$uibDestructionScheduled||i.$dismiss("$uibUnscheduledDestruction")});var r,o,u={};l.controller&&(u.$scope=i,u.$uibModalInstance=g,angular.forEach(t[1],function(t,e){u[e]=t}),o=a(l.controller,u,!0),l.controllerAs?(r=o.instance,l.bindToController&&(r.$close=i.$close,r.$dismiss=i.$dismiss,angular.extend(r,n)),r=o(),i[l.controllerAs]=r):r=o(),angular.isFunction(r.$onInit)&&r.$onInit()),s.open(g,{scope:i,deferred:d,renderDeferred:p,closedDeferred:f,content:t[0],animation:l.animation,backdrop:l.backdrop,keyboard:l.keyboard,backdropClass:l.backdropClass,windowTopClass:l.windowTopClass,windowClass:l.windowClass,windowTemplateUrl:l.windowTemplateUrl,size:l.size,openedClass:l.openedClass,appendTo:l.appendTo}),h.resolve(!0)},function(t){h.reject(t),d.reject(t)}).finally(function(){u===m&&(u=null)}),g},l}]};return t}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(t){return{create:function(e,n,i){e.setNumPages=i.numPages?t(i.numPages).assign:angular.noop,e.ngModelCtrl={$setViewValue:angular.noop},e._watchers=[],e.init=function(t,r){e.ngModelCtrl=t,e.config=r,t.$render=function(){e.render()},i.itemsPerPage?e._watchers.push(n.$parent.$watch(i.itemsPerPage,function(t){e.itemsPerPage=parseInt(t,10),n.totalPages=e.calculateTotalPages(),e.updatePage()})):e.itemsPerPage=r.itemsPerPage,n.$watch("totalItems",function(t,i){(angular.isDefined(t)||t!==i)&&(n.totalPages=e.calculateTotalPages(),e.updatePage())})},e.calculateTotalPages=function(){var t=e.itemsPerPage<1?1:Math.ceil(n.totalItems/e.itemsPerPage);return Math.max(t||0,1)},e.render=function(){n.page=parseInt(e.ngModelCtrl.$viewValue,10)||1},n.selectPage=function(t,i){i&&i.preventDefault();(!n.ngDisabled||!i)&&n.page!==t&&t>0&&t<=n.totalPages&&(i&&i.target&&i.target.blur(),e.ngModelCtrl.$setViewValue(t),e.ngModelCtrl.$render())},n.getText=function(t){return n[t+"Text"]||e.config[t+"Text"]},n.noPrevious=function(){return 1===n.page},n.noNext=function(){return n.page===n.totalPages},e.updatePage=function(){e.setNumPages(n.$parent,n.totalPages),n.page>n.totalPages?n.selectPage(n.totalPages):e.ngModelCtrl.$render()},n.$on("$destroy",function(){for(;e._watchers.length;)e._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(t,e,n,i){t.align=angular.isDefined(e.align)?t.$parent.$eval(e.align):i.align,n.create(this,t,e)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(t){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(t,e){return e.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(e,n,i,r){var a=r[0],o=r[1];o&&a.init(o,t)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(t,e,n,i,r){function a(t,e,n){return{number:t,text:e,active:n}}var o=this,s=angular.isDefined(e.maxSize)?t.$parent.$eval(e.maxSize):r.maxSize,l=angular.isDefined(e.rotate)?t.$parent.$eval(e.rotate):r.rotate,u=angular.isDefined(e.forceEllipses)?t.$parent.$eval(e.forceEllipses):r.forceEllipses,c=angular.isDefined(e.boundaryLinkNumbers)?t.$parent.$eval(e.boundaryLinkNumbers):r.boundaryLinkNumbers,d=angular.isDefined(e.pageLabel)?function(n){return t.$parent.$eval(e.pageLabel,{$page:n})}:angular.identity;t.boundaryLinks=angular.isDefined(e.boundaryLinks)?t.$parent.$eval(e.boundaryLinks):r.boundaryLinks,t.directionLinks=angular.isDefined(e.directionLinks)?t.$parent.$eval(e.directionLinks):r.directionLinks,i.create(this,t,e),e.maxSize&&o._watchers.push(t.$parent.$watch(n(e.maxSize),function(t){s=parseInt(t,10),o.render()}));var h=this.render;this.render=function(){h(),t.page>0&&t.page<=t.totalPages&&(t.pages=function(t,e){var n=[],i=1,r=e,o=angular.isDefined(s)&&e>s;o&&(l?(i=Math.max(t-Math.floor(s/2),1),r=i+s-1,r>e&&(r=e,i=r-s+1)):(i=(Math.ceil(t/s)-1)*s+1,r=Math.min(i+s-1,e)));for(var h=i;r>=h;h++){var f=a(h,d(h),h===t);n.push(f)}if(o&&s>0&&(!l||u||c)){if(i>1){if(!c||i>3){var p=a(i-1,"...",!1);n.unshift(p)}if(c){if(3===i){var g=a(2,"2",!1);n.unshift(g)}var m=a(1,"1",!1);n.unshift(m)}}if(e>r){if(!c||e-2>r){var v=a(r+1,"...",!1);n.push(v)}if(c){if(r===e-2){var y=a(e-1,e-1,!1);n.push(y)}var b=a(e,e,!1);n.push(b)}}}return n}(t.page,t.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(t,e){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(t,e){return e.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(t,n,i,r){var a=r[0],o=r[1];o&&a.init(o,e)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var t={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},e={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},n={};this.options=function(t){angular.extend(n,t)},this.setTriggers=function(t){angular.extend(e,t)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(i,r,a,o,s,l,u,c,d){function h(t){if(27===t.which){var e=f.top();e&&(e.value.close(),f.removeTop(),e=null)}}var f=d.createNew();return o.on("keypress",h),u.$on("$destroy",function(){o.off("keypress",h)}),function(i,u,d,h){function p(t){var n=(t||h.trigger||d).split(" ");return{show:n,hide:n.map(function(t){return e[t]||t})}}h=angular.extend({},t,n,h);var g,m=(g=i,g.replace(/[A-Z]/g,function(t,e){return(e?"-":"")+t.toLowerCase()})),v=l.startSymbol(),y=l.endSymbol(),b="<div "+m+'-popup uib-title="'+v+"title"+y+'" '+(h.useContentExp?'content-exp="contentExp()" ':'content="'+v+"content"+y+'" ')+'placement="'+v+"placement"+y+'" popup-class="'+v+"popupClass"+y+'" animation="animation" is-open="isOpen" origin-scope="origScope" class="uib-position-measure"></div>';return{compile:function(t,e){var n=r(b);return function(t,e,r,l){function d(){L.isOpen?m():g()}function g(){I&&!t.$eval(r[u+"Enable"])||(x(),function(){L.title=r[u+"Title"],L.content=z?z(t):r[i],L.popupClass=r[u+"Class"],L.placement=angular.isDefined(r[u+"Placement"])?r[u+"Placement"]:h.placement;var e=s.parsePlacement(L.placement);E=e[1]?e[0]+"-"+e[1]:e[0];var n=parseInt(r[u+"PopupDelay"],10),a=parseInt(r[u+"PopupCloseDelay"],10);L.popupDelay=isNaN(n)?h.popupDelay:n,L.popupCloseDelay=isNaN(a)?h.popupCloseDelay:a}(),L.popupDelay?T||(T=a(v,L.popupDelay,!1)):v())}function m(){y(),L.popupCloseDelay?P||(P=a(b,L.popupCloseDelay,!1)):b()}function v(){return y(),x(),L.content?(_||(C=L.$new(),_=n(C,function(t){D?o.find("body").append(t):e.after(t)}),B.length=0,z?(B.push(t.$watch(z,function(t){L.content=t,!t&&L.isOpen&&b()})),B.push(C.$watch(function(){F||(F=!0,C.$$postDigest(function(){F=!1,L&&L.isOpen&&j()}))}))):B.push(r.$observe(i,function(t){L.content=t,!t&&L.isOpen?b():j()})),B.push(r.$observe(u+"Title",function(t){L.title=t,L.isOpen&&j()})),B.push(r.$observe(u+"Placement",function(t){L.placement=t||h.placement,L.isOpen&&j()}))),void L.$evalAsync(function(){L.isOpen=!0,M(!0),j()})):angular.noop}function y(){T&&(a.cancel(T),T=null),A&&(a.cancel(A),A=null)}function b(){L&&L.$evalAsync(function(){L&&(L.isOpen=!1,M(!1),L.animation?S||(S=a(w,150,!1)):w())})}function x(){P&&(a.cancel(P),P=null),S&&(a.cancel(S),S=null)}function w(){y(),x(),B.length&&(angular.forEach(B,function(t){t()}),B.length=0),_&&(_.remove(),_=null),C&&(C.$destroy(),C=null)}function M(e){$&&angular.isFunction($.assign)&&$.assign(t,e)}function k(t){L&&L.isOpen&&_&&(e[0].contains(t.target)||_[0].contains(t.target)||m())}var _,C,S,T,P,A,E,D=!!angular.isDefined(h.appendToBody)&&h.appendToBody,O=p(void 0),I=angular.isDefined(r[u+"Enable"]),L=t.$new(!0),F=!1,$=!!angular.isDefined(r[u+"IsOpen"])&&c(r[u+"IsOpen"]),z=!!h.useContentExp&&c(r[i]),B=[],j=function(){_&&_.html()&&(A||(A=a(function(){var t=s.positionElements(e,_,L.placement,D);_.css({top:t.top+"px",left:t.left+"px"}),_.hasClass(t.placement.split("-")[0])||(_.removeClass(E.split("-")[0]),_.addClass(t.placement.split("-")[0])),_.hasClass(h.placementClassPrefix+t.placement)||(_.removeClass(h.placementClassPrefix+E),_.addClass(h.placementClassPrefix+t.placement)),_.hasClass("uib-position-measure")?(s.positionArrow(_,t.placement),_.removeClass("uib-position-measure")):E!==t.placement&&s.positionArrow(_,t.placement),E=t.placement,A=null},0,!1)))};L.origScope=t,L.isOpen=!1,f.add(L,{close:b}),L.contentExp=function(){return L.content},r.$observe("disabled",function(t){t&&y(),t&&L.isOpen&&b()}),$&&t.$watch($,function(t){L&&!t===L.isOpen&&d()});var R=function(){O.show.forEach(function(t){"outsideClick"===t?e.off("click",d):(e.off(t,g),e.off(t,d))}),O.hide.forEach(function(t){"outsideClick"===t?o.off("click",k):e.off(t,m)})};!function(){var t=r[u+"Trigger"];R(),"none"!==(O=p(t)).show&&O.show.forEach(function(t,n){"outsideClick"===t?(e.on("click",d),o.on("click",k)):t===O.hide[n]?e.on(t,d):t&&(e.on(t,g),e.on(O.hide[n],m)),e.on("keypress",function(t){27===t.which&&m()})})}();var N=t.$eval(r[u+"Animation"]);L.animation=angular.isDefined(N)?!!N:h.animation;var U,X=u+"AppendToBody";U=X in r&&void 0===r[X]||t.$eval(r[X]),D=angular.isDefined(U)?U:D,t.$on("$destroy",function(){R(),w(),f.remove(L),L=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(t,e,n,i){return{link:function(r,a,o){var s,l,u,c=r.$eval(o.tooltipTemplateTranscludeScope),d=0,h=function(){l&&(l.remove(),l=null),s&&(s.$destroy(),s=null),u&&(t.leave(u).then(function(){l=null}),l=u,u=null)};r.$watch(e.parseAsResourceUrl(o.uibTooltipTemplateTransclude),function(e){var o=++d;e?(i(e,!0).then(function(i){if(o===d){var r=c.$new(),l=n(i)(r,function(e){h(),t.enter(e,a)});u=l,(s=r).$emit("$includeContentLoaded",e)}},function(){o===d&&(h(),r.$emit("$includeContentError",e))}),r.$emit("$includeContentRequested",e)):h()}),r.$on("$destroy",h)}}}]).directive("uibTooltipClasses",["$uibPosition",function(t){return{restrict:"A",link:function(e,n,i){if(e.placement){var r=t.parsePlacement(e.placement);n.addClass(r[0])}e.popupClass&&n.addClass(e.popupClass),e.animation()&&n.addClass(i.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(t){return t("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(t){return t("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(t){return t("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{uibTitle:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(t){return t("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",uibTitle:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(t){return t("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{uibTitle:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(t){return t("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(t,e,n){function i(){return angular.isDefined(t.maxParam)?t.maxParam:n.max}var r=this,a=angular.isDefined(e.animate)?t.$parent.$eval(e.animate):n.animate;this.bars=[],t.max=i(),this.addBar=function(t,e,n){a||e.css({transition:"none"}),this.bars.push(t),t.max=i(),t.title=n&&angular.isDefined(n.title)?n.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=r.bars.reduce(function(t,e){return e.percent=+(100*e.value/e.max).toFixed(2),t+e.percent},0);e>100&&(t.percent-=e-100)},t.$on("$destroy",function(){e=null,r.removeBar(t)})},this.removeBar=function(t){this.bars.splice(this.bars.indexOf(t),1),this.bars.forEach(function(t){t.recalculatePercentage()})},t.$watch("maxParam",function(t){r.bars.forEach(function(t){t.max=i(),t.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(t,e,n,i){i.addBar(t,e,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(t,e,n,i){i.addBar(t,angular.element(e.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(t,e,n){var i={$setViewValue:angular.noop},r=this;this.init=function(r){(i=r).$render=this.render,i.$formatters.push(function(t){return angular.isNumber(t)&&t<<0!==t&&(t=Math.round(t)),t}),this.stateOn=angular.isDefined(e.stateOn)?t.$parent.$eval(e.stateOn):n.stateOn,this.stateOff=angular.isDefined(e.stateOff)?t.$parent.$eval(e.stateOff):n.stateOff,this.enableReset=angular.isDefined(e.enableReset)?t.$parent.$eval(e.enableReset):n.enableReset;var a=angular.isDefined(e.titles)?t.$parent.$eval(e.titles):n.titles;this.titles=angular.isArray(a)&&a.length>0?a:n.titles;var o=angular.isDefined(e.ratingStates)?t.$parent.$eval(e.ratingStates):new Array(angular.isDefined(e.max)?t.$parent.$eval(e.max):n.max);t.range=this.buildTemplateObjects(o)},this.buildTemplateObjects=function(t){for(var e=0,n=t.length;n>e;e++)t[e]=angular.extend({index:e},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(e)},t[e]);return t},this.getTitle=function(t){return t>=this.titles.length?t+1:this.titles[t]},t.rate=function(e){if(!t.readonly&&e>=0&&e<=t.range.length){var n=r.enableReset&&i.$viewValue===e?0:e;i.$setViewValue(n),i.$render()}},t.enter=function(e){t.readonly||(t.value=e),t.onHover({value:e})},t.reset=function(){t.value=i.$viewValue,t.onLeave()},t.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),t.rate(t.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){t.value=i.$viewValue,t.title=r.getTitle(t.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(t,e,n,i){var r=i[0],a=i[1];r.init(a)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(t){function e(t){for(var e=0;e<i.tabs.length;e++)if(i.tabs[e].index===t)return e}var n,i=this;i.tabs=[],i.select=function(t,a){if(!r){var o=e(n),s=i.tabs[o];if(s){if(s.tab.onDeselect({$event:a}),a&&a.isDefaultPrevented())return;s.tab.active=!1}var l=i.tabs[t];l?(l.tab.onSelect({$event:a}),l.tab.active=!0,i.active=l.index,n=l.index):!l&&angular.isNumber(n)&&(i.active=null,n=null)}},i.addTab=function(t){if(i.tabs.push({tab:t,index:t.index}),i.tabs.sort(function(t,e){return t.index>e.index?1:t.index<e.index?-1:0}),t.index===i.active||!angular.isNumber(i.active)&&1===i.tabs.length){var n=e(t.index);i.select(n)}},i.removeTab=function(t){for(var e,n=0;n<i.tabs.length;n++)if(i.tabs[n].tab===t){e=n;break}if(i.tabs[e].index===i.active){var r=e===i.tabs.length-1?e-1:e+1%i.tabs.length;i.select(r)}i.tabs.splice(e,1)},t.$watch("tabset.active",function(t){angular.isNumber(t)&&t!==n&&i.select(e(t))});var r;t.$on("$destroy",function(){r=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(t,e){return e.templateUrl||"uib/template/tabs/tabset.html"},link:function(t,e,n){t.vertical=!!angular.isDefined(n.vertical)&&t.$parent.$eval(n.vertical),t.justified=!!angular.isDefined(n.justified)&&t.$parent.$eval(n.justified),angular.isUndefined(n.active)&&(t.active=0)}}}).directive("uibTab",["$parse",function(t){return{require:"^uibTabset",replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(e,n,i,r,a){e.disabled=!1,i.disable&&e.$parent.$watch(t(i.disable),function(t){e.disabled=!!t}),angular.isUndefined(i.index)&&(r.tabs&&r.tabs.length?e.index=Math.max.apply(null,r.tabs.map(function(t){return t.index}))+1:e.index=0),angular.isUndefined(i.classes)&&(e.classes=""),e.select=function(t){if(!e.disabled){for(var n,i=0;i<r.tabs.length;i++)if(r.tabs[i].tab===e){n=i;break}r.select(n,t)}},r.addTab(e),e.$on("$destroy",function(){r.removeTab(e)}),e.$transcludeFn=a}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(t,e){t.$watch("headingElement",function(t){t&&(e.html(""),e.append(t))})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(t,e,n){var i=t.$eval(n.uibTabContentTransclude).tab;i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){(n=t).tagName&&(n.hasAttribute("uib-tab-heading")||n.hasAttribute("data-uib-tab-heading")||n.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===n.tagName.toLowerCase()||"data-uib-tab-heading"===n.tagName.toLowerCase()||"x-uib-tab-heading"===n.tagName.toLowerCase()||"uib:tab-heading"===n.tagName.toLowerCase())?i.headingElement=t:e.append(t);var n})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(t,e,n,i,r,a,o){function s(){var e=+t.hours;return(t.showMeridian?e>0&&13>e:e>=0&&24>e)&&""!==t.hours?(t.showMeridian&&(12===e&&(e=0),t.meridian===x[1]&&(e+=12)),e):void 0}function l(){var e=+t.minutes;return e>=0&&60>e&&""!==t.minutes?e:void 0}function u(t,e){return null===t?"":angular.isDefined(t)&&t.toString().length<2&&!e?"0"+t:t.toString()}function c(t){d(),b.$setViewValue(new Date(v)),h(t)}function d(){b.$setValidity("time",!0),t.invalidHours=!1,t.invalidMinutes=!1,t.invalidSeconds=!1}function h(e){if(b.$modelValue){var n=v.getHours(),i=v.getMinutes(),r=v.getSeconds();t.showMeridian&&(n=0===n||12===n?12:n%12),t.hours="h"===e?n:u(n,!w),"m"!==e&&(t.minutes=u(i)),t.meridian=v.getHours()<12?x[0]:x[1],"s"!==e&&(t.seconds=u(r)),t.meridian=v.getHours()<12?x[0]:x[1]}else t.hours=null,t.minutes=null,t.seconds=null,t.meridian=x[0]}function f(t){v=g(v,t),c()}function p(t,e){return g(t,60*e)}function g(t,e){var n=new Date(t.getTime()+1e3*e),i=new Date(t);return i.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),i}function m(){return(null===t.hours||""===t.hours)&&(null===t.minutes||""===t.minutes)&&(!t.showSeconds||t.showSeconds&&(null===t.seconds||""===t.seconds))}var v=new Date,y=[],b={$setViewValue:angular.noop},x=angular.isDefined(n.meridians)?t.$parent.$eval(n.meridians):o.meridians||a.DATETIME_FORMATS.AMPMS,w=!angular.isDefined(n.padHours)||t.$parent.$eval(n.padHours);t.tabindex=angular.isDefined(n.tabindex)?n.tabindex:0,e.removeAttr("tabindex"),this.init=function(e,i){(b=e).$render=this.render,b.$formatters.unshift(function(t){return t?new Date(t):null});var r=i.eq(0),a=i.eq(1),s=i.eq(2);(angular.isDefined(n.mousewheel)?t.$parent.$eval(n.mousewheel):o.mousewheel)&&this.setupMousewheelEvents(r,a,s);(angular.isDefined(n.arrowkeys)?t.$parent.$eval(n.arrowkeys):o.arrowkeys)&&this.setupArrowkeyEvents(r,a,s),t.readonlyInput=angular.isDefined(n.readonlyInput)?t.$parent.$eval(n.readonlyInput):o.readonlyInput,this.setupInputEvents(r,a,s)};var M=o.hourStep;n.hourStep&&y.push(t.$parent.$watch(i(n.hourStep),function(t){M=+t}));var k=o.minuteStep;n.minuteStep&&y.push(t.$parent.$watch(i(n.minuteStep),function(t){k=+t}));var _;y.push(t.$parent.$watch(i(n.min),function(t){var e=new Date(t);_=isNaN(e)?void 0:e}));var C;y.push(t.$parent.$watch(i(n.max),function(t){var e=new Date(t);C=isNaN(e)?void 0:e}));var S=!1;n.ngDisabled&&y.push(t.$parent.$watch(i(n.ngDisabled),function(t){S=t})),t.noIncrementHours=function(){var t=p(v,60*M);return S||t>C||v>t&&_>t},t.noDecrementHours=function(){var t=p(v,60*-M);return S||_>t||t>v&&t>C},t.noIncrementMinutes=function(){var t=p(v,k);return S||t>C||v>t&&_>t},t.noDecrementMinutes=function(){var t=p(v,-k);return S||_>t||t>v&&t>C},t.noIncrementSeconds=function(){var t=g(v,T);return S||t>C||v>t&&_>t},t.noDecrementSeconds=function(){var t=g(v,-T);return S||_>t||t>v&&t>C},t.noToggleMeridian=function(){return v.getHours()<12?S||p(v,720)>C:S||p(v,-720)<_};var T=o.secondStep;n.secondStep&&y.push(t.$parent.$watch(i(n.secondStep),function(t){T=+t})),t.showSeconds=o.showSeconds,n.showSeconds&&y.push(t.$parent.$watch(i(n.showSeconds),function(e){t.showSeconds=!!e})),t.showMeridian=o.showMeridian,n.showMeridian&&y.push(t.$parent.$watch(i(n.showMeridian),function(e){if(t.showMeridian=!!e,b.$error.time){var n=s(),i=l();angular.isDefined(n)&&angular.isDefined(i)&&(v.setHours(n),c())}else h()})),this.setupMousewheelEvents=function(e,n,i){var r=function(t){t.originalEvent&&(t=t.originalEvent);var e=t.wheelDelta?t.wheelDelta:-t.deltaY;return t.detail||e>0};e.bind("mousewheel wheel",function(e){S||t.$apply(r(e)?t.incrementHours():t.decrementHours()),e.preventDefault()}),n.bind("mousewheel wheel",function(e){S||t.$apply(r(e)?t.incrementMinutes():t.decrementMinutes()),e.preventDefault()}),i.bind("mousewheel wheel",function(e){S||t.$apply(r(e)?t.incrementSeconds():t.decrementSeconds()),e.preventDefault()})},this.setupArrowkeyEvents=function(e,n,i){e.bind("keydown",function(e){S||(38===e.which?(e.preventDefault(),t.incrementHours(),t.$apply()):40===e.which&&(e.preventDefault(),t.decrementHours(),t.$apply()))}),n.bind("keydown",function(e){S||(38===e.which?(e.preventDefault(),t.incrementMinutes(),t.$apply()):40===e.which&&(e.preventDefault(),t.decrementMinutes(),t.$apply()))}),i.bind("keydown",function(e){S||(38===e.which?(e.preventDefault(),t.incrementSeconds(),t.$apply()):40===e.which&&(e.preventDefault(),t.decrementSeconds(),t.$apply()))})},this.setupInputEvents=function(e,n,i){if(t.readonlyInput)return t.updateHours=angular.noop,t.updateMinutes=angular.noop,void(t.updateSeconds=angular.noop);var r=function(e,n,i){b.$setViewValue(null),b.$setValidity("time",!1),angular.isDefined(e)&&(t.invalidHours=e),angular.isDefined(n)&&(t.invalidMinutes=n),angular.isDefined(i)&&(t.invalidSeconds=i)};t.updateHours=function(){var t=s(),e=l();b.$setDirty(),angular.isDefined(t)&&angular.isDefined(e)?(v.setHours(t),v.setMinutes(e),_>v||v>C?r(!0):c("h")):r(!0)},e.bind("blur",function(e){b.$setTouched(),m()?d():null===t.hours||""===t.hours?r(!0):!t.invalidHours&&t.hours<10&&t.$apply(function(){t.hours=u(t.hours,!w)})}),t.updateMinutes=function(){var t=l(),e=s();b.$setDirty(),angular.isDefined(t)&&angular.isDefined(e)?(v.setHours(e),v.setMinutes(t),_>v||v>C?r(void 0,!0):c("m")):r(void 0,!0)},n.bind("blur",function(e){b.$setTouched(),m()?d():null===t.minutes?r(void 0,!0):!t.invalidMinutes&&t.minutes<10&&t.$apply(function(){t.minutes=u(t.minutes)})}),t.updateSeconds=function(){var e=function(){var e=+t.seconds;return e>=0&&60>e?e:void 0}();b.$setDirty(),angular.isDefined(e)?(v.setSeconds(e),c("s")):r(void 0,void 0,!0)},i.bind("blur",function(e){m()?d():!t.invalidSeconds&&t.seconds<10&&t.$apply(function(){t.seconds=u(t.seconds)})})},this.render=function(){var e=b.$viewValue;isNaN(e)?(b.$setValidity("time",!1),r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(v=e),_>v||v>C?(b.$setValidity("time",!1),t.invalidHours=!0,t.invalidMinutes=!0):d(),h())},t.showSpinners=angular.isDefined(n.showSpinners)?t.$parent.$eval(n.showSpinners):o.showSpinners,t.incrementHours=function(){t.noIncrementHours()||f(60*M*60)},t.decrementHours=function(){t.noDecrementHours()||f(60*-M*60)},t.incrementMinutes=function(){t.noIncrementMinutes()||f(60*k)},t.decrementMinutes=function(){t.noDecrementMinutes()||f(60*-k)},t.incrementSeconds=function(){t.noIncrementSeconds()||f(T)},t.decrementSeconds=function(){t.noDecrementSeconds()||f(-T)},t.toggleMeridian=function(){var e=l(),n=s();t.noToggleMeridian()||(angular.isDefined(e)&&angular.isDefined(n)?f(720*(v.getHours()<12?60:-60)):t.meridian=t.meridian===x[0]?x[1]:x[0])},t.blur=function(){b.$setTouched()},t.$on("$destroy",function(){for(;y.length;)y.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(t){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(e,n){return n.templateUrl||t.templateUrl},link:function(t,e,n,i){var r=i[0],a=i[1];a&&r.init(a,e.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(t){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(e);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:t(i[4]),viewMapper:t(i[2]||i[1]),modelMapper:t(i[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(t,e,n,i,r,a,o,s,l,u,c,d,h){function f(){z.moveInProgress||(z.moveInProgress=!0,z.$digest()),Y()}function p(){z.position=P?d.offset(e):d.position(e),z.position.top+=e.prop("offsetHeight")}var g,m,v=[9,13,27,38,40],y=t.$eval(n.typeaheadMinLength);y||0===y||(y=1),t.$watch(n.typeaheadMinLength,function(t){y=t||0===t?t:1});var b=t.$eval(n.typeaheadWaitMs)||0,x=!1!==t.$eval(n.typeaheadEditable);t.$watch(n.typeaheadEditable,function(t){x=!1!==t});var w,M,k=r(n.typeaheadLoading).assign||angular.noop,_=r(n.typeaheadOnSelect),C=!!angular.isDefined(n.typeaheadSelectOnBlur)&&t.$eval(n.typeaheadSelectOnBlur),S=r(n.typeaheadNoResults).assign||angular.noop,T=n.typeaheadInputFormatter?r(n.typeaheadInputFormatter):void 0,P=!!n.typeaheadAppendToBody&&t.$eval(n.typeaheadAppendToBody),A=n.typeaheadAppendTo?t.$eval(n.typeaheadAppendTo):null,E=!1!==t.$eval(n.typeaheadFocusFirst),D=!!n.typeaheadSelectOnExact&&t.$eval(n.typeaheadSelectOnExact),O=r(n.typeaheadIsOpen).assign||angular.noop,I=t.$eval(n.typeaheadShowHint)||!1,L=r(n.ngModel),F=r(n.ngModel+"($$$p)"),$=h.parse(n.uibTypeahead),z=t.$new(),B=t.$on("$destroy",function(){z.$destroy()});z.$on("$destroy",B);var j="typeahead-"+z.$id+"-"+Math.floor(1e4*Math.random());e.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":j});var R,N;I&&(R=angular.element("<div></div>"),R.css("position","relative"),e.after(R),N=e.clone(),N.attr("placeholder",""),N.attr("tabindex","-1"),N.val(""),N.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),e.css({position:"relative","vertical-align":"top","background-color":"transparent"}),R.append(N),N.after(e));var U=angular.element("<div uib-typeahead-popup></div>");U.attr({id:j,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(n.typeaheadTemplateUrl)&&U.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&U.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var X=function(){z.matches=[],z.activeIdx=-1,e.attr("aria-expanded",!1),I&&N.val("")},W=function(t){return j+"-option-"+t};z.$watch("activeIdx",function(t){0>t?e.removeAttr("aria-activedescendant"):e.attr("aria-activedescendant",W(t))});var H=function(n,i){var r={$viewValue:n};k(t,!0),S(t,!1),a.when($.source(t,r)).then(function(a){var o=n===g.$viewValue;if(o&&w)if(a&&a.length>0){z.activeIdx=E?0:-1,S(t,!1),z.matches.length=0;for(var s=0;s<a.length;s++)r[$.itemName]=a[s],z.matches.push({id:W(s),label:$.viewMapper(z,r),model:a[s]});if(z.query=n,p(),e.attr("aria-expanded",!0),D&&1===z.matches.length&&(u=n,d=0,!!(z.matches.length>d&&u)&&u.toUpperCase()===z.matches[d].label.toUpperCase())&&(angular.isNumber(z.debounceUpdate)||angular.isObject(z.debounceUpdate)?c(function(){z.select(0,i)},angular.isNumber(z.debounceUpdate)?z.debounceUpdate:z.debounceUpdate.default):z.select(0,i)),I){var l=z.matches[0].label;angular.isString(n)&&n.length>0&&l.slice(0,n.length).toUpperCase()===n.toUpperCase()?N.val(n+l.slice(n.length)):N.val("")}}else X(),S(t,!0);var u,d;o&&k(t,!1)},function(){X(),k(t,!1),S(t,!0)})};P&&(angular.element(l).on("resize",f),s.find("body").on("scroll",f));var Y=c(function(){z.matches.length&&p(),z.moveInProgress=!1},200);z.moveInProgress=!1,z.query=void 0;var V,G=function(){V&&o.cancel(V)};X(),z.assignIsOpen=function(e){O(t,e)},z.select=function(i,r){var a,s,l={};M=!0,l[$.itemName]=s=z.matches[i].model,a=$.modelMapper(t,l),u=t,c=a,angular.isFunction(L(t))&&m&&m.$options&&m.$options.getterSetter?F(u,{$$$p:c}):L.assign(u,c),g.$setValidity("editable",!0),g.$setValidity("parse",!0),_(t,{$item:s,$model:a,$label:$.viewMapper(t,l),$event:r}),X(),!1!==z.$eval(n.typeaheadFocusOnSelect)&&o(function(){e[0].focus()},0,!1);var u,c},e.on("keydown",function(e){if(0!==z.matches.length&&-1!==v.indexOf(e.which)){if(-1===z.activeIdx&&(9===e.which||13===e.which)||9===e.which&&e.shiftKey)return X(),void z.$digest();e.preventDefault();var n;switch(e.which){case 9:case 13:z.$apply(function(){angular.isNumber(z.debounceUpdate)||angular.isObject(z.debounceUpdate)?c(function(){z.select(z.activeIdx,e)},angular.isNumber(z.debounceUpdate)?z.debounceUpdate:z.debounceUpdate.default):z.select(z.activeIdx,e)});break;case 27:e.stopPropagation(),X(),t.$digest();break;case 38:z.activeIdx=(z.activeIdx>0?z.activeIdx:z.matches.length)-1,z.$digest(),(n=U.find("li")[z.activeIdx]).parentNode.scrollTop=n.offsetTop;break;case 40:z.activeIdx=(z.activeIdx+1)%z.matches.length,z.$digest(),(n=U.find("li")[z.activeIdx]).parentNode.scrollTop=n.offsetTop}}}),e.bind("focus",function(t){w=!0,0!==y||g.$viewValue||o(function(){H(g.$viewValue,t)},0)}),e.bind("blur",function(t){C&&z.matches.length&&-1!==z.activeIdx&&!M&&(M=!0,z.$apply(function(){angular.isObject(z.debounceUpdate)&&angular.isNumber(z.debounceUpdate.blur)?c(function(){z.select(z.activeIdx,t)},z.debounceUpdate.blur):z.select(z.activeIdx,t)})),!x&&g.$error.editable&&(g.$setViewValue(),g.$setValidity("editable",!0),g.$setValidity("parse",!0),e.val("")),w=!1,M=!1});var q=function(n){e[0]!==n.target&&3!==n.which&&0!==z.matches.length&&(X(),u.$$phase||t.$digest())};s.on("click",q),t.$on("$destroy",function(){s.off("click",q),(P||A)&&Z.remove(),P&&(angular.element(l).off("resize",f),s.find("body").off("scroll",f)),U.remove(),I&&R.remove()});var Z=i(U)(z);P?s.find("body").append(Z):A?angular.element(A).eq(0).append(Z):e.after(Z),this.init=function(e,n){g=e,m=n,z.debounceUpdate=g.$options&&r(g.$options.debounce)(t),g.$parsers.unshift(function(e){return w=!0,0===y||e&&e.length>=y?b>0?(G(),n=e,V=o(function(){H(n)},b)):H(e):(k(t,!1),G(),X()),x?e:e?void g.$setValidity("editable",!1):(g.$setValidity("editable",!0),null);var n}),g.$formatters.push(function(e){var n,i={};return x||g.$setValidity("editable",!0),T?(i.$model=e,T(t,i)):(i[$.itemName]=e,n=$.viewMapper(t,i),i[$.itemName]=void 0,n!==$.viewMapper(t,i)?n:e)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(t,e,n,i){i[2].init(i[0],i[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(t){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(t,e){return e.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(e,n,i){e.templateUrl=i.templateUrl,e.isOpen=function(){var t=e.matches.length>0;return e.assignIsOpen({isOpen:t}),t},e.isActive=function(t){return e.active===t},e.selectActive=function(t){e.active=t},e.selectMatch=function(n,i){var r=e.debounce();angular.isNumber(r)||angular.isObject(r)?t(function(){e.select({activeIdx:n,evt:i})},angular.isNumber(r)?r:r.default):e.select({activeIdx:n,evt:i})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(t,e,n){return{scope:{index:"=",match:"=",query:"="},link:function(i,r,a){var o=n(a.templateUrl)(i.$parent)||"uib/template/typeahead/typeahead-match.html";t(o).then(function(t){var n=angular.element(t.trim());r.replaceWith(n),e(n)(i)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(t,e,n){var i;return i=e.has("$sanitize"),function(e,r){return!i&&(o=e,/<.*>/g.test(o))&&n.warn("Unsafe use of typeahead please use ngSanitize"),e=r?(""+e).replace(new RegExp((a=r,a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")),"gi"),"<strong>$&</strong>"):e,i||(e=t.trustAsHtml(e)),e;var a,o}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(t){t.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n    <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(t){t.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(t){t.put("uib/template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(t){t.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(t){t.put("uib/template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepickerPopup/popup.html",'<div>\n  <ul class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n    <li ng-transclude></li>\n    <li ng-if="showButtonBar" class="uib-button-bar">\n      <span class="btn-group pull-left">\n        <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n        <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n      </span>\n      <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(t){t.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(t){t.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog {{size ? \'modal-\' + size : \'\'}}"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(t){t.put("uib/template/pager/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(t){t.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(t){t.put("uib/template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(t){t.put("uib/template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(t){t.put("uib/template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(t){t.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(t){t.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(t){t.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(t){t.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(t){t.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,a=Function.prototype,o=i.push,s=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,d=i.forEach,h=i.map,f=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,x=Array.isArray,w=Object.keys,M=a.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var _=k.each=k.forEach=function(t,e,i){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,a=t.length;a>r;r++)if(e.call(i,t[r],r,t)===n)return}else{var o=k.keys(t);for(r=0,a=o.length;a>r;r++)if(e.call(i,t[o[r]],o[r],t)===n)return}return t};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):(_(t,function(t,r,a){i.push(e.call(n,t,r,a))}),i)};var C="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=k.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(_(t,function(t,a,o){r?n=e.call(i,n,t,a,o):(n=t,r=!0)}),!r)throw new TypeError(C);return n},k.reduceRight=k.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=k.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var o=k.keys(t);a=o.length}if(_(t,function(s,l,u){l=o?o[--a]:--a,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(C);return n},k.find=k.detect=function(t,e,n){var i;return S(t,function(t,r,a){return e.call(n,t,r,a)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(_(t,function(t,r,a){e.call(n,t,r,a)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(_(t,function(t,a,o){return(r=r&&e.call(i,t,a,o))?void 0:n}),!!r)};var S=k.some=k.any=function(t,e,i){e||(e=k.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(_(t,function(t,a,o){return r||(r=e.call(i,t,a,o))?n:void 0}),!!r)};k.contains=k.include=function(t,e){return null!=t&&(y&&t.indexOf===y?-1!=t.indexOf(e):S(t,function(t){return t===e}))},k.invoke=function(t,e){var n=s.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return _(t,function(t,a,o){var s=e?e.call(n,t,a,o):t;s>r&&(i=t,r=s)}),i},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,r=1/0;return _(t,function(t,a,o){var s=e?e.call(n,t,a,o):t;r>s&&(i=t,r=s)}),i},k.shuffle=function(t){var e,n=0,i=[];return _(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=T(e),k.pluck(k.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,n,i){var r={};return n=T(n),_(e,function(a,o){var s=n.call(i,a,o,e);t(r,s,a)}),r}};k.groupBy=P(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=P(function(t,e,n){t[e]=n}),k.countBy=P(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){for(var r=(n=T(n)).call(i,e),a=0,o=t.length;o>a;){var s=a+o>>>1;n.call(i,t[s])<r?a=s+1:o=s}return a},k.toArray=function(t){return t?k.isArray(t)?s.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:s.call(t,0,e)},k.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var A=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(_(t,function(t){k.isArray(t)||k.isArguments(t)?e?o.apply(n,t):A(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return A(t,e,[])},k.without=function(t){return k.difference(t,s.call(arguments,1))},k.partition=function(t,e){var n=[],i=[];return _(t,function(t){(e(t)?n:i).push(t)}),[n,i]},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var r=n?k.map(t,n,i):t,a=[],o=[];return _(r,function(n,i){(e?i&&o[o.length-1]===n:k.contains(o,n))||(o.push(n),a.push(t[i]))}),a},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=s.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(i,s.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,a=new Array(i);i>r;)a[r++]=t,t+=n;return a};var E=function(){};k.bind=function(t,e){var n,i;if(M&&t.bind===M)return M.apply(t,s.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=s.call(arguments,2),function(){if(!(this instanceof i))return t.apply(e,n.concat(s.call(arguments)));E.prototype=t.prototype;var r=new E;E.prototype=null;var a=t.apply(r,n.concat(s.call(arguments)));return Object(a)===a?a:r}},k.partial=function(t){var e=s.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,a=i.length;a>r;r++)i[r]===k&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},k.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return _(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(s.call(arguments,1)))},k.throttle=function(t,e,n){var i,r,a,o=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:k.now(),o=null,a=t.apply(i,r),i=r=null};return function(){var u=k.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return i=this,r=arguments,0>=c?(clearTimeout(o),o=null,s=u,a=t.apply(i,r),i=r=null):o||!1===n.trailing||(o=setTimeout(l,c)),a}},k.debounce=function(t,e,n){var i,r,a,o,s,l=function(){var u=k.now()-o;e>u?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(a,r),a=r=null))};return function(){a=this,r=arguments,o=k.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(a,r),a=r=null),s}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(w)return w(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return _(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,s.call(arguments,1));return _(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,s.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return _(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var D=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return i[a]==e;var o=t.constructor,s=e.constructor;if(o!==s&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==r){if(c=(l=t.length)==e.length)for(;l--&&(c=D(t[l],e[l],n,i)););}else{for(var d in t)if(k.has(t,d)&&(l++,!(c=k.has(e,d)&&D(t[d],e[d],n,i))))break;if(c){for(d in e)if(k.has(e,d)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};k.isEqual=function(t,e){return D(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=x||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},_(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=k.invert(O.escape);var I={escape:new RegExp("["+k.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(O.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return O[t][e]})}}),k.result=function(t,e){if(null!=t){var n=t[e];return k.isFunction(n)?n.call(t):n}},k.mixin=function(t){_(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),B.call(this,n.apply(k,t))}})};var L=0;k.uniqueId=function(t){var e=++L+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||F).source,(n.interpolate||F).source,(n.evaluate||F).source].join("|")+"|$","g"),a=0,o="__p+='";t.replace(r,function(e,n,i,r,s){return o+=t.slice(a,s).replace(z,function(t){return"\\"+$[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),a=s+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(t){throw t.source=o,t}if(e)return i(e,k);var s=function(t){return i.call(this,t,k)};return s.source="function("+(n.variable||"obj")+"){\n"+o+"}",s},k.chain=function(t){return k(t).chain()};var B=function(t){return this._chain?k(t).chain():t};k.mixin(k),_(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],B.call(this,n)}}),_(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return B.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.hasUserMedia=function(){return!!navigator.getMedia},angular.module("webcam",[]).directive("webcam",function(){return{template:'<div class="webcam" ng-transclude></div>',restrict:"E",replace:!0,transclude:!0,scope:{onError:"&",onStream:"&",onStreaming:"&",placeholder:"=",config:"=channel"},link:function(t,e){var n=null,i=null,r=null;t.config=t.config||{};var a=function(t){t&&angular.element(t).remove()},o=function(){i&&"function"==typeof i.stop&&i.stop(),n&&delete n.src},s=function(e){if(i=e,navigator.mozGetUserMedia)n.mozSrcObject=e;else{var r=window.URL||window.webkitURL;n.src=r.createObjectURL(e)}n.play(),t.config.video=n,t.onStream&&t.onStream({stream:e})},l=function(e){a(r),console&&console.log&&console.log("The following error occured: ",e),t.onError&&t.onError({err:e})},u=function(){(n=document.createElement("video")).setAttribute("class","webcam-live"),n.setAttribute("autoplay",""),e.append(n),t.placeholder&&(r=document.createElement("img"),r.setAttribute("class","webcam-loader"),r.src=t.placeholder,e.append(r));var i=!1,o=e.width=t.config.videoWidth||320,u=e.height=0;if(window.hasUserMedia()){navigator.getMedia({video:!0,audio:!1},s,l),n.addEventListener("canplay",function(){if(!i){var e=o/n.videoWidth;u=n.videoHeight*e||t.config.videoHeight,n.setAttribute("width",o),n.setAttribute("height",u),i=!0,t.config.video=n,a(r),t.onStreaming&&t.onStreaming()}},!1)}else l({code:-1,msg:"Browser does not support getUserMedia."})};t.$on("$destroy",o),t.$on("START_WEBCAM",u),t.$on("STOP_WEBCAM",function(){o(),n.remove()}),u()}}});