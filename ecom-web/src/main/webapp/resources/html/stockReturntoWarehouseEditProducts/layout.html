<div class="container">
	<div class="row"> 
		<div class="content-wrapper">
			<section class="content-header">
				<h1>Edit Stock Return to Warehouse</h1>
				<ol class="breadcrumb">
					<li><a href="#home"><i class="fa fa-dashboard"></i> Home</a></li>
					<li><a href="#stockControl">Stock Control</a></li>
					<li><a href="#stockReturntoWarehouseEditDetails">Stock Return to Warehouse</a></li>
					<li class="active">Edit Stock Return to Warehouse Details</li>
				</ol>
			</section>
			<section class="content-header"></section>
			<div id="mydiv" ng-show="globalPageLoader" ng-cloak>
				<div class="loader"></div>
			</div>

			<section class="content" ng-show="!globalPageLoader" ng-cloak>
				<div class="row">
					<div class="col-md-1"></div>
					<div class="col-md-10">

						<div class="box">
							<!-- /.box-header -->
							<div class="box-body no-padding">
								<div class="alert alert-success alert-sm" ng-show="success"
									ng-bind="successMessage" ng-cloak></div>
								<div class="alert alert-danger alert-sm" ng-show="error"
									ng-bind="errorMessage" ng-cloak></div>
								<div class="box box-primary">
									<div class="row">
										<div class="col-md-1"></div>
										<div class="col-md-4">

											<div class="box-header with-border"></div>
											<!-- /.box-header -->
											<!-- form start -->
											<form class="form-horizontal">
												<div class="box-body">

													<div class="form-group">
														<label for="inputEmail3" class="col-sm-6 control-label">Stock
															Transfer name</label>
														<div class="col-sm-6">
															<span class="unit control-label"
																ng-bind="stockOrderBean.stockRefNo"></span>
														</div>
													</div>
													<div class="form-group">
														<label for="inputEmail3" class="col-sm-6 control-label">Source
															outlet</label>
														<div class="col-sm-6">
															<span class="unit control-label"
																ng-bind="stockOrderBean.sourceOutletName"></span>
														</div>
													</div>
													<div class="form-group">
														<label for="inputEmail3" class="col-sm-6 control-label">Destination
															outlet</label>
														<div class="col-sm-6">
															<span class="unit control-label"
																ng-bind="stockOrderBean.outletName"></span>
														</div>
													</div>


												</div>

											</form>

										</div>
										<div class="col-md-4">

											<div class="box-header with-border"></div>
											<!-- /.box-header -->
											<!-- form start -->
											<form class="form-horizontal">
												<div class="box-body">
													<div class="form-group">
														<label for="inputEmail3" class="col-sm-4 control-label">Delivery
															due</label>
														<div class="col-sm-8">
															<span class="unit control-label"
																ng-bind="stockOrderBean.diliveryDueDate"></span>
														</div>
													</div>

												</div>
												<div class="form-group">
														<label for="inputEmail3" class="col-sm-4 control-label" ng-hide="true">Bill on Retail Price
															</label>
														<div class="col-sm-8">
															<div class="ckbox" ng-hide="true">
																<span class="media-meta pull-right"> </span> <input
																	type="checkbox" id="checkbox1" ng-disabled = "true"
																	data-ng-model="stockOrderBean.retailPriceBill"> <label
																	for="checkbox1"> </label>
															</div>
														</div>
													</div>
													<div class="form-group">
												<label for="inputEmail3" class="col-sm-6 control-label"><b>Scanner Input</b></label>
															<div class="col-sm-6" ng-click="inputTypeChk()">
													<span class="media-meta pull-right"> </span> <input
														type="checkbox" id="checkbox1"
														data-ng-model="inputTypeScan"> <label
														for="checkbox1"> </label>
													</div>
												</div>	
											</form>

										</div>
										<div class="col-md-2">
											<div class="box-header with-border"></div>
											<div class="box-body">
												<img src="resources/images/order.png"
													class="img-responsive img-rounded" alt="Cinque Terre"
													style="width: 204px; height: auto;">
											</div>
										</div>
										<div class="col-md-1"></div>
									</div>
								</div>

							</div>
							<!-- /.box -->
						</div>

						<vd-section sticky="" type="secondary"
							class="cv-action-bar vd-section vd-section--secondary"
							role="region">
						<div class="vd-section-wrap">
							<div class="">

								<div class="row">
									<div class="col-md-5">Product:</div>
									<div class="col-md-1">Quantity:</div>
									<div class="col-md-2" ><span style="margin-left:5px"> Add</span></div>
									<div class= "col-md-2">Total Items: </div>
									<div ng-hide="isAdmin()" class= "col-md-2">Items Recv: </div>
								</div>
								<div class="row">
									<div class="col-md-5" ng-hide = "inputTypeScan">
										<div class="inner-addon right-addon">

											<i class="glyphicon glyphicon-search"></i> <input id="lov" type="text"
												focus="true" ng-model="airportName"
												style="width: 100%; height: 50px; color: black"
												placeholder="Start typing or scanning..."
												auto-complete="autoCompleteOptions" />
										</div>
									</div>
									<div class="col-md-5" ng-hide = "!inputTypeScan">
									<input type="text"
											data-ng-model="productSKU"
											ng-disabled = "skudisable"
											name="productSKUtxt"
											class=" form-control click-to-select unit"
											id="product_sku" ng-maxlength="50" ng-disabled = "false"
											placeholder="Start scanning only..."
											ng-change = "skuinput()"
											style="height: 50px; width: 300px;">
									</div>
									<div class="col-md-1">
										<input type="text"
											data-ng-model="stockOrderDetailBean.orderProdQty"
											name="product_search[quantity]"
											ng-pattern='/^[0-9]+(\.[0-9]{1,2})?$/' autocomplete="off"
											class=" form-control click-to-select unit"
											id="product_search_quantity" ng-maxlength="9"
											style="height: 50px;">
									</div>
									<div class="col-md-2">
										<button class="btn btn-success btn click-to-select unit "
											ng-click="checkProductStatus()"
											ng-disabled="!productVariantBean || !stockOrderDetailBean.orderProdQty">Add
											Product</button>
									</div>
									<div class="col-md-4">
										<input type="text"
											data-ng-model="stockOrderBean.itemCount"
											name="product_search[quantity]"
											ng-pattern='/^[0-9]+(\.[0-9]{1,2})?$/' autocomplete="off"
											class=" form-control click-to-select unit"
											id="product_search_quantity" ng-maxlength="50" ng-disabled = "true"
											style="height: 50px; width: 1000px;">
									<div ng-hide="isAdmin()" class="col-md-2">
										<input type="text"
											data-ng-model="stockOrderBean.itemCountRecv"
											name="product_search[quantity]"
											ng-pattern='/^[0-9]+(\.[0-9]{1,2})?$/' autocomplete="off"
											class=" form-control click-to-select unit"
											id="product_search_quantity" ng-maxlength="50" ng-disabled = "true"
											style="height: 50px; width: 1000px;">
									</div>
									<div class="col-md-2">
									<button class="btn btn-primary btn  "
													ng-click="updateStockOrderDetail()"
													ng-disabled="!checkStockOrderDetailList()"
													ng-show="!loading">Update</button>
												<button ng-show="loading" class="btn btn-primary btn">
													Processing<i
														class="fa fa-arrow-right text-muted fa-spinner fa-spin "></i>
												</button>
												</div>
												</div>
								</div>

							</div>

						</div>

						</vd-section>
						<div class="box">

							<!-- /.box-header -->
							<div class="box-body no-padding">
								<div class="box box-primary">
									<div class="row">
										<div class="col-md-12">
</br>
</br>
											<div class="box-header with-border"></div>
											<!-- /.box-header -->
											<!-- form start -->
											<div class="box-body">
												<table id="myTable" class="display" cellspacing="0"
													width="100%" ng-clock>
													<thead>
														<tr>
															<th>Order</th>
															<th>Product</th>
															<th>Stock at Source</th>
															<th ng-hide="isAdmin()">Stock at Destination</th>
															<th ng-hide="isAdmin()">Quantity</th>
															<th ng-hide="!isAdmin()">Quantity</th>
															<th ng-hide="isAdmin()">Recv QTY</th>
															<th ng-hide="isAdmin()">Supply Price</th>
															<th>Retail Price</th>
															<th>Total</th>
															<th ng-hide="isAdmin()">Total Recv</th>

															<th></th>
														</tr>
													</thead>
													<tbody>
														<tr
															ng-repeat="stockOrderDetailBean in stockOrderDetailBeansList">
															
															<td ng-bind="stockOrderDetailBean.order"></td>
															<td ng-bind="stockOrderDetailBean.variantAttributeName"></td>
															<td ng-bind="stockOrderDetailBean.productVariantCurrInventory"></td>
															<td	ng-hide="isAdmin()" ng-bind="stockOrderDetailBean.productVariantRecvOutletInventory"></td>
															<td ng-hide="isAdmin()" ng-bind="stockOrderDetailBean.orderProdQty"></td>
															<td ng-hide="!isAdmin()" ><input type="text" 
																data-ng-model="stockOrderDetailBean.orderProdQty"
																min="1" class="" id="Name" maxlength="9"
																ng-pattern='/^[0-9]+(\.[0-9]{1,2})?$/'
																ng-blur="calculateTotalforItem(stockOrderDetailBean)"
																required><br />
																 <span ng-show="stockOrderDetailBean.greaterThanStock"	style="color: red;">* Greater than stock at source</span></td>
															<td ng-hide="isAdmin()"><input type="text" 
																data-ng-model="stockOrderDetailBean.recvProdQty"
																min="1" class="" id="Name" maxlength="9"
																ng-pattern='/^[0-9]+(\.[0-9]{1,2})?$/'
																ng-blur="calculateTotalAdminforItem(stockOrderDetailBean)"
																required><br />	`
																 <span ng-show="stockOrderDetailBean.greaterThanStock"	style="color: red;">* Greater than stock at source</span></td>
															<td ng-bind="stockOrderDetailBean.ordrSupplyPrice" ng-hide="isAdmin()"></td>
															<td ng-bind="stockOrderDetailBean.retailPrice"></td>
															<td ng-bind="stockOrderDetailBean.total"></td>
															<td ng-hide="isAdmin()" ng-bind="stockOrderDetailBean.recvTotal"></td>
															<td><button class="btn btn-danger btn"
																	ng-click="showConfirmDelete(stockOrderDetailBean)">
																	<i class="fa fa-trash"></i>
																</button></td>

														</tr>
													</tbody>
													<tfoot>
													<tr>
														<th></th>
														<th></th>											
														<th>Total</th>														
														<th ng-bind = "grandTotal"></th>
														<th  ng-hide="isAdmin()" >Total Recv</th>														
														<th ng-hide="isAdmin()" ng-bind = "grandrecvTotal"></th>
														<th <button class="btn btn-success btn pull-right"
																ng-click="markAllReceive()"
																ng-hide="isAdmin()"
																ng-disabled="!checkStockOrderDetailList()">Mark
																All Received</button>
														</th>
													</tr>
												</tfoot>
												</table>

											</div>
											<div class="box-footer text-right">
												<button class="btn btn-primary btn  "
													ng-click="updateStockOrderDetail()"
													ng-disabled="!checkStockOrderDetailList()"
													ng-show="!loading">Update</button>
												<button ng-show="loading" class="btn btn-primary btn">
													Processing<i
														class="fa fa-arrow-right text-muted fa-spinner fa-spin "></i>
												</button>
												<button class="btn btn-primary btn  "
												    ng-hide="isAdmin()" 
													ng-click="showSendTransferStockOrder()"
													ng-disabled="!checkStockOrderDetailListAdmin()"
													ng-show="!loading">Confirm Transfer</button>												
												<button ng-show="loading" class="btn btn-primary btn">
													Processing<i
														class="fa fa-arrow-right text-muted fa-spinner fa-spin "></i>
												</button>
												<a href="#stockControl"><button class="btn btn-default btn-sm pull-right btn-primary-spacing">Cancel</button></a>

											</div>
										</div>


									</div>
								</div>
							</div>





						</div>
					</div>
					<div class="col-md-1"></div>
					<!-- /.box-body -->
				</div>
			</section>
			<!-- /.box -->
		</div>

	</div>
</div>
<div class="container">
	<div class="row footer-row">
		<div class="col-lg-12 text-center">
			<div class="footerdiv navbar-fixed-bottom">&copy; copyrights
				ShopVitals 2020</div>
		</div>
	</div>
</div>
<!-- Modal -->
<modal title="Delete Selected Product" visible="showConfirmDeletePopup"
	ng-cloak>

<div class="registerForm popup-transparent">
	<li class="list-group-item">
		<form class="form-horizontal" name="myForm">
			<div class="box-body">

				<button
					class="btn btn-primary btn-sm pull-right btn-primary-spacing"
					ng-click="delStockOrderDetail(stockOrderDetailBean)">Yes</button>

				<button class="btn btn-default btn-sm pull-left btn-primary-spacing"
					data-dismiss="modal">No</button>
			</div>
</div>
</form>
</li>
</div>

</modal>

<!-- Modal end -->
<!-- Modal -->
<modal title="Confirm Send Transfer!"
	visible="showConfirmSendTransferPopup" ng-cloak>

<div class="registerForm popup-transparent">
	<li class="list-group-item">
		<form class="form-horizontal" name="myForm">
			<div class="box-body">

				<button
					class="btn btn-primary btn-sm pull-right btn-primary-spacing"
					ng-click="transferStockOrder()" ng-show="!loading">Yes</button>
					<button ng-show="loading" class="btn btn-primary btn">
					Processing<i class="fa fa-arrow-right text-muted fa-spinner fa-spin "></i>
					</button>

				<button class="btn btn-default btn-sm pull-left btn-primary-spacing"
					data-dismiss="modal">No</button>
			</div>
</div>
</form>
</li>
</div>

</modal>

<!-- Modal end -->


<style>
.center {
	margin-top: 50px;
}

.modal-header {
	padding-bottom: 5px;
}

.modal-footer {
	padding: 0;
}

.modal-footer .btn-group button {
	height: 40px;
	border-top-left-radius: 0;
	border-top-right-radius: 0;
	border: none;
}

.modal-footer .btn-group:last-child>button {
	border-right: 0;
}

.modal-content {
	position: relative;
	background-color: #fff;
	background-clip: padding-box;
	border: 1px solid #999;
	border: 1px solid rgba(0, 0, 0, .2);
	border-radius: 6px;
	outline: none;
	-webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, .5);
	box-shadow: 0 3px 9px rgba(0, 0, 0, .5);
	width: 65%;
	margin-left: 25%;
}
</style>
<script src="resources/js/jquery.dataTables.min.js"></script>

<script src="resources/js/dataTables.responsive.min.js"></script>
<script src="resources/js/dataTables.buttons.min.js"></script>


<!-- <script>
	$(function() {
		//  document.body.style.overflow = 'hidden';

		setTimeout(function() {
			$('#myTable').DataTable({
				responsive : true
			});
			$('#myTable1').DataTable({
				responsive : true
			});
		}, 1);

	});
</script> -->